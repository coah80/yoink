var Mi=Object.defineProperty;var Wr=e=>{throw TypeError(e)};var Ii=(e,t,s)=>t in e?Mi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Ht=(e,t,s)=>Ii(e,typeof t!="symbol"?t+"":t,s),or=(e,t,s)=>t.has(e)||Wr("Cannot "+s);var w=(e,t,s)=>(or(e,t,"read from private field"),s?s.call(e):t.get(e)),be=(e,t,s)=>t.has(e)?Wr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),_e=(e,t,s,r)=>(or(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),ct=(e,t,s)=>(or(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();const fr=!1;var Cr=Array.isArray,Bi=Array.prototype.indexOf,sn=Array.prototype.includes,er=Array.from,ma=Object.defineProperty,_n=Object.getOwnPropertyDescriptor,ya=Object.getOwnPropertyDescriptors,Ai=Object.prototype,Di=Array.prototype,Er=Object.getPrototypeOf,Gr=Object.isExtensible;const gs=()=>{};function Ri(e){return e()}function Wn(e){for(var t=0;t<e.length;t++)e[t]()}function wa(){var e,t,s=new Promise((r,i)=>{e=r,t=i});return{promise:s,resolve:e,reject:t}}function dn(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const s=[];for(const r of e)if(s.push(r),s.length===t)break;return s}const tt=2,Gn=4,Pn=8,ba=1<<24,vs=16,Lt=32,Ns=64,Pr=128,Pt=512,Qe=1024,st=2048,Nt=4096,jt=8192,_s=16384,qr=32768,js=65536,Yr=1<<17,ka=1<<18,on=1<<19,xa=1<<20,ls=1<<25,Ds=32768,pr=1<<21,Mr=1<<22,ms=1<<23,ys=Symbol("$state"),Oi=Symbol(""),Js=new class extends Error{constructor(){super(...arguments);Ht(this,"name","StaleReactionError");Ht(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ja(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ni(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Fi(e,t,s){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Li(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ui(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Vi(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Hi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ji(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Wi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Gi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Yi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Qi=1,Ki=2,Sa=4,Xi=8,Zi=16,za=1,el=2,Ze=Symbol(),tl="http://www.w3.org/1999/xhtml";function sl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function nl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ta(e){return e===this.v}function $a(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Ca(e){return!$a(e,this.v)}let qn=!1,rl=!1;function al(){qn=!0}let Ne=null;function nn(e){Ne=e}function St(e,t=!1,s){Ne={p:Ne,i:!1,c:null,e:null,s:e,x:null,l:qn&&!t?{s:null,u:null,$:[]}:null}}function zt(e){var t=Ne,s=t.e;if(s!==null){t.e=null;for(var r of s)Qa(r)}return t.i=!0,Ne=t.p,{}}function Mn(){return!qn||Ne!==null&&Ne.l===null}let Ts=[];function Ea(){var e=Ts;Ts=[],Wn(e)}function cs(e){if(Ts.length===0&&!mn){var t=Ts;queueMicrotask(()=>{t===Ts&&Ea()})}Ts.push(e)}function il(){for(;Ts.length>0;)Ea()}function Pa(e){var t=Me;if(t===null)return Se.f|=ms,e;if((t.f&qr)===0){if((t.f&Pr)===0)throw e;t.b.error(e)}else rn(e,t)}function rn(e,t){for(;t!==null;){if((t.f&Pr)!==0)try{t.b.error(e);return}catch(s){e=s}t=t.parent}throw e}const ll=-7169;function Ve(e,t){e.f=e.f&ll|t}function Ir(e){(e.f&Pt)!==0||e.deps===null?Ve(e,Qe):Ve(e,Nt)}function qa(e){if(e!==null)for(const t of e)(t.f&tt)===0||(t.f&Ds)===0||(t.f^=Ds,qa(t.deps))}function Ma(e,t,s){(e.f&st)!==0?t.add(e):(e.f&Nt)!==0&&s.add(e),qa(e.deps),Ve(e,Qe)}const Fn=new Set;let fe=null,Yn=null,et=null,_t=[],tr=null,hr=!1,mn=!1;var Ys,Qs,Cs,Ks,Tn,$n,Es,ns,Xs,Zt,gr,_r,Ia;const Jr=class Jr{constructor(){be(this,Zt);Ht(this,"committed",!1);Ht(this,"current",new Map);Ht(this,"previous",new Map);be(this,Ys,new Set);be(this,Qs,new Set);be(this,Cs,0);be(this,Ks,0);be(this,Tn,null);be(this,$n,new Set);be(this,Es,new Set);be(this,ns,new Map);Ht(this,"is_fork",!1);be(this,Xs,!1)}is_deferred(){return this.is_fork||w(this,Ks)>0}skip_effect(t){w(this,ns).has(t)||w(this,ns).set(t,{d:[],m:[]})}unskip_effect(t){var s=w(this,ns).get(t);if(s){w(this,ns).delete(t);for(var r of s.d)Ve(r,st),Dt(r);for(r of s.m)Ve(r,Nt),Dt(r)}}process(t){var i;_t=[],this.apply();var s=[],r=[];for(const a of t)ct(this,Zt,gr).call(this,a,s,r);if(this.is_deferred()){ct(this,Zt,_r).call(this,r),ct(this,Zt,_r).call(this,s);for(const[a,l]of w(this,ns))Ra(a,l)}else{for(const a of w(this,Ys))a();w(this,Ys).clear(),w(this,Cs)===0&&ct(this,Zt,Ia).call(this),Yn=this,fe=null,Qr(r),Qr(s),Yn=null,(i=w(this,Tn))==null||i.resolve()}et=null}capture(t,s){s!==Ze&&!this.previous.has(t)&&this.previous.set(t,s),(t.f&ms)===0&&(this.current.set(t,t.v),et==null||et.set(t,t.v))}activate(){fe=this,this.apply()}deactivate(){fe===this&&(fe=null,et=null)}flush(){if(this.activate(),_t.length>0){if(Ba(),fe!==null&&fe!==this)return}else w(this,Cs)===0&&this.process([]);this.deactivate()}discard(){for(const t of w(this,Qs))t(this);w(this,Qs).clear()}increment(t){_e(this,Cs,w(this,Cs)+1),t&&_e(this,Ks,w(this,Ks)+1)}decrement(t){_e(this,Cs,w(this,Cs)-1),t&&_e(this,Ks,w(this,Ks)-1),!w(this,Xs)&&(_e(this,Xs,!0),cs(()=>{_e(this,Xs,!1),this.is_deferred()?_t.length>0&&this.flush():this.revive()}))}revive(){for(const t of w(this,$n))w(this,Es).delete(t),Ve(t,st),Dt(t);for(const t of w(this,Es))Ve(t,Nt),Dt(t);this.flush()}oncommit(t){w(this,Ys).add(t)}ondiscard(t){w(this,Qs).add(t)}settled(){return(w(this,Tn)??_e(this,Tn,wa())).promise}static ensure(){if(fe===null){const t=fe=new Jr;Fn.add(fe),mn||cs(()=>{fe===t&&t.flush()})}return fe}apply(){}};Ys=new WeakMap,Qs=new WeakMap,Cs=new WeakMap,Ks=new WeakMap,Tn=new WeakMap,$n=new WeakMap,Es=new WeakMap,ns=new WeakMap,Xs=new WeakMap,Zt=new WeakSet,gr=function(t,s,r){t.f^=Qe;for(var i=t.first,a=null;i!==null;){var l=i.f,o=(l&(Lt|Ns))!==0,c=o&&(l&Qe)!==0,f=c||(l&jt)!==0||w(this,ns).has(i);if(!f&&i.fn!==null){o?i.f^=Qe:a!==null&&(l&(Gn|Pn|ba))!==0?a.b.defer_effect(i):(l&Gn)!==0?s.push(i):An(i)&&((l&vs)!==0&&w(this,Es).add(i),kn(i));var g=i.first;if(g!==null){i=g;continue}}var b=i.parent;for(i=i.next;i===null&&b!==null;)b===a&&(a=null),i=b.next,b=b.parent}},_r=function(t){for(var s=0;s<t.length;s+=1)Ma(t[s],w(this,$n),w(this,Es))},Ia=function(){var i;if(Fn.size>1){this.previous.clear();var t=et,s=!0;for(const a of Fn){if(a===this){s=!1;continue}const l=[];for(const[c,f]of this.current){if(a.current.has(c))if(s&&f!==a.current.get(c))a.current.set(c,f);else continue;l.push(c)}if(l.length===0)continue;const o=[...a.current.keys()].filter(c=>!this.current.has(c));if(o.length>0){var r=_t;_t=[];const c=new Set,f=new Map;for(const g of l)Aa(g,o,c,f);if(_t.length>0){fe=a,a.apply();for(const g of _t)ct(i=a,Zt,gr).call(i,g,[],[]);a.deactivate()}_t=r}}fe=null,et=t}this.committed=!0,Fn.delete(this)};let ws=Jr;function ol(e){var t=mn;mn=!0;try{for(var s;;){if(il(),_t.length===0&&(fe==null||fe.flush(),_t.length===0))return tr=null,s;Ba()}}finally{mn=t}}function Ba(){hr=!0;var e=null;try{for(var t=0;_t.length>0;){var s=ws.ensure();if(t++>1e3){var r,i;cl()}s.process(_t),bs.clear()}}finally{_t=[],hr=!1,tr=null}}function cl(){try{Hi()}catch(e){rn(e,tr)}}let Bt=null;function Qr(e){var t=e.length;if(t!==0){for(var s=0;s<t;){var r=e[s++];if((r.f&(_s|jt))===0&&An(r)&&(Bt=new Set,kn(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?ei(r):r.fn=null),(Bt==null?void 0:Bt.size)>0)){bs.clear();for(const i of Bt){if((i.f&(_s|jt))!==0)continue;const a=[i];let l=i.parent;for(;l!==null;)Bt.has(l)&&(Bt.delete(l),a.push(l)),l=l.parent;for(let o=a.length-1;o>=0;o--){const c=a[o];(c.f&(_s|jt))===0&&kn(c)}}Bt.clear()}}Bt=null}}function Aa(e,t,s,r){if(!s.has(e)&&(s.add(e),e.reactions!==null))for(const i of e.reactions){const a=i.f;(a&tt)!==0?Aa(i,t,s,r):(a&(Mr|vs))!==0&&(a&st)===0&&Da(i,t,r)&&(Ve(i,st),Dt(i))}}function Da(e,t,s){const r=s.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(sn.call(t,i))return!0;if((i.f&tt)!==0&&Da(i,t,s))return s.set(i,!0),!0}return s.set(e,!1),!1}function Dt(e){for(var t=tr=e;t.parent!==null;){t=t.parent;var s=t.f;if(hr&&t===Me&&(s&vs)!==0&&(s&ka)===0)return;if((s&(Ns|Lt))!==0){if((s&Qe)===0)return;t.f^=Qe}}_t.push(t)}function Ra(e,t){if(!((e.f&Lt)!==0&&(e.f&Qe)!==0)){(e.f&st)!==0?t.d.push(e):(e.f&Nt)!==0&&t.m.push(e),Ve(e,Qe);for(var s=e.first;s!==null;)Ra(s,t),s=s.next}}function vl(e){let t=0,s=Rs(0),r;return()=>{Rr()&&(n(s),ar(()=>(t===0&&(r=Ss(()=>e(()=>yn(s)))),t+=1,()=>{cs(()=>{t-=1,t===0&&(r==null||r(),r=void 0,yn(s))})})))}}var ul=js|on|Pr;function dl(e,t,s){new fl(e,t,s)}var $t,$r,Jt,Ps,Wt,Ct,gt,Gt,rs,fs,qs,ps,Zs,Ms,en,tn,as,Xn,Ke,pl,hl,mr,Ln,Un,yr;class fl{constructor(t,s,r){be(this,Ke);Ht(this,"parent");Ht(this,"is_pending",!1);be(this,$t);be(this,$r,null);be(this,Jt);be(this,Ps);be(this,Wt);be(this,Ct,null);be(this,gt,null);be(this,Gt,null);be(this,rs,null);be(this,fs,null);be(this,qs,0);be(this,ps,0);be(this,Zs,!1);be(this,Ms,!1);be(this,en,new Set);be(this,tn,new Set);be(this,as,null);be(this,Xn,vl(()=>(_e(this,as,Rs(w(this,qs))),()=>{_e(this,as,null)})));_e(this,$t,t),_e(this,Jt,s),_e(this,Ps,r),this.parent=Me.b,this.is_pending=!!w(this,Jt).pending,_e(this,Wt,Bn(()=>{Me.b=this;{var i=ct(this,Ke,mr).call(this);try{_e(this,Ct,Et(()=>r(i)))}catch(a){this.error(a)}w(this,ps)>0?ct(this,Ke,Un).call(this):this.is_pending=!1}return()=>{var a;(a=w(this,fs))==null||a.remove()}},ul))}defer_effect(t){Ma(t,w(this,en),w(this,tn))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!w(this,Jt).pending}update_pending_count(t){ct(this,Ke,yr).call(this,t),_e(this,qs,w(this,qs)+t),!(!w(this,as)||w(this,Zs))&&(_e(this,Zs,!0),cs(()=>{_e(this,Zs,!1),w(this,as)&&an(w(this,as),w(this,qs))}))}get_effect_pending(){return w(this,Xn).call(this),n(w(this,as))}error(t){var s=w(this,Jt).onerror;let r=w(this,Jt).failed;if(w(this,Ms)||!s&&!r)throw t;w(this,Ct)&&(yt(w(this,Ct)),_e(this,Ct,null)),w(this,gt)&&(yt(w(this,gt)),_e(this,gt,null)),w(this,Gt)&&(yt(w(this,Gt)),_e(this,Gt,null));var i=!1,a=!1;const l=()=>{if(i){nl();return}i=!0,a&&Yi(),ws.ensure(),_e(this,qs,0),w(this,Gt)!==null&&Bs(w(this,Gt),()=>{_e(this,Gt,null)}),this.is_pending=this.has_pending_snippet(),_e(this,Ct,ct(this,Ke,Ln).call(this,()=>(_e(this,Ms,!1),Et(()=>w(this,Ps).call(this,w(this,$t)))))),w(this,ps)>0?ct(this,Ke,Un).call(this):this.is_pending=!1};cs(()=>{try{a=!0,s==null||s(t,l),a=!1}catch(o){rn(o,w(this,Wt)&&w(this,Wt).parent)}r&&_e(this,Gt,ct(this,Ke,Ln).call(this,()=>{ws.ensure(),_e(this,Ms,!0);try{return Et(()=>{r(w(this,$t),()=>t,()=>l)})}catch(o){return rn(o,w(this,Wt).parent),null}finally{_e(this,Ms,!1)}}))})}}$t=new WeakMap,$r=new WeakMap,Jt=new WeakMap,Ps=new WeakMap,Wt=new WeakMap,Ct=new WeakMap,gt=new WeakMap,Gt=new WeakMap,rs=new WeakMap,fs=new WeakMap,qs=new WeakMap,ps=new WeakMap,Zs=new WeakMap,Ms=new WeakMap,en=new WeakMap,tn=new WeakMap,as=new WeakMap,Xn=new WeakMap,Ke=new WeakSet,pl=function(){try{_e(this,Ct,Et(()=>w(this,Ps).call(this,w(this,$t))))}catch(t){this.error(t)}},hl=function(){const t=w(this,Jt).pending;t&&(_e(this,gt,Et(()=>t(w(this,$t)))),cs(()=>{var s=ct(this,Ke,mr).call(this);_e(this,Ct,ct(this,Ke,Ln).call(this,()=>(ws.ensure(),Et(()=>w(this,Ps).call(this,s))))),w(this,ps)>0?ct(this,Ke,Un).call(this):(Bs(w(this,gt),()=>{_e(this,gt,null)}),this.is_pending=!1)}))},mr=function(){var t=w(this,$t);return this.is_pending&&(_e(this,fs,ks()),w(this,$t).before(w(this,fs)),t=w(this,fs)),t},Ln=function(t){var s=Me,r=Se,i=Ne;Xt(w(this,Wt)),Mt(w(this,Wt)),nn(w(this,Wt).ctx);try{return t()}catch(a){return Pa(a),null}finally{Xt(s),Mt(r),nn(i)}},Un=function(){const t=w(this,Jt).pending;w(this,Ct)!==null&&(_e(this,rs,document.createDocumentFragment()),w(this,rs).append(w(this,fs)),ni(w(this,Ct),w(this,rs))),w(this,gt)===null&&_e(this,gt,Et(()=>t(w(this,$t))))},yr=function(t){var s;if(!this.has_pending_snippet()){this.parent&&ct(s=this.parent,Ke,yr).call(s,t);return}if(_e(this,ps,w(this,ps)+t),w(this,ps)===0){this.is_pending=!1;for(const r of w(this,en))Ve(r,st),Dt(r);for(const r of w(this,tn))Ve(r,Nt),Dt(r);w(this,en).clear(),w(this,tn).clear(),w(this,gt)&&Bs(w(this,gt),()=>{_e(this,gt,null)}),w(this,rs)&&(w(this,$t).before(w(this,rs)),_e(this,rs,null))}};function gl(e,t,s,r){const i=Mn()?sr:Oa;var a=e.filter(u=>!u.settled);if(s.length===0&&a.length===0){r(t.map(i));return}var l=fe,o=Me,c=_l(),f=a.length===1?a[0].promise:a.length>1?Promise.all(a.map(u=>u.promise)):null;function g(u){c();try{r(u)}catch(h){(o.f&_s)===0&&rn(h,o)}l==null||l.deactivate(),wr()}if(s.length===0){f.then(()=>g(t.map(i)));return}function b(){c(),Promise.all(s.map(u=>ml(u))).then(u=>g([...t.map(i),...u])).catch(u=>rn(u,o))}f?f.then(b):b()}function _l(){var e=Me,t=Se,s=Ne,r=fe;return function(a=!0){Xt(e),Mt(t),nn(s),a&&(r==null||r.activate())}}function wr(){Xt(null),Mt(null),nn(null)}function sr(e){var t=tt|st,s=Se!==null&&(Se.f&tt)!==0?Se:null;return Me!==null&&(Me.f|=on),{ctx:Ne,deps:null,effects:null,equals:Ta,f:t,fn:e,reactions:null,rv:0,v:Ze,wv:0,parent:s??Me,ac:null}}function ml(e,t,s){let r=Me;r===null&&Ni();var i=r.b,a=void 0,l=Rs(Ze),o=!Se,c=new Map;return $l(()=>{var h;var f=wa();a=f.promise;try{Promise.resolve(e()).then(f.resolve,f.reject).then(()=>{g===fe&&g.committed&&g.deactivate(),wr()})}catch(_){f.reject(_),wr()}var g=fe;if(o){var b=i.is_rendered();i.update_pending_count(1),g.increment(b),(h=c.get(g))==null||h.reject(Js),c.delete(g),c.set(g,f)}const u=(_,j=void 0)=>{if(g.activate(),j)j!==Js&&(l.f|=ms,an(l,j));else{(l.f&ms)!==0&&(l.f^=ms),an(l,_);for(const[m,k]of c){if(c.delete(m),m===g)break;k.reject(Js)}}o&&(i.update_pending_count(-1),g.decrement(b))};f.promise.then(u,_=>u(null,_||"unknown"))}),rr(()=>{for(const f of c.values())f.reject(Js)}),new Promise(f=>{function g(b){function u(){b===a?f(l):g(a)}b.then(u,u)}g(a)})}function le(e){const t=sr(e);return ri(t),t}function Oa(e){const t=sr(e);return t.equals=Ca,t}function Na(e){var t=e.effects;if(t!==null){e.effects=null;for(var s=0;s<t.length;s+=1)yt(t[s])}}function yl(e){for(var t=e.parent;t!==null;){if((t.f&tt)===0)return(t.f&_s)===0?t:null;t=t.parent}return null}function Br(e){var t,s=Me;Xt(yl(e));try{e.f&=~Ds,Na(e),t=oi(e)}finally{Xt(s)}return t}function Fa(e){var t=Br(e);if(!e.equals(t)&&(e.wv=ii(),(!(fe!=null&&fe.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){Ve(e,Qe);return}Os||(et!==null?(Rr()||fe!=null&&fe.is_fork)&&et.set(e,t):Ir(e))}let br=new Set;const bs=new Map;let La=!1;function Rs(e,t){var s={f:0,v:e,reactions:null,equals:Ta,rv:0,wv:0};return s}function D(e,t){const s=Rs(e);return ri(s),s}function Ua(e,t=!1,s=!0){var i;const r=Rs(e);return t||(r.equals=Ca),qn&&s&&Ne!==null&&Ne.l!==null&&((i=Ne.l).s??(i.s=[])).push(r),r}function p(e,t,s=!1){Se!==null&&(!Rt||(Se.f&Yr)!==0)&&Mn()&&(Se.f&(tt|vs|Mr|Yr))!==0&&(qt===null||!sn.call(qt,e))&&Gi();let r=s?Ws(t):t;return an(e,r)}function an(e,t){if(!e.equals(t)){var s=e.v;Os?bs.set(e,t):bs.set(e,s),e.v=t;var r=ws.ensure();if(r.capture(e,s),(e.f&tt)!==0){const i=e;(e.f&st)!==0&&Br(i),Ir(i)}e.wv=ii(),Va(e,st),Mn()&&Me!==null&&(Me.f&Qe)!==0&&(Me.f&(Lt|Ns))===0&&(Tt===null?Pl([e]):Tt.push(e)),!r.is_fork&&br.size>0&&!La&&wl()}return t}function wl(){La=!1;for(const e of br)(e.f&Qe)!==0&&Ve(e,Nt),An(e)&&kn(e);br.clear()}function yn(e){p(e,e.v+1)}function Va(e,t){var s=e.reactions;if(s!==null)for(var r=Mn(),i=s.length,a=0;a<i;a++){var l=s[a],o=l.f;if(!(!r&&l===Me)){var c=(o&st)===0;if(c&&Ve(l,t),(o&tt)!==0){var f=l;et==null||et.delete(f),(o&Ds)===0&&(o&Pt&&(l.f|=Ds),Va(f,Nt))}else c&&((o&vs)!==0&&Bt!==null&&Bt.add(l),Dt(l))}}}function Ws(e){if(typeof e!="object"||e===null||ys in e)return e;const t=Er(e);if(t!==Ai&&t!==Di)return e;var s=new Map,r=Cr(e),i=D(0),a=As,l=o=>{if(As===a)return o();var c=Se,f=As;Mt(null),ta(a);var g=o();return Mt(c),ta(f),g};return r&&s.set("length",D(e.length)),new Proxy(e,{defineProperty(o,c,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Ji();var g=s.get(c);return g===void 0?g=l(()=>{var b=D(f.value);return s.set(c,b),b}):p(g,f.value,!0),!0},deleteProperty(o,c){var f=s.get(c);if(f===void 0){if(c in o){const g=l(()=>D(Ze));s.set(c,g),yn(i)}}else p(f,Ze),yn(i);return!0},get(o,c,f){var h;if(c===ys)return e;var g=s.get(c),b=c in o;if(g===void 0&&(!b||(h=_n(o,c))!=null&&h.writable)&&(g=l(()=>{var _=Ws(b?o[c]:Ze),j=D(_);return j}),s.set(c,g)),g!==void 0){var u=n(g);return u===Ze?void 0:u}return Reflect.get(o,c,f)},getOwnPropertyDescriptor(o,c){var f=Reflect.getOwnPropertyDescriptor(o,c);if(f&&"value"in f){var g=s.get(c);g&&(f.value=n(g))}else if(f===void 0){var b=s.get(c),u=b==null?void 0:b.v;if(b!==void 0&&u!==Ze)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return f},has(o,c){var u;if(c===ys)return!0;var f=s.get(c),g=f!==void 0&&f.v!==Ze||Reflect.has(o,c);if(f!==void 0||Me!==null&&(!g||(u=_n(o,c))!=null&&u.writable)){f===void 0&&(f=l(()=>{var h=g?Ws(o[c]):Ze,_=D(h);return _}),s.set(c,f));var b=n(f);if(b===Ze)return!1}return g},set(o,c,f,g){var R;var b=s.get(c),u=c in o;if(r&&c==="length")for(var h=f;h<b.v;h+=1){var _=s.get(h+"");_!==void 0?p(_,Ze):h in o&&(_=l(()=>D(Ze)),s.set(h+"",_))}if(b===void 0)(!u||(R=_n(o,c))!=null&&R.writable)&&(b=l(()=>D(void 0)),p(b,Ws(f)),s.set(c,b));else{u=b.v!==Ze;var j=l(()=>Ws(f));p(b,j)}var m=Reflect.getOwnPropertyDescriptor(o,c);if(m!=null&&m.set&&m.set.call(g,f),!u){if(r&&typeof c=="string"){var k=s.get("length"),z=Number(c);Number.isInteger(z)&&z>=k.v&&p(k,z+1)}yn(i)}return!0},ownKeys(o){n(i);var c=Reflect.ownKeys(o).filter(b=>{var u=s.get(b);return u===void 0||u.v!==Ze});for(var[f,g]of s)g.v!==Ze&&!(f in o)&&c.push(f);return c},setPrototypeOf(){Wi()}})}function Kr(e){try{if(e!==null&&typeof e=="object"&&ys in e)return e[ys]}catch{}return e}function bl(e,t){return Object.is(Kr(e),Kr(t))}var Xr,Ar,Ha,Ja,Wa;function kl(){if(Xr===void 0){Xr=window,Ar=document,Ha=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,s=Text.prototype;Ja=_n(t,"firstChild").get,Wa=_n(t,"nextSibling").get,Gr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Gr(s)&&(s.__t=void 0)}}function ks(e=""){return document.createTextNode(e)}function is(e){return Ja.call(e)}function In(e){return Wa.call(e)}function v(e,t){return is(e)}function Ee(e,t=!1){{var s=is(e);return s instanceof Comment&&s.data===""?In(s):s}}function d(e,t=1,s=!1){let r=e;for(;t--;)r=In(r);return r}function xl(e){e.textContent=""}function Ga(){return!1}let Zr=!1;function jl(){Zr||(Zr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const s of e.target.elements)(t=s.__on_r)==null||t.call(s)})},{capture:!0}))}function nr(e){var t=Se,s=Me;Mt(null),Xt(null);try{return e()}finally{Mt(t),Xt(s)}}function Dr(e,t,s,r=s){e.addEventListener(t,()=>nr(s));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),jl()}function Ya(e){Me===null&&(Se===null&&Vi(),Ui()),Os&&Li()}function Sl(e,t){var s=t.last;s===null?t.last=t.first=e:(s.next=e,e.prev=s,t.last=e)}function es(e,t,s){var r=Me;r!==null&&(r.f&jt)!==0&&(e|=jt);var i={ctx:Ne,deps:null,nodes:null,f:e|st|Pt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(s)try{kn(i),i.f|=qr}catch(o){throw yt(i),o}else t!==null&&Dt(i);var a=i;if(s&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&on)===0&&(a=a.first,(e&vs)!==0&&(e&js)!==0&&a!==null&&(a.f|=js)),a!==null&&(a.parent=r,r!==null&&Sl(a,r),Se!==null&&(Se.f&tt)!==0&&(e&Ns)===0)){var l=Se;(l.effects??(l.effects=[])).push(a)}return i}function Rr(){return Se!==null&&!Rt}function rr(e){const t=es(Pn,null,!1);return Ve(t,Qe),t.teardown=e,t}function ln(e){Ya();var t=Me.f,s=!Se&&(t&Lt)!==0&&(t&qr)===0;if(s){var r=Ne;(r.e??(r.e=[])).push(e)}else return Qa(e)}function Qa(e){return es(Gn|xa,e,!1)}function zl(e){return Ya(),es(Pn|xa,e,!0)}function Tl(e){ws.ensure();const t=es(Ns|on,e,!0);return(s={})=>new Promise(r=>{s.outro?Bs(t,()=>{yt(t),r(void 0)}):(yt(t),r(void 0))})}function Ka(e){return es(Gn,e,!1)}function $l(e){return es(Mr|on,e,!0)}function ar(e,t=0){return es(Pn|t,e,!0)}function L(e,t=[],s=[],r=[]){gl(r,t,s,i=>{es(Pn,()=>e(...i.map(n)),!0)})}function Bn(e,t=0){var s=es(vs|t,e,!0);return s}function Et(e){return es(Lt|on,e,!0)}function Xa(e){var t=e.teardown;if(t!==null){const s=Os,r=Se;ea(!0),Mt(null);try{t.call(null)}finally{ea(s),Mt(r)}}}function Za(e,t=!1){var s=e.first;for(e.first=e.last=null;s!==null;){const i=s.ac;i!==null&&nr(()=>{i.abort(Js)});var r=s.next;(s.f&Ns)!==0?s.parent=null:yt(s,t),s=r}}function Cl(e){for(var t=e.first;t!==null;){var s=t.next;(t.f&Lt)===0&&yt(t),t=s}}function yt(e,t=!0){var s=!1;(t||(e.f&ka)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(El(e.nodes.start,e.nodes.end),s=!0),Za(e,t&&!s),Qn(e,0),Ve(e,_s);var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)a.stop();Xa(e);var i=e.parent;i!==null&&i.first!==null&&ei(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function El(e,t){for(;e!==null;){var s=e===t?null:In(e);e.remove(),e=s}}function ei(e){var t=e.parent,s=e.prev,r=e.next;s!==null&&(s.next=r),r!==null&&(r.prev=s),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=s))}function Bs(e,t,s=!0){var r=[];ti(e,r,!0);var i=()=>{s&&yt(e),t&&t()},a=r.length;if(a>0){var l=()=>--a||i();for(var o of r)o.out(l)}else i()}function ti(e,t,s){if((e.f&jt)===0){e.f^=jt;var r=e.nodes&&e.nodes.t;if(r!==null)for(const o of r)(o.is_global||s)&&t.push(o);for(var i=e.first;i!==null;){var a=i.next,l=(i.f&js)!==0||(i.f&Lt)!==0&&(e.f&vs)!==0;ti(i,t,l?s:!1),i=a}}}function Or(e){si(e,!0)}function si(e,t){if((e.f&jt)!==0){e.f^=jt,(e.f&Qe)===0&&(Ve(e,st),Dt(e));for(var s=e.first;s!==null;){var r=s.next,i=(s.f&js)!==0||(s.f&Lt)!==0;si(s,i?t:!1),s=r}var a=e.nodes&&e.nodes.t;if(a!==null)for(const l of a)(l.is_global||t)&&l.in()}}function ni(e,t){if(e.nodes)for(var s=e.nodes.start,r=e.nodes.end;s!==null;){var i=s===r?null:In(s);t.append(s),s=i}}let Vn=!1,Os=!1;function ea(e){Os=e}let Se=null,Rt=!1;function Mt(e){Se=e}let Me=null;function Xt(e){Me=e}let qt=null;function ri(e){Se!==null&&(qt===null?qt=[e]:qt.push(e))}let mt=null,kt=0,Tt=null;function Pl(e){Tt=e}let ai=1,$s=0,As=$s;function ta(e){As=e}function ii(){return++ai}function An(e){var t=e.f;if((t&st)!==0)return!0;if(t&tt&&(e.f&=~Ds),(t&Nt)!==0){for(var s=e.deps,r=s.length,i=0;i<r;i++){var a=s[i];if(An(a)&&Fa(a),a.wv>e.wv)return!0}(t&Pt)!==0&&et===null&&Ve(e,Qe)}return!1}function li(e,t,s=!0){var r=e.reactions;if(r!==null&&!(qt!==null&&sn.call(qt,e)))for(var i=0;i<r.length;i++){var a=r[i];(a.f&tt)!==0?li(a,t,!1):t===a&&(s?Ve(a,st):(a.f&Qe)!==0&&Ve(a,Nt),Dt(a))}}function oi(e){var j;var t=mt,s=kt,r=Tt,i=Se,a=qt,l=Ne,o=Rt,c=As,f=e.f;mt=null,kt=0,Tt=null,Se=(f&(Lt|Ns))===0?e:null,qt=null,nn(e.ctx),Rt=!1,As=++$s,e.ac!==null&&(nr(()=>{e.ac.abort(Js)}),e.ac=null);try{e.f|=pr;var g=e.fn,b=g(),u=e.deps,h=fe==null?void 0:fe.is_fork;if(mt!==null){var _;if(h||Qn(e,kt),u!==null&&kt>0)for(u.length=kt+mt.length,_=0;_<mt.length;_++)u[kt+_]=mt[_];else e.deps=u=mt;if(Rr()&&(e.f&Pt)!==0)for(_=kt;_<u.length;_++)((j=u[_]).reactions??(j.reactions=[])).push(e)}else!h&&u!==null&&kt<u.length&&(Qn(e,kt),u.length=kt);if(Mn()&&Tt!==null&&!Rt&&u!==null&&(e.f&(tt|Nt|st))===0)for(_=0;_<Tt.length;_++)li(Tt[_],e);if(i!==null&&i!==e){if($s++,i.deps!==null)for(let m=0;m<s;m+=1)i.deps[m].rv=$s;if(t!==null)for(const m of t)m.rv=$s;Tt!==null&&(r===null?r=Tt:r.push(...Tt))}return(e.f&ms)!==0&&(e.f^=ms),b}catch(m){return Pa(m)}finally{e.f^=pr,mt=t,kt=s,Tt=r,Se=i,qt=a,nn(l),Rt=o,As=c}}function ql(e,t){let s=t.reactions;if(s!==null){var r=Bi.call(s,e);if(r!==-1){var i=s.length-1;i===0?s=t.reactions=null:(s[r]=s[i],s.pop())}}if(s===null&&(t.f&tt)!==0&&(mt===null||!sn.call(mt,t))){var a=t;(a.f&Pt)!==0&&(a.f^=Pt,a.f&=~Ds),Ir(a),Na(a),Qn(a,0)}}function Qn(e,t){var s=e.deps;if(s!==null)for(var r=t;r<s.length;r++)ql(e,s[r])}function kn(e){var t=e.f;if((t&_s)===0){Ve(e,Qe);var s=Me,r=Vn;Me=e,Vn=!0;try{(t&(vs|ba))!==0?Cl(e):Za(e),Xa(e);var i=oi(e);e.teardown=typeof i=="function"?i:null,e.wv=ai;var a;fr&&rl&&(e.f&st)!==0&&e.deps}finally{Vn=r,Me=s}}}async function Ml(){await Promise.resolve(),ol()}function n(e){var t=e.f,s=(t&tt)!==0;if(Se!==null&&!Rt){var r=Me!==null&&(Me.f&_s)!==0;if(!r&&(qt===null||!sn.call(qt,e))){var i=Se.deps;if((Se.f&pr)!==0)e.rv<$s&&(e.rv=$s,mt===null&&i!==null&&i[kt]===e?kt++:mt===null?mt=[e]:mt.push(e));else{(Se.deps??(Se.deps=[])).push(e);var a=e.reactions;a===null?e.reactions=[Se]:sn.call(a,Se)||a.push(Se)}}}if(Os&&bs.has(e))return bs.get(e);if(s){var l=e;if(Os){var o=l.v;return((l.f&Qe)===0&&l.reactions!==null||vi(l))&&(o=Br(l)),bs.set(l,o),o}var c=(l.f&Pt)===0&&!Rt&&Se!==null&&(Vn||(Se.f&Pt)!==0),f=l.deps===null;An(l)&&(c&&(l.f|=Pt),Fa(l)),c&&!f&&ci(l)}if(et!=null&&et.has(e))return et.get(e);if((e.f&ms)!==0)throw e.v;return e.v}function ci(e){if(e.deps!==null){e.f|=Pt;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&tt)!==0&&(t.f&Pt)===0&&ci(t)}}function vi(e){if(e.v===Ze)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(bs.has(t)||(t.f&tt)!==0&&vi(t))return!0;return!1}function Ss(e){var t=Rt;try{return Rt=!0,e()}finally{Rt=t}}function Il(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ys in e)kr(e);else if(!Array.isArray(e))for(let t in e){const s=e[t];typeof s=="object"&&s&&ys in s&&kr(s)}}}function kr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{kr(e[r],t)}catch{}const s=Er(e);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const r=ya(s);for(let i in r){const a=r[i].get;if(a)try{a.call(e)}catch{}}}}}const Bl=["touchstart","touchmove"];function Al(e){return Bl.includes(e)}const ui=new Set,xr=new Set;function Dl(e,t,s,r={}){function i(a){if(r.capture||hn.call(t,a),!a.cancelBubble)return nr(()=>s==null?void 0:s.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?cs(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function Ot(e,t,s,r,i){var a={capture:r,passive:i},l=Dl(e,t,s,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&rr(()=>{t.removeEventListener(e,l,a)})}function Ut(e){for(var t=0;t<e.length;t++)ui.add(e[t]);for(var s of xr)s(e)}let sa=null;function hn(e){var m;var t=this,s=t.ownerDocument,r=e.type,i=((m=e.composedPath)==null?void 0:m.call(e))||[],a=i[0]||e.target;sa=e;var l=0,o=sa===e&&e.__root;if(o){var c=i.indexOf(o);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var f=i.indexOf(t);if(f===-1)return;c<=f&&(l=c)}if(a=i[l]||e.target,a!==t){ma(e,"currentTarget",{configurable:!0,get(){return a||s}});var g=Se,b=Me;Mt(null),Xt(null);try{for(var u,h=[];a!==null;){var _=a.assignedSlot||a.parentNode||a.host||null;try{var j=a["__"+r];j!=null&&(!a.disabled||e.target===a)&&j.call(a,e)}catch(k){u?h.push(k):u=k}if(e.cancelBubble||_===t||_===null)break;a=_}if(u){for(let k of h)queueMicrotask(()=>{throw k});throw u}}finally{e.__root=t,delete e.currentTarget,Mt(g),Xt(b)}}}function di(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function xn(e,t){var s=Me;s.nodes===null&&(s.nodes={start:e,end:t,a:null,t:null})}function x(e,t){var s=(t&za)!==0,r=(t&el)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=di(a?e:"<!>"+e),s||(i=is(i)));var l=r||Ha?document.importNode(i,!0):i.cloneNode(!0);if(s){var o=is(l),c=l.lastChild;xn(o,c)}else xn(l,l);return l}}function Rl(e,t,s="svg"){var r=!e.startsWith("<!>"),i=(t&za)!==0,a=`<${s}>${r?e:"<!>"+e}</${s}>`,l;return()=>{if(!l){var o=di(a),c=is(o);if(i)for(l=document.createDocumentFragment();is(c);)l.appendChild(is(c));else l=is(c)}var f=l.cloneNode(!0);if(i){var g=is(f),b=f.lastChild;xn(g,b)}else xn(f,f);return f}}function nt(e,t){return Rl(e,t,"svg")}function Je(){var e=document.createDocumentFragment(),t=document.createComment(""),s=ks();return e.append(t,s),xn(t,s),e}function y(e,t){e!==null&&e.before(t)}function q(e,t){var s=t==null?"":typeof t=="object"?t+"":t;s!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=s,e.nodeValue=s+"")}function Ol(e,t){return Nl(e,t)}const Vs=new Map;function Nl(e,{target:t,anchor:s,props:r={},events:i,context:a,intro:l=!0}){kl();var o=new Set,c=b=>{for(var u=0;u<b.length;u++){var h=b[u];if(!o.has(h)){o.add(h);var _=Al(h);t.addEventListener(h,hn,{passive:_});var j=Vs.get(h);j===void 0?(document.addEventListener(h,hn,{passive:_}),Vs.set(h,1)):Vs.set(h,j+1)}}};c(er(ui)),xr.add(c);var f=void 0,g=Tl(()=>{var b=s??t.appendChild(ks());return dl(b,{pending:()=>{}},u=>{St({});var h=Ne;a&&(h.c=a),i&&(r.$$events=i),f=e(u,r)||{},zt()}),()=>{var _;for(var u of o){t.removeEventListener(u,hn);var h=Vs.get(u);--h===0?(document.removeEventListener(u,hn),Vs.delete(u)):Vs.set(u,h)}xr.delete(c),b!==s&&((_=b.parentNode)==null||_.removeChild(b))}});return Fl.set(f,g),f}let Fl=new WeakMap;var At,Yt,xt,Is,Cn,En,Zn;class Nr{constructor(t,s=!0){Ht(this,"anchor");be(this,At,new Map);be(this,Yt,new Map);be(this,xt,new Map);be(this,Is,new Set);be(this,Cn,!0);be(this,En,()=>{var t=fe;if(w(this,At).has(t)){var s=w(this,At).get(t),r=w(this,Yt).get(s);if(r)Or(r),w(this,Is).delete(s);else{var i=w(this,xt).get(s);i&&(w(this,Yt).set(s,i.effect),w(this,xt).delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[a,l]of w(this,At)){if(w(this,At).delete(a),a===t)break;const o=w(this,xt).get(l);o&&(yt(o.effect),w(this,xt).delete(l))}for(const[a,l]of w(this,Yt)){if(a===s||w(this,Is).has(a))continue;const o=()=>{if(Array.from(w(this,At).values()).includes(a)){var f=document.createDocumentFragment();ni(l,f),f.append(ks()),w(this,xt).set(a,{effect:l,fragment:f})}else yt(l);w(this,Is).delete(a),w(this,Yt).delete(a)};w(this,Cn)||!r?(w(this,Is).add(a),Bs(l,o,!1)):o()}}});be(this,Zn,t=>{w(this,At).delete(t);const s=Array.from(w(this,At).values());for(const[r,i]of w(this,xt))s.includes(r)||(yt(i.effect),w(this,xt).delete(r))});this.anchor=t,_e(this,Cn,s)}ensure(t,s){var r=fe,i=Ga();if(s&&!w(this,Yt).has(t)&&!w(this,xt).has(t))if(i){var a=document.createDocumentFragment(),l=ks();a.append(l),w(this,xt).set(t,{effect:Et(()=>s(l)),fragment:a})}else w(this,Yt).set(t,Et(()=>s(this.anchor)));if(w(this,At).set(r,t),i){for(const[o,c]of w(this,Yt))o===t?r.unskip_effect(c):r.skip_effect(c);for(const[o,c]of w(this,xt))o===t?r.unskip_effect(c.effect):r.skip_effect(c.effect);r.oncommit(w(this,En)),r.ondiscard(w(this,Zn))}else w(this,En).call(this)}}At=new WeakMap,Yt=new WeakMap,xt=new WeakMap,Is=new WeakMap,Cn=new WeakMap,En=new WeakMap,Zn=new WeakMap;function A(e,t,s=!1){var r=new Nr(e),i=s?js:0;function a(l,o){r.ensure(l,o)}Bn(()=>{var l=!1;t((o,c=!0)=>{l=!0,a(c,o)}),l||a(!1,null)},i)}function Ge(e,t){return t}function Ll(e,t,s){for(var r=[],i=t.length,a,l=t.length,o=0;o<i;o++){let b=t[o];Bs(b,()=>{if(a){if(a.pending.delete(b),a.done.add(b),a.pending.size===0){var u=e.outrogroups;jr(er(a.done)),u.delete(a),u.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var c=r.length===0&&s!==null;if(c){var f=s,g=f.parentNode;xl(g),g.append(f),e.items.clear()}jr(t,!c)}else a={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(a)}function jr(e,t=!0){for(var s=0;s<e.length;s++)yt(e[s],t)}var na;function Ue(e,t,s,r,i,a=null){var l=e,o=new Map,c=(t&Sa)!==0;if(c){var f=e;l=f.appendChild(ks())}var g=null,b=Oa(()=>{var k=s();return Cr(k)?k:k==null?[]:er(k)}),u,h=!0;function _(){m.fallback=g,Ul(m,u,l,t,r),g!==null&&(u.length===0?(g.f&ls)===0?Or(g):(g.f^=ls,gn(g,null,l)):Bs(g,()=>{g=null}))}var j=Bn(()=>{u=n(b);for(var k=u.length,z=new Set,R=fe,oe=Ga(),se=0;se<k;se+=1){var ve=u[se],ze=r(ve,se),pe=h?null:o.get(ze);pe?(pe.v&&an(pe.v,ve),pe.i&&an(pe.i,se),oe&&R.unskip_effect(pe.e)):(pe=Vl(o,h?l:na??(na=ks()),ve,ze,se,i,t,s),h||(pe.e.f|=ls),o.set(ze,pe)),z.add(ze)}if(k===0&&a&&!g&&(h?g=Et(()=>a(l)):(g=Et(()=>a(na??(na=ks()))),g.f|=ls)),k>z.size&&Fi(),!h)if(oe){for(const[xe,Fe]of o)z.has(xe)||R.skip_effect(Fe.e);R.oncommit(_),R.ondiscard(()=>{})}else _();n(b)}),m={effect:j,items:o,outrogroups:null,fallback:g};h=!1}function fn(e){for(;e!==null&&(e.f&Lt)===0;)e=e.next;return e}function Ul(e,t,s,r,i){var Fe,rt,We,Z,Y,he,Q,J,je;var a=(r&Xi)!==0,l=t.length,o=e.items,c=fn(e.effect.first),f,g=null,b,u=[],h=[],_,j,m,k;if(a)for(k=0;k<l;k+=1)_=t[k],j=i(_,k),m=o.get(j).e,(m.f&ls)===0&&((rt=(Fe=m.nodes)==null?void 0:Fe.a)==null||rt.measure(),(b??(b=new Set)).add(m));for(k=0;k<l;k+=1){if(_=t[k],j=i(_,k),m=o.get(j).e,e.outrogroups!==null)for(const B of e.outrogroups)B.pending.delete(m),B.done.delete(m);if((m.f&ls)!==0)if(m.f^=ls,m===c)gn(m,null,s);else{var z=g?g.next:c;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),ds(e,g,m),ds(e,m,z),gn(m,z,s),g=m,u=[],h=[],c=fn(g.next);continue}if((m.f&jt)!==0&&(Or(m),a&&((Z=(We=m.nodes)==null?void 0:We.a)==null||Z.unfix(),(b??(b=new Set)).delete(m))),m!==c){if(f!==void 0&&f.has(m)){if(u.length<h.length){var R=h[0],oe;g=R.prev;var se=u[0],ve=u[u.length-1];for(oe=0;oe<u.length;oe+=1)gn(u[oe],R,s);for(oe=0;oe<h.length;oe+=1)f.delete(h[oe]);ds(e,se.prev,ve.next),ds(e,g,se),ds(e,ve,R),c=R,g=ve,k-=1,u=[],h=[]}else f.delete(m),gn(m,c,s),ds(e,m.prev,m.next),ds(e,m,g===null?e.effect.first:g.next),ds(e,g,m),g=m;continue}for(u=[],h=[];c!==null&&c!==m;)(f??(f=new Set)).add(c),h.push(c),c=fn(c.next);if(c===null)continue}(m.f&ls)===0&&u.push(m),g=m,c=fn(m.next)}if(e.outrogroups!==null){for(const B of e.outrogroups)B.pending.size===0&&(jr(er(B.done)),(Y=e.outrogroups)==null||Y.delete(B));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||f!==void 0){var ze=[];if(f!==void 0)for(m of f)(m.f&jt)===0&&ze.push(m);for(;c!==null;)(c.f&jt)===0&&c!==e.fallback&&ze.push(c),c=fn(c.next);var pe=ze.length;if(pe>0){var xe=(r&Sa)!==0&&l===0?s:null;if(a){for(k=0;k<pe;k+=1)(Q=(he=ze[k].nodes)==null?void 0:he.a)==null||Q.measure();for(k=0;k<pe;k+=1)(je=(J=ze[k].nodes)==null?void 0:J.a)==null||je.fix()}Ll(e,ze,xe)}}a&&cs(()=>{var B,ee;if(b!==void 0)for(m of b)(ee=(B=m.nodes)==null?void 0:B.a)==null||ee.apply()})}function Vl(e,t,s,r,i,a,l,o){var c=(l&Qi)!==0?(l&Zi)===0?Ua(s,!1,!1):Rs(s):null,f=(l&Ki)!==0?Rs(i):null;return{v:c,i:f,e:Et(()=>(a(t,c??s,f??i,o),()=>{e.delete(r)}))}}function gn(e,t,s){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,a=t&&(t.f&ls)===0?t.nodes.start:s;r!==null;){var l=In(r);if(a.before(r),r===i)return;r=l}}function ds(e,t,s){t===null?e.effect.first=s:t.next=s,s===null?e.effect.last=t:s.prev=t}function fi(e,t,...s){var r=new Nr(e);Bn(()=>{const i=t()??null;r.ensure(i,i&&(a=>i(a,...s)))},js)}function Hl(e,t,s){var r=new Nr(e);Bn(()=>{var i=t()??null;r.ensure(i,i&&(a=>s(a,i)))},js)}const ra=[...` 	
\r\fÂ \v\uFEFF`];function Jl(e,t,s){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),s){for(var i in s)if(s[i])r=r?r+" "+i:i;else if(r.length)for(var a=i.length,l=0;(l=r.indexOf(i,l))>=0;){var o=l+a;(l===0||ra.includes(r[l-1]))&&(o===r.length||ra.includes(r[o]))?r=(l===0?"":r.substring(0,l))+r.substring(o+1):l=o}}return r===""?null:r}function Wl(e,t){return e==null?null:String(e)}function we(e,t,s,r,i,a){var l=e.__className;if(l!==s||l===void 0){var o=Jl(s,r,a);o==null?e.removeAttribute("class"):e.className=o,e.__className=s}else if(a&&i!==a)for(var c in a){var f=!!a[c];(i==null||f!==!!i[c])&&e.classList.toggle(c,f)}return a}function cn(e,t,s,r){var i=e.__style;if(i!==t){var a=Wl(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return r}function pi(e,t,s=!1){if(e.multiple){if(t==null)return;if(!Cr(t))return sl();for(var r of e.options)r.selected=t.includes(wn(r));return}for(r of e.options){var i=wn(r);if(bl(i,t)){r.selected=!0;return}}(!s||t!==void 0)&&(e.selectedIndex=-1)}function Gl(e){var t=new MutationObserver(()=>{pi(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),rr(()=>{t.disconnect()})}function Yl(e,t,s=t){var r=new WeakSet,i=!0;Dr(e,"change",a=>{var l=a?"[selected]":":checked",o;if(e.multiple)o=[].map.call(e.querySelectorAll(l),wn);else{var c=e.querySelector(l)??e.querySelector("option:not([disabled])");o=c&&wn(c)}s(o),fe!==null&&r.add(fe)}),Ka(()=>{var a=t();if(e===document.activeElement){var l=Yn??fe;if(r.has(l))return}if(pi(e,a,i),i&&a===void 0){var o=e.querySelector(":checked");o!==null&&(a=wn(o),s(a))}e.__value=a,i=!1}),Gl(e)}function wn(e){return"__value"in e?e.__value:e.value}const Ql=Symbol("is custom element"),Kl=Symbol("is html");function Xl(e,t){var s=hi(e);s.value===(s.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function xs(e,t,s,r){var i=hi(e);i[t]!==(i[t]=s)&&(t==="loading"&&(e[Oi]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Zl(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function hi(e){return e.__attributes??(e.__attributes={[Ql]:e.nodeName.includes("-"),[Kl]:e.namespaceURI===tl})}var aa=new Map;function Zl(e){var t=e.getAttribute("is")||e.nodeName,s=aa.get(t);if(s)return s;aa.set(t,s=[]);for(var r,i=e,a=Element.prototype;a!==i;){r=ya(i);for(var l in r)r[l].set&&s.push(l);i=Er(i)}return s}function bn(e,t,s=t){var r=new WeakSet;Dr(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=cr(e)?vr(a):a,s(a),fe!==null&&r.add(fe),await Ml(),a!==(a=t())){var l=e.selectionStart,o=e.selectionEnd,c=e.value.length;if(e.value=a??"",o!==null){var f=e.value.length;l===o&&o===c&&f>c?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=l,e.selectionEnd=Math.min(o,f))}}}),Ss(t)==null&&e.value&&(s(cr(e)?vr(e.value):e.value),fe!==null&&r.add(fe)),ar(()=>{var i=t();if(e===document.activeElement){var a=Yn??fe;if(r.has(a))return}cr(e)&&i===vr(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function gi(e,t,s=t){Dr(e,"change",r=>{var i=r?e.defaultChecked:e.checked;s(i)}),Ss(t)==null&&s(e.checked),ar(()=>{var r=t();e.checked=!!r})}function cr(e){var t=e.type;return t==="number"||t==="range"}function vr(e){return e===""?null:+e}function ia(e,t){return e===t||(e==null?void 0:e[ys])===t}function Dn(e={},t,s,r){return Ka(()=>{var i,a;return ar(()=>{i=a,a=[],Ss(()=>{e!==s(...a)&&(t(e,...a),i&&ia(s(...i),e)&&t(null,...i))})}),()=>{cs(()=>{a&&ia(s(...a),e)&&t(null,...a)})}}),e}function eo(e=!1){const t=Ne,s=t.l.u;if(!s)return;let r=()=>Il(t.s);if(e){let i=0,a={};const l=sr(()=>{let o=!1;const c=t.s;for(const f in c)c[f]!==a[f]&&(a[f]=c[f],o=!0);return o&&i++,i});r=()=>n(l)}s.b.length&&zl(()=>{la(t,r),Wn(s.b)}),ln(()=>{const i=Ss(()=>s.m.map(Ri));return()=>{for(const a of i)typeof a=="function"&&a()}}),s.a.length&&ln(()=>{la(t,r),Wn(s.a)})}function la(e,t){if(e.l.s)for(const s of e.l.s)n(s);t()}function Fr(e,t,s){if(e==null)return t(void 0),s&&s(void 0),gs;const r=Ss(()=>e.subscribe(t,s));return r.unsubscribe?()=>r.unsubscribe():r}const Hs=[];function to(e,t){return{subscribe:Fs(e,t).subscribe}}function Fs(e,t=gs){let s=null;const r=new Set;function i(o){if($a(e,o)&&(e=o,s)){const c=!Hs.length;for(const f of r)f[1](),Hs.push(f,e);if(c){for(let f=0;f<Hs.length;f+=2)Hs[f][0](Hs[f+1]);Hs.length=0}}}function a(o){i(o(e))}function l(o,c=gs){const f=[o,c];return r.add(f),r.size===1&&(s=t(i,a)||gs),o(e),()=>{r.delete(f),r.size===0&&s&&(s(),s=null)}}return{set:i,update:a,subscribe:l}}function Lr(e,t,s){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return to(s,(l,o)=>{let c=!1;const f=[];let g=0,b=gs;const u=()=>{if(g)return;b();const _=t(r?f[0]:f,l,o);a?l(_):b=typeof _=="function"?_:gs},h=i.map((_,j)=>Fr(_,m=>{f[j]=m,g&=~(1<<j),c&&u()},()=>{g|=1<<j}));return c=!0,u(),function(){Wn(h),b(),c=!1}})}function os(e){let t;return Fr(e,s=>t=s)(),t}let Sr=Symbol();function Ft(e,t,s){const r=s[t]??(s[t]={store:null,source:Ua(void 0),unsubscribe:gs});if(r.store!==e&&!(Sr in s))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=gs;else{var i=!0;r.unsubscribe=Fr(e,a=>{i?r.source.v=a:p(r.source,a)}),i=!1}return e&&Sr in s?os(e):n(r.source)}function us(){const e={};function t(){rr(()=>{for(var s in e)e[s].unsubscribe();ma(e,Sr,{enumerable:!1,value:!0})})}return[e,t]}function zr(e,t,s,r){var i=r,a=!0,l=()=>(a&&(a=!1,i=r),i),o;o=e[t],o===void 0&&r!==void 0&&(o=l());var c;return c=()=>{var f=e[t];return f===void 0?l():(a=!0,f)},c}function Rn(e){Ne===null&&ja(),qn&&Ne.l!==null?so(Ne).m.push(e):ln(()=>{const t=Ss(e);if(typeof t=="function")return t})}function _i(e){Ne===null&&ja(),Rn(()=>()=>Ss(e))}function so(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const no="5";var _a;typeof window<"u"&&((_a=window.__svelte??(window.__svelte={})).v??(_a.v=new Set)).add(no);const Ur=Fs(window.location.hash.slice(1)||"/");window.addEventListener("hashchange",()=>{Ur.set(window.location.hash.slice(1)||"/")});const Vr=Lr(Ur,e=>e.split("?")[0]||"/"),ro=Lr(Ur,e=>{const t=e.indexOf("?");return t>=0?e.slice(t+1):""}),ao=Lr(ro,e=>Object.fromEntries(new URLSearchParams(e)));function io(e){window.location.hash="#"+e}al();let lo=0;function oo(){const{subscribe:e,update:t}=Fs([]);return{subscribe:e,add(s,r="info",i=3e3){const a={id:lo++,message:s,type:r};t(l=>[...l,a]),setTimeout(()=>{t(l=>l.filter(o=>o.id!==a.id))},i)},remove(s){t(r=>r.filter(i=>i.id!==s))}}}const mi=oo();function ke(e,t,s){mi.add(e,t,s)}var co=x('<div role="alert"> </div>');function vo(e,t){let s=zr(t,"type",3,"info");var r=co(),i=v(r);L(()=>{we(r,1,`toast ${s()??""}`,"svelte-1i7wnxu"),q(i,t.message)}),y(e,r)}var uo=x('<div class="toast-container svelte-3knp8x"></div>');function fo(e){const t=()=>Ft(mi,"$toasts",s),[s,r]=us();var i=uo();Ue(i,5,t,a=>a.id,(a,l)=>{vo(a,{get message(){return n(l).message},get type(){return n(l).type}})}),y(e,i),r()}function Pe(){const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"http://localhost:3001":"https://yoink.coah80.com"}async function Hn(e,t={}){const s=await fetch(e,t),r=s.headers.get("content-type");if(!s.ok){let i=`Request failed (${s.status})`;if(r&&r.includes("application/json"))i=(await s.json()).error||i;else{const a=await s.text();console.error("Non-JSON error response:",a.substring(0,500)),i=`Server error ${s.status} (likely VPN blocked)`}throw new Error(i)}return s.json()}async function po(e,t={}){return Hn(`${Pe()}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function Tr(e,{onMessage:t,onError:s,maxReconnectAttempts:r=10}){let i=0,a=null,l=!1;function o(){l||(a=new EventSource(`${Pe()}/api/progress/${e}`),a.onmessage=f=>{try{const g=JSON.parse(f.data);i=0,t(g),(g.stage==="complete"||g.stage==="error"||g.stage==="cancelled")&&c()}catch(g){console.error("SSE parse error:",g)}},a.onerror=()=>{if(a.close(),!l)if(i<r){i++;const f=Math.min(1e3*i,5e3);s&&s({type:"reconnecting",attempt:i,max:r}),setTimeout(o,f)}else s&&s({type:"failed",message:"Connection lost - refresh page to retry"})})}function c(){l=!0,a&&(a.close(),a=null)}return o(),{close:c}}const jn=[],ho=5;function oa(e){e.parentNode&&e.parentNode.removeChild(e);const t=jn.indexOf(e);t>-1&&jn.splice(t,1)}function go(){for(;jn.length>ho;){const e=jn.shift();e&&e.parentNode&&e.parentNode.removeChild(e)}}function ca(e){const t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t),jn.push(t),go(),t.onload=()=>setTimeout(()=>oa(t),5e3),setTimeout(()=>oa(t),120*1e3)}function yi(e,t){const s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}const Sn=Fs(sessionStorage.getItem("yoink_clientId")||null),Gs=new Set;let _o=0,Kt=null,pn=0;const mo=3;async function yo(){let e=os(Sn);if(!e){try{e=(await(await fetch(`${Pe()}/api/connect`,{method:"POST"})).json()).clientId}catch{e="local-"+Date.now()+"-"+Math.random().toString(36).slice(2,11)}sessionStorage.setItem("yoink_clientId",e),Sn.set(e)}return e}function Hr(){const e=`job-${++_o}-${Date.now()}`,t=Gs.size===0;if(Gs.add(e),t&&!Kt){pn=0;const s=os(Sn);s&&!s.startsWith("local-")&&fetch(`${Pe()}/api/heartbeat/${s}`,{method:"POST"}).catch(()=>{}),Kt=setInterval(async()=>{const r=os(Sn);if(!(!r||r.startsWith("local-")))try{await fetch(`${Pe()}/api/heartbeat/${r}`,{method:"POST"}),pn=0}catch{pn++,pn>=mo&&(clearInterval(Kt),Kt=null,pn=0)}},15e3)}return e}function zn(e){e?Gs.delete(e):Gs.clear(),Gs.size===0&&Kt&&(clearInterval(Kt),Kt=null)}typeof window<"u"&&window.addEventListener("beforeunload",()=>{Kt&&(clearInterval(Kt),Kt=null),Gs.clear()});const va=[{text:"yoink it, go on..."},{text:"not cobalt"},{text:"im bored"},{text:"have you yoinked it today?"},{text:"download helium browser",link:"https://helium.computer/",classes:["clickable"]},{text:"dont like it? use cliply (dont)"},{text:"the biggest yt-dlp wrapper of them all"},{text:"awesome name, right?"},{text:"get yoinked!"},{text:"funny message here"},{text:"SHOUTOUT TO COAH"},{text:"new feature: yoink!"},{text:"new feature: ai download"},{text:"welcome to yoink.tools"},{text:"feelin' yoinky?"},{text:"im parched"},{text:"stay hydrated!"},{text:"computers are cool"},{text:"missing assignments?"},{text:"procrastinate with yoink"},{text:"newgrounds.com",link:"https://newgrounds.com",classes:["clickable"]},{text:"bring back flash!"},{text:"FUCK ICE"},{text:"post this one to twitter"},{text:"google i need yoinks! NOW!!!!!"},{text:"im feeling fancy today...",classes:["fancy"]},{text:"powered by yt-dlp"},{text:"hello world!"},{text:"1000+ sites!",link:"https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md",classes:["clickable"]},{text:"yes, that site works. even the one you're thinking of."}],wo=["4tube","alphaporno","beeg","behindkink","bongacams","cam4","cammodels","camsoda","chaturbate","drtuber","empflix","eporner","erocast","eroprofile","fux","hellporno","hotmovs","iceporn","lovehomeporn","manyvids","motherless","moviefap","noodlemagazine","nuvid","peekvideos","peekvids","playvids","porn","pornbox","pornerbros","pornflip","pornhub","pornotube","pornovoisines","pornoxo","porntop","porntube","redtube","rule34video","slutload","spankbang","stripchat","sunporno","thisvid","tnaflix","tube8","txxx","xhamster","xnxx","xvideos","xxxymovies","youjizz","youporn","zenporn","xtube","erome","hentai","hclips","gotporn","fuq","ashemaletube"];function bo(e){try{const t=new URL(e).hostname.toLowerCase().replace("www.","");return wo.some(s=>t.includes(s))}catch{return!1}}const ur={quality:"1080p",codec:"h264",container:"mp4",audioFormat:"mp3",audioBitrate:"320",filenameStyle:"basic",playlistPreference:null,twitterGifs:!0,analytics:!0},Jn=["starting","downloading","processing","remuxing","sending","zipping","playlist-info","reconnecting"];function ko(){let e={...ur};try{const a=localStorage.getItem("yoink_settings");a&&(e={...ur,...JSON.parse(a)})}catch{}const{subscribe:t,set:s,update:r}=Fs(e);function i(a){localStorage.setItem("yoink_settings",JSON.stringify(a))}return{subscribe:t,set(a){i(a),s(a)},update(a){r(l=>{const o=a(l);return i(o),o})},setSetting(a,l){r(o=>{const c={...o,[a]:l};return i(c),c})},reset(){const a={...ur};i(a),s(a)}}}const Qt=ko();let ua=!1;async function wi(){if(!(ua||!("serviceWorker"in navigator)))try{await navigator.serviceWorker.register("/sw.js"),ua=!0}catch{}}async function xo(){return"Notification"in window?Notification.permission==="granted"?"granted":Notification.permission==="denied"?"denied":await Notification.requestPermission():"unsupported"}async function jo(e,t){if(!(!("Notification"in window)||Notification.permission!=="granted")){if(await wi(),"serviceWorker"in navigator)try{const s=await navigator.serviceWorker.ready;if(s.active){s.active.postMessage({type:"PLAYLIST_COMPLETE",message:`${e} is ready to download!`,jobId:t});return}}catch{}new Notification("yoink",{body:`${e} is ready to download!`,icon:"/icons/icon-192.png"})}}function So(){let e=[];try{const u=localStorage.getItem("yoink_queue");u&&(e=JSON.parse(u).map(h=>h.isPlaylist&&h.serverJobId&&h.stage!=="ready"?{...h,stage:"reconnecting",progress:h.progress||0,status:"reconnecting..."}:Jn.includes(h.stage)?{...h,stage:"queued",progress:0,status:"interrupted - tap to restart"}:h).filter(h=>h.stage!=="complete"&&h.stage!=="error"))}catch{e=[]}const{subscribe:t,set:s,update:r}=Fs(e),i=new Map,a=new Map,l=new Map;function o(u){localStorage.setItem("yoink_queue",JSON.stringify(u))}function c(){return os({subscribe:t})}function f(u){const h=l.get(u);h&&(clearInterval(h),l.delete(u))}function g(u){const h=i.get(u);h&&(h.close(),i.delete(u)),f(u);const _=a.get(u);_&&(zn(_),a.delete(u))}const b={subscribe:t,add(u){r(h=>{if(h.some(j=>j.id===u.id))return h;const _=[...h,u];return o(_),_})},remove(u){const _=c().find(j=>j.id===u);if(g(u),_&&Jn.includes(_.stage)){const j=_.serverJobId||u;fetch(`${Pe()}/api/cancel/${j}`,{method:"POST"}).catch(()=>{})}r(j=>{const m=j.filter(k=>k.id!==u);return o(m),m})},updateItem(u,h){r(_=>{const j=_.map(m=>m.id===u?{...m,...h}:m);return o(j),j})},clear(){c().forEach(h=>{if(g(h.id),Jn.includes(h.stage)){const _=h.serverJobId||h.id;fetch(`${Pe()}/api/cancel/${_}`,{method:"POST"}).catch(()=>{})}}),i.clear(),a.clear(),l.clear(),s([]),o([])},startDownload(u){if(u.isPlaylist){this._startPlaylistDownload(u);return}this._startDirectDownload(u)},_startDirectDownload(u){const h=os(Qt),_=Hr();a.set(u.id,_),this.updateItem(u.id,{stage:"starting",status:"starting download...",startTime:Date.now()});const j=Tr(u.id,{onMessage:z=>{const R={stage:z.stage,status:z.message};if(z.progress!==void 0&&(R.progress=z.progress),z.speed!==void 0&&(R.speed=z.speed),z.eta!==void 0&&(R.eta=z.eta),z.totalVideos!==void 0&&(R.videoCount=z.totalVideos),z.currentVideo!==void 0&&(R.currentVideo=z.currentVideo),z.currentVideoTitle!==void 0&&(R.currentVideoTitle=z.currentVideoTitle),z.format!==void 0&&(R.formatDisplay=z.format),z.downloadedCount!==void 0&&(R.downloadedCount=z.downloadedCount),z.failedVideos&&(R.failedVideos=z.failedVideos),z.failedCount!==void 0&&(R.failedCount=z.failedCount),this.updateItem(u.id,R),z.stage==="complete"){R.endTime=Date.now(),this.updateItem(u.id,R),g(u.id);const se=c().find(xe=>xe.id===u.id),ve=se!=null&&se.startTime?Math.floor((Date.now()-se.startTime)/1e3):0,ze=ve>=60?`${Math.floor(ve/60)}m ${ve%60}s`:`${ve}s`,pe=u.format==="images"?"gallery download complete!":`download complete! (${ze})`;ke(pe,"success"),setTimeout(()=>this.remove(u.id),5e3)}else z.stage==="error"?(g(u.id),ke(z.message,"error")):z.stage==="cancelled"&&g(u.id)},onError:z=>{z.type==="reconnecting"?this.updateItem(u.id,{status:`reconnecting... (${z.attempt}/${z.max})`}):(this.updateItem(u.id,{stage:"error",status:z.message}),g(u.id))}});i.set(u.id,j);const m=new URLSearchParams({url:u.url,format:u.format,filename:u.title,quality:h.quality,container:h.container,audioFormat:h.audioFormat,audioBitrate:h.audioBitrate,progressId:u.id,twitterGifs:h.twitterGifs!==!1?"true":"false"});let k;u.format==="images"?k="/api/gallery/download":k="/api/download",ca(`${Pe()}${k}?${m.toString()}`)},async _startPlaylistDownload(u){const h=os(Qt);this.updateItem(u.id,{stage:"starting",status:"starting playlist download...",startTime:Date.now()}),wi(),xo();try{const _=os(Sn),m=(await po("/api/playlist/start",{url:u.url,format:u.format,quality:h.quality,container:h.container,audioFormat:h.audioFormat,audioBitrate:h.audioBitrate,clientId:_||void 0})).jobId;this.updateItem(u.id,{serverJobId:m}),this._connectPlaylistSSE(u.id,m),this._startPlaylistPolling(u.id,m)}catch(_){this.updateItem(u.id,{stage:"error",status:_.message||"failed to start playlist"}),ke(_.message||"failed to start playlist","error")}},_connectPlaylistSSE(u,h){const _=Tr(h,{onMessage:j=>{this._handlePlaylistUpdate(u,j)},onError:()=>{}});i.set(u,_)},_startPlaylistPolling(u,h){f(u);const _=setInterval(async()=>{try{const j=await fetch(`${Pe()}/api/playlist/status/${h}`);if(!j.ok){j.status===404&&(this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),g(u),ke("playlist expired â try again!","error"));return}const m=await j.json();this._handlePlaylistUpdate(u,{stage:m.status==="complete"?"complete":m.status,message:m.message,progress:m.progress,totalVideos:m.totalVideos,currentVideo:m.currentVideo,currentVideoTitle:m.currentVideoTitle,failedVideos:m.failedVideos,failedCount:m.failedCount,downloadedCount:m.videosCompleted,downloadToken:m.downloadToken,fileName:m.fileName,fileSize:m.fileSize,speed:m.speed,eta:m.eta})}catch{}},3e3);l.set(u,_)},_handlePlaylistUpdate(u,h){const _={stage:h.stage,status:h.message};if(h.progress!==void 0&&(_.progress=h.progress),h.speed!==void 0&&(_.speed=h.speed),h.eta!==void 0&&(_.eta=h.eta),h.totalVideos!==void 0&&(_.videoCount=h.totalVideos),h.currentVideo!==void 0&&(_.currentVideo=h.currentVideo),h.currentVideoTitle!==void 0&&(_.currentVideoTitle=h.currentVideoTitle),h.downloadedCount!==void 0&&(_.downloadedCount=h.downloadedCount),h.failedVideos&&(_.failedVideos=h.failedVideos),h.failedCount!==void 0&&(_.failedCount=h.failedCount),h.stage==="complete"&&h.downloadToken){_.stage="ready",_.downloadToken=h.downloadToken,_.fileName=h.fileName,_.fileSize=h.fileSize,_.endTime=Date.now(),_.status="playlist ready â tap to download",this.updateItem(u,_),g(u);const m=c().find(k=>k.id===u);ke(`${(m==null?void 0:m.title)||"playlist"} is ready to download!`,"success",8e3),jo((m==null?void 0:m.title)||"playlist",m==null?void 0:m.serverJobId);return}if(h.stage==="error"){this.updateItem(u,_),g(u),ke(h.message,"error");return}if(h.stage==="cancelled"){this.updateItem(u,_),g(u);return}this.updateItem(u,_)},async downloadReady(u){const _=c().find(j=>j.id===u);if(!(!_||!_.downloadToken)){if(_.serverJobId)try{if(!(await fetch(`${Pe()}/api/playlist/status/${_.serverJobId}`)).ok){this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),ke("playlist expired â try again!","error");return}}catch{this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),ke("playlist expired â try again!","error");return}ca(`${Pe()}/api/playlist/download/${_.downloadToken}`),ke("downloading playlist zip...","success"),setTimeout(()=>this.remove(u),1e4)}},startAllQueued(){c().filter(_=>_.stage==="queued").forEach((_,j)=>{setTimeout(()=>this.startDownload(_),j*500)})},retryDownload(u){if(!c().find(z=>z.id===u))return;const j=Date.now().toString()+Math.random().toString(36).substr(2,9);this.updateItem(u,{id:j,stage:"queued",progress:0,status:"queued for retry",logs:[],endTime:null,serverJobId:null,downloadToken:null});const k=c().find(z=>z.id===j);k&&this.startDownload(k)},async finishPlaylistEarly(u){const _=c().find(m=>m.id===u),j=(_==null?void 0:_.serverJobId)||u;try{await fetch(`${Pe()}/api/finish-early/${j}`,{method:"POST"})}catch{ke("failed to finish early","error")}},resumePlaylistJobs(){c().filter(h=>h.stage==="reconnecting"&&h.serverJobId).forEach(h=>{this._connectPlaylistSSE(h.id,h.serverJobId),this._startPlaylistPolling(h.id,h.serverJobId)})}};return typeof window<"u"&&setTimeout(()=>b.resumePlaylistJobs(),500),b}const vt=So();var zo=nt('<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',1),To=nt('<polyline points="20 6 9 17 4 12"></polyline>'),$o=nt('<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',1),Co=nt('<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',1),Eo=nt('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Po=nt('<path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path d="M9 12l2 2 4-4"></path>',1),qo=nt('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),Mo=x('<span class="queue-item-format svelte-151vo4w"> </span>'),Io=x('<span class="queue-item-timer svelte-151vo4w"> </span>'),Bo=x('<span class="queue-item-timer svelte-151vo4w"> </span>'),Ao=x('<button class="queue-item-download svelte-151vo4w" title="Download"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),Do=x('<button class="queue-item-retry svelte-151vo4w" title="Retry"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg></button>'),Ro=x('<button class="queue-item-retry svelte-151vo4w" title="Start now"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button>'),Oo=x('<button class="queue-item-retry svelte-151vo4w" title="Download now (skip remaining)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),No=x('<div class="queue-item-progress svelte-151vo4w"><div class="queue-item-progress-fill svelte-151vo4w"></div></div>'),Fo=x('<div class="queue-item-failed-item svelte-151vo4w"><span class="queue-item-failed-num svelte-151vo4w"> </span> <span> </span></div>'),Lo=x('<div class="queue-item-failed svelte-151vo4w"><div class="queue-item-failed-header svelte-151vo4w"> </div> <!></div>'),Uo=x('<div><div class="queue-item-header svelte-151vo4w"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-151vo4w"><!></svg></div> <div class="queue-item-info svelte-151vo4w"><div class="queue-item-title svelte-151vo4w"> <!> <!></div> <div> </div></div> <div class="queue-item-actions svelte-151vo4w"><!> <!> <!> <button class="queue-item-remove svelte-151vo4w" title="Remove"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div></div> <!> <!></div>');function Vo(e,t){St(t,!0);let s=le(()=>Jn.includes(t.item.stage)),r=le(()=>t.item.stage==="complete"),i=le(()=>t.item.stage==="error"),a=le(()=>t.item.stage==="queued"),l=le(()=>t.item.stage==="ready"),o=le(()=>n(s)&&t.item.progress!==void 0),c=le(()=>n(l)?"success":n(s)?"active":n(r)?"success":n(i)?"error":""),f=le(()=>{if(!t.item.fileSize)return"";const S=t.item.fileSize/(1024*1024);return S>=1024?`${(S/1024).toFixed(1)} GB`:`${S.toFixed(1)} MB`}),g=le(()=>{if(!t.item.startTime||!n(s)&&!n(r))return"";const S=n(r)&&t.item.endTime?t.item.endTime:Date.now(),C=Math.floor((S-t.item.startTime)/1e3),te=Math.floor(C/60);return te>0?`${te}m ${C%60}s`:`${C}s`}),b=le(()=>{if(t.item.isPlaylist&&t.item.currentVideo&&t.item.videoCount)return`${t.item.currentVideo}/${t.item.videoCount} - ${t.item.currentVideoTitle||t.item.status}`;let S=t.item.status||"waiting...";if(n(s)&&(t.item.speed||t.item.eta)){const C=[];t.item.speed&&C.push(t.item.speed),t.item.eta&&C.push(`~${t.item.eta} left`),C.length&&(S+=` Â· ${C.join(" Â· ")}`)}return S});var u=Uo();let h;u.__click=()=>{n(l)?vt.downloadReady(t.item.id):n(a)&&vt.startDownload(t.item)};var _=v(u),j=v(_);let m;var k=v(j),z=v(k);{var R=S=>{var C=zo();y(S,C)},oe=S=>{var C=Je(),te=Ee(C);{var ie=K=>{var ye=To();y(K,ye)},ge=K=>{var ye=Je(),Be=Ee(ye);{var De=Xe=>{var dt=$o();y(Xe,dt)},ut=Xe=>{var dt=Je(),at=Ee(dt);{var wt=it=>{var bt=Co();y(it,bt)},ft=it=>{var bt=Je(),pt=Ee(bt);{var ht=I=>{var X=Eo();y(I,X)},P=I=>{var X=Je(),re=Ee(X);{var E=T=>{var V=Po();y(T,V)},M=T=>{var V=qo();y(T,V)};A(re,T=>{n(s)?T(E):T(M,!1)},!0)}y(I,X)};A(pt,I=>{t.item.format==="audio"?I(ht):I(P,!1)},!0)}y(it,bt)};A(at,it=>{t.item.isPlaylist?it(wt):it(ft,!1)},!0)}y(Xe,dt)};A(Be,Xe=>{n(i)?Xe(De):Xe(ut,!1)},!0)}y(K,ye)};A(te,K=>{n(r)?K(ie):K(ge,!1)},!0)}y(S,C)};A(z,S=>{n(l)?S(R):S(oe,!1)})}var se=d(j,2),ve=v(se),ze=v(ve),pe=d(ze);{var xe=S=>{var C=Mo(),te=v(C);L(()=>q(te,t.item.formatDisplay)),y(S,C)};A(pe,S=>{t.item.isPlaylist&&t.item.formatDisplay&&S(xe)})}var Fe=d(pe,2);{var rt=S=>{var C=Io(),te=v(C);L(()=>q(te,n(f))),y(S,C)},We=S=>{var C=Je(),te=Ee(C);{var ie=ge=>{var K=Bo(),ye=v(K);L(()=>q(ye,n(g))),y(ge,K)};A(te,ge=>{n(g)&&ge(ie)},!0)}y(S,C)};A(Fe,S=>{n(l)&&n(f)?S(rt):S(We,!1)})}var Z=d(ve,2),Y=v(Z),he=d(se,2),Q=v(he);{var J=S=>{var C=Ao();C.__click=te=>{te.stopPropagation(),vt.downloadReady(t.item.id)},y(S,C)},je=S=>{var C=Je(),te=Ee(C);{var ie=ge=>{var K=Do();K.__click=ye=>{ye.stopPropagation(),vt.retryDownload(t.item.id)},y(ge,K)};A(te,ge=>{n(i)&&t.item.url&&ge(ie)},!0)}y(S,C)};A(Q,S=>{n(l)?S(J):S(je,!1)})}var B=d(Q,2);{var ee=S=>{var C=Ro();C.__click=te=>{te.stopPropagation(),vt.startDownload(t.item)},y(S,C)};A(B,S=>{n(a)&&S(ee)})}var W=d(B,2);{var me=S=>{var C=Oo();C.__click=te=>{te.stopPropagation(),vt.finishPlaylistEarly(t.item.id)},y(S,C)};A(W,S=>{t.item.isPlaylist&&n(s)&&t.item.currentVideo>0&&S(me)})}var Te=d(W,2);Te.__click=S=>{S.stopPropagation(),vt.remove(t.item.id)};var $=d(_,2);{var ne=S=>{var C=No(),te=v(C);L(()=>cn(te,`width: ${(t.item.progress||0)??""}%`)),y(S,C)};A($,S=>{n(o)&&S(ne)})}var H=d($,2);{var O=S=>{var C=Lo(),te=v(C),ie=v(te),ge=d(te,2);Ue(ge,17,()=>t.item.failedVideos,Ge,(K,ye)=>{var Be=Fo(),De=v(Be),ut=v(De),Xe=d(De,2),dt=v(Xe);L(()=>{q(ut,`#${n(ye).num??""}`),q(dt,`${(n(ye).title||"Video")??""} - ${(n(ye).reason||"Download failed")??""}`)}),y(K,Be)}),L(()=>q(ie,`failed videos (${(t.item.failedCount||t.item.failedVideos.length)??""})`)),y(S,C)};A(H,S=>{var C;t.item.isPlaylist&&((C=t.item.failedVideos)==null?void 0:C.length)>0&&S(O)})}L(()=>{h=we(u,1,"queue-item svelte-151vo4w",null,h,{clickable:n(l)||n(a)}),m=we(j,1,"queue-item-icon svelte-151vo4w",null,m,{spinning:n(s),ready:n(l)}),q(ze,`${t.item.title??""} `),we(Z,1,`queue-item-status ${n(c)??""}`,"svelte-151vo4w"),q(Y,n(b))}),y(e,u),zt()}Ut(["click"]);var Ho=x('<button class="queue-clear svelte-i3r5ty">clear all</button>'),Jo=x('<div class="queue-empty svelte-i3r5ty">no downloads yet</div>'),Wo=x('<div class="queue-dropdown-header svelte-i3r5ty"><span class="queue-dropdown-title svelte-i3r5ty">downloads</span> <div class="queue-header-actions svelte-i3r5ty"><button class="queue-start-all svelte-i3r5ty" title="Start all queued"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-i3r5ty"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button> <!></div></div> <div class="queue-list svelte-i3r5ty"><!></div>',1);function bi(e,t){St(t,!0);const s=()=>Ft(vt,"$queue",r),[r,i]=us();let a=le(s),l=le(()=>n(a).length>0);var o=Wo(),c=Ee(o),f=d(v(c),2),g=v(f);g.__click=()=>vt.startAllQueued();var b=d(g,2);{var u=k=>{var z=Ho();z.__click=()=>{vt.clear(),ke("Queue cleared","info")},y(k,z)};A(b,k=>{n(l)&&k(u)})}var h=d(c,2),_=v(h);{var j=k=>{var z=Je(),R=Ee(z);Ue(R,17,()=>n(a),oe=>oe.id,(oe,se)=>{Vo(oe,{get item(){return n(se)}})}),y(k,z)},m=k=>{var z=Jo();y(k,z)};A(_,k=>{n(l)?k(j):k(m,!1)})}y(e,o),zt(),i()}Ut(["click"]);var Go=nt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-1xkxv2n"></path><polyline points="7 10 12 15 17 10" class="svelte-1xkxv2n"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-1xkxv2n"></line></svg>'),Yo=nt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="17 1 21 5 17 9" class="svelte-1xkxv2n"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" class="svelte-1xkxv2n"></path><polyline points="7 23 3 19 7 15" class="svelte-1xkxv2n"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" class="svelte-1xkxv2n"></path></svg>'),Qo=nt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="4 14 10 14 10 20" class="svelte-1xkxv2n"></polyline><polyline points="20 10 14 10 14 4" class="svelte-1xkxv2n"></polyline><line x1="14" y1="10" x2="21" y2="3" class="svelte-1xkxv2n"></line><line x1="3" y1="21" x2="10" y2="14" class="svelte-1xkxv2n"></line></svg>'),Ko=nt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><circle cx="12" cy="12" r="3" class="svelte-1xkxv2n"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" class="svelte-1xkxv2n"></path></svg>'),Xo=x('<a><div class="nav-icon svelte-1xkxv2n"><!></div> <span class="nav-label svelte-1xkxv2n"> </span></a>'),Zo=x('<span class="nav-badge svelte-1xkxv2n"> </span>'),ec=x('<div class="queue-sheet-overlay svelte-1xkxv2n"></div> <div><div class="sheet-handle svelte-1xkxv2n"></div> <!></div>',1),tc=x('<nav class="bottom-nav svelte-1xkxv2n"><!> <button><div class="nav-icon svelte-1xkxv2n"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><line x1="8" y1="6" x2="21" y2="6" class="svelte-1xkxv2n"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-1xkxv2n"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-1xkxv2n"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-1xkxv2n"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-1xkxv2n"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-1xkxv2n"></line></svg> <!></div> <span class="nav-label svelte-1xkxv2n">queue</span></button></nav> <!>',1);function sc(e,t){St(t,!0);const s=()=>Ft(vt,"$queue",i),r=()=>Ft(Vr,"$path",i),[i,a]=us();let l=D(!1),o,c=D(0),f=D(!1),g=0,b=0,u=le(s),h=le(()=>n(u).length),_=le(r),j=le(()=>n(u).filter(Q=>["starting","downloading","processing","zipping","sending"].includes(Q.stage)).length);function m(Q){Q.preventDefault(),Q.stopPropagation(),p(l,!n(l)),p(c,0)}function k(){p(l,!1),p(c,0)}function z(Q){const J=o;J&&(J.scrollTop>0&&Q.target.closest(".queue-sheet")&&!Q.target.closest(".sheet-handle")||(g=Q.touches[0].clientY,b=Date.now(),p(f,!0)))}function R(Q){if(!n(f))return;const J=Q.touches[0].clientY-g;J>0?(p(c,J),Q.preventDefault()):p(c,0)}function oe(){if(!n(f))return;p(f,!1);const Q=n(c)/(Date.now()-b);n(c)>80||Q>.5?k():p(c,0)}const se=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/settings",label:"settings",icon:"settings"}];var ve=tc();Ot("keydown",Ar,Q=>{Q.key==="Escape"&&n(l)&&k()});var ze=Ee(ve),pe=v(ze);Ue(pe,17,()=>se,Ge,(Q,J)=>{var je=Xo();let B;var ee=v(je),W=v(ee);{var me=H=>{var O=Go();y(H,O)},Te=H=>{var O=Je(),S=Ee(O);{var C=ie=>{var ge=Yo();y(ie,ge)},te=ie=>{var ge=Je(),K=Ee(ge);{var ye=De=>{var ut=Qo();y(De,ut)},Be=De=>{var ut=Je(),Xe=Ee(ut);{var dt=at=>{var wt=Ko();y(at,wt)};A(Xe,at=>{n(J).icon==="settings"&&at(dt)},!0)}y(De,ut)};A(K,De=>{n(J).icon==="compress"?De(ye):De(Be,!1)},!0)}y(ie,ge)};A(S,ie=>{n(J).icon==="convert"?ie(C):ie(te,!1)},!0)}y(H,O)};A(W,H=>{n(J).icon==="download"?H(me):H(Te,!1)})}var $=d(ee,2),ne=v($);L(()=>{B=we(je,1,"bottom-nav-item svelte-1xkxv2n",null,B,{active:n(_)===n(J).href}),xs(je,"href",`#${n(J).href??""}`),q(ne,n(J).label)}),y(Q,je)});var xe=d(pe,2);let Fe;xe.__click=m;var rt=v(xe),We=d(v(rt),2);{var Z=Q=>{var J=Zo(),je=v(J);L(()=>q(je,n(h))),y(Q,J)};A(We,Q=>{n(h)>0&&Q(Z)})}var Y=d(ze,2);{var he=Q=>{var J=ec(),je=Ee(J);je.__click=k;var B=d(je,2);let ee;B.__touchstart=z,B.__touchmove=R,B.__touchend=oe;var W=d(v(B),2);bi(W,{}),Dn(B,me=>o=me,()=>o),L(()=>{ee=we(B,1,"queue-sheet svelte-1xkxv2n",null,ee,{swiping:n(f)}),cn(B,n(c)>0?`transform: translateY(${n(c)}px)`:"")}),y(Q,J)};A(Y,Q=>{n(l)&&Q(he)})}L(()=>Fe=we(xe,1,"bottom-nav-item queue-item svelte-1xkxv2n",null,Fe,{active:n(l),"has-active":n(j)>0})),y(e,ve),zt(),a()}Ut(["click","touchstart","touchmove","touchend"]);function ki(){return os(Qt).analytics!==!1}function xi(){let e=localStorage.getItem("yoink_trackingId");return e||(e="tid-"+Date.now()+"-"+Math.random().toString(36).slice(2,18),localStorage.setItem("yoink_trackingId",e)),e}function nc(){localStorage.removeItem("yoink_trackingId"),localStorage.removeItem("yoink_last_daily_report")}async function rc(){const e=localStorage.getItem("yoink_trackingId");if(!e)return{deleted:!1};try{const s=await(await fetch(`${Pe()}/api/analytics/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingId:e})})).json();return s.deleted&&nc(),s}catch(t){return console.error("Failed to delete analytics data:",t),{deleted:!1,error:t.message}}}async function ac(e){if(ki())try{await fetch(`${Pe()}/api/analytics/track`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"pageview",page:e,trackingId:xi()})})}catch{}}async function ic(){if(!ki())return;const e=new Date().toISOString().split("T")[0];if(localStorage.getItem("yoink_last_daily_report")!==e)try{await fetch(`${Pe()}/api/analytics/track`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"dailyUser",trackingId:xi()})}),localStorage.setItem("yoink_last_daily_report",e)}catch{}}const Kn=Fs(null);let ji;async function da(){try{const t=await(await fetch(`${Pe()}/api/banner`)).json();Kn.set(t.banner)}catch{Kn.set(null)}}function lc(){da(),ji=setInterval(da,6e4)}function oc(){clearInterval(ji)}var cc=x("<a><!></a>");function hs(e,t){const s=()=>Ft(Vr,"$path",r),[r,i]=us();let a=le(()=>s()===t.href);var l=cc();let o;var c=v(l);fi(c,()=>t.children),L(()=>{o=we(l,1,"nav-link svelte-5q5w88",null,o,{active:n(a)}),xs(l,"href",`#${t.href??""}`)}),y(e,l),i()}var vc=x('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> <span>download</span>',1),uc=x('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> <span>convert</span>',1),dc=x('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> <span>compress</span>',1),fc=x('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span>settings</span>',1),pc=x('<header class="svelte-4b3o1e"><div class="header-left svelte-4b3o1e"><a href="#/" class="logo-link svelte-4b3o1e"><span class="logo-text svelte-4b3o1e">yoink</span> <span class="logo-tld svelte-4b3o1e">.tools</span></a></div> <div class="header-right svelte-4b3o1e"><!> <nav class="nav-links svelte-4b3o1e"><!> <!> <!> <!></nav></div></header>');function hc(e,t){var s=pc(),r=d(v(s),2),i=v(r);{var a=b=>{var u=Je(),h=Ee(u);fi(h,()=>t.extraContent),y(b,u)};A(i,b=>{t.extraContent&&b(a)})}var l=d(i,2),o=v(l);hs(o,{href:"/",children:(b,u)=>{var h=vc();y(b,h)}});var c=d(o,2);hs(c,{href:"/convert",children:(b,u)=>{var h=uc();y(b,h)}});var f=d(c,2);hs(f,{href:"/compress",children:(b,u)=>{var h=dc();y(b,h)}});var g=d(f,2);hs(g,{href:"/settings",children:(b,u)=>{var h=fc();y(b,h)}}),y(e,s)}var gc=x('<footer class="svelte-ww03jg"><div class="footer-left svelte-ww03jg"><div>this is a <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-ww03jg">yt-dlp</a> wrapper</div> <div>inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt</a>, love u wukko</div> <div>youtube powered by <a href="https://patriick.dev/" target="_blank" rel="noopener" class="svelte-ww03jg">patrick</a> at <a href="https://cobalt.meowing.de" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt.meowing.de</a></div> <div class="legal svelte-ww03jg">by using this site you agree to our <a href="#/privacy" class="svelte-ww03jg">privacy policy</a></div></div> <div class="footer-right svelte-ww03jg"><a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-ww03jg">github</a> <span>Â·</span> <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-ww03jg">coah80.com</a> <span>Â·</span> <a href="#/privacy" class="svelte-ww03jg">privacy</a></div></footer>');function _c(e){var t=gc();y(e,t)}var mc=x('<span class="queue-badge svelte-1picwiz"> </span>'),yc=x('<div class="queue-dropdown svelte-1picwiz"><!></div>'),wc=x('<div class="queue-menu svelte-1picwiz"><button class="queue-toggle svelte-1picwiz"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1picwiz"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> queue <!></button> <!></div>');function bc(e,t){St(t,!0);const s=()=>Ft(vt,"$queue",r),[r,i]=us();let a=D(!1),l,o=le(s),c=le(()=>n(o).length);function f(k){k.stopPropagation(),p(a,!n(a))}function g(k){l&&!l.contains(k.target)&&p(a,!1)}ln(()=>(document.addEventListener("click",g),()=>document.removeEventListener("click",g)));var b=wc(),u=v(b);u.__click=f;var h=d(v(u),2);{var _=k=>{var z=mc(),R=v(z);L(()=>q(R,n(c))),y(k,z)};A(h,k=>{n(c)>0&&k(_)})}var j=d(u,2);{var m=k=>{var z=yc(),R=v(z);bi(R,{}),y(k,z)};A(j,k=>{n(a)&&k(m)})}Dn(b,k=>l=k,()=>l),y(e,b),zt(),i()}Ut(["click"]);var kc=x('<div class="spinner svelte-1ea6fjo" role="status" aria-label="Loading"></div>');function Si(e){var t=kc();y(e,t)}function zi(e){if(e===0||!Number.isFinite(e)||e<0)return"0 B";const t=1024,s=["B","KB","MB","GB","TB"],r=Math.min(Math.max(Math.floor(Math.log(e)/Math.log(t)),0),s.length-1);return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+s[r]}function fa(e){try{const t=new URL(e);if(t.hostname==="youtu.be"){const s=t.pathname.slice(1).split("?")[0],r=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${s}${r?`&list=${r}`:""}`}if(t.hostname.includes("youtube.com")){if(t.pathname.startsWith("/shorts/"))return`https://www.youtube.com/watch?v=${t.pathname.replace("/shorts/","").split("?")[0]}`;if(t.searchParams.get("v")){const s=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${t.searchParams.get("v")}${s?`&list=${s}`:""}`}if(t.pathname==="/playlist"&&t.searchParams.get("list"))return`https://www.youtube.com/playlist?list=${t.searchParams.get("list")}`}return e}catch{return e}}function pa(e){try{const t=new URL(e).hostname;return t==="youtu.be"||t.includes("youtube.com")}catch{return!1}}function ha(e){try{return new URL(e).searchParams.has("list")}catch{return!1}}function ga(){return Date.now().toString()+Math.random().toString(36).substr(2,9)}var xc=x("<p> </p>"),jc=x('<button class="clear-btn svelte-et6md" type="button" title="Clear"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button>'),Sc=x('<button class="paste-btn svelte-et6md" type="button" title="Paste from clipboard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" class="svelte-et6md"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" class="svelte-et6md"></path></svg></button>'),zc=nt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" class="svelte-et6md"></polygon></svg>'),Tc=nt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" class="svelte-et6md"></rect><line x1="7" y1="2" x2="7" y2="22" class="svelte-et6md"></line><line x1="17" y1="2" x2="17" y2="22" class="svelte-et6md"></line><line x1="2" y1="12" x2="22" y2="12" class="svelte-et6md"></line><line x1="2" y1="7" x2="7" y2="7" class="svelte-et6md"></line><line x1="2" y1="17" x2="7" y2="17" class="svelte-et6md"></line><line x1="17" y1="17" x2="22" y2="17" class="svelte-et6md"></line><line x1="17" y1="7" x2="22" y2="7" class="svelte-et6md"></line></svg>'),$c=nt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M9 18V5l12-2v13" class="svelte-et6md"></path><circle cx="6" cy="18" r="3" class="svelte-et6md"></circle><circle cx="18" cy="16" r="3" class="svelte-et6md"></circle></svg>'),Cc=nt('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" class="svelte-et6md"></rect><circle cx="8.5" cy="8.5" r="1.5" class="svelte-et6md"></circle><polyline points="21 15 16 10 5 21" class="svelte-et6md"></polyline></svg>'),Ec=x('<button><!> <span class="svelte-et6md"> </span></button>'),Pc=x('<div class="yoink-dropdown svelte-et6md"><button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button> <button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> batch add urls</button></div>'),qc=x("<div><!> </div>"),Mc=x('<div class="modal-overlay svelte-et6md"><div class="modal svelte-et6md"><div class="modal-title svelte-et6md">playlist detected!</div> <div class="modal-subtitle svelte-et6md">do you want to download just this video, or the whole playlist?</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="5 3 19 12 5 21 5 3" class="svelte-et6md"></polygon></svg> video</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> playlist</button></div> <label class="modal-toggle svelte-et6md"><input type="checkbox" class="svelte-et6md"/> <span class="modal-toggle-switch svelte-et6md"></span> <span class="modal-toggle-label svelte-et6md">remember this choice</span></label> <div class="modal-hint svelte-et6md">this can be changed in <a href="#/settings" class="svelte-et6md">settings</a>!</div></div></div>'),Ic=x('<div class="modal-overlay svelte-et6md"><div class="modal batch-modal svelte-et6md"><div class="modal-title svelte-et6md">batch add urls</div> <div class="modal-subtitle svelte-et6md">paste multiple URLs, one per line</div> <textarea class="batch-textarea svelte-et6md"></textarea> <div class="batch-count svelte-et6md"><span class="svelte-et6md"> </span> urls detected</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md">cancel</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button></div></div></div>'),Bc=x('<!> <main class="svelte-et6md"><div class="branding svelte-et6md"><h1 class="svelte-et6md">yoink<span class="brand-tld svelte-et6md">.tools</span></h1> <!></div> <div class="input-container svelte-et6md"><div class="url-input-wrapper svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" class="svelte-et6md"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" class="svelte-et6md"></path></svg> <input type="text" class="url-input svelte-et6md" placeholder="paste the link here..." autocomplete="off" spellcheck="false"/> <!></div> <div class="format-section svelte-et6md"><div class="segmented-control svelte-et6md"></div> <div><button class="yoink-btn svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-et6md"></path><polyline points="7 10 12 15 17 10" class="svelte-et6md"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-et6md"></line></svg> </button> <button class="yoink-dropdown-toggle svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polyline points="6 9 12 15 18 9" class="svelte-et6md"></polyline></svg></button> <!></div></div> <!></div></main> <!> <!> <!>',1);function Ac(e,t){St(t,!0);const s=()=>Ft(Qt,"$settings",r),[r,i]=us();let a=D(""),l=D("auto"),o=D(!1),c=D(null),f=D(""),g=D(!1),b=D(!1),u=D(!1),h=D(""),_=D(null),j=D(null),m,k=le(()=>n(h).split(`
`).filter(P=>{const I=P.trim();if(!I)return!1;try{return new URL(I),!0}catch{return!1}}).length);const z=[{id:"auto",label:"auto",icon:"bolt"},{id:"video",label:"video",icon:"video"},{id:"audio",label:"audio",icon:"audio"},{id:"images",label:"images",icon:"image"}];function R(){p(j,va[Math.floor(Math.random()*va.length)],!0)}function oe(){var P;(P=n(j))!=null&&P.link&&window.open(n(j).link,"_blank")}function se(){let P=sessionStorage.getItem("yoink_shared_url");if(!P&&window.location.pathname==="/share"){const I=new URLSearchParams(window.location.search),re=(I.get("url")||I.get("text")||"").match(/https?:\/\/[^\s]+/);re&&(P=re[0].replace(/[.,!?;:)\]}>]+$/,"")),history.replaceState(null,"","/#/")}P&&(sessionStorage.removeItem("yoink_shared_url"),p(a,P,!0),setTimeout(()=>Z(),150))}ln(()=>{R(),se()});async function ve(){try{const P=await navigator.clipboard.readText();P&&(p(a,P.trim(),!0),m==null||m.focus())}catch{ke("Could not read clipboard","error")}}function ze(P,I){p(c,P,!0),p(f,I,!0)}function pe(){p(c,null),p(f,"")}function xe(){return new Promise(P=>{p(_,P,!0),p(g,!0)})}function Fe(P,I){I&&Qt.setSetting("playlistPreference",P),n(_)&&n(_)(P),p(_,null),p(g,!1)}function rt(){n(_)&&n(_)(null),p(_,null),p(g,!1)}async function We(P,I=!1){const X=fa(P),re=n(l)==="auto"?"video":n(l);if(re==="images"&&pa(X))return ke("YouTube doesn't support image downloads","error"),null;const E=ga(),M=s();let T=!1;if(re!=="images"&&ha(X))if(M.playlistPreference==="video")T=!1;else if(M.playlistPreference==="playlist")T=!0;else{const F=await xe();if(F===null)return null;T=F==="playlist"}let V="Loading...";try{if(re==="images"){const F=await fetch(`${Pe()}/api/gallery/metadata?url=${encodeURIComponent(X)}`),G=F.headers.get("content-type");F.ok&&(G!=null&&G.includes("application/json"))?V=(await F.json()).title||"Gallery":V=X.substring(0,50)}else{const F=await fetch(`${Pe()}/api/metadata?url=${encodeURIComponent(X)}&playlist=${T}`),G=F.headers.get("content-type");if(F.ok&&(G!=null&&G.includes("application/json"))){const ue=await F.json();if(V=ue.title||"Unknown",ue.usingCookies&&ke("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3),ue.clipNote){const U=ue.clipNote.toLowerCase().includes("warning")||ue.originalDuration>600;ke(ue.clipNote,U?"warning":"info",6e3)}}else if(!F.ok&&(G!=null&&G.includes("application/json"))){const ue=await F.json();if(ue.clipUnsupported)return ke("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),null;throw new Error(ue.error||"Metadata fetch failed")}else V=X.substring(0,50)}}catch{V=X.substring(0,50)}const N={id:E,title:V,url:X,format:re,stage:I?"starting":"queued",status:I?"initializing...":"in queue",progress:0,isPlaylist:T,formatDisplay:re==="images"?"images":re==="audio"?M.audioFormat:`${M.quality} ${M.container}`,startTime:I?Date.now():null,failedVideos:[]};return vt.add(N),I&&vt.startDownload(N),N}async function Z(){const P=n(a).trim();if(!P){ke("Please enter a URL","error");return}const I=fa(P);try{new URL(I)}catch{ke("Please enter a valid URL","error");return}if(bo(I)&&p(j,{text:"okay dude are you just gonna download porn"},!0),n(l)==="images"&&pa(I)){ke("YouTube doesn't support image downloads â use video or audio","error");return}p(o,!0);const X=n(l)==="auto"?"video":n(l),re=s();let E=!1;if(X!=="images"&&ha(I))if(re.playlistPreference==="video")E=!1;else if(re.playlistPreference==="playlist")E=!0;else{const T=await xe();if(T===null){p(o,!1);return}E=T==="playlist"}const M=ga();try{ze("loading",X==="images"?"fetching gallery info...":"fetching video info...");let T;if(X==="images"){const U=await fetch(`${Pe()}/api/gallery/metadata?url=${encodeURIComponent(I)}`),ce=U.headers.get("content-type");if(!U.ok){let ae="Failed to fetch gallery info";if(ce!=null&&ce.includes("application/json"))ae=(await U.json()).error||ae;else{const $e=await U.text();ae=$e.includes("Cloudflare")||$e.includes("403")?"Access denied (VPN blocked?)":`Server error: ${U.status}`}throw new Error(ae)}T=await U.json(),T.title=T.title||"Gallery"}else{const U=await fetch(`${Pe()}/api/metadata?url=${encodeURIComponent(I)}&playlist=${E}`),ce=U.headers.get("content-type");if(!U.ok){let ae="Failed to fetch metadata";if(ce!=null&&ce.includes("application/json")){const $e=await U.json();if($e.clipUnsupported){ze("error","Could not parse YouTube clip"),ke("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),p(o,!1);return}ae=$e.error||ae}else{const $e=await U.text();ae=`Server error ${U.status} (likely VPN blocked)`}throw new Error(ae)}T=await U.json()}const V=T.title,N=T.isPlaylist&&E,F=X==="images",G=T.videoCount||T.imageCount||0;T.usingCookies&&ke("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3);const ue={id:M,title:V,url:I,format:X,stage:"starting",status:"initializing...",progress:0,isPlaylist:N,isGallery:F,videoCount:G,currentVideo:0,currentVideoTitle:"",formatDisplay:X==="images"?"images":X==="audio"?re.audioFormat:`${re.quality} ${re.container}`,failedVideos:[],startTime:Date.now()};vt.add(ue),vt.startDownload(ue),p(a,""),pe()}catch(T){ze("error",T.message||"Download failed"),ke(T.message||"Download failed","error")}finally{p(o,!1)}}function Y(P){P.key==="Enter"&&Z()}async function he(){p(u,!1);const P=n(a).trim();if(!P){ke("Please enter a URL","error");return}try{new URL(P)}catch{ke("Please enter a valid URL","error");return}await We(P),p(a,"")}function Q(){p(u,!1),p(h,""),p(b,!0)}async function J(){const P=n(h).split(`
`).map(I=>I.trim()).filter(I=>{try{return new URL(I),!0}catch{return!1}});if(P.length===0){ke("No valid URLs found","error");return}p(b,!1),ke(`Adding ${P.length} URLs to queue...`,"info");for(const I of P)await We(I,!1);ke(`${P.length} items added to queue`,"success")}let je=D(!1);var B=Bc();Ot("click",Ar,P=>{P.target.closest(".yoink-btn-wrapper")||p(u,!1)});var ee=Ee(B);hc(ee,{extraContent:I=>{bc(I,{})}});var W=d(ee,2),me=v(W),Te=d(v(me),2);{var $=P=>{var I=xc();let X;I.__click=oe;var re=v(I);L(E=>{X=we(I,1,"splash svelte-et6md",null,X,E),cn(I,n(j).link?"cursor: pointer;":""),q(re,n(j).text)},[()=>{var E,M,T;return{fancy:(E=n(j).classes)==null?void 0:E.includes("fancy"),clickable:(M=n(j).classes)==null?void 0:M.includes("clickable"),rainbow:(T=n(j).classes)==null?void 0:T.includes("rainbow")}}]),y(P,I)};A(Te,P=>{n(j)&&P($)})}var ne=d(me,2),H=v(ne),O=d(v(H),2);O.__keydown=Y,Dn(O,P=>m=P,()=>m);var S=d(O,2);{var C=P=>{var I=jc();I.__click=()=>{p(a,""),m==null||m.focus()},y(P,I)},te=P=>{var I=Sc();I.__click=ve,y(P,I)};A(S,P=>{n(a)?P(C):P(te,!1)})}var ie=d(H,2),ge=v(ie);Ue(ge,21,()=>z,Ge,(P,I)=>{var X=Ec();let re;X.__click=()=>p(l,n(I).id,!0);var E=v(X);{var M=F=>{var G=zc();y(F,G)},T=F=>{var G=Je(),ue=Ee(G);{var U=ae=>{var $e=Tc();y(ae,$e)},ce=ae=>{var $e=Je(),Re=Ee($e);{var de=Ie=>{var Ae=$c();y(Ie,Ae)},qe=Ie=>{var Ae=Je(),He=Ee(Ae);{var Ce=Oe=>{var Ye=Cc();y(Oe,Ye)};A(He,Oe=>{n(I).icon==="image"&&Oe(Ce)},!0)}y(Ie,Ae)};A(Re,Ie=>{n(I).icon==="audio"?Ie(de):Ie(qe,!1)},!0)}y(ae,$e)};A(ue,ae=>{n(I).icon==="video"?ae(U):ae(ce,!1)},!0)}y(F,G)};A(E,F=>{n(I).icon==="bolt"?F(M):F(T,!1)})}var V=d(E,2),N=v(V);L(()=>{re=we(X,1,"segment svelte-et6md",null,re,{active:n(l)===n(I).id}),q(N,n(I).label)}),y(P,X)});var K=d(ge,2);let ye;var Be=v(K);Be.__click=Z;var De=d(v(Be)),ut=d(Be,2);ut.__click=P=>{P.stopPropagation(),p(u,!n(u))};var Xe=d(ut,2);{var dt=P=>{var I=Pc(),X=v(I);X.__click=he;var re=d(X,2);re.__click=Q,y(P,I)};A(Xe,P=>{n(u)&&P(dt)})}var at=d(ie,2);{var wt=P=>{var I=qc(),X=v(I);{var re=M=>{Si(M)};A(X,M=>{n(c)==="loading"&&M(re)})}var E=d(X);L(()=>{we(I,1,`status ${n(c)??""}`,"svelte-et6md"),q(E,` ${n(f)??""}`)}),y(P,I)};A(at,P=>{n(c)&&P(wt)})}var ft=d(W,2);_c(ft);var it=d(ft,2);{var bt=P=>{var I=Mc();I.__click=N=>{N.target===N.currentTarget&&rt()};var X=v(I),re=d(v(X),4),E=v(re);E.__click=()=>Fe("video",n(je));var M=d(E,2);M.__click=()=>Fe("playlist",n(je));var T=d(re,2),V=v(T);gi(V,()=>n(je),N=>p(je,N)),y(P,I)};A(it,P=>{n(g)&&P(bt)})}var pt=d(it,2);{var ht=P=>{var I=Ic();I.__click=G=>{G.target===G.currentTarget&&p(b,!1)};var X=v(I),re=d(v(X),4);xs(re,"placeholder",`https://youtube.com/watch?v=...
https://youtube.com/watch?v=...
https://youtube.com/watch?v=...`);var E=d(re,2),M=v(E),T=v(M),V=d(E,2),N=v(V);N.__click=()=>p(b,!1);var F=d(N,2);F.__click=J,L(()=>q(T,n(k))),bn(re,()=>n(h),G=>p(h,G)),y(P,I)};A(pt,P=>{n(b)&&P(ht)})}L(()=>{ye=we(K,1,"yoink-btn-wrapper svelte-et6md",null,ye,{open:n(u)}),Be.disabled=n(o),q(De,` ${n(o)?"loading...":"yoink"}`)}),Ot("focus",O,pe),bn(O,()=>n(a),P=>p(a,P)),y(e,B),zt(),i()}Ut(["click","keydown"]);var Dc=x('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> <span>Download</span>',1),Rc=x('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> <span>Convert</span>',1),Oc=x('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> <span>Compress</span>',1),Nc=x('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span>Settings</span>',1),Fc=x('<header class="svelte-67r2h0"><div class="header-center svelte-67r2h0"><a href="#/" class="logo-link svelte-67r2h0"><span class="logo-text svelte-67r2h0">yoink</span> <span class="logo-tld svelte-67r2h0">.tools</span></a></div> <nav class="header-right svelte-67r2h0"><!> <!> <!> <!></nav></header>');function vn(e){var t=Fc(),s=d(v(t),2),r=v(s);hs(r,{href:"/",children:(o,c)=>{var f=Dc();y(o,f)}});var i=d(r,2);hs(i,{href:"/convert",children:(o,c)=>{var f=Rc();y(o,f)}});var a=d(i,2);hs(a,{href:"/compress",children:(o,c)=>{var f=Oc();y(o,f)}});var l=d(a,2);hs(l,{href:"/settings",children:(o,c)=>{var f=Nc();y(o,f)}}),y(e,t)}var Lc=x('<footer class="svelte-1dij6pu"><a href="#/" class="svelte-1dij6pu">yoink.tools</a> - powered by <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-1dij6pu">yt-dlp</a> Â· <a href="#/privacy" class="svelte-1dij6pu">privacy</a></footer>');function On(e){var t=Lc();y(e,t)}var Uc=x("<button><span> </span></button>"),Vc=x("<button> </button>"),Hc=x("<button> </button>"),Jc=x("<button> </button>"),Wc=x(`<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">video</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">video quality</div> <div class="quality-grid svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">if preferred quality isn't available, the next best option will be used. 1080p is recommended for most uses.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">preferred codec</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">h264: best compatibility, max 1080p. av1: best quality & efficiency, supports 8k & HDR. vp9: same quality as av1 but ~2x larger.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">file container</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp4 has the best compatibility. webm is great for web. mkv supports more features but has limited playback support.</p></div></section>`),Gc=x("<button> </button>"),Yc=x("<button> </button>"),Qc=x('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">audio</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio format</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp3: universal compatibility. m4a: better quality at same size. opus: best compression. flac/wav: lossless quality.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio bitrate</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">higher bitrate = better quality but larger file size. 320kbps is CD-quality for most people.</p></div></section>'),Kc=x("<button> </button>"),Xc=x("<button> </button>"),Zc=x('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">downloads</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">filename style</div> <div class="segmented-control svelte-1ozf5k3"></div> <div class="filename-preview svelte-1ozf5k3"><code class="svelte-1ozf5k3"> </code></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">twitter/x gifs as gif</div> <p class="setting-description svelte-1ozf5k3">automatically convert twitter/x "gifs" (which are actually videos) to real gif files. turn off to keep them as mp4.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">playlist behavior</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">when a link contains a playlist, should we download just the video or the entire playlist? "ask me" will show a popup each time.</p></div></section>'),ev=x('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">advanced</h2> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">allow h265 codec</div> <p class="setting-description svelte-1ozf5k3">enables downloading h265/HEVC videos for platforms like TikTok. higher quality but may have compatibility issues with some players.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">embed metadata</div> <p class="setting-description svelte-1ozf5k3">include title, artist, and other metadata in downloaded files.</p></div> <button></button></div></div> <div class="divider svelte-1ozf5k3"></div> <button class="reset-btn svelte-1ozf5k3">reset all settings</button></section>'),tv=x(`<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">privacy</h2> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">allow anonymous analytics</div> <p class="setting-description svelte-1ozf5k3">help improve yoink by sharing anonymous usage stats like download format preferences. no personal data or URLs are collected.</p></div> <button></button></div></div> <div class="settings-card highlight svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">your data, your choice</div> <p class="setting-description svelte-1ozf5k3">if you turn off analytics above, <strong class="svelte-1ozf5k3">all data collected from you will be permanently deleted</strong>. no questions asked. if you don't want to be tracked, you shouldn't be - and that means wiping everything.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">what i collect</div> <p class="setting-description svelte-1ozf5k3">when enabled: which file formats are popular, how many downloads happen daily, and general country data (from IP, not stored). i do <strong class="svelte-1ozf5k3">not</strong> collect: URLs you download, video titles, your IP address, or any identifying information.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">why?</div> <p class="setting-description svelte-1ozf5k3">honestly, just for fun! it's cool to see how people use the tool. if you'd rather not participate, flip the toggle above.</p> <p class="setting-description svelte-1ozf5k3"><a href="#/privacy" class="svelte-1ozf5k3">read the full privacy policy</a></p></div></section>`),sv=x('<!> <main class="svelte-1ozf5k3"><div class="page-header svelte-1ozf5k3"><h1 class="svelte-1ozf5k3">settings</h1> <p class="svelte-1ozf5k3">customize your download experience</p></div> <nav class="settings-nav svelte-1ozf5k3"></nav> <!> <!> <!> <!> <!></main> <!>',1);function nv(e,t){St(t,!0);const s=()=>Ft(Qt,"$settings",r),[r,i]=us();let a=D("video"),l=le(s);const o=[{id:"video",label:"video"},{id:"audio",label:"audio"},{id:"downloads",label:"downloads"},{id:"advanced",label:"advanced"},{id:"privacy",label:"privacy"}],c=["best","4k","1440p","1080p","720p","480p","360p"],f={best:"8k+","4k":"4k","1440p":"1440p","1080p":"1080p","720p":"720p","480p":"480p","360p":"360p"},g=[{value:"h264",label:"h264 + aac"},{value:"av1",label:"av1 + opus"},{value:"vp9",label:"vp9 + opus"}],b=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mkv",label:"mkv"}],u=[{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"opus",label:"opus"},{value:"flac",label:"flac"},{value:"wav",label:"wav"}],h=[{value:"320",label:"320 kbps"},{value:"256",label:"256 kbps"},{value:"192",label:"192 kbps"},{value:"128",label:"128 kbps"}],_=[{value:"classic",label:"classic"},{value:"basic",label:"basic"},{value:"pretty",label:"pretty"},{value:"nerdy",label:"nerdy"}],j=[{value:"ask",label:"ask me"},{value:"video",label:"just video"},{value:"playlist",label:"full playlist"}];let m=le(()=>{const B=n(l).container||"mp4",ee={classic:`Video Title (${n(l).quality}).${B}`,basic:`Video Title.${B}`,pretty:`Video Title - Author (${n(l).quality}, ${n(l).codec}).${B}`,nerdy:`Video_Title_${n(l).quality}_${n(l).codec}_aac.${B}`};return ee[n(l).filenameStyle]||ee.basic});function k(B,ee){Qt.setSetting(B,ee)}function z(){confirm("Reset all settings to defaults?")&&(Qt.reset(),ke("Settings reset!","success"))}async function R(){n(l).analytics!==!1?confirm(`This will delete ALL your tracking data from the server!

When you opt out, all collected data is permanently deleted.

Are you sure?`)&&(Qt.setSetting("analytics",!1),(await rc()).deleted?ke("Analytics disabled & data deleted","success"):ke("Analytics disabled","info")):(Qt.setSetting("analytics",!0),ke("Analytics enabled - thanks!","success"))}var oe=sv(),se=Ee(oe);vn(se);var ve=d(se,2),ze=d(v(ve),2);Ue(ze,21,()=>o,Ge,(B,ee)=>{var W=Uc();let me;W.__click=()=>p(a,n(ee).id,!0);var Te=v(W),$=v(Te);L(()=>{me=we(W,1,"settings-nav-item svelte-1ozf5k3",null,me,{active:n(a)===n(ee).id}),q($,n(ee).label)}),y(B,W)});var pe=d(ze,2);{var xe=B=>{var ee=Wc(),W=d(v(ee),2),me=d(v(W),2);Ue(me,21,()=>c,Ge,(O,S)=>{var C=Vc();let te;C.__click=()=>k("quality",n(S));var ie=v(C);L(()=>{te=we(C,1,"quality-option svelte-1ozf5k3",null,te,{active:n(l).quality===n(S)}),q(ie,f[n(S)])}),y(O,C)});var Te=d(W,2),$=d(v(Te),2);Ue($,21,()=>g,Ge,(O,S)=>{var C=Hc();let te;C.__click=()=>k("codec",n(S).value);var ie=v(C);L(()=>{te=we(C,1,"segment svelte-1ozf5k3",null,te,{active:n(l).codec===n(S).value}),q(ie,n(S).label)}),y(O,C)});var ne=d(Te,2),H=d(v(ne),2);Ue(H,21,()=>b,Ge,(O,S)=>{var C=Jc();let te;C.__click=()=>k("container",n(S).value);var ie=v(C);L(()=>{te=we(C,1,"segment svelte-1ozf5k3",null,te,{active:n(l).container===n(S).value}),q(ie,n(S).label)}),y(O,C)}),y(B,ee)};A(pe,B=>{n(a)==="video"&&B(xe)})}var Fe=d(pe,2);{var rt=B=>{var ee=Qc(),W=d(v(ee),2),me=d(v(W),2);Ue(me,21,()=>u,Ge,(ne,H)=>{var O=Gc();let S;O.__click=()=>k("audioFormat",n(H).value);var C=v(O);L(()=>{S=we(O,1,"segment svelte-1ozf5k3",null,S,{active:n(l).audioFormat===n(H).value}),q(C,n(H).label)}),y(ne,O)});var Te=d(W,2),$=d(v(Te),2);Ue($,21,()=>h,Ge,(ne,H)=>{var O=Yc();let S;O.__click=()=>k("audioBitrate",n(H).value);var C=v(O);L(()=>{S=we(O,1,"segment svelte-1ozf5k3",null,S,{active:n(l).audioBitrate===n(H).value}),q(C,n(H).label)}),y(ne,O)}),y(B,ee)};A(Fe,B=>{n(a)==="audio"&&B(rt)})}var We=d(Fe,2);{var Z=B=>{var ee=Zc(),W=d(v(ee),2),me=d(v(W),2);Ue(me,21,()=>_,Ge,(ge,K)=>{var ye=Kc();let Be;ye.__click=()=>k("filenameStyle",n(K).value);var De=v(ye);L(()=>{Be=we(ye,1,"segment svelte-1ozf5k3",null,Be,{active:n(l).filenameStyle===n(K).value}),q(De,n(K).label)}),y(ge,ye)});var Te=d(me,2),$=v(Te),ne=v($),H=d(W,2),O=v(H),S=d(v(O),2);let C;S.__click=()=>k("twitterGifs",!(!n(l).twitterGifs||n(l).twitterGifs===void 0));var te=d(H,2),ie=d(v(te),2);Ue(ie,21,()=>j,Ge,(ge,K)=>{var ye=Xc();let Be;ye.__click=()=>k("playlistPreference",n(K).value==="ask"?null:n(K).value);var De=v(ye);L(()=>{Be=we(ye,1,"segment svelte-1ozf5k3",null,Be,{active:(n(l).playlistPreference===null?"ask":n(l).playlistPreference)===n(K).value}),q(De,n(K).label)}),y(ge,ye)}),L(()=>{q(ne,n(m)),C=we(S,1,"toggle svelte-1ozf5k3",null,C,{active:n(l).twitterGifs!==!1})}),y(B,ee)};A(We,B=>{n(a)==="downloads"&&B(Z)})}var Y=d(We,2);{var he=B=>{var ee=ev(),W=d(v(ee),2),me=v(W),Te=d(v(me),2);let $;Te.__click=()=>k("h265",!n(l).h265);var ne=d(W,2),H=v(ne),O=d(v(H),2);let S;O.__click=()=>k("metadata",n(l).metadata===!1);var C=d(ne,4);C.__click=z,L(()=>{$=we(Te,1,"toggle svelte-1ozf5k3",null,$,{active:n(l).h265}),S=we(O,1,"toggle svelte-1ozf5k3",null,S,{active:n(l).metadata!==!1})}),y(B,ee)};A(Y,B=>{n(a)==="advanced"&&B(he)})}var Q=d(Y,2);{var J=B=>{var ee=tv(),W=d(v(ee),2),me=v(W),Te=d(v(me),2);let $;Te.__click=R,L(()=>$=we(Te,1,"toggle svelte-1ozf5k3",null,$,{active:n(l).analytics!==!1})),y(B,ee)};A(Q,B=>{n(a)==="privacy"&&B(J)})}var je=d(ve,2);On(je),y(e,oe),zt(),i()}Ut(["click"]);var rv=x('<span class="progress-label svelte-1untuf7"> </span>'),av=x('<div class="progress-wrapper svelte-1untuf7"><!> <div class="progress-track svelte-1untuf7" role="progressbar"><div class="progress-fill svelte-1untuf7"></div></div></div>');function Ti(e,t){let s=zr(t,"percent",3,0),r=zr(t,"label",3,""),i=le(()=>Math.min(100,Math.max(0,s())));var a=av(),l=v(a);{var o=g=>{var b=rv(),u=v(b);L(()=>q(u,r())),y(g,b)};A(l,g=>{r()&&g(o)})}var c=d(l,2);xs(c,"aria-valuemin",0),xs(c,"aria-valuemax",100);var f=v(c);L(()=>{xs(c,"aria-valuenow",n(i)),cn(f,`width: ${n(i)??""}%`)}),y(e,a)}const dr=50*1024*1024;async function $i(e,t){const s=Pe(),r=Math.ceil(e.size/dr),i=await fetch(`${s}/api/upload/init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e.name,fileSize:e.size,totalChunks:r})});if(!i.ok){let o="Failed to initialize upload";try{o=(await i.json()).error||o}catch{o=await i.text().catch(()=>o)}throw new Error(o)}const{uploadId:a}=await i.json();for(let o=0;o<r;o++){const c=o*dr,f=Math.min(c+dr,e.size),g=e.slice(c,f),b=new FormData;b.append("chunk",g);const u=await fetch(`${s}/api/upload/chunk/${a}/${o}`,{method:"POST",body:b});if(!u.ok){let _=`Failed to upload chunk ${o+1}`;try{_=(await u.json()).error||_}catch{_=await u.text().catch(()=>_)}throw new Error(_)}const h=(o+1)/r*100;t(h)}const l=await fetch(`${s}/api/upload/complete/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!l.ok){let o="Failed to complete upload";try{o=(await l.json()).error||o}catch{o=await l.text().catch(()=>o)}throw new Error(o)}return await l.json()}var iv=x('<button type="button"><svg class="drop-zone-icon svelte-17hyuhr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-17hyuhr">drop a file here or click to browse</p> <p class="drop-zone-hint svelte-17hyuhr">supports video and audio files (max 15GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>'),lv=nt('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),ov=nt('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),cv=x("<button> </button>"),vv=x('<div class="file-info svelte-17hyuhr"><div class="file-header svelte-17hyuhr"><div class="file-icon svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><!></svg></div> <div class="file-details svelte-17hyuhr"><div class="file-name svelte-17hyuhr"> </div> <div class="file-size svelte-17hyuhr"> </div></div> <button class="file-remove svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="convert-options svelte-17hyuhr"><div class="option-label svelte-17hyuhr">convert to</div> <div class="segmented-control svelte-17hyuhr"></div></div> <button class="convert-btn svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> </button></div>'),uv=x('<div class="progress-container svelte-17hyuhr"><!></div>'),dv=x("<div> </div>"),fv=x('<!> <main class="svelte-17hyuhr"><div class="page-header svelte-17hyuhr"><h1 class="svelte-17hyuhr">convert</h1> <p class="svelte-17hyuhr">change video and audio file formats</p></div> <div class="converter svelte-17hyuhr"><!> <!> <!></div></main> <!>',1);function pv(e,t){St(t,!0);let s=D(null),r=D("mp4"),i=D(!1),a=D(0),l=D(""),o=D(null),c=D(""),f=D(!1),g;const b=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"wav",label:"wav"}];function u(Z){return Z.type.startsWith("audio/")||["mp3","m4a","wav","flac","ogg","opus"].some(Y=>Z.name.toLowerCase().endsWith("."+Y))}function h(Z){if(!Z)return;const Y=15*1024*1024*1024;if(Z.size>Y){p(o,"error"),p(c,"File too large. Maximum size is 15GB.");return}p(s,Z,!0),p(o,null),p(c,"")}function _(){p(s,null),p(a,0),p(l,""),p(o,null),p(c,""),g&&(g.value="")}async function j(Z){let Y="";try{Y=await(await Z.blob()).text()}catch{Y=await Z.text().catch(()=>"")}try{return JSON.parse(Y).error||`Request failed with status ${Z.status}`}catch{return Y||`Request failed with status ${Z.status}`}}async function m(){if(!n(s)||n(i))return;p(i,!0),p(a,0),p(l,"Uploading..."),p(o,null),p(c,"");const Z=n(s).size>90*1024*1024;let Y=null;try{Y=Hr();let he;if(Z){const{filePath:B,fileName:ee}=await $i(n(s),$=>{p(a,$,!0),p(l,"Uploading...")});p(a,0),p(l,"Converting...");const W=await fetch(`${Pe()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:B,fileName:ee,format:n(r)})});if(!W.ok)throw new Error(await j(W));const{jobId:me}=await W.json();let Te=0;for(;;){if(Te>=300)throw new Error("Conversion timed out after 10 minutes");Te++,await new Promise(S=>setTimeout(S,2e3));const $=new AbortController,ne=setTimeout(()=>$.abort(),1e4);let H;try{H=await fetch(`${Pe()}/api/job/${me}/status`,{signal:$.signal})}finally{clearTimeout(ne)}if(!H.ok)throw H.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const O=await H.json();if(O.status==="error")throw new Error(O.error||"Conversion failed");if(p(a,O.progress||0,!0),p(l,O.message||"processing...",!0),O.status==="complete")break}he=await fetch(`${Pe()}/api/job/${me}/download`)}else he=await new Promise((B,ee)=>{const W=new XMLHttpRequest;W.open("POST",`${Pe()}/api/convert`),W.upload.onprogress=Te=>{if(Te.lengthComputable){const $=Math.round(Te.loaded/Te.total*90);p(a,$,!0),p(l,`uploading... ${$}%`)}},W.onload=()=>{p(a,95),p(l,"processing..."),B(new Response(W.response,{status:W.status,statusText:W.statusText,headers:{"Content-Disposition":W.getResponseHeader("Content-Disposition")||""}}))},W.onerror=()=>ee(new Error("Network error during upload")),W.responseType="blob";const me=new FormData;me.append("file",n(s)),me.append("format",n(r)),W.send(me)});if(!he.ok)throw new Error(await j(he));p(a,100),p(l,"complete!");const Q=he.headers.get("Content-Disposition");let J=n(s).name.replace(/\.[^.]+$/,"")+"."+n(r);if(Q){const B=Q.match(/filename="?([^"]+)"?/);B&&(J=B[1])}const je=await he.blob();yi(je,J),p(o,"success"),p(c,"conversion complete! download started."),Y&&zn(Y)}catch(he){p(o,"error"),p(c,he.message||"conversion failed",!0),p(a,0),p(l,""),Y&&zn(Y)}finally{p(i,!1)}}var k=fv(),z=Ee(k);vn(z);var R=d(z,2),oe=d(v(R),2),se=v(oe);{var ve=Z=>{var Y=iv();let he;Y.__click=()=>g==null?void 0:g.click();var Q=d(v(Y),6);Q.__change=J=>{var je;h((je=J.target.files)==null?void 0:je[0]),J.target.value=""},Dn(Q,J=>g=J,()=>g),L(()=>he=we(Y,1,"drop-zone svelte-17hyuhr",null,he,{dragover:n(f)})),Ot("dragover",Y,J=>{J.preventDefault(),p(f,!0)}),Ot("dragleave",Y,J=>{J.preventDefault(),p(f,!1)}),Ot("drop",Y,J=>{var je,B;J.preventDefault(),p(f,!1),h((B=(je=J.dataTransfer)==null?void 0:je.files)==null?void 0:B[0])}),y(Z,Y)},ze=Z=>{var Y=vv(),he=v(Y),Q=v(he),J=v(Q),je=v(J);{var B=ie=>{var ge=lv();y(ie,ge)},ee=ie=>{var ge=ov();y(ie,ge)};A(je,ie=>{u(n(s))?ie(B):ie(ee,!1)})}var W=d(Q,2),me=v(W),Te=v(me),$=d(me,2),ne=v($),H=d(W,2);H.__click=_;var O=d(he,2),S=d(v(O),2);Ue(S,21,()=>b,Ge,(ie,ge)=>{var K=cv();let ye;K.__click=()=>p(r,n(ge).value,!0);var Be=v(K);L(()=>{ye=we(K,1,"segment svelte-17hyuhr",null,ye,{active:n(r)===n(ge).value}),q(Be,n(ge).label)}),y(ie,K)});var C=d(O,2);C.__click=m;var te=d(v(C));L(ie=>{xs(me,"title",n(s).name),q(Te,n(s).name),q(ne,ie),C.disabled=n(i),q(te,` ${n(i)?"converting...":"convert"}`)},[()=>zi(n(s).size)]),y(Z,Y)};A(se,Z=>{n(s)?Z(ze,!1):Z(ve)})}var pe=d(se,2);{var xe=Z=>{var Y=uv(),he=v(Y);Ti(he,{get percent(){return n(a)},get label(){return n(l)}}),y(Z,Y)};A(pe,Z=>{n(i)&&Z(xe)})}var Fe=d(pe,2);{var rt=Z=>{var Y=dv(),he=v(Y);L(()=>{we(Y,1,`status ${n(o)??""}`,"svelte-17hyuhr"),q(he,n(c))}),y(Z,Y)};A(Fe,Z=>{n(o)&&Z(rt)})}var We=d(R,2);On(We),y(e,k),zt()}Ut(["click","change"]);Ut(["click","keydown"]);var hv=x('<button type="button"><svg class="drop-zone-icon svelte-15o2uhu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-15o2uhu">drop a video here or click to browse</p> <p class="drop-zone-hint svelte-15o2uhu">supports mp4, webm, mov, mkv, avi (max 15GB)</p> <input type="file" accept="video/*" style="display: none;"/></button>'),gv=x('<div class="file-info svelte-15o2uhu"><div class="file-header svelte-15o2uhu"><div class="file-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-15o2uhu"><div class="file-name svelte-15o2uhu"> </div> <div class="file-size svelte-15o2uhu"> </div></div> <button class="file-remove svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-15o2uhu"><span> </span> <span> </span></div></div>'),_v=x('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),mv=x('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),yv=x('<div class="progress-container svelte-15o2uhu"><div class="progress-header svelte-15o2uhu"><span class="progress-status svelte-15o2uhu"> </span> <span class="progress-percent svelte-15o2uhu"> </span></div> <!> <div class="progress-details svelte-15o2uhu"> </div></div>'),wv=x('<div class="result-container svelte-15o2uhu"><div class="result-header svelte-15o2uhu"><div class="result-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-15o2uhu">compression complete!</div></div> <div class="result-stats svelte-15o2uhu"><div class="result-stat svelte-15o2uhu"><div class="result-stat-value svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">original</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value arrow svelte-15o2uhu">-></div> <div class="result-stat-label svelte-15o2uhu"></div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">compressed</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">saved</div></div></div> <button class="result-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> compress another</button></div>'),bv=x('<div class="quality-overlay svelte-15o2uhu"><div class="quality-modal svelte-15o2uhu"><div class="quality-modal-title svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg> quality warning</div> <div class="quality-gauge svelte-15o2uhu"><div class="quality-gauge-bg svelte-15o2uhu"></div> <div class="quality-gauge-mask svelte-15o2uhu"></div> <div class="quality-gauge-needle svelte-15o2uhu"></div> <div class="quality-gauge-center svelte-15o2uhu"></div> <div class="quality-gauge-value svelte-15o2uhu"><span> </span> <span class="quality-gauge-unit svelte-15o2uhu">kbps</span></div></div> <div class="quality-modal-message svelte-15o2uhu">Your video is <strong class="svelte-15o2uhu"> </strong> long. At this size, the estimated bitrate is very low and the output <strong class="svelte-15o2uhu">may look blocky or blurry</strong>. <br/><br/> For better results, try a <strong class="svelte-15o2uhu">shorter clip</strong> or a <strong class="svelte-15o2uhu">larger target size</strong>.</div> <div class="quality-modal-buttons svelte-15o2uhu"><button class="quality-modal-btn cancel svelte-15o2uhu">cancel</button> <button class="quality-modal-btn proceed svelte-15o2uhu">compress anyway</button></div></div></div>'),kv=x('<!> <main class="svelte-15o2uhu"><div class="page-header svelte-15o2uhu"><h1 class="svelte-15o2uhu">compress</h1> <p class="svelte-15o2uhu">shrink videos for discord, email, or anywhere!</p></div> <div class="compress-container svelte-15o2uhu"><!> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">target size</div> <div class="size-description svelte-15o2uhu">choose a size limit or enter a custom size</div> <div class="size-grid svelte-15o2uhu"></div> <div class="custom-size-row svelte-15o2uhu"><input type="number" class="custom-size-input svelte-15o2uhu" placeholder="custom" min="1" max="4096"/> <span class="custom-size-suffix svelte-15o2uhu">MB</span></div> <div class="estimate svelte-15o2uhu"><span class="estimate-label svelte-15o2uhu">estimated quality</span> <span> </span></div></div> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">encoding preset</div> <div class="size-description svelte-15o2uhu">quality = better compression, slower | fast = quicker encoding</div> <div class="preset-grid svelte-15o2uhu"></div> <label class="checkbox-row svelte-15o2uhu"><input type="checkbox" class="svelte-15o2uhu"/> <span class="svelte-15o2uhu">downscale for better quality (reduces blockiness)</span></label></div> <button class="compress-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg> </button> <!> <!></div></main> <!> <!>',1);function xv(e,t){St(t,!0);let s=D(null),r=D(0),i=D(0),a=D(0),l=D(50),o=D(47),c=D(""),f=D(!1),g=D("balanced"),b=D(!1),u=D(!1),h=D(0),_=D(""),j=D(""),m=D(!1),k=D(""),z=D(""),R=D(""),oe=D(!1),se=D(!1),ve;const ze=[{size:8,actual:7.5,label:"MB free"},{size:10,actual:9.5,label:"MB"},{size:50,actual:47,label:"MB basic"},{size:100,actual:95,label:"MB"},{size:500,actual:475,label:"MB nitro"}],pe=[{id:"fast",label:"fast",sublabel:"quick encode"},{id:"balanced",label:"balanced",sublabel:"recommended"},{id:"quality",label:"quality",sublabel:"best results"}];let xe=le(()=>{if(!n(s)||!n(r))return 0;const E=n(o)*1024*1024,M=128*1024,T=E-M/8*n(r);return Math.floor(T*8/n(r)/1024)}),Fe=le(()=>!n(s)||!n(r)?"select a file to see estimate":n(s).size/(1024*1024)<=n(o)?`already under ${n(l)}MB!`:n(xe)<500?`~${n(xe)} kbps video - very low quality (may be blocky)`:n(xe)<1e3?`~${n(xe)} kbps video - low quality`:n(xe)<2500?`~${n(xe)} kbps video - medium quality`:n(xe)<5e3?`~${n(xe)} kbps video - good quality`:`~${n(xe)} kbps video - excellent quality`),rt=le(()=>n(s)&&n(r)&&n(xe)<500&&n(s).size/(1024*1024)>n(o)),We=le(()=>-90+Math.min(n(xe),2e3)/2e3*180),Z=le(()=>{if(!n(r))return"--:--";const E=Math.floor(n(r)/60),M=Math.floor(n(r)%60);return`${E}:${M.toString().padStart(2,"0")}`}),Y=le(()=>!n(i)||!n(a)?"unknown":`${n(i)}x${n(a)}`);function he(E){return new Promise(M=>{const T=document.createElement("video");T.preload="metadata",T.onloadedmetadata=()=>{URL.revokeObjectURL(T.src),M({duration:T.duration,width:T.videoWidth,height:T.videoHeight})},T.onerror=()=>{M({duration:0,width:0,height:0})},T.src=URL.createObjectURL(E)})}async function Q(E){if(!E)return;if(!E.type.startsWith("video/")){ke("Please select a video file","error");return}const M=15*1024*1024*1024;if(E.size>M){ke("File too large. Maximum size is 15GB.","error");return}p(s,E,!0),p(m,!1);const T=await he(E);p(r,T.duration,!0),p(i,T.width,!0),p(a,T.height,!0)}function J(){p(s,null),p(r,0),p(i,0),p(a,0),p(h,0),p(_,""),p(j,""),p(m,!1),p(c,""),p(f,!1),ve&&(ve.value="")}function je(E){p(l,E.size,!0),p(o,E.actual,!0),p(f,!1),p(c,"")}function B(E){p(c,E,!0);const M=parseInt(E);M&&M>0&&(p(l,M,!0),p(o,M*.95),p(f,!0))}function ee(){(!n(c)||parseInt(n(c))<=0)&&n(f)&&(p(l,50),p(o,47),p(f,!1))}function W(){if(!n(s))return;if(n(s).size/(1024*1024)<=n(o)){ke(`File is already under ${n(l)}MB!`,"success");return}n(xe)<500?p(se,!0):me()}async function me(){if(!n(s)||n(u))return;if(p(se,!1),n(s).size/(1024*1024)<=n(o)){ke(`File is already under ${n(l)}MB!`,"success");return}p(u,!0),p(h,0),p(_,"uploading..."),p(j,"sending file to server..."),p(m,!1);const M=Date.now().toString()+Math.random().toString(36).substr(2,9),T=n(s).size>90*1024*1024;let V=null,N=null;try{V=Hr(),N=Tr(M,{onMessage:de=>{de.stage==="compressing"&&(p(_,"compressing..."),de.progress!==void 0&&p(h,de.progress,!0),de.message&&p(j,de.message,!0))},onError:()=>{}});let F;if(T){p(_,"uploading..."),p(j,"large file detected, uploading in chunks...");const de=await $i(n(s),Le=>{p(h,Le,!0),p(j,"uploading chunks...")}),{filePath:qe,fileName:Ie}=de;p(h,0),p(_,"compressing..."),p(j,"starting compression...");const Ae=await fetch(`${Pe()}/api/compress-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:qe,fileName:Ie,targetSize:n(o).toString(),duration:n(r).toString(),progressId:M,preset:n(g),downscale:n(b)})});if(!Ae.ok){const Le=await Ae.json();throw new Error(Le.error||"Failed to start compression")}const{jobId:He}=await Ae.json(),Ce=Date.now(),Oe=1800*1e3;let Ye=0;for(;Date.now()-Ce<=Oe;){await new Promise(Le=>setTimeout(Le,2e3));try{const Le=new AbortController,Vt=setTimeout(()=>Le.abort(),1e4);let lt;try{lt=await fetch(`${Pe()}/api/job/${He}/status`,{signal:Le.signal})}finally{clearTimeout(Vt)}if(!lt.ok)throw new Error(`Server returned ${lt.status}`);const ot=await lt.json();if(Ye=0,ot.status==="error")throw new Error(ot.error||"Compression failed");if(ot.progress!==void 0&&p(h,ot.progress,!0),ot.message&&p(j,ot.message,!0),ot.status==="complete")break}catch(Le){if(Ye++,Ye>=3)throw new Error(`Failed to check job status after 3 attempts: ${Le.message}`)}}if(Date.now()-Ce>Oe)throw new Error("Job timed out after 30 minutes.");F=await fetch(`${Pe()}/api/job/${He}/download`)}else{const de=new FormData;de.append("file",n(s)),de.append("targetSize",n(o).toString()),de.append("duration",n(r).toString()),de.append("progressId",M),de.append("preset",n(g)),de.append("downscale",n(b)),F=await fetch(`${Pe()}/api/compress`,{method:"POST",body:de})}if(N&&N.close(),!F.ok){const de=await F.json();throw new Error(de.error||"Compression failed")}const G=await F.blob(),ue=G.size,U=(n(s).size/(1024*1024)).toFixed(1),ce=(ue/(1024*1024)).toFixed(1),ae=Math.round((1-ue/n(s).size)*100);p(k,`${U} MB`),p(z,`${ce} MB`),p(R,`${ae}%`),p(m,!0);const $e=n(s).name.lastIndexOf("."),Re=$e>0?n(s).name.slice(0,$e):n(s).name;yi(G,`${Re}_compressed.mp4`),ke("Compression complete!","success"),V&&zn(V)}catch(F){ke(F.message||"Compression failed","error"),N&&N.close(),V&&zn(V)}finally{p(u,!1),p(h,0),p(_,""),p(j,"")}}var Te=kv(),$=Ee(Te);vn($);var ne=d($,2),H=d(v(ne),2),O=v(H);{var S=E=>{var M=hv();let T;M.__click=()=>ve==null?void 0:ve.click();var V=d(v(M),6);V.__change=N=>{var F;Q((F=N.target.files)==null?void 0:F[0]),N.target.value=""},Dn(V,N=>ve=N,()=>ve),L(()=>T=we(M,1,"drop-zone svelte-15o2uhu",null,T,{dragover:n(oe)})),Ot("dragover",M,N=>{N.preventDefault(),p(oe,!0)}),Ot("dragleave",M,N=>{N.preventDefault(),p(oe,!1)}),Ot("drop",M,N=>{var F,G;N.preventDefault(),p(oe,!1),Q((G=(F=N.dataTransfer)==null?void 0:F.files)==null?void 0:G[0])}),y(E,M)},C=E=>{var M=gv(),T=v(M),V=d(v(T),2),N=v(V),F=v(N),G=d(N,2),ue=v(G),U=d(V,2);U.__click=J;var ce=d(T,2),ae=v(ce),$e=v(ae),Re=d(ae,2),de=v(Re);L(qe=>{xs(N,"title",n(s).name),q(F,n(s).name),q(ue,qe),q($e,`duration: ${(n(r)?n(Z):"unknown")??""}`),q(de,`resolution: ${n(Y)??""}`)},[()=>zi(n(s).size)]),y(E,M)};A(O,E=>{n(s)?E(C,!1):E(S)})}var te=d(O,2),ie=d(v(te),4);Ue(ie,21,()=>ze,Ge,(E,M)=>{var T=_v();let V;T.__click=()=>je(n(M));var N=v(T),F=v(N),G=d(N,2),ue=v(G);L(()=>{V=we(T,1,"size-option svelte-15o2uhu",null,V,{active:!n(f)&&n(l)===n(M).size}),q(F,n(M).size),q(ue,n(M).label)}),y(E,T)});var ge=d(ie,2),K=v(ge);K.__input=E=>B(E.target.value);var ye=d(ge,2),Be=d(v(ye),2);let De;var ut=v(Be),Xe=d(te,2),dt=d(v(Xe),4);Ue(dt,21,()=>pe,Ge,(E,M)=>{var T=mv();let V;T.__click=()=>p(g,n(M).id,!0);var N=v(T),F=v(N),G=d(N,2),ue=v(G);L(()=>{V=we(T,1,"size-option svelte-15o2uhu",null,V,{active:n(g)===n(M).id}),q(F,n(M).label),q(ue,n(M).sublabel)}),y(E,T)});var at=d(dt,2),wt=v(at),ft=d(Xe,2);ft.__click=W;var it=d(v(ft)),bt=d(ft,2);{var pt=E=>{var M=yv(),T=v(M),V=v(T),N=v(V),F=d(V,2),G=v(F),ue=d(T,2);Ti(ue,{get percent(){return n(h)}});var U=d(ue,2),ce=v(U);L(ae=>{q(N,n(_)),q(G,`${ae??""}%`),q(ce,n(j))},[()=>Math.round(n(h))]),y(E,M)};A(bt,E=>{n(u)&&E(pt)})}var ht=d(bt,2);{var P=E=>{var M=wv(),T=d(v(M),2),V=v(T),N=v(V),F=v(N),G=d(V,4),ue=v(G),U=v(ue),ce=d(G,2),ae=v(ce),$e=v(ae),Re=d(T,2);Re.__click=J,L(()=>{q(F,n(k)),q(U,n(z)),q($e,n(R))}),y(E,M)};A(ht,E=>{n(m)&&E(P)})}var I=d(ne,2);{var X=E=>{var M=bv();M.__click=qe=>{qe.target===qe.currentTarget&&p(se,!1)};var T=v(M),V=d(v(T),2),N=d(v(V),4),F=d(N,4),G=v(F),ue=v(G),U=d(V,2),ce=d(v(U)),ae=v(ce),$e=d(U,2),Re=v($e);Re.__click=()=>p(se,!1);var de=d(Re,2);de.__click=me,L(()=>{cn(N,`transform: translateX(-50%) rotate(${n(We)??""}deg);`),q(ue,n(xe)),q(ae,n(Z))}),y(E,M)};A(I,E=>{n(se)&&E(X)})}var re=d(I,2);On(re),L(()=>{Xl(K,n(c)),De=we(Be,1,"estimate-value svelte-15o2uhu",null,De,{"estimate-warning":n(rt)}),q(ut,n(Fe)),ft.disabled=!n(s)||n(u),q(it,` ${n(u)?"compressing...":"compress video"}`)}),Ot("blur",K,ee),gi(wt,()=>n(b),E=>p(b,E)),y(e,Te),zt()}Ut(["click","change","input"]);var jv=x(`<!> <main class="svelte-13tj7i"><div class="page-header svelte-13tj7i"><h1 class="svelte-13tj7i">privacy policy</h1> <p class="svelte-13tj7i">the human-readable version</p></div> <div class="tldr-box svelte-13tj7i"><h3 class="svelte-13tj7i">tl;dr</h3> <p class="svelte-13tj7i">i collect minimal anonymous stats, never your URLs or personal info. you can opt out anytime in <a href="#/settings" class="svelte-13tj7i">settings</a>.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">about</h2> <p class="svelte-13tj7i">hey, im just one person who hasn't even graduated high school yet. i made yoink.tools in my free time because i felt inspired by cool websites like <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-13tj7i">cobalt.tools</a> and <a href="https://vert.sh" target="_blank" rel="noopener" class="svelte-13tj7i">vert.sh</a>, and i wanted an all-in-one website combining all the awesome frickin aspects of them. im not a company, i dont have investors, and i dont want anything from you.</p> <p class="svelte-13tj7i">this privacy policy is written in plain english because legal jargon is annoying.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">what i collect</h2> <p class="svelte-13tj7i">when you have analytics enabled (on by default), i collect:</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">format preferences</strong> - which file formats are popular (mp4, mp3, etc.)</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">download counts</strong> - how many downloads, conversions, and compressions happen</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">country data</strong> - derived from your IP address, but i dont store the IP itself</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">daily visitor counts</strong> - how many unique visitors per day</li></ul> <p class="svelte-13tj7i">that's it.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">what i DON'T collect</h2> <p class="svelte-13tj7i">i never, ever collect:</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">URLs you download</strong> - your browsing is your business</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">video titles or content</strong> - nope</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">your IP address</strong> - i use it to get country, then forget it</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">cookies for tracking</strong> - only settings are stored locally</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">anything identifying you personally</strong> - i literally cant tell users apart</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">why collect anything?</h2> <p class="svelte-13tj7i">its useful to see what features people use so i can prioritize what to work on next. no monetization, no selling data, no ads.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">opting out</h2> <p class="svelte-13tj7i">dont want to be part of the stats? head to <a href="#/settings" class="svelte-13tj7i">settings</a>, click the privacy tab, and flip the toggle.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">where data is stored</h2> <p class="svelte-13tj7i">analytics data is stored on my server in a JSON file. your settings (quality preferences, etc.) are stored in your browser's localStorage and never leave your device.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">questions?</h2> <p class="svelte-13tj7i">if you have questions or concerns, hit me up at <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-13tj7i">coah80.com</a> or check out the project on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">updates</h2> <p class="svelte-13tj7i">if i change this policy, ill update it here. no sneaky changes. last updated: <strong class="svelte-13tj7i">January 2026</strong>.</p></div></main> <!>`,1);function Sv(e){var t=jv(),s=Ee(t);vn(s);var r=d(s,4);On(r),y(e,t)}var zv=x('<div class="spinner-wrap svelte-121vd2i"><!></div> <h1 class="svelte-121vd2i">downloading...</h1> <p class="svelte-121vd2i">your download should start automatically</p>',1),Tv=x('<h1 class="success svelte-121vd2i">done</h1> <p class="svelte-121vd2i">download started successfully</p>',1),$v=x('<h1 class="error svelte-121vd2i">download failed</h1> <p class="svelte-121vd2i">this file is no longer available</p>',1),Cv=x('<main class="svelte-121vd2i"><div class="download-container svelte-121vd2i"><!> <div> </div></div></main>');function Ev(e,t){St(t,!0);const s=()=>Ft(ao,"$query",r),[r,i]=us();let a=D("loading"),l=D("preparing download..."),o=le(()=>s().token||"");Rn(()=>{const m=window.location.hash.includes("?")?"":window.location.hash.replace("#/download","").replace(/^\//,""),k=n(o)||m;if(!k){p(a,"error"),p(l,"no download token provided");return}const z=`${Pe()}/api/bot/download/${k}`;p(l,"starting download..."),fetch(z,{method:"HEAD"}).then(R=>{if(R.ok)p(l,"download started"),window.location.href=z,setTimeout(()=>{p(a,"success"),p(l,"you can close this page now")},2e3);else throw new Error("Download not available")}).catch(()=>{p(a,"error"),p(l,"the download link has expired (5 minute limit)")})});var c=Cv(),f=v(c),g=v(f);{var b=m=>{var k=zv(),z=Ee(k),R=v(z);Si(R),y(m,k)},u=m=>{var k=Je(),z=Ee(k);{var R=se=>{var ve=Tv();y(se,ve)},oe=se=>{var ve=$v();y(se,ve)};A(z,se=>{n(a)==="success"?se(R):se(oe,!1)},!0)}y(m,k)};A(g,m=>{n(a)==="loading"?m(b):m(u,!1)})}var h=d(g,2);let _;var j=v(h);L(()=>{_=we(h,1,"status svelte-121vd2i",null,_,{error:n(a)==="error",success:n(a)==="success"}),q(j,n(l))}),y(e,c),zt(),i()}var Pv=x('<main class="svelte-zxc657"><p>Redirecting...</p></main>');function qv(e,t){St(t,!1),Rn(()=>{const r=new URLSearchParams(window.location.search),a=(r.get("url")||r.get("text")||"").match(/https?:\/\/[^\s]+/);let l=a?a[0]:"";if(l=l.replace(/[.,!?;:)\]}>]+$/,""),l)try{const o=new URL(l);(o.protocol==="http:"||o.protocol==="https:")&&sessionStorage.setItem("yoink_shared_url",l)}catch{}io("/")}),eo();var s=Pv();y(e,s),zt()}var Mv=x('<p class="error svelte-1jknolv"> </p>'),Iv=x('<div class="login-container svelte-1jknolv"><div class="login-card svelte-1jknolv"><h1 class="svelte-1jknolv">admin</h1> <p class="login-sub svelte-1jknolv">yoink.tools dashboard</p> <form class="svelte-1jknolv"><input type="password" placeholder="password" autocomplete="current-password" class="svelte-1jknolv"/> <button type="submit" class="svelte-1jknolv"> </button> <!></form></div></div>'),Bv=x('<div class="job-pill svelte-1jknolv"><span class="job-type svelte-1jknolv"> </span> <span class="job-count svelte-1jknolv"> </span></div>'),Av=x('<div class="jobs-bar svelte-1jknolv"><h3 class="svelte-1jknolv">active jobs</h3> <div class="jobs-row svelte-1jknolv"></div></div>'),Dv=x('<div class="bar-col svelte-1jknolv"><span class="bar-value svelte-1jknolv"> </span> <div class="bar svelte-1jknolv"></div> <span class="bar-label svelte-1jknolv"> </span></div>'),Rv=x('<div class="chart-section svelte-1jknolv"><h3 class="svelte-1jknolv"> </h3> <div class="bar-chart svelte-1jknolv"></div></div>'),Ov=x('<div class="stats-grid svelte-1jknolv"><div class="stat-card svelte-1jknolv"><span class="stat-value svelte-1jknolv"> </span> <span class="stat-label svelte-1jknolv">downloads</span></div> <div class="stat-card svelte-1jknolv"><span class="stat-value svelte-1jknolv"> </span> <span class="stat-label svelte-1jknolv">converts</span></div> <div class="stat-card svelte-1jknolv"><span class="stat-value svelte-1jknolv"> </span> <span class="stat-label svelte-1jknolv">compresses</span></div> <div class="stat-card svelte-1jknolv"><span class="stat-value svelte-1jknolv"> </span> <span class="stat-label svelte-1jknolv">users today</span></div> <div class="stat-card svelte-1jknolv"><span class="stat-value svelte-1jknolv"> </span> <span class="stat-label svelte-1jknolv">connected</span></div> <div class="stat-card svelte-1jknolv"><span class="stat-value svelte-1jknolv"> </span> <span class="stat-label svelte-1jknolv">peak users (24h)</span></div></div> <!> <!>',1),Nv=x('<p class="empty svelte-1jknolv">no data yet</p>'),Fv=x('<div class="list-row svelte-1jknolv"><span class="list-name svelte-1jknolv"> </span> <span class="list-count svelte-1jknolv"> </span></div>'),Lv=x('<p class="empty svelte-1jknolv">no data yet</p>'),Uv=x('<div class="list-row svelte-1jknolv"><span class="list-name svelte-1jknolv"> </span> <span class="list-count svelte-1jknolv"> </span></div>'),Vv=x('<p class="empty svelte-1jknolv">no data yet</p>'),Hv=x('<div class="list-row svelte-1jknolv"><span class="list-name svelte-1jknolv"> </span> <span class="list-count svelte-1jknolv"> </span></div>'),Jv=x('<div class="analytics-grid svelte-1jknolv"><div class="list-card svelte-1jknolv"><h3 class="svelte-1jknolv">top sites</h3> <!> <!></div> <div class="list-card svelte-1jknolv"><h3 class="svelte-1jknolv">top formats</h3> <!> <!></div> <div class="list-card svelte-1jknolv"><h3 class="svelte-1jknolv">top countries</h3> <!> <!></div></div>'),Wv=x('<small class="svelte-1jknolv"> </small>'),Gv=x('<small class="auto-tag svelte-1jknolv">auto-generated</small>'),Yv=x('<div><div class="banner-preview svelte-1jknolv"><strong class="svelte-1jknolv"> </strong> <p class="svelte-1jknolv"> </p> <!> <!></div> <button class="clear-btn svelte-1jknolv">clear</button></div>'),Qv=x('<p class="no-banner svelte-1jknolv">no active banner</p>'),Kv=x('<div class="banner-section svelte-1jknolv"><!> <div class="banner-form svelte-1jknolv"><h3 class="svelte-1jknolv">set banner</h3> <input type="text" placeholder="banner message..." class="svelte-1jknolv"/> <div class="banner-options svelte-1jknolv"><select class="svelte-1jknolv"><option>info</option><option>warning</option><option>error</option><option>maintenance</option></select> <input type="number" placeholder="expires in (min)" min="1" class="svelte-1jknolv"/> <button class="svelte-1jknolv">set banner</button></div> <div class="quick-banners svelte-1jknolv"><button class="svelte-1jknolv">maintenance</button> <button class="svelte-1jknolv">high traffic</button> <button class="svelte-1jknolv">yt blocked</button></div></div></div>'),Xv=x('<div class="server-grid svelte-1jknolv"><div class="server-card svelte-1jknolv"><h3 class="svelte-1jknolv">uptime</h3> <span class="big-value svelte-1jknolv"> </span></div> <div class="server-card svelte-1jknolv"><h3 class="svelte-1jknolv">memory</h3> <div class="mem-row svelte-1jknolv"><span> </span> <span> </span></div></div> <div class="server-card svelte-1jknolv"><h3 class="svelte-1jknolv">system</h3> <div class="mem-row svelte-1jknolv"><span> </span> <span> </span> <span> </span></div></div> <div class="server-card svelte-1jknolv"><h3 class="svelte-1jknolv">connections</h3> <div class="mem-row svelte-1jknolv"><span> </span> <span> </span> <span> </span> <span> </span></div></div></div>'),Zv=x('<p class="empty svelte-1jknolv">loading server status...</p>'),eu=x('<div class="dashboard svelte-1jknolv"><div class="dash-header svelte-1jknolv"><h1 class="svelte-1jknolv">dashboard</h1> <button class="logout-btn svelte-1jknolv">logout</button></div> <div class="tabs svelte-1jknolv"><button>overview</button> <button>analytics</button> <button>banner</button> <button>server</button></div> <!></div>'),tu=x('<!> <main class="svelte-1jknolv"><!></main> <!>',1);function su(e,t){St(t,!0);let s=D(Ws(localStorage.getItem("yoink_admin_token")||"")),r=D(!1),i=D(""),a=D(""),l=D(!1),o=D(null),c=D(null),f=D(null),g=D(""),b=D("info"),u=D(""),h,_=D("overview");function j($,ne={}){return Hn(`${Pe()}${$}`,{...ne,headers:{...ne.headers,"x-admin-token":n(s)}})}async function m($,ne={}){return j($,{method:"POST",headers:{"Content-Type":"application/json","x-admin-token":n(s)},body:JSON.stringify(ne)})}async function k(){p(a,""),p(l,!0);try{const $=await Hn(`${Pe()}/api/admin/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:n(i)})});p(s,$.token,!0),localStorage.setItem("yoink_admin_token",n(s)),p(r,!0),p(i,""),oe()}catch($){p(a,$.message||"login failed",!0)}p(l,!1)}async function z(){try{await m("/api/admin/logout")}catch{}p(s,""),p(r,!1),localStorage.removeItem("yoink_admin_token")}async function R(){if(n(s))try{await j("/api/admin/verify"),p(r,!0),oe()}catch{p(s,""),localStorage.removeItem("yoink_admin_token")}}async function oe(){var $,ne;if(n(r))try{const[H,O,S]=await Promise.all([j("/api/admin/analytics"),j("/api/admin/status"),Hn(`${Pe()}/api/banner`)]);p(o,H,!0),p(c,O,!0),p(f,S.banner,!0)}catch(H){(($=H.message)!=null&&$.includes("401")||(ne=H.message)!=null&&ne.includes("Unauthorized"))&&z()}}async function se(){if(n(g).trim())try{const $=await m("/api/admin/banner",{message:n(g).trim(),type:n(b),expiresIn:n(u)?parseInt(n(u)):null});p(f,$.banner,!0),p(g,""),p(u,"")}catch{}}async function ve(){try{await j("/api/admin/banner",{method:"DELETE",headers:{"x-admin-token":n(s)}}),p(f,null)}catch{}}function ze($){const ne=Math.floor($/86400),H=Math.floor($%86400/3600),O=Math.floor($%3600/60);return ne>0?`${ne}d ${H}h ${O}m`:H>0?`${H}h ${O}m`:`${O}m`}function pe($){return $>=1e6?($/1e6).toFixed(1)+"M":$>=1e3?($/1e3).toFixed(1)+"K":String($)}function xe($,ne=8){return $?Object.entries($).sort((H,O)=>O[1]-H[1]).slice(0,ne):[]}function Fe($,ne=14){return $?Object.entries($).sort((O,S)=>O[0].localeCompare(S[0])).slice(-ne):[]}Rn(()=>{R(),h=setInterval(oe,15e3)}),_i(()=>{clearInterval(h)});let rt=le(()=>()=>{var ne;if(!((ne=n(o))!=null&&ne.dailyUsers))return 0;const $=new Date().toISOString().split("T")[0];return n(o).dailyUsers[$]||0}),We=le(()=>{var $;return xe(($=n(o))==null?void 0:$.sites)}),Z=le(()=>{var $;return xe(($=n(o))==null?void 0:$.formats)}),Y=le(()=>{var $;return xe(($=n(o))==null?void 0:$.countries)}),he=le(()=>{var $;return Fe(($=n(o))==null?void 0:$.dailyUsers)}),Q=le(()=>n(he).length?Math.max(...n(he).map($=>$[1]),1):1);var J=tu(),je=Ee(J);vn(je);var B=d(je,2),ee=v(B);{var W=$=>{var ne=Iv(),H=v(ne),O=d(v(H),4),S=v(O),C=d(S,2),te=v(C),ie=d(C,2);{var ge=K=>{var ye=Mv(),Be=v(ye);L(()=>q(Be,n(a))),y(K,ye)};A(ie,K=>{n(a)&&K(ge)})}L(()=>{S.disabled=n(l),C.disabled=n(l)||!n(i),q(te,n(l)?"logging in...":"login")}),Ot("submit",O,K=>{K.preventDefault(),k()}),bn(S,()=>n(i),K=>p(i,K)),y($,ne)},me=$=>{var ne=eu(),H=v(ne),O=d(v(H),2);O.__click=z;var S=d(H,2),C=v(S);C.__click=()=>p(_,"overview");let te;var ie=d(C,2);ie.__click=()=>p(_,"analytics");let ge;var K=d(ie,2);K.__click=()=>p(_,"banner");let ye;var Be=d(K,2);Be.__click=()=>p(_,"server");let De;var ut=d(S,2);{var Xe=at=>{var wt=Ov(),ft=Ee(wt),it=v(ft),bt=v(it),pt=v(bt),ht=d(it,2),P=v(ht),I=v(P),X=d(ht,2),re=v(X),E=v(re),M=d(X,2),T=v(M),V=v(T),N=d(M,2),F=v(N),G=v(F),ue=d(N,2),U=v(ue),ce=v(U),ae=d(ft,2);{var $e=qe=>{var Ie=Av(),Ae=d(v(Ie),2);Ue(Ae,21,()=>Object.entries(n(c).activeJobs),Ge,(He,Ce)=>{var Oe=le(()=>dn(n(Ce),2));let Ye=()=>n(Oe)[0],Le=()=>n(Oe)[1];var Vt=Bv(),lt=v(Vt),ot=v(lt),ts=d(lt,2),zs=v(ts);L(()=>{q(ot,Ye()),q(zs,`${Le()??""}/${n(c).jobLimits[Ye()]??""}`)}),y(He,Vt)}),y(qe,Ie)};A(ae,qe=>{n(c)&&qe($e)})}var Re=d(ae,2);{var de=qe=>{var Ie=Rv(),Ae=v(Ie),He=v(Ae),Ce=d(Ae,2);Ue(Ce,21,()=>n(he),Ge,(Oe,Ye)=>{var Le=le(()=>dn(n(Ye),2));let Vt=()=>n(Le)[0],lt=()=>n(Le)[1];var ot=Dv(),ts=v(ot),zs=v(ts),Ls=d(ts,2),un=d(Ls,2),Us=v(un);L((It,ss)=>{q(zs,lt()),cn(Ls,`height: ${It??""}%`),q(Us,ss)},[()=>Math.max(lt()/n(Q)*100,4),()=>Vt().slice(5)]),y(Oe,ot)}),L(()=>q(He,`daily users (last ${n(he).length??""} days)`)),y(qe,Ie)};A(Re,qe=>{n(he).length>0&&qe(de)})}L((qe,Ie,Ae,He)=>{var Ce,Oe,Ye;q(pt,qe),q(I,Ie),q(E,Ae),q(V,He),q(G,((Ce=n(c))==null?void 0:Ce.connectedClients)??"â"),q(ce,((Ye=(Oe=n(o))==null?void 0:Oe.peakUsers)==null?void 0:Ye.count)??"â")},[()=>n(o)?pe(n(o).totalDownloads):"â",()=>n(o)?pe(n(o).totalConverts):"â",()=>n(o)?pe(n(o).totalCompresses):"â",()=>n(rt)()]),y(at,wt)},dt=at=>{var wt=Je(),ft=Ee(wt);{var it=pt=>{var ht=Jv(),P=v(ht),I=d(v(P),2);{var X=U=>{var ce=Nv();y(U,ce)};A(I,U=>{n(We).length===0&&U(X)})}var re=d(I,2);Ue(re,17,()=>n(We),Ge,(U,ce)=>{var ae=le(()=>dn(n(ce),2));let $e=()=>n(ae)[0],Re=()=>n(ae)[1];var de=Fv(),qe=v(de),Ie=v(qe),Ae=d(qe,2),He=v(Ae);L(Ce=>{q(Ie,$e()),q(He,Ce)},[()=>pe(Re())]),y(U,de)});var E=d(P,2),M=d(v(E),2);{var T=U=>{var ce=Lv();y(U,ce)};A(M,U=>{n(Z).length===0&&U(T)})}var V=d(M,2);Ue(V,17,()=>n(Z),Ge,(U,ce)=>{var ae=le(()=>dn(n(ce),2));let $e=()=>n(ae)[0],Re=()=>n(ae)[1];var de=Uv(),qe=v(de),Ie=v(qe),Ae=d(qe,2),He=v(Ae);L(Ce=>{q(Ie,$e()),q(He,Ce)},[()=>pe(Re())]),y(U,de)});var N=d(E,2),F=d(v(N),2);{var G=U=>{var ce=Vv();y(U,ce)};A(F,U=>{n(Y).length===0&&U(G)})}var ue=d(F,2);Ue(ue,17,()=>n(Y),Ge,(U,ce)=>{var ae=le(()=>dn(n(ce),2));let $e=()=>n(ae)[0],Re=()=>n(ae)[1];var de=Hv(),qe=v(de),Ie=v(qe),Ae=d(qe,2),He=v(Ae);L(Ce=>{q(Ie,$e()),q(He,Ce)},[()=>pe(Re())]),y(U,de)}),y(pt,ht)},bt=pt=>{var ht=Je(),P=Ee(ht);{var I=re=>{var E=Kv(),M=v(E);{var T=Ce=>{var Oe=Yv(),Ye=v(Oe),Le=v(Ye),Vt=v(Le),lt=d(Le,2),ot=v(lt),ts=d(lt,2);{var zs=It=>{var ss=Wv(),ir=v(ss);L(Nn=>q(ir,`expires: ${Nn??""}`),[()=>new Date(n(f).expiresAt).toLocaleString()]),y(It,ss)};A(ts,It=>{n(f).expiresAt&&It(zs)})}var Ls=d(ts,2);{var un=It=>{var ss=Gv();y(It,ss)};A(Ls,It=>{n(f).auto&&It(un)})}var Us=d(Ye,2);Us.__click=ve,L(()=>{we(Oe,1,`current-banner banner-${n(f).type??""}`,"svelte-1jknolv"),q(Vt,`active banner (${n(f).type??""}):`),q(ot,n(f).message)}),y(Ce,Oe)},V=Ce=>{var Oe=Qv();y(Ce,Oe)};A(M,Ce=>{n(f)?Ce(T):Ce(V,!1)})}var N=d(M,2),F=d(v(N),2),G=d(F,2),ue=v(G),U=v(ue);U.value=U.__value="info";var ce=d(U);ce.value=ce.__value="warning";var ae=d(ce);ae.value=ae.__value="error";var $e=d(ae);$e.value=$e.__value="maintenance";var Re=d(ue,2),de=d(Re,2);de.__click=se;var qe=d(G,2),Ie=v(qe);Ie.__click=()=>{p(g,"scheduled maintenance â downloads may be interrupted."),p(b,"maintenance")};var Ae=d(Ie,2);Ae.__click=()=>{p(g,"high traffic â downloads may be slower than usual."),p(b,"warning")};var He=d(Ae,2);He.__click=()=>{p(g,"youtube is currently blocking some requests â try again later."),p(b,"error")},L(Ce=>de.disabled=Ce,[()=>!n(g).trim()]),bn(F,()=>n(g),Ce=>p(g,Ce)),Yl(ue,()=>n(b),Ce=>p(b,Ce)),bn(Re,()=>n(u),Ce=>p(u,Ce)),y(re,E)},X=re=>{var E=Je(),M=Ee(E);{var T=V=>{var N=Je(),F=Ee(N);{var G=U=>{var ce=Xv(),ae=v(ce),$e=d(v(ae),2),Re=v($e),de=d(ae,2),qe=d(v(de),2),Ie=v(qe),Ae=v(Ie),He=d(Ie,2),Ce=v(He),Oe=d(de,2),Ye=d(v(Oe),2),Le=v(Ye),Vt=v(Le),lt=d(Le,2),ot=v(lt),ts=d(lt,2),zs=v(ts),Ls=d(Oe,2),un=d(v(Ls),2),Us=v(un),It=v(Us),ss=d(Us,2),ir=v(ss),Nn=d(ss,2),Ci=v(Nn),Ei=d(Nn,2),Pi=v(Ei);L((lr,qi)=>{q(Re,lr),q(Ae,`rss: ${n(c).memory.rss??""} MB`),q(Ce,`heap: ${n(c).memory.heapUsed??""}/${n(c).memory.heapTotal??""} MB`),q(Vt,n(c).system.platform),q(ot,`ram: ${n(c).system.freeMem??""}/${n(c).system.totalMem??""} MB free`),q(zs,`load: ${qi??""}`),q(It,`clients: ${n(c).connectedClients??""}`),q(ir,`streams: ${n(c).activeStreams??""}`),q(Ci,`processes: ${n(c).activeProcesses??""}`),q(Pi,`bot downloads: ${n(c).botDownloads??""}`)},[()=>ze(n(c).uptime),()=>n(c).system.loadAvg.map(lr=>lr.toFixed(2)).join(", ")]),y(U,ce)},ue=U=>{var ce=Zv();y(U,ce)};A(F,U=>{n(c)?U(G):U(ue,!1)})}y(V,N)};A(M,V=>{n(_)==="server"&&V(T)},!0)}y(re,E)};A(P,re=>{n(_)==="banner"?re(I):re(X,!1)},!0)}y(pt,ht)};A(ft,pt=>{n(_)==="analytics"?pt(it):pt(bt,!1)},!0)}y(at,wt)};A(ut,at=>{n(_)==="overview"?at(Xe):at(dt,!1)})}L(()=>{te=we(C,1,"svelte-1jknolv",null,te,{active:n(_)==="overview"}),ge=we(ie,1,"svelte-1jknolv",null,ge,{active:n(_)==="analytics"}),ye=we(K,1,"svelte-1jknolv",null,ye,{active:n(_)==="banner"}),De=we(Be,1,"svelte-1jknolv",null,De,{active:n(_)==="server"})}),y($,ne)};A(ee,$=>{n(r)?$(me,!1):$(W)})}var Te=d(B,2);On(Te),y(e,J),zt()}Ut(["click"]);var nu=x(`<!> <main class="svelte-kbj945"><div class="not-found svelte-kbj945"><h1 class="svelte-kbj945">404</h1> <p class="svelte-kbj945">this page doesn't exist</p> <a href="#/" class="back-link svelte-kbj945">go back home</a></div></main>`,1);function ru(e){var t=nu(),s=Ee(t);vn(s),y(e,t)}var au=x('<div><span class="banner-msg svelte-1n46o8q"> </span> <button class="banner-dismiss svelte-1n46o8q"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div>'),iu=x("<!> <!> <!> <!>",1);function lu(e,t){St(t,!0);const s=()=>Ft(Vr,"$path",i),r=()=>Ft(Kn,"$banner",i),[i,a]=us(),l={"/":Ac,"/settings":nv,"/convert":pv,"/compress":xv,"/privacy":Sv,"/download":Ev,"/share":qv,"/admin":su};let o=le(s),c=le(()=>l[n(o)]||ru),f=le(()=>n(o)==="/admin"),g=le(r);ln(()=>{ac(n(o))});function b(){Kn.set(null)}Rn(()=>{yo(),ic(),lc(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{})}),_i(()=>{oc()});var u=iu(),h=Ee(u);{var _=R=>{var oe=au(),se=v(oe),ve=v(se),ze=d(se,2);ze.__click=b,L(()=>{we(oe,1,`site-banner banner-${n(g).type??""}`,"svelte-1n46o8q"),q(ve,n(g).message)}),y(R,oe)};A(h,R=>{n(g)&&!n(f)&&R(_)})}var j=d(h,2);Hl(j,()=>n(c),(R,oe)=>{oe(R,{})});var m=d(j,2);{var k=R=>{sc(R,{})};A(m,R=>{n(f)||R(k)})}var z=d(m,2);fo(z),y(e,u),zt(),a()}Ut(["click"]);Ol(lu,{target:document.getElementById("app")});
