var vo=Object.defineProperty;var $r=e=>{throw TypeError(e)};var fo=(e,t,s)=>t in e?vo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var zt=(e,t,s)=>fo(e,typeof t!="symbol"?t+"":t,s),Wn=(e,t,s)=>t.has(e)||$r("Cannot "+s);var w=(e,t,s)=>(Wn(e,t,"read from private field"),s?s.call(e):t.get(e)),ie=(e,t,s)=>t.has(e)?$r("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),se=(e,t,s,n)=>(Wn(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),We=(e,t,s)=>(Wn(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const Xn=!1;var ni=Array.isArray,po=Array.prototype.indexOf,Vs=Array.prototype.includes,Bn=Array.from,ri=Object.defineProperty,nn=Object.getOwnPropertyDescriptor,ii=Object.getOwnPropertyDescriptors,ho=Object.prototype,go=Array.prototype,hr=Object.getPrototypeOf,Ir=Object.isExtensible;const ns=()=>{};function mo(e){return e()}function Pn(e){for(var t=0;t<e.length;t++)e[t]()}function oi(){var e,t,s=new Promise((n,i)=>{e=n,t=i});return{promise:s,resolve:e,reject:t}}const Ue=2,qn=4,pn=8,ai=1<<24,Qt=16,jt=32,Es=64,gr=128,pt=512,Ne=1024,Ve=2048,Tt=4096,ct=8192,rs=16384,mr=32768,us=65536,Dr=1<<17,li=1<<18,Gs=1<<19,ci=1<<20,Gt=1<<25,Cs=32768,Zn=1<<21,_r=1<<22,is=1<<23,Bs=Symbol("$state"),_o=Symbol(""),Ds=new class extends Error{constructor(){super(...arguments);zt(this,"name","StaleReactionError");zt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function wo(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function yo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function bo(e,t,s){throw new Error("https://svelte.dev/e/each_key_duplicate")}function ko(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function xo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function So(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Co(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function To(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function jo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zo(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Eo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Po=1,qo=2,ui=4,Mo=8,$o=16,vi=1,Io=2,Fe=Symbol(),Do="http://www.w3.org/1999/xhtml";function Bo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function di(e){return e===this.v}function fi(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function pi(e){return!fi(e,this.v)}let hn=!1,Ro=!1;function Ao(){hn=!0}let De=null;function Hs(e){De=e}function mt(e,t=!1,s){De={p:De,i:!1,c:null,e:null,s:e,x:null,l:hn&&!t?{s:null,u:null,$:[]}:null}}function _t(e){var t=De,s=t.e;if(s!==null){t.e=null;for(var n of s)Bi(n)}return t.i=!0,De=t.p,{}}function gn(){return!hn||De!==null&&De.l===null}let fs=[];function hi(){var e=fs;fs=[],Pn(e)}function Yt(e){if(fs.length===0&&!rn){var t=fs;queueMicrotask(()=>{t===fs&&hi()})}fs.push(e)}function No(){for(;fs.length>0;)hi()}function gi(e){var t=je;if(t===null)return ce.f|=is,e;if((t.f&mr)===0){if((t.f&gr)===0)throw e;t.b.error(e)}else Js(e,t)}function Js(e,t){for(;t!==null;){if((t.f&gr)!==0)try{t.b.error(e);return}catch(s){e=s}t=t.parent}throw e}const Oo=-7169;function Ie(e,t){e.f=e.f&Oo|t}function wr(e){(e.f&pt)!==0||e.deps===null?Ie(e,Ne):Ie(e,Tt)}function mi(e){if(e!==null)for(const t of e)(t.f&Ue)===0||(t.f&Cs)===0||(t.f^=Cs,mi(t.deps))}function _i(e,t,s){(e.f&Ve)!==0?t.add(e):(e.f&Tt)!==0&&s.add(e),mi(e.deps),Ie(e,Ne)}const Tn=new Set;let oe=null,er=null,Le=null,Ze=[],Rn=null,tr=!1,rn=!1;var Rs,As,hs,Ns,un,vn,gs,Vt,Os,Rt,sr,nr,wi;const qr=class qr{constructor(){ie(this,Rt);zt(this,"committed",!1);zt(this,"current",new Map);zt(this,"previous",new Map);ie(this,Rs,new Set);ie(this,As,new Set);ie(this,hs,0);ie(this,Ns,0);ie(this,un,null);ie(this,vn,new Set);ie(this,gs,new Set);ie(this,Vt,new Map);zt(this,"is_fork",!1);ie(this,Os,!1)}is_deferred(){return this.is_fork||w(this,Ns)>0}skip_effect(t){w(this,Vt).has(t)||w(this,Vt).set(t,{d:[],m:[]})}unskip_effect(t){var s=w(this,Vt).get(t);if(s){w(this,Vt).delete(t);for(var n of s.d)Ie(n,Ve),xt(n);for(n of s.m)Ie(n,Tt),xt(n)}}process(t){var i;Ze=[],this.apply();var s=[],n=[];for(const r of t)We(this,Rt,sr).call(this,r,s,n);if(this.is_deferred()){We(this,Rt,nr).call(this,n),We(this,Rt,nr).call(this,s);for(const[r,a]of w(this,Vt))xi(r,a)}else{for(const r of w(this,Rs))r();w(this,Rs).clear(),w(this,hs)===0&&We(this,Rt,wi).call(this),er=this,oe=null,Br(n),Br(s),er=null,(i=w(this,un))==null||i.resolve()}Le=null}capture(t,s){s!==Fe&&!this.previous.has(t)&&this.previous.set(t,s),(t.f&is)===0&&(this.current.set(t,t.v),Le==null||Le.set(t,t.v))}activate(){oe=this,this.apply()}deactivate(){oe===this&&(oe=null,Le=null)}flush(){if(this.activate(),Ze.length>0){if(yi(),oe!==null&&oe!==this)return}else w(this,hs)===0&&this.process([]);this.deactivate()}discard(){for(const t of w(this,As))t(this);w(this,As).clear()}increment(t){se(this,hs,w(this,hs)+1),t&&se(this,Ns,w(this,Ns)+1)}decrement(t){se(this,hs,w(this,hs)-1),t&&se(this,Ns,w(this,Ns)-1),!w(this,Os)&&(se(this,Os,!0),Yt(()=>{se(this,Os,!1),this.is_deferred()?Ze.length>0&&this.flush():this.revive()}))}revive(){for(const t of w(this,vn))w(this,gs).delete(t),Ie(t,Ve),xt(t);for(const t of w(this,gs))Ie(t,Tt),xt(t);this.flush()}oncommit(t){w(this,Rs).add(t)}ondiscard(t){w(this,As).add(t)}settled(){return(w(this,un)??se(this,un,oi())).promise}static ensure(){if(oe===null){const t=oe=new qr;Tn.add(oe),rn||Yt(()=>{oe===t&&t.flush()})}return oe}apply(){}};Rs=new WeakMap,As=new WeakMap,hs=new WeakMap,Ns=new WeakMap,un=new WeakMap,vn=new WeakMap,gs=new WeakMap,Vt=new WeakMap,Os=new WeakMap,Rt=new WeakSet,sr=function(t,s,n){t.f^=Ne;for(var i=t.first,r=null;i!==null;){var a=i.f,u=(a&(jt|Es))!==0,c=u&&(a&Ne)!==0,d=c||(a&ct)!==0||w(this,Vt).has(i);if(!d&&i.fn!==null){u?i.f^=Ne:r!==null&&(a&(qn|pn|ai))!==0?r.b.defer_effect(i):(a&qn)!==0?s.push(i):wn(i)&&((a&Qt)!==0&&w(this,gs).add(i),an(i));var f=i.first;if(f!==null){i=f;continue}}var y=i.parent;for(i=i.next;i===null&&y!==null;)y===r&&(r=null),i=y.next,y=y.parent}},nr=function(t){for(var s=0;s<t.length;s+=1)_i(t[s],w(this,vn),w(this,gs))},wi=function(){var i;if(Tn.size>1){this.previous.clear();var t=Le,s=!0;for(const r of Tn){if(r===this){s=!1;continue}const a=[];for(const[c,d]of this.current){if(r.current.has(c))if(s&&d!==r.current.get(c))r.current.set(c,d);else continue;a.push(c)}if(a.length===0)continue;const u=[...r.current.keys()].filter(c=>!this.current.has(c));if(u.length>0){var n=Ze;Ze=[];const c=new Set,d=new Map;for(const f of a)bi(f,u,c,d);if(Ze.length>0){oe=r,r.apply();for(const f of Ze)We(i=r,Rt,sr).call(i,f,[],[]);r.deactivate()}Ze=n}}oe=null,Le=t}this.committed=!0,Tn.delete(this)};let os=qr;function Fo(e){var t=rn;rn=!0;try{for(var s;;){if(No(),Ze.length===0&&(oe==null||oe.flush(),Ze.length===0))return Rn=null,s;yi()}}finally{rn=t}}function yi(){tr=!0;var e=null;try{for(var t=0;Ze.length>0;){var s=os.ensure();if(t++>1e3){var n,i;Lo()}s.process(Ze),as.clear()}}finally{Ze=[],tr=!1,Rn=null}}function Lo(){try{Co()}catch(e){Js(e,Rn)}}let bt=null;function Br(e){var t=e.length;if(t!==0){for(var s=0;s<t;){var n=e[s++];if((n.f&(rs|ct))===0&&wn(n)&&(bt=new Set,an(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?Ni(n):n.fn=null),(bt==null?void 0:bt.size)>0)){as.clear();for(const i of bt){if((i.f&(rs|ct))!==0)continue;const r=[i];let a=i.parent;for(;a!==null;)bt.has(a)&&(bt.delete(a),r.push(a)),a=a.parent;for(let u=r.length-1;u>=0;u--){const c=r[u];(c.f&(rs|ct))===0&&an(c)}}bt.clear()}}bt=null}}function bi(e,t,s,n){if(!s.has(e)&&(s.add(e),e.reactions!==null))for(const i of e.reactions){const r=i.f;(r&Ue)!==0?bi(i,t,s,n):(r&(_r|Qt))!==0&&(r&Ve)===0&&ki(i,t,n)&&(Ie(i,Ve),xt(i))}}function ki(e,t,s){const n=s.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const i of e.deps){if(Vs.call(t,i))return!0;if((i.f&Ue)!==0&&ki(i,t,s))return s.set(i,!0),!0}return s.set(e,!1),!1}function xt(e){for(var t=Rn=e;t.parent!==null;){t=t.parent;var s=t.f;if(tr&&t===je&&(s&Qt)!==0&&(s&li)===0)return;if((s&(Es|jt))!==0){if((s&Ne)===0)return;t.f^=Ne}}Ze.push(t)}function xi(e,t){if(!((e.f&jt)!==0&&(e.f&Ne)!==0)){(e.f&Ve)!==0?t.d.push(e):(e.f&Tt)!==0&&t.m.push(e),Ie(e,Ne);for(var s=e.first;s!==null;)xi(s,t),s=s.next}}function Uo(e){let t=0,s=Ts(0),n;return()=>{br()&&(o(s),Fn(()=>(t===0&&(n=Ps(()=>e(()=>on(s)))),t+=1,()=>{Yt(()=>{t-=1,t===0&&(n==null||n(),n=void 0,on(s))})})))}}var Vo=us|Gs|gr;function Ho(e,t,s){new Jo(e,t,s)}var vt,pr,Et,ms,Pt,dt,Xe,qt,Ht,es,_s,ts,Fs,ws,Ls,Us,Jt,In,Oe,Wo,Go,rr,jn,zn,ir;class Jo{constructor(t,s,n){ie(this,Oe);zt(this,"parent");zt(this,"is_pending",!1);ie(this,vt);ie(this,pr,null);ie(this,Et);ie(this,ms);ie(this,Pt);ie(this,dt,null);ie(this,Xe,null);ie(this,qt,null);ie(this,Ht,null);ie(this,es,null);ie(this,_s,0);ie(this,ts,0);ie(this,Fs,!1);ie(this,ws,!1);ie(this,Ls,new Set);ie(this,Us,new Set);ie(this,Jt,null);ie(this,In,Uo(()=>(se(this,Jt,Ts(w(this,_s))),()=>{se(this,Jt,null)})));se(this,vt,t),se(this,Et,s),se(this,ms,n),this.parent=je.b,this.is_pending=!!w(this,Et).pending,se(this,Pt,_n(()=>{je.b=this;{var i=We(this,Oe,rr).call(this);try{se(this,dt,ft(()=>n(i)))}catch(r){this.error(r)}w(this,ts)>0?We(this,Oe,zn).call(this):this.is_pending=!1}return()=>{var r;(r=w(this,es))==null||r.remove()}},Vo))}defer_effect(t){_i(t,w(this,Ls),w(this,Us))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!w(this,Et).pending}update_pending_count(t){We(this,Oe,ir).call(this,t),se(this,_s,w(this,_s)+t),!(!w(this,Jt)||w(this,Fs))&&(se(this,Fs,!0),Yt(()=>{se(this,Fs,!1),w(this,Jt)&&Ws(w(this,Jt),w(this,_s))}))}get_effect_pending(){return w(this,In).call(this),o(w(this,Jt))}error(t){var s=w(this,Et).onerror;let n=w(this,Et).failed;if(w(this,ws)||!s&&!n)throw t;w(this,dt)&&(nt(w(this,dt)),se(this,dt,null)),w(this,Xe)&&(nt(w(this,Xe)),se(this,Xe,null)),w(this,qt)&&(nt(w(this,qt)),se(this,qt,null));var i=!1,r=!1;const a=()=>{if(i){Bo();return}i=!0,r&&Eo(),os.ensure(),se(this,_s,0),w(this,qt)!==null&&bs(w(this,qt),()=>{se(this,qt,null)}),this.is_pending=this.has_pending_snippet(),se(this,dt,We(this,Oe,jn).call(this,()=>(se(this,ws,!1),ft(()=>w(this,ms).call(this,w(this,vt)))))),w(this,ts)>0?We(this,Oe,zn).call(this):this.is_pending=!1};Yt(()=>{try{r=!0,s==null||s(t,a),r=!1}catch(u){Js(u,w(this,Pt)&&w(this,Pt).parent)}n&&se(this,qt,We(this,Oe,jn).call(this,()=>{os.ensure(),se(this,ws,!0);try{return ft(()=>{n(w(this,vt),()=>t,()=>a)})}catch(u){return Js(u,w(this,Pt).parent),null}finally{se(this,ws,!1)}}))})}}vt=new WeakMap,pr=new WeakMap,Et=new WeakMap,ms=new WeakMap,Pt=new WeakMap,dt=new WeakMap,Xe=new WeakMap,qt=new WeakMap,Ht=new WeakMap,es=new WeakMap,_s=new WeakMap,ts=new WeakMap,Fs=new WeakMap,ws=new WeakMap,Ls=new WeakMap,Us=new WeakMap,Jt=new WeakMap,In=new WeakMap,Oe=new WeakSet,Wo=function(){try{se(this,dt,ft(()=>w(this,ms).call(this,w(this,vt))))}catch(t){this.error(t)}},Go=function(){const t=w(this,Et).pending;t&&(se(this,Xe,ft(()=>t(w(this,vt)))),Yt(()=>{var s=We(this,Oe,rr).call(this);se(this,dt,We(this,Oe,jn).call(this,()=>(os.ensure(),ft(()=>w(this,ms).call(this,s))))),w(this,ts)>0?We(this,Oe,zn).call(this):(bs(w(this,Xe),()=>{se(this,Xe,null)}),this.is_pending=!1)}))},rr=function(){var t=w(this,vt);return this.is_pending&&(se(this,es,ls()),w(this,vt).before(w(this,es)),t=w(this,es)),t},jn=function(t){var s=je,n=ce,i=De;Dt(w(this,Pt)),gt(w(this,Pt)),Hs(w(this,Pt).ctx);try{return t()}catch(r){return gi(r),null}finally{Dt(s),gt(n),Hs(i)}},zn=function(){const t=w(this,Et).pending;w(this,dt)!==null&&(se(this,Ht,document.createDocumentFragment()),w(this,Ht).append(w(this,es)),Li(w(this,dt),w(this,Ht))),w(this,Xe)===null&&se(this,Xe,ft(()=>t(w(this,vt))))},ir=function(t){var s;if(!this.has_pending_snippet()){this.parent&&We(s=this.parent,Oe,ir).call(s,t);return}if(se(this,ts,w(this,ts)+t),w(this,ts)===0){this.is_pending=!1;for(const n of w(this,Ls))Ie(n,Ve),xt(n);for(const n of w(this,Us))Ie(n,Tt),xt(n);w(this,Ls).clear(),w(this,Us).clear(),w(this,Xe)&&bs(w(this,Xe),()=>{se(this,Xe,null)}),w(this,Ht)&&(w(this,vt).before(w(this,Ht)),se(this,Ht,null))}};function Yo(e,t,s,n){const i=gn()?An:Si;var r=e.filter(l=>!l.settled);if(s.length===0&&r.length===0){n(t.map(i));return}var a=oe,u=je,c=Qo(),d=r.length===1?r[0].promise:r.length>1?Promise.all(r.map(l=>l.promise)):null;function f(l){c();try{n(l)}catch(v){(u.f&rs)===0&&Js(v,u)}a==null||a.deactivate(),or()}if(s.length===0){d.then(()=>f(t.map(i)));return}function y(){c(),Promise.all(s.map(l=>Ko(l))).then(l=>f([...t.map(i),...l])).catch(l=>Js(l,u))}d?d.then(y):y()}function Qo(){var e=je,t=ce,s=De,n=oe;return function(r=!0){Dt(e),gt(t),Hs(s),r&&(n==null||n.activate())}}function or(){Dt(null),gt(null),Hs(null)}function An(e){var t=Ue|Ve,s=ce!==null&&(ce.f&Ue)!==0?ce:null;return je!==null&&(je.f|=Gs),{ctx:De,deps:null,effects:null,equals:di,f:t,fn:e,reactions:null,rv:0,v:Fe,wv:0,parent:s??je,ac:null}}function Ko(e,t,s){let n=je;n===null&&yo();var i=n.b,r=void 0,a=Ts(Fe),u=!ce,c=new Map;return aa(()=>{var v;var d=oi();r=d.promise;try{Promise.resolve(e()).then(d.resolve,d.reject).then(()=>{f===oe&&f.committed&&f.deactivate(),or()})}catch(p){d.reject(p),or()}var f=oe;if(u){var y=i.is_rendered();i.update_pending_count(1),f.increment(y),(v=c.get(f))==null||v.reject(Ds),c.delete(f),c.set(f,d)}const l=(p,x=void 0)=>{if(f.activate(),x)x!==Ds&&(a.f|=is,Ws(a,x));else{(a.f&is)!==0&&(a.f^=is),Ws(a,p);for(const[m,k]of c){if(c.delete(m),m===f)break;k.reject(Ds)}}u&&(i.update_pending_count(-1),f.decrement(y))};d.promise.then(l,p=>l(null,p||"unknown"))}),kr(()=>{for(const d of c.values())d.reject(Ds)}),new Promise(d=>{function f(y){function l(){y===r?d(a):f(r)}y.then(l,l)}f(r)})}function ye(e){const t=An(e);return Ui(t),t}function Si(e){const t=An(e);return t.equals=pi,t}function Ci(e){var t=e.effects;if(t!==null){e.effects=null;for(var s=0;s<t.length;s+=1)nt(t[s])}}function Xo(e){for(var t=e.parent;t!==null;){if((t.f&Ue)===0)return(t.f&rs)===0?t:null;t=t.parent}return null}function yr(e){var t,s=je;Dt(Xo(e));try{e.f&=~Cs,Ci(e),t=Wi(e)}finally{Dt(s)}return t}function Ti(e){var t=yr(e);if(!e.equals(t)&&(e.wv=Hi(),(!(oe!=null&&oe.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){Ie(e,Ne);return}js||(Le!==null?(br()||oe!=null&&oe.is_fork)&&Le.set(e,t):wr(e))}let ar=new Set;const as=new Map;let ji=!1;function Ts(e,t){var s={f:0,v:e,reactions:null,equals:di,rv:0,wv:0};return s}function D(e,t){const s=Ts(e);return Ui(s),s}function zi(e,t=!1,s=!0){var i;const n=Ts(e);return t||(n.equals=pi),hn&&s&&De!==null&&De.l!==null&&((i=De.l).s??(i.s=[])).push(n),n}function h(e,t,s=!1){ce!==null&&(!St||(ce.f&Dr)!==0)&&gn()&&(ce.f&(Ue|Qt|_r|Dr))!==0&&(ht===null||!Vs.call(ht,e))&&zo();let n=s?en(t):t;return Ws(e,n)}function Ws(e,t){if(!e.equals(t)){var s=e.v;js?as.set(e,t):as.set(e,s),e.v=t;var n=os.ensure();if(n.capture(e,s),(e.f&Ue)!==0){const i=e;(e.f&Ve)!==0&&yr(i),wr(i)}e.wv=Hi(),Ei(e,Ve),gn()&&je!==null&&(je.f&Ne)!==0&&(je.f&(jt|Es))===0&&(ut===null?ua([e]):ut.push(e)),!n.is_fork&&ar.size>0&&!ji&&Zo()}return t}function Zo(){ji=!1;for(const e of ar)(e.f&Ne)!==0&&Ie(e,Tt),wn(e)&&an(e);ar.clear()}function on(e){h(e,e.v+1)}function Ei(e,t){var s=e.reactions;if(s!==null)for(var n=gn(),i=s.length,r=0;r<i;r++){var a=s[r],u=a.f;if(!(!n&&a===je)){var c=(u&Ve)===0;if(c&&Ie(a,t),(u&Ue)!==0){var d=a;Le==null||Le.delete(d),(u&Cs)===0&&(u&pt&&(a.f|=Cs),Ei(d,Tt))}else c&&((u&Qt)!==0&&bt!==null&&bt.add(a),xt(a))}}}function en(e){if(typeof e!="object"||e===null||Bs in e)return e;const t=hr(e);if(t!==ho&&t!==go)return e;var s=new Map,n=ni(e),i=D(0),r=ks,a=u=>{if(ks===r)return u();var c=ce,d=ks;gt(null),Or(r);var f=u();return gt(c),Or(d),f};return n&&s.set("length",D(e.length)),new Proxy(e,{defineProperty(u,c,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&To();var f=s.get(c);return f===void 0?f=a(()=>{var y=D(d.value);return s.set(c,y),y}):h(f,d.value,!0),!0},deleteProperty(u,c){var d=s.get(c);if(d===void 0){if(c in u){const f=a(()=>D(Fe));s.set(c,f),on(i)}}else h(d,Fe),on(i);return!0},get(u,c,d){var v;if(c===Bs)return e;var f=s.get(c),y=c in u;if(f===void 0&&(!y||(v=nn(u,c))!=null&&v.writable)&&(f=a(()=>{var p=en(y?u[c]:Fe),x=D(p);return x}),s.set(c,f)),f!==void 0){var l=o(f);return l===Fe?void 0:l}return Reflect.get(u,c,d)},getOwnPropertyDescriptor(u,c){var d=Reflect.getOwnPropertyDescriptor(u,c);if(d&&"value"in d){var f=s.get(c);f&&(d.value=o(f))}else if(d===void 0){var y=s.get(c),l=y==null?void 0:y.v;if(y!==void 0&&l!==Fe)return{enumerable:!0,configurable:!0,value:l,writable:!0}}return d},has(u,c){var l;if(c===Bs)return!0;var d=s.get(c),f=d!==void 0&&d.v!==Fe||Reflect.has(u,c);if(d!==void 0||je!==null&&(!f||(l=nn(u,c))!=null&&l.writable)){d===void 0&&(d=a(()=>{var v=f?en(u[c]):Fe,p=D(v);return p}),s.set(c,d));var y=o(d);if(y===Fe)return!1}return f},set(u,c,d,f){var R;var y=s.get(c),l=c in u;if(n&&c==="length")for(var v=d;v<y.v;v+=1){var p=s.get(v+"");p!==void 0?h(p,Fe):v in u&&(p=a(()=>D(Fe)),s.set(v+"",p))}if(y===void 0)(!l||(R=nn(u,c))!=null&&R.writable)&&(y=a(()=>D(void 0)),h(y,en(d)),s.set(c,y));else{l=y.v!==Fe;var x=a(()=>en(d));h(y,x)}var m=Reflect.getOwnPropertyDescriptor(u,c);if(m!=null&&m.set&&m.set.call(f,d),!l){if(n&&typeof c=="string"){var k=s.get("length"),P=Number(c);Number.isInteger(P)&&P>=k.v&&h(k,P+1)}on(i)}return!0},ownKeys(u){o(i);var c=Reflect.ownKeys(u).filter(y=>{var l=s.get(y);return l===void 0||l.v!==Fe});for(var[d,f]of s)f.v!==Fe&&!(d in u)&&c.push(d);return c},setPrototypeOf(){jo()}})}var Rr,Nn,Pi,qi,Mi;function ea(){if(Rr===void 0){Rr=window,Nn=document,Pi=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,s=Text.prototype;qi=nn(t,"firstChild").get,Mi=nn(t,"nextSibling").get,Ir(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ir(s)&&(s.__t=void 0)}}function ls(e=""){return document.createTextNode(e)}function Wt(e){return qi.call(e)}function mn(e){return Mi.call(e)}function g(e,t){return Wt(e)}function Se(e,t=!1){{var s=Wt(e);return s instanceof Comment&&s.data===""?mn(s):s}}function _(e,t=1,s=!1){let n=e;for(;t--;)n=mn(n);return n}function ta(e){e.textContent=""}function $i(){return!1}let Ar=!1;function sa(){Ar||(Ar=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const s of e.target.elements)(t=s.__on_r)==null||t.call(s)})},{capture:!0}))}function On(e){var t=ce,s=je;gt(null),Dt(null);try{return e()}finally{gt(t),Dt(s)}}function Ii(e,t,s,n=s){e.addEventListener(t,()=>On(s));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),sa()}function Di(e){je===null&&(ce===null&&So(),xo()),js&&ko()}function na(e,t){var s=t.last;s===null?t.last=t.first=e:(s.next=e,e.prev=s,t.last=e)}function At(e,t,s){var n=je;n!==null&&(n.f&ct)!==0&&(e|=ct);var i={ctx:De,deps:null,nodes:null,f:e|Ve|pt,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(s)try{an(i),i.f|=mr}catch(u){throw nt(i),u}else t!==null&&xt(i);var r=i;if(s&&r.deps===null&&r.teardown===null&&r.nodes===null&&r.first===r.last&&(r.f&Gs)===0&&(r=r.first,(e&Qt)!==0&&(e&us)!==0&&r!==null&&(r.f|=us)),r!==null&&(r.parent=n,n!==null&&na(r,n),ce!==null&&(ce.f&Ue)!==0&&(e&Es)===0)){var a=ce;(a.effects??(a.effects=[])).push(r)}return i}function br(){return ce!==null&&!St}function kr(e){const t=At(pn,null,!1);return Ie(t,Ne),t.teardown=e,t}function Mn(e){Di();var t=je.f,s=!ce&&(t&jt)!==0&&(t&mr)===0;if(s){var n=De;(n.e??(n.e=[])).push(e)}else return Bi(e)}function Bi(e){return At(qn|ci,e,!1)}function ra(e){return Di(),At(pn|ci,e,!0)}function ia(e){os.ensure();const t=At(Es|Gs,e,!0);return(s={})=>new Promise(n=>{s.outro?bs(t,()=>{nt(t),n(void 0)}):(nt(t),n(void 0))})}function oa(e){return At(qn,e,!1)}function aa(e){return At(_r|Gs,e,!0)}function Fn(e,t=0){return At(pn|t,e,!0)}function J(e,t=[],s=[],n=[]){Yo(n,t,s,i=>{At(pn,()=>e(...i.map(o)),!0)})}function _n(e,t=0){var s=At(Qt|t,e,!0);return s}function ft(e){return At(jt|Gs,e,!0)}function Ri(e){var t=e.teardown;if(t!==null){const s=js,n=ce;Nr(!0),gt(null);try{t.call(null)}finally{Nr(s),gt(n)}}}function Ai(e,t=!1){var s=e.first;for(e.first=e.last=null;s!==null;){const i=s.ac;i!==null&&On(()=>{i.abort(Ds)});var n=s.next;(s.f&Es)!==0?s.parent=null:nt(s,t),s=n}}function la(e){for(var t=e.first;t!==null;){var s=t.next;(t.f&jt)===0&&nt(t),t=s}}function nt(e,t=!0){var s=!1;(t||(e.f&li)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(ca(e.nodes.start,e.nodes.end),s=!0),Ai(e,t&&!s),$n(e,0),Ie(e,rs);var n=e.nodes&&e.nodes.t;if(n!==null)for(const r of n)r.stop();Ri(e);var i=e.parent;i!==null&&i.first!==null&&Ni(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function ca(e,t){for(;e!==null;){var s=e===t?null:mn(e);e.remove(),e=s}}function Ni(e){var t=e.parent,s=e.prev,n=e.next;s!==null&&(s.next=n),n!==null&&(n.prev=s),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=s))}function bs(e,t,s=!0){var n=[];Oi(e,n,!0);var i=()=>{s&&nt(e),t&&t()},r=n.length;if(r>0){var a=()=>--r||i();for(var u of n)u.out(a)}else i()}function Oi(e,t,s){if((e.f&ct)===0){e.f^=ct;var n=e.nodes&&e.nodes.t;if(n!==null)for(const u of n)(u.is_global||s)&&t.push(u);for(var i=e.first;i!==null;){var r=i.next,a=(i.f&us)!==0||(i.f&jt)!==0&&(e.f&Qt)!==0;Oi(i,t,a?s:!1),i=r}}}function xr(e){Fi(e,!0)}function Fi(e,t){if((e.f&ct)!==0){e.f^=ct,(e.f&Ne)===0&&(Ie(e,Ve),xt(e));for(var s=e.first;s!==null;){var n=s.next,i=(s.f&us)!==0||(s.f&jt)!==0;Fi(s,i?t:!1),s=n}var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)(a.is_global||t)&&a.in()}}function Li(e,t){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end;s!==null;){var i=s===n?null:mn(s);t.append(s),s=i}}let En=!1,js=!1;function Nr(e){js=e}let ce=null,St=!1;function gt(e){ce=e}let je=null;function Dt(e){je=e}let ht=null;function Ui(e){ce!==null&&(ht===null?ht=[e]:ht.push(e))}let et=null,at=0,ut=null;function ua(e){ut=e}let Vi=1,ps=0,ks=ps;function Or(e){ks=e}function Hi(){return++Vi}function wn(e){var t=e.f;if((t&Ve)!==0)return!0;if(t&Ue&&(e.f&=~Cs),(t&Tt)!==0){for(var s=e.deps,n=s.length,i=0;i<n;i++){var r=s[i];if(wn(r)&&Ti(r),r.wv>e.wv)return!0}(t&pt)!==0&&Le===null&&Ie(e,Ne)}return!1}function Ji(e,t,s=!0){var n=e.reactions;if(n!==null&&!(ht!==null&&Vs.call(ht,e)))for(var i=0;i<n.length;i++){var r=n[i];(r.f&Ue)!==0?Ji(r,t,!1):t===r&&(s?Ie(r,Ve):(r.f&Ne)!==0&&Ie(r,Tt),xt(r))}}function Wi(e){var x;var t=et,s=at,n=ut,i=ce,r=ht,a=De,u=St,c=ks,d=e.f;et=null,at=0,ut=null,ce=(d&(jt|Es))===0?e:null,ht=null,Hs(e.ctx),St=!1,ks=++ps,e.ac!==null&&(On(()=>{e.ac.abort(Ds)}),e.ac=null);try{e.f|=Zn;var f=e.fn,y=f(),l=e.deps,v=oe==null?void 0:oe.is_fork;if(et!==null){var p;if(v||$n(e,at),l!==null&&at>0)for(l.length=at+et.length,p=0;p<et.length;p++)l[at+p]=et[p];else e.deps=l=et;if(br()&&(e.f&pt)!==0)for(p=at;p<l.length;p++)((x=l[p]).reactions??(x.reactions=[])).push(e)}else!v&&l!==null&&at<l.length&&($n(e,at),l.length=at);if(gn()&&ut!==null&&!St&&l!==null&&(e.f&(Ue|Tt|Ve))===0)for(p=0;p<ut.length;p++)Ji(ut[p],e);if(i!==null&&i!==e){if(ps++,i.deps!==null)for(let m=0;m<s;m+=1)i.deps[m].rv=ps;if(t!==null)for(const m of t)m.rv=ps;ut!==null&&(n===null?n=ut:n.push(...ut))}return(e.f&is)!==0&&(e.f^=is),y}catch(m){return gi(m)}finally{e.f^=Zn,et=t,at=s,ut=n,ce=i,ht=r,Hs(a),St=u,ks=c}}function va(e,t){let s=t.reactions;if(s!==null){var n=po.call(s,e);if(n!==-1){var i=s.length-1;i===0?s=t.reactions=null:(s[n]=s[i],s.pop())}}if(s===null&&(t.f&Ue)!==0&&(et===null||!Vs.call(et,t))){var r=t;(r.f&pt)!==0&&(r.f^=pt,r.f&=~Cs),wr(r),Ci(r),$n(r,0)}}function $n(e,t){var s=e.deps;if(s!==null)for(var n=t;n<s.length;n++)va(e,s[n])}function an(e){var t=e.f;if((t&rs)===0){Ie(e,Ne);var s=je,n=En;je=e,En=!0;try{(t&(Qt|ai))!==0?la(e):Ai(e),Ri(e);var i=Wi(e);e.teardown=typeof i=="function"?i:null,e.wv=Vi;var r;Xn&&Ro&&(e.f&Ve)!==0&&e.deps}finally{En=n,je=s}}}async function da(){await Promise.resolve(),Fo()}function o(e){var t=e.f,s=(t&Ue)!==0;if(ce!==null&&!St){var n=je!==null&&(je.f&rs)!==0;if(!n&&(ht===null||!Vs.call(ht,e))){var i=ce.deps;if((ce.f&Zn)!==0)e.rv<ps&&(e.rv=ps,et===null&&i!==null&&i[at]===e?at++:et===null?et=[e]:et.push(e));else{(ce.deps??(ce.deps=[])).push(e);var r=e.reactions;r===null?e.reactions=[ce]:Vs.call(r,ce)||r.push(ce)}}}if(js&&as.has(e))return as.get(e);if(s){var a=e;if(js){var u=a.v;return((a.f&Ne)===0&&a.reactions!==null||Yi(a))&&(u=yr(a)),as.set(a,u),u}var c=(a.f&pt)===0&&!St&&ce!==null&&(En||(ce.f&pt)!==0),d=a.deps===null;wn(a)&&(c&&(a.f|=pt),Ti(a)),c&&!d&&Gi(a)}if(Le!=null&&Le.has(e))return Le.get(e);if((e.f&is)!==0)throw e.v;return e.v}function Gi(e){if(e.deps!==null){e.f|=pt;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&Ue)!==0&&(t.f&pt)===0&&Gi(t)}}function Yi(e){if(e.v===Fe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(as.has(t)||(t.f&Ue)!==0&&Yi(t))return!0;return!1}function Ps(e){var t=St;try{return St=!0,e()}finally{St=t}}function fa(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Bs in e)lr(e);else if(!Array.isArray(e))for(let t in e){const s=e[t];typeof s=="object"&&s&&Bs in s&&lr(s)}}}function lr(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{lr(e[n],t)}catch{}const s=hr(e);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const n=ii(s);for(let i in n){const r=n[i].get;if(r)try{r.call(e)}catch{}}}}}const pa=["touchstart","touchmove"];function ha(e){return pa.includes(e)}const Qi=new Set,cr=new Set;function ga(e,t,s,n={}){function i(r){if(n.capture||tn.call(t,r),!r.cancelBubble)return On(()=>s==null?void 0:s.call(this,r))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Yt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function Ct(e,t,s,n,i){var r={capture:n,passive:i},a=ga(e,t,s,r);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&kr(()=>{t.removeEventListener(e,a,r)})}function Kt(e){for(var t=0;t<e.length;t++)Qi.add(e[t]);for(var s of cr)s(e)}let Fr=null;function tn(e){var m;var t=this,s=t.ownerDocument,n=e.type,i=((m=e.composedPath)==null?void 0:m.call(e))||[],r=i[0]||e.target;Fr=e;var a=0,u=Fr===e&&e.__root;if(u){var c=i.indexOf(u);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var d=i.indexOf(t);if(d===-1)return;c<=d&&(a=c)}if(r=i[a]||e.target,r!==t){ri(e,"currentTarget",{configurable:!0,get(){return r||s}});var f=ce,y=je;gt(null),Dt(null);try{for(var l,v=[];r!==null;){var p=r.assignedSlot||r.parentNode||r.host||null;try{var x=r["__"+n];x!=null&&(!r.disabled||e.target===r)&&x.call(r,e)}catch(k){l?v.push(k):l=k}if(e.cancelBubble||p===t||p===null)break;r=p}if(l){for(let k of v)queueMicrotask(()=>{throw k});throw l}}finally{e.__root=t,delete e.currentTarget,gt(f),Dt(y)}}}function Ki(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function ln(e,t){var s=je;s.nodes===null&&(s.nodes={start:e,end:t,a:null,t:null})}function C(e,t){var s=(t&vi)!==0,n=(t&Io)!==0,i,r=!e.startsWith("<!>");return()=>{i===void 0&&(i=Ki(r?e:"<!>"+e),s||(i=Wt(i)));var a=n||Pi?document.importNode(i,!0):i.cloneNode(!0);if(s){var u=Wt(a),c=a.lastChild;ln(u,c)}else ln(a,a);return a}}function ma(e,t,s="svg"){var n=!e.startsWith("<!>"),i=(t&vi)!==0,r=`<${s}>${n?e:"<!>"+e}</${s}>`,a;return()=>{if(!a){var u=Ki(r),c=Wt(u);if(i)for(a=document.createDocumentFragment();Wt(c);)a.appendChild(Wt(c));else a=Wt(c)}var d=a.cloneNode(!0);if(i){var f=Wt(d),y=d.lastChild;ln(f,y)}else ln(d,d);return d}}function Re(e,t){return ma(e,t,"svg")}function Be(){var e=document.createDocumentFragment(),t=document.createComment(""),s=ls();return e.append(t,s),ln(t,s),e}function b(e,t){e!==null&&e.before(t)}function O(e,t){var s=t==null?"":typeof t=="object"?t+"":t;s!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=s,e.nodeValue=s+"")}function _a(e,t){return wa(e,t)}const $s=new Map;function wa(e,{target:t,anchor:s,props:n={},events:i,context:r,intro:a=!0}){ea();var u=new Set,c=y=>{for(var l=0;l<y.length;l++){var v=y[l];if(!u.has(v)){u.add(v);var p=ha(v);t.addEventListener(v,tn,{passive:p});var x=$s.get(v);x===void 0?(document.addEventListener(v,tn,{passive:p}),$s.set(v,1)):$s.set(v,x+1)}}};c(Bn(Qi)),cr.add(c);var d=void 0,f=ia(()=>{var y=s??t.appendChild(ls());return Ho(y,{pending:()=>{}},l=>{mt({});var v=De;r&&(v.c=r),i&&(n.$$events=i),d=e(l,n)||{},_t()}),()=>{var p;for(var l of u){t.removeEventListener(l,tn);var v=$s.get(l);--v===0?(document.removeEventListener(l,tn),$s.delete(l)):$s.set(l,v)}cr.delete(c),y!==s&&((p=y.parentNode)==null||p.removeChild(y))}});return ya.set(d,f),d}let ya=new WeakMap;var kt,Mt,lt,ys,dn,fn,Dn;class Sr{constructor(t,s=!0){zt(this,"anchor");ie(this,kt,new Map);ie(this,Mt,new Map);ie(this,lt,new Map);ie(this,ys,new Set);ie(this,dn,!0);ie(this,fn,()=>{var t=oe;if(w(this,kt).has(t)){var s=w(this,kt).get(t),n=w(this,Mt).get(s);if(n)xr(n),w(this,ys).delete(s);else{var i=w(this,lt).get(s);i&&(w(this,Mt).set(s,i.effect),w(this,lt).delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[r,a]of w(this,kt)){if(w(this,kt).delete(r),r===t)break;const u=w(this,lt).get(a);u&&(nt(u.effect),w(this,lt).delete(a))}for(const[r,a]of w(this,Mt)){if(r===s||w(this,ys).has(r))continue;const u=()=>{if(Array.from(w(this,kt).values()).includes(r)){var d=document.createDocumentFragment();Li(a,d),d.append(ls()),w(this,lt).set(r,{effect:a,fragment:d})}else nt(a);w(this,ys).delete(r),w(this,Mt).delete(r)};w(this,dn)||!n?(w(this,ys).add(r),bs(a,u,!1)):u()}}});ie(this,Dn,t=>{w(this,kt).delete(t);const s=Array.from(w(this,kt).values());for(const[n,i]of w(this,lt))s.includes(n)||(nt(i.effect),w(this,lt).delete(n))});this.anchor=t,se(this,dn,s)}ensure(t,s){var n=oe,i=$i();if(s&&!w(this,Mt).has(t)&&!w(this,lt).has(t))if(i){var r=document.createDocumentFragment(),a=ls();r.append(a),w(this,lt).set(t,{effect:ft(()=>s(a)),fragment:r})}else w(this,Mt).set(t,ft(()=>s(this.anchor)));if(w(this,kt).set(n,t),i){for(const[u,c]of w(this,Mt))u===t?n.unskip_effect(c):n.skip_effect(c);for(const[u,c]of w(this,lt))u===t?n.unskip_effect(c.effect):n.skip_effect(c.effect);n.oncommit(w(this,fn)),n.ondiscard(w(this,Dn))}else w(this,fn).call(this)}}kt=new WeakMap,Mt=new WeakMap,lt=new WeakMap,ys=new WeakMap,dn=new WeakMap,fn=new WeakMap,Dn=new WeakMap;function B(e,t,s=!1){var n=new Sr(e),i=s?us:0;function r(a,u){n.ensure(a,u)}_n(()=>{var a=!1;t((u,c=!0)=>{a=!0,r(c,u)}),a||r(!1,null)},i)}function tt(e,t){return t}function ba(e,t,s){for(var n=[],i=t.length,r,a=t.length,u=0;u<i;u++){let y=t[u];bs(y,()=>{if(r){if(r.pending.delete(y),r.done.add(y),r.pending.size===0){var l=e.outrogroups;ur(Bn(r.done)),l.delete(r),l.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var c=n.length===0&&s!==null;if(c){var d=s,f=d.parentNode;ta(f),f.append(d),e.items.clear()}ur(t,!c)}else r={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(r)}function ur(e,t=!0){for(var s=0;s<e.length;s++)nt(e[s],t)}var Lr;function Ge(e,t,s,n,i,r=null){var a=e,u=new Map,c=(t&ui)!==0;if(c){var d=e;a=d.appendChild(ls())}var f=null,y=Si(()=>{var k=s();return ni(k)?k:k==null?[]:Bn(k)}),l,v=!0;function p(){m.fallback=f,ka(m,l,a,t,n),f!==null&&(l.length===0?(f.f&Gt)===0?xr(f):(f.f^=Gt,sn(f,null,a)):bs(f,()=>{f=null}))}var x=_n(()=>{l=o(y);for(var k=l.length,P=new Set,R=oe,ue=$i(),G=0;G<k;G+=1){var ne=l[G],xe=n(ne,G),be=v?null:u.get(xe);be?(be.v&&Ws(be.v,ne),be.i&&Ws(be.i,G),ue&&R.unskip_effect(be.e)):(be=xa(u,v?a:Lr??(Lr=ls()),ne,xe,G,i,t,s),v||(be.e.f|=Gt),u.set(xe,be)),P.add(xe)}if(k===0&&r&&!f&&(v?f=ft(()=>r(a)):(f=ft(()=>r(Lr??(Lr=ls()))),f.f|=Gt)),k>P.size&&bo(),!v)if(ue){for(const[he,Ae]of u)P.has(he)||R.skip_effect(Ae.e);R.oncommit(p),R.ondiscard(()=>{})}else p();o(y)}),m={effect:x,items:u,outrogroups:null,fallback:f};v=!1}function Zs(e){for(;e!==null&&(e.f&jt)===0;)e=e.next;return e}function ka(e,t,s,n,i){var Ae,Ye,Qe,U,V,ve,T,$,F;var r=(n&Mo)!==0,a=t.length,u=e.items,c=Zs(e.effect.first),d,f=null,y,l=[],v=[],p,x,m,k;if(r)for(k=0;k<a;k+=1)p=t[k],x=i(p,k),m=u.get(x).e,(m.f&Gt)===0&&((Ye=(Ae=m.nodes)==null?void 0:Ae.a)==null||Ye.measure(),(y??(y=new Set)).add(m));for(k=0;k<a;k+=1){if(p=t[k],x=i(p,k),m=u.get(x).e,e.outrogroups!==null)for(const L of e.outrogroups)L.pending.delete(m),L.done.delete(m);if((m.f&Gt)!==0)if(m.f^=Gt,m===c)sn(m,null,s);else{var P=f?f.next:c;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Zt(e,f,m),Zt(e,m,P),sn(m,P,s),f=m,l=[],v=[],c=Zs(f.next);continue}if((m.f&ct)!==0&&(xr(m),r&&((U=(Qe=m.nodes)==null?void 0:Qe.a)==null||U.unfix(),(y??(y=new Set)).delete(m))),m!==c){if(d!==void 0&&d.has(m)){if(l.length<v.length){var R=v[0],ue;f=R.prev;var G=l[0],ne=l[l.length-1];for(ue=0;ue<l.length;ue+=1)sn(l[ue],R,s);for(ue=0;ue<v.length;ue+=1)d.delete(v[ue]);Zt(e,G.prev,ne.next),Zt(e,f,G),Zt(e,ne,R),c=R,f=ne,k-=1,l=[],v=[]}else d.delete(m),sn(m,c,s),Zt(e,m.prev,m.next),Zt(e,m,f===null?e.effect.first:f.next),Zt(e,f,m),f=m;continue}for(l=[],v=[];c!==null&&c!==m;)(d??(d=new Set)).add(c),v.push(c),c=Zs(c.next);if(c===null)continue}(m.f&Gt)===0&&l.push(m),f=m,c=Zs(m.next)}if(e.outrogroups!==null){for(const L of e.outrogroups)L.pending.size===0&&(ur(Bn(L.done)),(V=e.outrogroups)==null||V.delete(L));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||d!==void 0){var xe=[];if(d!==void 0)for(m of d)(m.f&ct)===0&&xe.push(m);for(;c!==null;)(c.f&ct)===0&&c!==e.fallback&&xe.push(c),c=Zs(c.next);var be=xe.length;if(be>0){var he=(n&ui)!==0&&a===0?s:null;if(r){for(k=0;k<be;k+=1)(T=(ve=xe[k].nodes)==null?void 0:ve.a)==null||T.measure();for(k=0;k<be;k+=1)(F=($=xe[k].nodes)==null?void 0:$.a)==null||F.fix()}ba(e,xe,he)}}r&&Yt(()=>{var L,ae;if(y!==void 0)for(m of y)(ae=(L=m.nodes)==null?void 0:L.a)==null||ae.apply()})}function xa(e,t,s,n,i,r,a,u){var c=(a&Po)!==0?(a&$o)===0?zi(s,!1,!1):Ts(s):null,d=(a&qo)!==0?Ts(i):null;return{v:c,i:d,e:ft(()=>(r(t,c??s,d??i,u),()=>{e.delete(n)}))}}function sn(e,t,s){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,r=t&&(t.f&Gt)===0?t.nodes.start:s;n!==null;){var a=mn(n);if(r.before(n),n===i)return;n=a}}function Zt(e,t,s){t===null?e.effect.first=s:t.next=s,s===null?e.effect.last=t:s.prev=t}function Cr(e,t,...s){var n=new Sr(e);_n(()=>{const i=t()??null;n.ensure(i,i&&(r=>i(r,...s)))},us)}function Sa(e,t,s){var n=new Sr(e);_n(()=>{var i=t()??null;n.ensure(i,i&&(r=>s(r,i)))},us)}const Ur=[...` 	
\r\fÂ \v\uFEFF`];function Ca(e,t,s){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),s){for(var i in s)if(s[i])n=n?n+" "+i:i;else if(n.length)for(var r=i.length,a=0;(a=n.indexOf(i,a))>=0;){var u=a+r;(a===0||Ur.includes(n[a-1]))&&(u===n.length||Ur.includes(n[u]))?n=(a===0?"":n.substring(0,a))+n.substring(u+1):a=u}}return n===""?null:n}function Ta(e,t){return e==null?null:String(e)}function ke(e,t,s,n,i,r){var a=e.__className;if(a!==s||a===void 0){var u=Ca(s,n,r);u==null?e.removeAttribute("class"):e.className=u,e.__className=s}else if(r&&i!==r)for(var c in r){var d=!!r[c];(i==null||d!==!!i[c])&&e.classList.toggle(c,d)}return r}function yn(e,t,s,n){var i=e.__style;if(i!==t){var r=Ta(t);r==null?e.removeAttribute("style"):e.style.cssText=r,e.__style=t}return n}const ja=Symbol("is custom element"),za=Symbol("is html");function Ea(e,t){var s=Xi(e);s.value===(s.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function cs(e,t,s,n){var i=Xi(e);i[t]!==(i[t]=s)&&(t==="loading"&&(e[_o]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Pa(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function Xi(e){return e.__attributes??(e.__attributes={[ja]:e.nodeName.includes("-"),[za]:e.namespaceURI===Do})}var Vr=new Map;function Pa(e){var t=e.getAttribute("is")||e.nodeName,s=Vr.get(t);if(s)return s;Vr.set(t,s=[]);for(var n,i=e,r=Element.prototype;r!==i;){n=ii(i);for(var a in n)n[a].set&&s.push(a);i=hr(i)}return s}function Hr(e,t,s=t){var n=new WeakSet;Ii(e,"input",async i=>{var r=i?e.defaultValue:e.value;if(r=Gn(e)?Yn(r):r,s(r),oe!==null&&n.add(oe),await da(),r!==(r=t())){var a=e.selectionStart,u=e.selectionEnd,c=e.value.length;if(e.value=r??"",u!==null){var d=e.value.length;a===u&&u===c&&d>c?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=a,e.selectionEnd=Math.min(u,d))}}}),Ps(t)==null&&e.value&&(s(Gn(e)?Yn(e.value):e.value),oe!==null&&n.add(oe)),Fn(()=>{var i=t();if(e===document.activeElement){var r=er??oe;if(n.has(r))return}Gn(e)&&i===Yn(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Zi(e,t,s=t){Ii(e,"change",n=>{var i=n?e.defaultChecked:e.checked;s(i)}),Ps(t)==null&&s(e.checked),Fn(()=>{var n=t();e.checked=!!n})}function Gn(e){var t=e.type;return t==="number"||t==="range"}function Yn(e){return e===""?null:+e}function Jr(e,t){return e===t||(e==null?void 0:e[Bs])===t}function bn(e={},t,s,n){return oa(()=>{var i,r;return Fn(()=>{i=r,r=[],Ps(()=>{e!==s(...r)&&(t(e,...r),i&&Jr(s(...i),e)&&t(null,...i))})}),()=>{Yt(()=>{r&&Jr(s(...r),e)&&t(null,...r)})}}),e}function qa(e=!1){const t=De,s=t.l.u;if(!s)return;let n=()=>fa(t.s);if(e){let i=0,r={};const a=An(()=>{let u=!1;const c=t.s;for(const d in c)c[d]!==r[d]&&(r[d]=c[d],u=!0);return u&&i++,i});n=()=>o(a)}s.b.length&&ra(()=>{Wr(t,n),Pn(s.b)}),Mn(()=>{const i=Ps(()=>s.m.map(mo));return()=>{for(const r of i)typeof r=="function"&&r()}}),s.a.length&&Mn(()=>{Wr(t,n),Pn(s.a)})}function Wr(e,t){if(e.l.s)for(const s of e.l.s)o(s);t()}function Tr(e,t,s){if(e==null)return t(void 0),s&&s(void 0),ns;const n=Ps(()=>e.subscribe(t,s));return n.unsubscribe?()=>n.unsubscribe():n}const Is=[];function Ma(e,t){return{subscribe:Ys(e,t).subscribe}}function Ys(e,t=ns){let s=null;const n=new Set;function i(u){if(fi(e,u)&&(e=u,s)){const c=!Is.length;for(const d of n)d[1](),Is.push(d,e);if(c){for(let d=0;d<Is.length;d+=2)Is[d][0](Is[d+1]);Is.length=0}}}function r(u){i(u(e))}function a(u,c=ns){const d=[u,c];return n.add(d),n.size===1&&(s=t(i,r)||ns),u(e),()=>{n.delete(d),n.size===0&&s&&(s(),s=null)}}return{set:i,update:r,subscribe:a}}function jr(e,t,s){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return Ma(s,(a,u)=>{let c=!1;const d=[];let f=0,y=ns;const l=()=>{if(f)return;y();const p=t(n?d[0]:d,a,u);r?a(p):y=typeof p=="function"?p:ns},v=i.map((p,x)=>Tr(p,m=>{d[x]=m,f&=~(1<<x),c&&l()},()=>{f|=1<<x}));return c=!0,l(),function(){Pn(v),y(),c=!1}})}function It(e){let t;return Tr(e,s=>t=s)(),t}let vr=Symbol();function Bt(e,t,s){const n=s[t]??(s[t]={store:null,source:zi(void 0),unsubscribe:ns});if(n.store!==e&&!(vr in s))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=ns;else{var i=!0;n.unsubscribe=Tr(e,r=>{i?n.source.v=r:h(n.source,r)}),i=!1}return e&&vr in s?It(e):o(n.source)}function Xt(){const e={};function t(){kr(()=>{for(var s in e)e[s].unsubscribe();ri(e,vr,{enumerable:!1,value:!0})})}return[e,t]}function dr(e,t,s,n){var i=n,r=!0,a=()=>(r&&(r=!1,i=n),i),u;u=e[t],u===void 0&&n!==void 0&&(u=a());var c;return c=()=>{var d=e[t];return d===void 0?a():(r=!0,d)},c}function Ln(e){De===null&&wo(),hn&&De.l!==null?$a(De).m.push(e):Mn(()=>{const t=Ps(e);if(typeof t=="function")return t})}function $a(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Ia="5";var si;typeof window<"u"&&((si=window.__svelte??(window.__svelte={})).v??(si.v=new Set)).add(Ia);function eo(){return window.location.pathname||"/"}function Da(){return window.location.search?window.location.search.slice(1):""}function Ba(){const e=window.location.hash;if(e&&e.startsWith("#/")){const t=e.slice(1);history.replaceState(null,"",t)}}Ba();const Un=Ys(eo());window.addEventListener("popstate",()=>{Un.set(eo())});const zr=jr(Un,e=>e.split("?")[0]||"/"),Ra=jr(Un,()=>Da()),Aa=jr(Ra,e=>Object.fromEntries(new URLSearchParams(e)));function to(e){history.pushState(null,"",e),Un.set(e)}Ao();let Na=0;function Oa(){const{subscribe:e,update:t}=Ys([]);return{subscribe:e,add(s,n="info",i=3e3){const r={id:Na++,message:s,type:n};t(a=>[...a,r]),setTimeout(()=>{t(a=>a.filter(u=>u.id!==r.id))},i)},remove(s){t(n=>n.filter(i=>i.id!==s))}}}const so=Oa();function fe(e,t,s){so.add(e,t,s)}var Fa=C('<div role="alert"> </div>');function La(e,t){let s=dr(t,"type",3,"info");var n=Fa(),i=g(n);J(()=>{ke(n,1,`toast ${s()??""}`,"svelte-1i7wnxu"),O(i,t.message)}),b(e,n)}var Ua=C('<div class="toast-container svelte-3knp8x"></div>');function Va(e){const t=()=>Bt(so,"$toasts",s),[s,n]=Xt();var i=Ua();Ge(i,5,t,r=>r.id,(r,a)=>{La(r,{get message(){return o(a).message},get type(){return o(a).type}})}),b(e,i),n()}function Ee(){const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"http://localhost:3001":"https://yoink.coah80.com"}async function Ha(e,t={}){const s=await fetch(e,t),n=s.headers.get("content-type");if(!s.ok){let i=`Request failed (${s.status})`;if(n&&n.includes("application/json"))i=(await s.json()).error||i;else{const r=await s.text();console.error("Non-JSON error response:",r.substring(0,500)),i=`Server error ${s.status} (likely VPN blocked)`}throw new Error(i)}return s.json()}async function Ja(e,t={}){return Ha(`${Ee()}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function fr(e,{onMessage:t,onError:s,maxReconnectAttempts:n=10}){let i=0,r=null,a=!1;function u(){a||(r=new EventSource(`${Ee()}/api/progress/${e}`),r.onmessage=d=>{try{const f=JSON.parse(d.data);i=0,t(f),(f.stage==="complete"||f.stage==="error"||f.stage==="cancelled")&&c()}catch(f){console.error("SSE parse error:",f)}},r.onerror=()=>{if(r.close(),!a)if(i<n){i++;const d=Math.min(1e3*i,5e3);s&&s({type:"reconnecting",attempt:i,max:n}),setTimeout(u,d)}else s&&s({type:"failed",message:"Connection lost - refresh page to retry"})})}function c(){a=!0,r&&(r.close(),r=null)}return u(),{close:c}}const cn=[],Wa=5;function Gr(e){e.parentNode&&e.parentNode.removeChild(e);const t=cn.indexOf(e);t>-1&&cn.splice(t,1)}function Ga(){for(;cn.length>Wa;){const e=cn.shift();e&&e.parentNode&&e.parentNode.removeChild(e)}}function Yr(e){const t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t),cn.push(t),Ga(),t.onload=()=>setTimeout(()=>Gr(t),5e3),setTimeout(()=>Gr(t),120*1e3)}function no(e,t){const s=URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}const zs=Ys(sessionStorage.getItem("yoink_clientId")||null),xs=new Set;let Ya=0,st=null,$t=0;const ro=3;async function Qa(){let e=It(zs);if(!e){try{e=(await(await fetch(`${Ee()}/api/connect`,{method:"POST"})).json()).clientId}catch{e="local-"+Date.now()+"-"+Math.random().toString(36).slice(2,11)}sessionStorage.setItem("yoink_clientId",e),zs.set(e)}return e}function Er(){const e=`job-${++Ya}-${Date.now()}`,t=xs.size===0;if(xs.add(e),t&&!st){$t=0;const s=It(zs);s&&!s.startsWith("local-")&&fetch(`${Ee()}/api/heartbeat/${s}`,{method:"POST"}).catch(()=>{}),st=setInterval(async()=>{const n=It(zs);if(!(!n||n.startsWith("local-")))try{await fetch(`${Ee()}/api/heartbeat/${n}`,{method:"POST"}),$t=0}catch{$t++,$t>=ro&&(clearInterval(st),st=null,$t=0)}},15e3)}return e}function Ka(){if(xs.size>0&&!st){$t=0;const e=It(zs);e&&!e.startsWith("local-")&&fetch(`${Ee()}/api/heartbeat/${e}`,{method:"POST"}).catch(()=>{}),st=setInterval(async()=>{const t=It(zs);if(!(!t||t.startsWith("local-")))try{await fetch(`${Ee()}/api/heartbeat/${t}`,{method:"POST"}),$t=0}catch{$t++,$t>=ro&&(clearInterval(st),st=null,$t=0)}},15e3)}}function Pr(e){e?xs.delete(e):xs.clear(),xs.size===0&&st&&(clearInterval(st),st=null)}typeof window<"u"&&window.addEventListener("beforeunload",()=>{st&&(clearInterval(st),st=null),xs.clear()});const Qr=[{text:"yoink it, go on..."},{text:"not cobalt"},{text:"im bored"},{text:"have you yoinked it today?"},{text:"download helium browser",link:"https://helium.computer/",classes:["clickable"]},{text:"dont like it? use cliply (dont)"},{text:"the biggest yt-dlp wrapper of them all"},{text:"awesome name, right?"},{text:"get yoinked!"},{text:"funny message here"},{text:"SHOUTOUT TO COAH"},{text:"new feature: yoink!"},{text:"new feature: ai download"},{text:"welcome to yoink.tools"},{text:"feelin' yoinky?"},{text:"im parched"},{text:"stay hydrated!"},{text:"computers are cool"},{text:"missing assignments?"},{text:"procrastinate with yoink"},{text:"newgrounds.com",link:"https://newgrounds.com",classes:["clickable"]},{text:"bring back flash!"},{text:"FUCK ICE"},{text:"post this one to twitter"},{text:"google i need yoinks! NOW!!!!!"},{text:"im feeling fancy today...",classes:["fancy"]},{text:"powered by yt-dlp"},{text:"hello world!"},{text:"1000+ sites!",link:"https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md",classes:["clickable"]},{text:"yes, that site works. even the one you're thinking of."}],Xa=["4tube","alphaporno","beeg","behindkink","bongacams","cam4","cammodels","camsoda","chaturbate","drtuber","empflix","eporner","erocast","eroprofile","fux","hellporno","hotmovs","iceporn","lovehomeporn","manyvids","motherless","moviefap","noodlemagazine","nuvid","peekvideos","peekvids","playvids","porn","pornbox","pornerbros","pornflip","pornhub","pornotube","pornovoisines","pornoxo","porntop","porntube","redtube","rule34video","slutload","spankbang","stripchat","sunporno","thisvid","tnaflix","tube8","txxx","xhamster","xnxx","xvideos","xxxymovies","youjizz","youporn","zenporn","xtube","erome","hentai","hclips","gotporn","fuq","ashemaletube"];function Za(e){try{const t=new URL(e).hostname.toLowerCase().replace("www.","");return Xa.some(s=>t.includes(s))}catch{return!1}}const Qn={quality:"1080p",codec:"h264",container:"mp4",audioFormat:"mp3",audioBitrate:"320",filenameStyle:"basic",playlistPreference:null,twitterGifs:!0},ds=["starting","downloading","processing","remuxing","sending","zipping","playlist-info","reconnecting","uploading","converting","compressing"];function el(){let e={...Qn};try{const r=localStorage.getItem("yoink_settings");r&&(e={...Qn,...JSON.parse(r)})}catch{}const{subscribe:t,set:s,update:n}=Ys(e);function i(r){localStorage.setItem("yoink_settings",JSON.stringify(r))}return{subscribe:t,set(r){i(r),s(r)},update(r){n(a=>{const u=r(a);return i(u),u})},setSetting(r,a){n(u=>{const c={...u,[r]:a};return i(c),c})},reset(){const r={...Qn};i(r),s(r)}}}const Ss=el();let Kr=!1;async function io(){if(!(Kr||!("serviceWorker"in navigator)))try{await navigator.serviceWorker.register("/sw.js"),Kr=!0}catch{}}async function tl(){return"Notification"in window?Notification.permission==="granted"?"granted":Notification.permission==="denied"?"denied":await Notification.requestPermission():"unsupported"}async function sl(e,t){if(!(!("Notification"in window)||Notification.permission!=="granted")){if(await io(),"serviceWorker"in navigator)try{const s=await navigator.serviceWorker.ready;if(s.active){s.active.postMessage({type:"PLAYLIST_COMPLETE",message:`${e} is ready to download!`,jobId:t});return}}catch{}new Notification("yoink",{body:`${e} is ready to download!`,icon:"/icons/icon-192.png"})}}function nl(){let e=[];try{const l=localStorage.getItem("yoink_queue");l&&(e=JSON.parse(l).map(v=>v.isPlaylist&&v.serverJobId&&v.stage!=="ready"?{...v,stage:"reconnecting",progress:v.progress||0,status:"reconnecting..."}:ds.includes(v.stage)?{...v,stage:"queued",progress:0,status:"interrupted - tap to restart"}:v).filter(v=>v.stage!=="complete"&&v.stage!=="error"))}catch{e=[]}const{subscribe:t,set:s,update:n}=Ys(e),i=new Map,r=new Map,a=new Map;function u(l){localStorage.setItem("yoink_queue",JSON.stringify(l))}function c(){return It({subscribe:t})}function d(l){const v=a.get(l);v&&(clearInterval(v),a.delete(l))}function f(l){const v=i.get(l);v&&(v.close(),i.delete(l)),d(l);const p=r.get(l);p&&(Pr(p),r.delete(l))}const y={subscribe:t,add(l){n(v=>{if(v.some(x=>x.id===l.id))return v;const p=[...v,l];return u(p),p})},remove(l){const p=c().find(x=>x.id===l);if(f(l),p&&ds.includes(p.stage)){const x=p.serverJobId||l;fetch(`${Ee()}/api/cancel/${x}`,{method:"POST"}).catch(()=>{})}n(x=>{const m=x.filter(k=>k.id!==l);return u(m),m}),p&&!p.isPlaylist&&ds.includes(p.stage)&&setTimeout(()=>this.processNext(),100)},updateItem(l,v){n(p=>{const x=p.map(m=>m.id===l?{...m,...v}:m);return u(x),x})},clear(){c().forEach(v=>{if(f(v.id),ds.includes(v.stage)){const p=v.serverJobId||v.id;fetch(`${Ee()}/api/cancel/${p}`,{method:"POST"}).catch(()=>{})}}),i.clear(),r.clear(),a.clear(),s([]),u([])},startDownload(l){if(l.isPlaylist){this._startPlaylistDownload(l);return}this._startDirectDownload(l)},_startDirectDownload(l){const v=It(Ss),p=Er();r.set(l.id,p),this.updateItem(l.id,{stage:"starting",status:"starting download...",startTime:Date.now()});const x=fr(l.id,{onMessage:P=>{const R={stage:P.stage,status:P.message};if(P.progress!==void 0&&(R.progress=P.progress),P.speed!==void 0&&(R.speed=P.speed),P.eta!==void 0&&(R.eta=P.eta),P.totalVideos!==void 0&&(R.videoCount=P.totalVideos),P.currentVideo!==void 0&&(R.currentVideo=P.currentVideo),P.currentVideoTitle!==void 0&&(R.currentVideoTitle=P.currentVideoTitle),P.format!==void 0&&(R.formatDisplay=P.format),P.downloadedCount!==void 0&&(R.downloadedCount=P.downloadedCount),P.failedVideos&&(R.failedVideos=P.failedVideos),P.failedCount!==void 0&&(R.failedCount=P.failedCount),this.updateItem(l.id,R),P.stage==="complete"){R.endTime=Date.now(),this.updateItem(l.id,R),f(l.id);const G=c().find(he=>he.id===l.id),ne=G!=null&&G.startTime?Math.floor((Date.now()-G.startTime)/1e3):0,xe=ne>=60?`${Math.floor(ne/60)}m ${ne%60}s`:`${ne}s`,be=l.format==="images"?"gallery download complete!":`download complete! (${xe})`;fe(be,"success"),this.processNext(),setTimeout(()=>this.remove(l.id),5e3)}else P.stage==="error"?(f(l.id),fe(P.message,"error"),this.processNext()):P.stage==="cancelled"&&(f(l.id),this.processNext())},onError:P=>{P.type==="reconnecting"?this.updateItem(l.id,{status:`reconnecting... (${P.attempt}/${P.max})`}):(this.updateItem(l.id,{stage:"error",status:P.message}),f(l.id),this.processNext())}});i.set(l.id,x);const m=new URLSearchParams({url:l.url,format:l.format,filename:l.title,quality:v.quality,container:v.container,audioFormat:v.audioFormat,audioBitrate:v.audioBitrate,progressId:l.id,twitterGifs:v.twitterGifs!==!1?"true":"false"});let k;l.format==="images"?k="/api/gallery/download":k="/api/download",Yr(`${Ee()}${k}?${m.toString()}`)},async _startPlaylistDownload(l){const v=It(Ss),p=l.resumeFrom>1;this.updateItem(l.id,{stage:"starting",status:p?`resuming from video ${l.resumeFrom}...`:"starting playlist download...",startTime:Date.now()}),io(),tl();try{const x=It(zs),k=(await Ja("/api/playlist/start",{url:l.url,format:l.format,quality:v.quality,container:v.container,audioFormat:v.audioFormat,audioBitrate:v.audioBitrate,clientId:x||void 0,resumeFrom:l.resumeFrom||1})).jobId;this.updateItem(l.id,{serverJobId:k}),this._connectPlaylistSSE(l.id,k),this._startPlaylistPolling(l.id,k)}catch(x){this.updateItem(l.id,{stage:"error",status:x.message||"failed to start playlist"}),fe(x.message||"failed to start playlist","error")}},_connectPlaylistSSE(l,v){const p=fr(v,{onMessage:x=>{this._handlePlaylistUpdate(l,x)},onError:()=>{}});i.set(l,p)},_startPlaylistPolling(l,v){d(l);const p=setInterval(async()=>{try{const x=await fetch(`${Ee()}/api/playlist/status/${v}`);if(!x.ok){x.status===404&&(this.updateItem(l,{stage:"error",status:"playlist expired â try again!"}),f(l),fe("playlist expired â try again!","error"));return}const m=await x.json();this._handlePlaylistUpdate(l,{stage:m.status==="complete"?"complete":m.status,message:m.message,progress:m.progress,totalVideos:m.totalVideos,currentVideo:m.currentVideo,currentVideoTitle:m.currentVideoTitle,failedVideos:m.failedVideos,failedCount:m.failedCount,downloadedCount:m.videosCompleted,downloadToken:m.downloadToken,fileName:m.fileName,fileSize:m.fileSize,speed:m.speed,eta:m.eta})}catch{}},3e3);a.set(l,p)},_handlePlaylistUpdate(l,v){const p={stage:v.stage,status:v.message};if(v.progress!==void 0&&(p.progress=v.progress),v.speed!==void 0&&(p.speed=v.speed),v.eta!==void 0&&(p.eta=v.eta),v.totalVideos!==void 0&&(p.videoCount=v.totalVideos),v.currentVideo!==void 0&&(p.currentVideo=v.currentVideo),v.currentVideoTitle!==void 0&&(p.currentVideoTitle=v.currentVideoTitle),v.downloadedCount!==void 0&&(p.downloadedCount=v.downloadedCount),v.failedVideos&&(p.failedVideos=v.failedVideos),v.failedCount!==void 0&&(p.failedCount=v.failedCount),v.stage==="complete"&&v.downloadToken){p.stage="ready",p.downloadToken=v.downloadToken,p.fileName=v.fileName,p.fileSize=v.fileSize,p.endTime=Date.now(),p.status="playlist ready â tap to download",this.updateItem(l,p),f(l);const m=c().find(k=>k.id===l);fe(`${(m==null?void 0:m.title)||"playlist"} is ready to download!`,"success",8e3),sl((m==null?void 0:m.title)||"playlist",m==null?void 0:m.serverJobId);return}if(v.stage==="error"){this.updateItem(l,p),f(l),fe(v.message,"error");return}if(v.stage==="cancelled"){this.updateItem(l,p),f(l);return}this.updateItem(l,p)},async downloadReady(l){const p=c().find(x=>x.id===l);if(!(!p||!p.downloadToken)){if(p.serverJobId)try{if(!(await fetch(`${Ee()}/api/playlist/status/${p.serverJobId}`)).ok){this.updateItem(l,{stage:"error",status:"playlist expired â try again!"}),fe("playlist expired â try again!","error");return}}catch{this.updateItem(l,{stage:"error",status:"playlist expired â try again!"}),fe("playlist expired â try again!","error");return}Yr(`${Ee()}/api/playlist/download/${p.downloadToken}`),fe("downloading playlist zip...","success"),setTimeout(()=>this.remove(l),1e4)}},processNext(){const l=c();if(l.some(x=>!x.isPlaylist&&ds.includes(x.stage)))return;const p=l.find(x=>x.stage==="queued");p&&this.startDownload(p)},startAllQueued(){this.processNext()},retryDownload(l){const p=c().find(m=>m.id===l);if(!p)return;f(l);const x=Date.now().toString()+Math.random().toString(36).substr(2,9);if(p.isPlaylist){const m=(p.downloadedCount||0)+1,k=m>1?`resuming from video ${m}...`:"queued for retry";this.updateItem(l,{id:x,stage:"queued",progress:p.progress||0,status:k,endTime:null,serverJobId:null,downloadToken:null,resumeFrom:m})}else this.updateItem(l,{id:x,stage:"queued",progress:0,status:"queued for retry",logs:[],endTime:null,serverJobId:null,downloadToken:null});this.processNext()},async finishPlaylistEarly(l){const p=c().find(m=>m.id===l),x=(p==null?void 0:p.serverJobId)||l;try{await fetch(`${Ee()}/api/finish-early/${x}`,{method:"POST"})}catch{fe("failed to finish early","error")}},resumePlaylistJobs(){c().filter(v=>v.stage==="reconnecting"&&v.serverJobId).forEach(v=>{this._connectPlaylistSSE(v.id,v.serverJobId),this._startPlaylistPolling(v.id,v.serverJobId)})},reconnectOnResume(){c().filter(v=>v.isPlaylist&&v.serverJobId&&ds.includes(v.stage)).forEach(v=>{const p=i.get(v.id);p&&(p.close(),i.delete(v.id)),this._connectPlaylistSSE(v.id,v.serverJobId),d(v.id),this._startPlaylistPolling(v.id,v.serverJobId)})}};return typeof window<"u"&&setTimeout(()=>y.resumePlaylistJobs(),500),y}const pe=nl();var rl=Re('<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',1),il=Re('<polyline points="20 6 9 17 4 12"></polyline>'),ol=Re('<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',1),al=Re('<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',1),ll=Re('<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',1),cl=Re('<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',1),ul=Re('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),vl=Re('<path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path d="M9 12l2 2 4-4"></path>',1),dl=Re('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),fl=C('<span class="queue-item-format svelte-151vo4w"> </span>'),pl=C('<span class="queue-item-timer svelte-151vo4w"> </span>'),hl=C('<span class="queue-item-timer svelte-151vo4w"> </span>'),gl=C('<button class="queue-item-download svelte-151vo4w" title="Download"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),ml=C('<button class="queue-item-retry svelte-151vo4w" title="Retry"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg></button>'),_l=C('<button class="queue-item-retry svelte-151vo4w" title="Start now"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button>'),wl=C('<button class="queue-item-retry svelte-151vo4w" title="Download now (skip remaining)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),yl=C('<div class="queue-item-progress svelte-151vo4w"><div class="queue-item-progress-fill svelte-151vo4w"></div></div>'),bl=C('<div class="queue-item-failed-item svelte-151vo4w"><span class="queue-item-failed-num svelte-151vo4w"> </span> <span> </span></div>'),kl=C('<div class="queue-item-failed svelte-151vo4w"><div class="queue-item-failed-header svelte-151vo4w"> </div> <!></div>'),xl=C('<div><div class="queue-item-header svelte-151vo4w"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-151vo4w"><!></svg></div> <div class="queue-item-info svelte-151vo4w"><div class="queue-item-title svelte-151vo4w"> <!> <!></div> <div> </div></div> <div class="queue-item-actions svelte-151vo4w"><!> <!> <!> <button class="queue-item-remove svelte-151vo4w" title="Remove"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div></div> <!> <!></div>');function Sl(e,t){mt(t,!0);let s=ye(()=>ds.includes(t.item.stage)),n=ye(()=>t.item.stage==="complete"),i=ye(()=>t.item.stage==="error"),r=ye(()=>t.item.stage==="queued"),a=ye(()=>t.item.stage==="ready"),u=ye(()=>o(s)&&t.item.progress!==void 0),c=ye(()=>o(a)?"success":o(s)?"active":o(n)?"success":o(i)?"error":""),d=ye(()=>{if(!t.item.fileSize)return"";const q=t.item.fileSize/(1024*1024);return q>=1024?`${(q/1024).toFixed(1)} GB`:`${q.toFixed(1)} MB`}),f=ye(()=>{if(!t.item.startTime||!o(s)&&!o(n))return"";const q=o(n)&&t.item.endTime?t.item.endTime:Date.now(),I=Math.floor((q-t.item.startTime)/1e3),K=Math.floor(I/60);return K>0?`${K}m ${I%60}s`:`${I}s`}),y=ye(()=>{if(t.item.isPlaylist&&t.item.currentVideo&&t.item.videoCount)return`${t.item.currentVideo}/${t.item.videoCount} - ${t.item.currentVideoTitle||t.item.status}`;let q=t.item.status||"waiting...";if(o(s)&&(t.item.speed||t.item.eta)){const I=[];t.item.speed&&I.push(t.item.speed),t.item.eta&&I.push(`~${t.item.eta} left`),I.length&&(q+=` Â· ${I.join(" Â· ")}`)}return q});var l=xl();let v;l.__click=()=>{o(a)?pe.downloadReady(t.item.id):o(r)&&pe.startDownload(t.item)};var p=g(l),x=g(p);let m;var k=g(x),P=g(k);{var R=q=>{var I=rl();b(q,I)},ue=q=>{var I=Be(),K=Se(I);{var X=we=>{var $e=il();b(we,$e)},le=we=>{var $e=Be(),He=Se($e);{var Je=Ke=>{var it=ol();b(Ke,it)},rt=Ke=>{var it=Be(),Nt=Se(it);{var vs=wt=>{var Ft=al();b(wt,Ft)},Ot=wt=>{var Ft=Be(),Qs=Se(Ft);{var Ks=z=>{var W=ll();b(z,W)},j=z=>{var W=Be(),ge=Se(W);{var E=S=>{var Z=cl();b(S,Z)},M=S=>{var Z=Be(),A=Se(Z);{var ee=re=>{var me=ul();b(re,me)},N=re=>{var me=Be(),Te=Se(me);{var Pe=qe=>{var yt=vl();b(qe,yt)},Me=qe=>{var yt=dl();b(qe,yt)};B(Te,qe=>{o(s)?qe(Pe):qe(Me,!1)},!0)}b(re,me)};B(A,re=>{t.item.format==="audio"?re(ee):re(N,!1)},!0)}b(S,Z)};B(ge,S=>{t.item.type==="compress"?S(E):S(M,!1)},!0)}b(z,W)};B(Qs,z=>{t.item.type==="convert"?z(Ks):z(j,!1)},!0)}b(wt,Ft)};B(Nt,wt=>{t.item.isPlaylist?wt(vs):wt(Ot,!1)},!0)}b(Ke,it)};B(He,Ke=>{o(i)?Ke(Je):Ke(rt,!1)},!0)}b(we,$e)};B(K,we=>{o(n)?we(X):we(le,!1)},!0)}b(q,I)};B(P,q=>{o(a)?q(R):q(ue,!1)})}var G=_(x,2),ne=g(G),xe=g(ne),be=_(xe);{var he=q=>{var I=fl(),K=g(I);J(()=>O(K,t.item.formatDisplay)),b(q,I)};B(be,q=>{t.item.isPlaylist&&t.item.formatDisplay&&q(he)})}var Ae=_(be,2);{var Ye=q=>{var I=pl(),K=g(I);J(()=>O(K,o(d))),b(q,I)},Qe=q=>{var I=Be(),K=Se(I);{var X=le=>{var we=hl(),$e=g(we);J(()=>O($e,o(f))),b(le,we)};B(K,le=>{o(f)&&le(X)},!0)}b(q,I)};B(Ae,q=>{o(a)&&o(d)?q(Ye):q(Qe,!1)})}var U=_(ne,2),V=g(U),ve=_(G,2),T=g(ve);{var $=q=>{var I=gl();I.__click=K=>{K.stopPropagation(),pe.downloadReady(t.item.id)},b(q,I)},F=q=>{var I=Be(),K=Se(I);{var X=le=>{var we=ml();we.__click=$e=>{$e.stopPropagation(),pe.retryDownload(t.item.id)},b(le,we)};B(K,le=>{o(i)&&t.item.url&&le(X)},!0)}b(q,I)};B(T,q=>{o(a)?q($):q(F,!1)})}var L=_(T,2);{var ae=q=>{var I=_l();I.__click=K=>{K.stopPropagation(),pe.startDownload(t.item)},b(q,I)};B(L,q=>{o(r)&&q(ae)})}var Ce=_(L,2);{var Y=q=>{var I=wl();I.__click=K=>{K.stopPropagation(),pe.finishPlaylistEarly(t.item.id)},b(q,I)};B(Ce,q=>{t.item.isPlaylist&&o(s)&&t.item.currentVideo>0&&q(Y)})}var _e=_(Ce,2);_e.__click=q=>{q.stopPropagation(),pe.remove(t.item.id)};var te=_(p,2);{var H=q=>{var I=yl(),K=g(I);J(()=>yn(K,`width: ${(t.item.progress||0)??""}%`)),b(q,I)};B(te,q=>{o(u)&&q(H)})}var Q=_(te,2);{var de=q=>{var I=kl(),K=g(I),X=g(K),le=_(K,2);Ge(le,17,()=>t.item.failedVideos,tt,(we,$e)=>{var He=bl(),Je=g(He),rt=g(Je),Ke=_(Je,2),it=g(Ke);J(()=>{O(rt,`#${o($e).num??""}`),O(it,`${(o($e).title||"Video")??""} - ${(o($e).reason||"Download failed")??""}`)}),b(we,He)}),J(()=>O(X,`failed videos (${(t.item.failedCount||t.item.failedVideos.length)??""})`)),b(q,I)};B(Q,q=>{var I;t.item.isPlaylist&&((I=t.item.failedVideos)==null?void 0:I.length)>0&&q(de)})}J(()=>{v=ke(l,1,"queue-item svelte-151vo4w",null,v,{clickable:o(a)||o(r)}),m=ke(x,1,"queue-item-icon svelte-151vo4w",null,m,{spinning:o(s),ready:o(a)}),O(xe,`${t.item.title??""} `),ke(U,1,`queue-item-status ${o(c)??""}`,"svelte-151vo4w"),O(V,o(y))}),b(e,l),_t()}Kt(["click"]);var Cl=C('<button class="queue-clear svelte-i3r5ty">clear all</button>'),Tl=C('<div class="queue-empty svelte-i3r5ty">nothing here yet</div>'),jl=C('<div class="queue-dropdown-header svelte-i3r5ty"><span class="queue-dropdown-title svelte-i3r5ty">queue</span> <div class="queue-header-actions svelte-i3r5ty"><button class="queue-start-all svelte-i3r5ty" title="Start all queued"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-i3r5ty"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button> <!></div></div> <div class="queue-list svelte-i3r5ty"><!></div>',1);function oo(e,t){mt(t,!0);const s=()=>Bt(pe,"$queue",n),[n,i]=Xt();let r=ye(s),a=ye(()=>o(r).length>0);var u=jl(),c=Se(u),d=_(g(c),2),f=g(d);f.__click=()=>pe.startAllQueued();var y=_(f,2);{var l=k=>{var P=Cl();P.__click=()=>{pe.clear(),fe("Queue cleared","info")},b(k,P)};B(y,k=>{o(a)&&k(l)})}var v=_(c,2),p=g(v);{var x=k=>{var P=Be(),R=Se(P);Ge(R,17,()=>o(r),ue=>ue.id,(ue,G)=>{Sl(ue,{get item(){return o(G)}})}),b(k,P)},m=k=>{var P=Tl();b(k,P)};B(p,k=>{o(a)?k(x):k(m,!1)})}b(e,u),_t(),i()}Kt(["click"]);var zl=Re('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-1xkxv2n"></path><polyline points="7 10 12 15 17 10" class="svelte-1xkxv2n"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-1xkxv2n"></line></svg>'),El=Re('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="17 1 21 5 17 9" class="svelte-1xkxv2n"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" class="svelte-1xkxv2n"></path><polyline points="7 23 3 19 7 15" class="svelte-1xkxv2n"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" class="svelte-1xkxv2n"></path></svg>'),Pl=Re('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="4 14 10 14 10 20" class="svelte-1xkxv2n"></polyline><polyline points="20 10 14 10 14 4" class="svelte-1xkxv2n"></polyline><line x1="14" y1="10" x2="21" y2="3" class="svelte-1xkxv2n"></line><line x1="3" y1="21" x2="10" y2="14" class="svelte-1xkxv2n"></line></svg>'),ql=Re('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><circle cx="12" cy="12" r="3" class="svelte-1xkxv2n"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" class="svelte-1xkxv2n"></path></svg>'),Ml=C('<a><div class="nav-icon svelte-1xkxv2n"><!></div> <span class="nav-label svelte-1xkxv2n"> </span></a>'),$l=C('<span class="nav-badge svelte-1xkxv2n"> </span>'),Il=C('<div class="queue-sheet-overlay svelte-1xkxv2n"></div> <div><div class="sheet-handle svelte-1xkxv2n"></div> <!></div>',1),Dl=C('<nav class="bottom-nav svelte-1xkxv2n"><!> <button><div class="nav-icon svelte-1xkxv2n"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><line x1="8" y1="6" x2="21" y2="6" class="svelte-1xkxv2n"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-1xkxv2n"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-1xkxv2n"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-1xkxv2n"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-1xkxv2n"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-1xkxv2n"></line></svg> <!></div> <span class="nav-label svelte-1xkxv2n">queue</span></button></nav> <!>',1);function Bl(e,t){mt(t,!0);const s=()=>Bt(pe,"$queue",i),n=()=>Bt(zr,"$path",i),[i,r]=Xt();let a=D(!1),u,c=D(0),d=D(!1),f=0,y=0,l=ye(s),v=ye(()=>o(l).length),p=ye(n),x=ye(()=>o(l).filter(T=>["starting","downloading","processing","zipping","sending"].includes(T.stage)).length);function m(T){T.preventDefault(),T.stopPropagation(),h(a,!o(a)),h(c,0)}function k(){h(a,!1),h(c,0)}function P(T){const $=u;$&&($.scrollTop>0&&T.target.closest(".queue-sheet")&&!T.target.closest(".sheet-handle")||(f=T.touches[0].clientY,y=Date.now(),h(d,!0)))}function R(T){if(!o(d))return;const $=T.touches[0].clientY-f;$>0?(h(c,$),T.preventDefault()):h(c,0)}function ue(){if(!o(d))return;h(d,!1);const T=o(c)/(Date.now()-y);o(c)>80||T>.5?k():h(c,0)}const G=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/settings",label:"settings",icon:"settings"}];var ne=Dl();Ct("keydown",Nn,T=>{T.key==="Escape"&&o(a)&&k()});var xe=Se(ne),be=g(xe);Ge(be,17,()=>G,tt,(T,$)=>{var F=Ml();let L;var ae=g(F),Ce=g(ae);{var Y=Q=>{var de=zl();b(Q,de)},_e=Q=>{var de=Be(),q=Se(de);{var I=X=>{var le=El();b(X,le)},K=X=>{var le=Be(),we=Se(le);{var $e=Je=>{var rt=Pl();b(Je,rt)},He=Je=>{var rt=Be(),Ke=Se(rt);{var it=Nt=>{var vs=ql();b(Nt,vs)};B(Ke,Nt=>{o($).icon==="settings"&&Nt(it)},!0)}b(Je,rt)};B(we,Je=>{o($).icon==="compress"?Je($e):Je(He,!1)},!0)}b(X,le)};B(q,X=>{o($).icon==="convert"?X(I):X(K,!1)},!0)}b(Q,de)};B(Ce,Q=>{o($).icon==="download"?Q(Y):Q(_e,!1)})}var te=_(ae,2),H=g(te);J(()=>{L=ke(F,1,"bottom-nav-item svelte-1xkxv2n",null,L,{active:o(p)===o($).href}),cs(F,"href",o($).href),O(H,o($).label)}),b(T,F)});var he=_(be,2);let Ae;he.__click=m;var Ye=g(he),Qe=_(g(Ye),2);{var U=T=>{var $=$l(),F=g($);J(()=>O(F,o(v))),b(T,$)};B(Qe,T=>{o(v)>0&&T(U)})}var V=_(xe,2);{var ve=T=>{var $=Il(),F=Se($);F.__click=k;var L=_(F,2);let ae;L.__touchstart=P,L.__touchmove=R,L.__touchend=ue;var Ce=_(g(L),2);oo(Ce,{}),bn(L,Y=>u=Y,()=>u),J(()=>{ae=ke(L,1,"queue-sheet svelte-1xkxv2n",null,ae,{swiping:o(d)}),yn(L,o(c)>0?`transform: translateY(${o(c)}px)`:"")}),b(T,$)};B(V,T=>{o(a)&&T(ve)})}J(()=>Ae=ke(he,1,"bottom-nav-item queue-item svelte-1xkxv2n",null,Ae,{active:o(a),"has-active":o(x)>0})),b(e,ne),_t(),r()}Kt(["click","touchstart","touchmove","touchend"]);var Rl=C("<a><!></a>");function ss(e,t){const s=()=>Bt(zr,"$path",n),[n,i]=Xt();let r=ye(()=>s()===t.href);var a=Rl();let u;var c=g(a);Cr(c,()=>t.children),J(()=>{u=ke(a,1,"nav-link svelte-5q5w88",null,u,{active:o(r)}),cs(a,"href",t.href)}),b(e,a),i()}var Al=C('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> <span>download</span>',1),Nl=C('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> <span>convert</span>',1),Ol=C('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> <span>compress</span>',1),Fl=C('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span>settings</span>',1),Ll=C('<header class="svelte-4b3o1e"><div class="header-left svelte-4b3o1e"><a href="/" class="logo-link svelte-4b3o1e"><span class="logo-text svelte-4b3o1e">yoink</span> <span class="logo-tld svelte-4b3o1e">.tools</span></a></div> <div class="header-right svelte-4b3o1e"><!> <nav class="nav-links svelte-4b3o1e"><!> <!> <!> <!></nav></div></header>');function Ul(e,t){var s=Ll(),n=_(g(s),2),i=g(n);{var r=y=>{var l=Be(),v=Se(l);Cr(v,()=>t.extraContent),b(y,l)};B(i,y=>{t.extraContent&&y(r)})}var a=_(i,2),u=g(a);ss(u,{href:"/",children:(y,l)=>{var v=Al();b(y,v)}});var c=_(u,2);ss(c,{href:"/convert",children:(y,l)=>{var v=Nl();b(y,v)}});var d=_(c,2);ss(d,{href:"/compress",children:(y,l)=>{var v=Ol();b(y,v)}});var f=_(d,2);ss(f,{href:"/settings",children:(y,l)=>{var v=Fl();b(y,v)}}),b(e,s)}var Vl=C('<footer class="svelte-ww03jg"><div class="footer-left svelte-ww03jg"><div>this is a <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-ww03jg">yt-dlp</a> wrapper</div> <div>inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt</a>, love u wukko</div> <div>youtube powered by <a href="https://patriick.dev/" target="_blank" rel="noopener" class="svelte-ww03jg">patrick</a> at <a href="https://cobalt.meowing.de" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt.meowing.de</a></div> <div class="legal svelte-ww03jg">by using this site you agree to our <a href="/privacy" class="svelte-ww03jg">privacy policy</a></div></div> <div class="footer-right svelte-ww03jg"><a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-ww03jg">github</a> <span>Â·</span> <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-ww03jg">coah80.com</a> <span>Â·</span> <a href="/privacy" class="svelte-ww03jg">privacy</a></div></footer>');function Hl(e){var t=Vl();b(e,t)}var Jl=C('<span class="queue-badge svelte-1picwiz"> </span>'),Wl=C('<div class="queue-dropdown svelte-1picwiz"><!></div>'),Gl=C('<div class="queue-menu svelte-1picwiz"><button class="queue-toggle svelte-1picwiz"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1picwiz"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> queue <!></button> <!></div>');function Vn(e,t){mt(t,!0);const s=()=>Bt(pe,"$queue",n),[n,i]=Xt();let r=D(!1),a,u=ye(s),c=ye(()=>o(u).length);function d(k){k.stopPropagation(),h(r,!o(r))}function f(k){a&&!a.contains(k.target)&&h(r,!1)}Mn(()=>(document.addEventListener("click",f),()=>document.removeEventListener("click",f)));var y=Gl(),l=g(y);l.__click=d;var v=_(g(l),2);{var p=k=>{var P=Jl(),R=g(P);J(()=>O(R,o(c))),b(k,P)};B(v,k=>{o(c)>0&&k(p)})}var x=_(l,2);{var m=k=>{var P=Wl(),R=g(P);oo(R,{}),b(k,P)};B(x,k=>{o(r)&&k(m)})}bn(y,k=>a=k,()=>a),b(e,y),_t(),i()}Kt(["click"]);var Yl=C('<div class="spinner svelte-1ea6fjo" role="status" aria-label="Loading"></div>');function ao(e){var t=Yl();b(e,t)}function lo(e){if(e===0||!Number.isFinite(e)||e<0)return"0 B";const t=1024,s=["B","KB","MB","GB","TB"],n=Math.min(Math.max(Math.floor(Math.log(e)/Math.log(t)),0),s.length-1);return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+s[n]}function Xr(e){try{const t=new URL(e);if(t.hostname==="youtu.be"){const s=t.pathname.slice(1).split("?")[0],n=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${s}${n?`&list=${n}`:""}`}if(t.hostname.includes("youtube.com")){if(t.pathname.startsWith("/shorts/"))return`https://www.youtube.com/watch?v=${t.pathname.replace("/shorts/","").split("?")[0]}`;if(t.searchParams.get("v")){const s=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${t.searchParams.get("v")}${s?`&list=${s}`:""}`}if(t.pathname==="/playlist"&&t.searchParams.get("list"))return`https://www.youtube.com/playlist?list=${t.searchParams.get("list")}`}return e}catch{return e}}function Zr(e){try{const t=new URL(e).hostname;return t==="youtu.be"||t.includes("youtube.com")}catch{return!1}}function ei(e){try{return new URL(e).searchParams.has("list")}catch{return!1}}function ti(){return Date.now().toString()+Math.random().toString(36).substr(2,9)}var Ql=C("<p> </p>"),Kl=C('<button class="clear-btn svelte-et6md" type="button" title="Clear"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button>'),Xl=C('<button class="paste-btn svelte-et6md" type="button" title="Paste from clipboard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" class="svelte-et6md"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" class="svelte-et6md"></path></svg></button>'),Zl=Re('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" class="svelte-et6md"></polygon></svg>'),ec=Re('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" class="svelte-et6md"></rect><line x1="7" y1="2" x2="7" y2="22" class="svelte-et6md"></line><line x1="17" y1="2" x2="17" y2="22" class="svelte-et6md"></line><line x1="2" y1="12" x2="22" y2="12" class="svelte-et6md"></line><line x1="2" y1="7" x2="7" y2="7" class="svelte-et6md"></line><line x1="2" y1="17" x2="7" y2="17" class="svelte-et6md"></line><line x1="17" y1="17" x2="22" y2="17" class="svelte-et6md"></line><line x1="17" y1="7" x2="22" y2="7" class="svelte-et6md"></line></svg>'),tc=Re('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M9 18V5l12-2v13" class="svelte-et6md"></path><circle cx="6" cy="18" r="3" class="svelte-et6md"></circle><circle cx="18" cy="16" r="3" class="svelte-et6md"></circle></svg>'),sc=Re('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" class="svelte-et6md"></rect><circle cx="8.5" cy="8.5" r="1.5" class="svelte-et6md"></circle><polyline points="21 15 16 10 5 21" class="svelte-et6md"></polyline></svg>'),nc=C('<button><!> <span class="svelte-et6md"> </span></button>'),rc=C('<div class="yoink-dropdown svelte-et6md"><button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button> <button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> batch add urls</button></div>'),ic=C("<div><!> </div>"),oc=C('<div class="modal-overlay svelte-et6md"><div class="modal svelte-et6md"><div class="modal-title svelte-et6md">playlist detected!</div> <div class="modal-subtitle svelte-et6md">do you want to download just this video, or the whole playlist?</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="5 3 19 12 5 21 5 3" class="svelte-et6md"></polygon></svg> video</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> playlist</button></div> <label class="modal-toggle svelte-et6md"><input type="checkbox" class="svelte-et6md"/> <span class="modal-toggle-switch svelte-et6md"></span> <span class="modal-toggle-label svelte-et6md">remember this choice</span></label> <div class="modal-hint svelte-et6md">this can be changed in <a href="/settings" class="svelte-et6md">settings</a>!</div></div></div>'),ac=C('<div class="modal-overlay svelte-et6md"><div class="modal batch-modal svelte-et6md"><div class="modal-title svelte-et6md">batch add urls</div> <div class="modal-subtitle svelte-et6md">paste multiple URLs, one per line</div> <textarea class="batch-textarea svelte-et6md"></textarea> <div class="batch-count svelte-et6md"><span class="svelte-et6md"> </span> urls detected</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md">cancel</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button></div></div></div>'),lc=C('<!> <main class="svelte-et6md"><div class="branding svelte-et6md"><h1 class="svelte-et6md">yoink<span class="brand-tld svelte-et6md">.tools</span></h1> <!></div> <div class="input-container svelte-et6md"><div class="url-input-wrapper svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" class="svelte-et6md"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" class="svelte-et6md"></path></svg> <input type="text" class="url-input svelte-et6md" placeholder="paste the link here..." autocomplete="off" spellcheck="false"/> <!></div> <div class="format-section svelte-et6md"><div class="segmented-control svelte-et6md"></div> <div><button class="yoink-btn svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-et6md"></path><polyline points="7 10 12 15 17 10" class="svelte-et6md"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-et6md"></line></svg> </button> <button class="yoink-dropdown-toggle svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polyline points="6 9 12 15 18 9" class="svelte-et6md"></polyline></svg></button> <!></div></div> <!></div></main> <!> <!> <!>',1);function cc(e,t){mt(t,!0);const s=()=>Bt(Ss,"$settings",n),[n,i]=Xt();let r=D(""),a=D("auto"),u=D(!1),c=D(null),d=D(""),f=D(!1),y=D(!1),l=D(!1),v=D(""),p=D(null),x=D(null),m,k=ye(()=>o(v).split(`
`).filter(j=>{const z=j.trim();if(!z)return!1;try{return new URL(z),!0}catch{return!1}}).length);const P=[{id:"auto",label:"auto",icon:"bolt"},{id:"video",label:"video",icon:"video"},{id:"audio",label:"audio",icon:"audio"},{id:"images",label:"images",icon:"image"}];function R(){h(x,Qr[Math.floor(Math.random()*Qr.length)],!0)}function ue(){var j;(j=o(x))!=null&&j.link&&window.open(o(x).link,"_blank")}function G(){let j=null;try{const z=localStorage.getItem("yoink_shared_url");if(z){const W=JSON.parse(z);Date.now()-W.timestamp<300*1e3&&(j=W.url),localStorage.removeItem("yoink_shared_url")}}catch{localStorage.removeItem("yoink_shared_url")}if(!j&&window.location.pathname==="/share"){const z=new URLSearchParams(window.location.search),ge=(z.get("url")||z.get("text")||"").match(/https?:\/\/[^\s]+/);ge&&(j=ge[0].replace(/[.,!?;:)\]}>]+$/,"")),history.replaceState(null,"","/")}j&&(h(r,j,!0),setTimeout(()=>U(),150))}Ln(()=>{R(),G()});async function ne(){try{const j=await navigator.clipboard.readText();j&&(h(r,j.trim(),!0),m==null||m.focus())}catch{fe("Could not read clipboard","error")}}function xe(j,z){h(c,j,!0),h(d,z,!0)}function be(){h(c,null),h(d,"")}function he(){return new Promise(j=>{h(p,j,!0),h(f,!0)})}function Ae(j,z){z&&Ss.setSetting("playlistPreference",j),o(p)&&o(p)(j),h(p,null),h(f,!1)}function Ye(){o(p)&&o(p)(null),h(p,null),h(f,!1)}async function Qe(j,z=!1){const W=Xr(j),ge=o(a)==="auto"?"video":o(a);let E=ge;if(ge==="images"&&Zr(W))return fe("YouTube doesn't support image downloads","error"),null;const M=ti(),S=s();let Z=!1;if(ge!=="images"&&ei(W))if(S.playlistPreference==="video")Z=!1;else if(S.playlistPreference==="playlist")Z=!0;else{const N=await he();if(N===null)return null;Z=N==="playlist"}let A="Loading...";try{if(ge==="images"){const N=await fetch(`${Ee()}/api/gallery/metadata?url=${encodeURIComponent(W)}`),re=N.headers.get("content-type");N.ok&&(re!=null&&re.includes("application/json"))?A=(await N.json()).title||"Gallery":A=W.substring(0,50)}else{const N=await fetch(`${Ee()}/api/metadata?url=${encodeURIComponent(W)}&playlist=${Z}`),re=N.headers.get("content-type");if(N.ok&&(re!=null&&re.includes("application/json"))){const me=await N.json();if(A=me.title||"Unknown",me.isGallery===!0&&(E="images"),me.usingCookies&&fe("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3),me.clipNote){const Te=me.clipNote.toLowerCase().includes("warning")||me.originalDuration>600;fe(me.clipNote,Te?"warning":"info",6e3)}}else if(!N.ok&&(re!=null&&re.includes("application/json"))){const me=await N.json();if(me.clipUnsupported)return fe("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),null;throw new Error(me.error||"Metadata fetch failed")}else A=W.substring(0,50)}}catch{A=W.substring(0,50)}const ee={id:M,title:A,url:W,format:E,stage:z?"starting":"queued",status:z?"initializing...":"in queue",progress:0,isPlaylist:Z,formatDisplay:E==="images"?"images":E==="audio"?S.audioFormat:`${S.quality} ${S.container}`,startTime:z?Date.now():null,failedVideos:[]};return pe.add(ee),z&&pe.startDownload(ee),ee}async function U(){const j=o(r).trim();if(!j){fe("Please enter a URL","error");return}const z=Xr(j);try{new URL(z)}catch{fe("Please enter a valid URL","error");return}if(Za(z)&&h(x,{text:"okay dude are you just gonna download porn"},!0),o(a)==="images"&&Zr(z)){fe("YouTube doesn't support image downloads â use video or audio","error");return}h(u,!0);const W=o(a)==="auto"?"video":o(a),ge=s();let E=!1;if(W!=="images"&&ei(z))if(ge.playlistPreference==="video")E=!1;else if(ge.playlistPreference==="playlist")E=!0;else{const S=await he();if(S===null){h(u,!1);return}E=S==="playlist"}const M=ti();try{xe("loading",W==="images"?"fetching gallery info...":"fetching video info...");let S;if(W==="images"){const Te=await fetch(`${Ee()}/api/gallery/metadata?url=${encodeURIComponent(z)}`),Pe=Te.headers.get("content-type");if(!Te.ok){let Me="Failed to fetch gallery info";if(Pe!=null&&Pe.includes("application/json"))Me=(await Te.json()).error||Me;else{const qe=await Te.text();Me=qe.includes("Cloudflare")||qe.includes("403")?"Access denied (VPN blocked?)":`Server error: ${Te.status}`}throw new Error(Me)}S=await Te.json(),S.title=S.title||"Gallery"}else{const Te=await fetch(`${Ee()}/api/metadata?url=${encodeURIComponent(z)}&playlist=${E}`),Pe=Te.headers.get("content-type");if(!Te.ok){let Me="Failed to fetch metadata";if(Pe!=null&&Pe.includes("application/json")){const qe=await Te.json();if(qe.clipUnsupported){xe("error","Could not parse YouTube clip"),fe("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),h(u,!1);return}Me=qe.error||Me}else{const qe=await Te.text();Me=`Server error ${Te.status} (likely VPN blocked)`}throw new Error(Me)}S=await Te.json()}const Z=S.title,A=S.isPlaylist&&E,ee=W==="images"||S.isGallery===!0,N=S.isGallery===!0?"images":W,re=S.videoCount||S.imageCount||0;S.usingCookies&&fe("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3);const me={id:M,title:Z,url:z,format:N,stage:"starting",status:"initializing...",progress:0,isPlaylist:A,isGallery:ee,videoCount:re,currentVideo:0,currentVideoTitle:"",formatDisplay:ee?"images":N==="audio"?ge.audioFormat:`${ge.quality} ${ge.container}`,failedVideos:[],startTime:Date.now()};pe.add(me),pe.startDownload(me),h(r,""),be()}catch(S){xe("error",S.message||"Download failed"),fe(S.message||"Download failed","error")}finally{h(u,!1)}}function V(j){j.key==="Enter"&&U()}async function ve(){h(l,!1);const j=o(r).trim();if(!j){fe("Please enter a URL","error");return}try{new URL(j)}catch{fe("Please enter a valid URL","error");return}await Qe(j),h(r,"")}function T(){h(l,!1),h(v,""),h(y,!0)}async function $(){const j=o(v).split(`
`).map(z=>z.trim()).filter(z=>{try{return new URL(z),!0}catch{return!1}});if(j.length===0){fe("No valid URLs found","error");return}h(y,!1),fe(`Adding ${j.length} URLs to queue...`,"info");for(const z of j)await Qe(z,!1);fe(`${j.length} items added to queue`,"success")}let F=D(!1);var L=lc();Ct("click",Nn,j=>{j.target.closest(".yoink-btn-wrapper")||h(l,!1)});var ae=Se(L);Ul(ae,{extraContent:z=>{Vn(z,{})}});var Ce=_(ae,2),Y=g(Ce),_e=_(g(Y),2);{var te=j=>{var z=Ql();let W;z.__click=ue;var ge=g(z);J(E=>{W=ke(z,1,"splash svelte-et6md",null,W,E),yn(z,o(x).link?"cursor: pointer;":""),O(ge,o(x).text)},[()=>{var E,M,S;return{fancy:(E=o(x).classes)==null?void 0:E.includes("fancy"),clickable:(M=o(x).classes)==null?void 0:M.includes("clickable"),rainbow:(S=o(x).classes)==null?void 0:S.includes("rainbow")}}]),b(j,z)};B(_e,j=>{o(x)&&j(te)})}var H=_(Y,2),Q=g(H),de=_(g(Q),2);de.__keydown=V,bn(de,j=>m=j,()=>m);var q=_(de,2);{var I=j=>{var z=Kl();z.__click=()=>{h(r,""),m==null||m.focus()},b(j,z)},K=j=>{var z=Xl();z.__click=ne,b(j,z)};B(q,j=>{o(r)?j(I):j(K,!1)})}var X=_(Q,2),le=g(X);Ge(le,21,()=>P,tt,(j,z)=>{var W=nc();let ge;W.__click=()=>h(a,o(z).id,!0);var E=g(W);{var M=ee=>{var N=Zl();b(ee,N)},S=ee=>{var N=Be(),re=Se(N);{var me=Pe=>{var Me=ec();b(Pe,Me)},Te=Pe=>{var Me=Be(),qe=Se(Me);{var yt=Lt=>{var qs=tc();b(Lt,qs)},ze=Lt=>{var qs=Be(),Xs=Se(qs);{var xn=Ms=>{var Sn=sc();b(Ms,Sn)};B(Xs,Ms=>{o(z).icon==="image"&&Ms(xn)},!0)}b(Lt,qs)};B(qe,Lt=>{o(z).icon==="audio"?Lt(yt):Lt(ze,!1)},!0)}b(Pe,Me)};B(re,Pe=>{o(z).icon==="video"?Pe(me):Pe(Te,!1)},!0)}b(ee,N)};B(E,ee=>{o(z).icon==="bolt"?ee(M):ee(S,!1)})}var Z=_(E,2),A=g(Z);J(()=>{ge=ke(W,1,"segment svelte-et6md",null,ge,{active:o(a)===o(z).id}),O(A,o(z).label)}),b(j,W)});var we=_(le,2);let $e;var He=g(we);He.__click=U;var Je=_(g(He)),rt=_(He,2);rt.__click=j=>{j.stopPropagation(),h(l,!o(l))};var Ke=_(rt,2);{var it=j=>{var z=rc(),W=g(z);W.__click=ve;var ge=_(W,2);ge.__click=T,b(j,z)};B(Ke,j=>{o(l)&&j(it)})}var Nt=_(X,2);{var vs=j=>{var z=ic(),W=g(z);{var ge=M=>{ao(M)};B(W,M=>{o(c)==="loading"&&M(ge)})}var E=_(W);J(()=>{ke(z,1,`status ${o(c)??""}`,"svelte-et6md"),O(E,` ${o(d)??""}`)}),b(j,z)};B(Nt,j=>{o(c)&&j(vs)})}var Ot=_(Ce,2);Hl(Ot);var wt=_(Ot,2);{var Ft=j=>{var z=oc();z.__click=A=>{A.target===A.currentTarget&&Ye()};var W=g(z),ge=_(g(W),4),E=g(ge);E.__click=()=>Ae("video",o(F));var M=_(E,2);M.__click=()=>Ae("playlist",o(F));var S=_(ge,2),Z=g(S);Zi(Z,()=>o(F),A=>h(F,A)),b(j,z)};B(wt,j=>{o(f)&&j(Ft)})}var Qs=_(wt,2);{var Ks=j=>{var z=ac();z.__click=N=>{N.target===N.currentTarget&&h(y,!1)};var W=g(z),ge=_(g(W),4);cs(ge,"placeholder",`https://youtube.com/watch?v=...
https://youtube.com/watch?v=...
https://youtube.com/watch?v=...`);var E=_(ge,2),M=g(E),S=g(M),Z=_(E,2),A=g(Z);A.__click=()=>h(y,!1);var ee=_(A,2);ee.__click=$,J(()=>O(S,o(k))),Hr(ge,()=>o(v),N=>h(v,N)),b(j,z)};B(Qs,j=>{o(y)&&j(Ks)})}J(()=>{$e=ke(we,1,"yoink-btn-wrapper svelte-et6md",null,$e,{open:o(l)}),He.disabled=o(u),O(Je,` ${o(u)?"loading...":"yoink"}`)}),Ct("focus",de,be),Hr(de,()=>o(r),j=>h(r,j)),b(e,L),_t(),i()}Kt(["click","keydown"]);var uc=C('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> <span>download</span>',1),vc=C('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> <span>convert</span>',1),dc=C('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> <span>compress</span>',1),fc=C('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span>settings</span>',1),pc=C('<header class="svelte-67r2h0"><div class="header-center svelte-67r2h0"><a href="/" class="logo-link svelte-67r2h0"><span class="logo-text svelte-67r2h0">yoink</span> <span class="logo-tld svelte-67r2h0">.tools</span></a></div> <nav class="header-right svelte-67r2h0"><!> <!> <!> <!> <!></nav></header>');function kn(e,t){var s=pc(),n=_(g(s),2),i=g(n);{var r=f=>{var y=Be(),l=Se(y);Cr(l,()=>t.extraContent),b(f,y)};B(i,f=>{t.extraContent&&f(r)})}var a=_(i,2);ss(a,{href:"/",children:(f,y)=>{var l=uc();b(f,l)}});var u=_(a,2);ss(u,{href:"/convert",children:(f,y)=>{var l=vc();b(f,l)}});var c=_(u,2);ss(c,{href:"/compress",children:(f,y)=>{var l=dc();b(f,l)}});var d=_(c,2);ss(d,{href:"/settings",children:(f,y)=>{var l=fc();b(f,l)}}),b(e,s)}var hc=C('<footer class="svelte-1dij6pu"><a href="/" class="svelte-1dij6pu">yoink.tools</a> - powered by <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-1dij6pu">yt-dlp</a> Â· <a href="/privacy" class="svelte-1dij6pu">privacy</a></footer>');function Hn(e){var t=hc();b(e,t)}var gc=C("<button><span> </span></button>"),mc=C("<button> </button>"),_c=C("<button> </button>"),wc=C("<button> </button>"),yc=C(`<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">video</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">video quality</div> <div class="quality-grid svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">if preferred quality isn't available, the next best option will be used. 1080p is recommended for most uses.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">preferred codec</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">h264: best compatibility, max 1080p. av1: best quality & efficiency, supports 8k & HDR. vp9: same quality as av1 but ~2x larger.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">file container</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp4 has the best compatibility. webm is great for web. mkv supports more features but has limited playback support.</p></div></section>`),bc=C("<button> </button>"),kc=C("<button> </button>"),xc=C('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">audio</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio format</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp3: universal compatibility. m4a: better quality at same size. opus: best compression. flac/wav: lossless quality.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio bitrate</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">higher bitrate = better quality but larger file size. 320kbps is CD-quality for most people.</p></div></section>'),Sc=C("<button> </button>"),Cc=C("<button> </button>"),Tc=C('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">downloads</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">filename style</div> <div class="segmented-control svelte-1ozf5k3"></div> <div class="filename-preview svelte-1ozf5k3"><code class="svelte-1ozf5k3"> </code></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">twitter/x gifs as gif</div> <p class="setting-description svelte-1ozf5k3">automatically convert twitter/x "gifs" (which are actually videos) to real gif files. turn off to keep them as mp4.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">playlist behavior</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">when a link contains a playlist, should we download just the video or the entire playlist? "ask me" will show a popup each time.</p></div></section>'),jc=C('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">advanced</h2> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">allow h265 codec</div> <p class="setting-description svelte-1ozf5k3">enables downloading h265/HEVC videos for platforms like TikTok. higher quality but may have compatibility issues with some players.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">embed metadata</div> <p class="setting-description svelte-1ozf5k3">include title, artist, and other metadata in downloaded files.</p></div> <button></button></div></div> <div class="divider svelte-1ozf5k3"></div> <button class="reset-btn svelte-1ozf5k3">reset all settings</button></section>'),zc=C('<!> <main class="svelte-1ozf5k3"><div class="page-header svelte-1ozf5k3"><h1 class="svelte-1ozf5k3">settings</h1> <p class="svelte-1ozf5k3">customize your download experience</p></div> <nav class="settings-nav svelte-1ozf5k3"></nav> <!> <!> <!> <!></main> <!>',1);function Ec(e,t){mt(t,!0);const s=()=>Bt(Ss,"$settings",n),[n,i]=Xt();let r=D("video"),a=ye(s);const u=[{id:"video",label:"video"},{id:"audio",label:"audio"},{id:"downloads",label:"downloads"},{id:"advanced",label:"advanced"}],c=["best","4k","1440p","1080p","720p","480p","360p"],d={best:"8k+","4k":"4k","1440p":"1440p","1080p":"1080p","720p":"720p","480p":"480p","360p":"360p"},f=[{value:"h264",label:"h264 + aac"},{value:"av1",label:"av1 + opus"},{value:"vp9",label:"vp9 + opus"}],y=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mkv",label:"mkv"}],l=[{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"opus",label:"opus"},{value:"flac",label:"flac"},{value:"wav",label:"wav"}],v=[{value:"320",label:"320 kbps"},{value:"256",label:"256 kbps"},{value:"192",label:"192 kbps"},{value:"128",label:"128 kbps"}],p=[{value:"classic",label:"classic"},{value:"basic",label:"basic"},{value:"pretty",label:"pretty"},{value:"nerdy",label:"nerdy"}],x=[{value:"ask",label:"ask me"},{value:"video",label:"just video"},{value:"playlist",label:"full playlist"}];let m=ye(()=>{const T=o(a).container||"mp4",$={classic:`Video Title (${o(a).quality}).${T}`,basic:`Video Title.${T}`,pretty:`Video Title - Author (${o(a).quality}, ${o(a).codec}).${T}`,nerdy:`Video_Title_${o(a).quality}_${o(a).codec}_aac.${T}`};return $[o(a).filenameStyle]||$.basic});function k(T,$){Ss.setSetting(T,$)}function P(){confirm("Reset all settings to defaults?")&&(Ss.reset(),fe("Settings reset!","success"))}var R=zc(),ue=Se(R);kn(ue,{extraContent:$=>{Vn($,{})}});var G=_(ue,2),ne=_(g(G),2);Ge(ne,21,()=>u,tt,(T,$)=>{var F=gc();let L;F.__click=()=>h(r,o($).id,!0);var ae=g(F),Ce=g(ae);J(()=>{L=ke(F,1,"settings-nav-item svelte-1ozf5k3",null,L,{active:o(r)===o($).id}),O(Ce,o($).label)}),b(T,F)});var xe=_(ne,2);{var be=T=>{var $=yc(),F=_(g($),2),L=_(g(F),2);Ge(L,21,()=>c,tt,(te,H)=>{var Q=mc();let de;Q.__click=()=>k("quality",o(H));var q=g(Q);J(()=>{de=ke(Q,1,"quality-option svelte-1ozf5k3",null,de,{active:o(a).quality===o(H)}),O(q,d[o(H)])}),b(te,Q)});var ae=_(F,2),Ce=_(g(ae),2);Ge(Ce,21,()=>f,tt,(te,H)=>{var Q=_c();let de;Q.__click=()=>k("codec",o(H).value);var q=g(Q);J(()=>{de=ke(Q,1,"segment svelte-1ozf5k3",null,de,{active:o(a).codec===o(H).value}),O(q,o(H).label)}),b(te,Q)});var Y=_(ae,2),_e=_(g(Y),2);Ge(_e,21,()=>y,tt,(te,H)=>{var Q=wc();let de;Q.__click=()=>k("container",o(H).value);var q=g(Q);J(()=>{de=ke(Q,1,"segment svelte-1ozf5k3",null,de,{active:o(a).container===o(H).value}),O(q,o(H).label)}),b(te,Q)}),b(T,$)};B(xe,T=>{o(r)==="video"&&T(be)})}var he=_(xe,2);{var Ae=T=>{var $=xc(),F=_(g($),2),L=_(g(F),2);Ge(L,21,()=>l,tt,(Y,_e)=>{var te=bc();let H;te.__click=()=>k("audioFormat",o(_e).value);var Q=g(te);J(()=>{H=ke(te,1,"segment svelte-1ozf5k3",null,H,{active:o(a).audioFormat===o(_e).value}),O(Q,o(_e).label)}),b(Y,te)});var ae=_(F,2),Ce=_(g(ae),2);Ge(Ce,21,()=>v,tt,(Y,_e)=>{var te=kc();let H;te.__click=()=>k("audioBitrate",o(_e).value);var Q=g(te);J(()=>{H=ke(te,1,"segment svelte-1ozf5k3",null,H,{active:o(a).audioBitrate===o(_e).value}),O(Q,o(_e).label)}),b(Y,te)}),b(T,$)};B(he,T=>{o(r)==="audio"&&T(Ae)})}var Ye=_(he,2);{var Qe=T=>{var $=Tc(),F=_(g($),2),L=_(g(F),2);Ge(L,21,()=>p,tt,(I,K)=>{var X=Sc();let le;X.__click=()=>k("filenameStyle",o(K).value);var we=g(X);J(()=>{le=ke(X,1,"segment svelte-1ozf5k3",null,le,{active:o(a).filenameStyle===o(K).value}),O(we,o(K).label)}),b(I,X)});var ae=_(L,2),Ce=g(ae),Y=g(Ce),_e=_(F,2),te=g(_e),H=_(g(te),2);let Q;H.__click=()=>k("twitterGifs",!(!o(a).twitterGifs||o(a).twitterGifs===void 0));var de=_(_e,2),q=_(g(de),2);Ge(q,21,()=>x,tt,(I,K)=>{var X=Cc();let le;X.__click=()=>k("playlistPreference",o(K).value==="ask"?null:o(K).value);var we=g(X);J(()=>{le=ke(X,1,"segment svelte-1ozf5k3",null,le,{active:(o(a).playlistPreference===null?"ask":o(a).playlistPreference)===o(K).value}),O(we,o(K).label)}),b(I,X)}),J(()=>{O(Y,o(m)),Q=ke(H,1,"toggle svelte-1ozf5k3",null,Q,{active:o(a).twitterGifs!==!1})}),b(T,$)};B(Ye,T=>{o(r)==="downloads"&&T(Qe)})}var U=_(Ye,2);{var V=T=>{var $=jc(),F=_(g($),2),L=g(F),ae=_(g(L),2);let Ce;ae.__click=()=>k("h265",!o(a).h265);var Y=_(F,2),_e=g(Y),te=_(g(_e),2);let H;te.__click=()=>k("metadata",o(a).metadata===!1);var Q=_(Y,4);Q.__click=P,J(()=>{Ce=ke(ae,1,"toggle svelte-1ozf5k3",null,Ce,{active:o(a).h265}),H=ke(te,1,"toggle svelte-1ozf5k3",null,H,{active:o(a).metadata!==!1})}),b(T,$)};B(U,T=>{o(r)==="advanced"&&T(V)})}var ve=_(G,2);Hn(ve),b(e,R),_t(),i()}Kt(["click"]);var Pc=C('<span class="progress-label svelte-1untuf7"> </span>'),qc=C('<div class="progress-wrapper svelte-1untuf7"><!> <div class="progress-track svelte-1untuf7" role="progressbar"><div class="progress-fill svelte-1untuf7"></div></div></div>');function co(e,t){let s=dr(t,"percent",3,0),n=dr(t,"label",3,""),i=ye(()=>Math.min(100,Math.max(0,s())));var r=qc(),a=g(r);{var u=f=>{var y=Pc(),l=g(y);J(()=>O(l,n())),b(f,y)};B(a,f=>{n()&&f(u)})}var c=_(a,2);cs(c,"aria-valuemin",0),cs(c,"aria-valuemax",100);var d=g(c);J(()=>{cs(c,"aria-valuenow",o(i)),yn(d,`width: ${o(i)??""}%`)}),b(e,r)}const Kn=50*1024*1024;async function uo(e,t){const s=Ee(),n=Math.ceil(e.size/Kn),i=await fetch(`${s}/api/upload/init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e.name,fileSize:e.size,totalChunks:n})});if(!i.ok){let u="Failed to initialize upload";try{u=(await i.json()).error||u}catch{u=await i.text().catch(()=>u)}throw new Error(u)}const{uploadId:r}=await i.json();for(let u=0;u<n;u++){const c=u*Kn,d=Math.min(c+Kn,e.size),f=e.slice(c,d),y=new FormData;y.append("chunk",f);const l=await fetch(`${s}/api/upload/chunk/${r}/${u}`,{method:"POST",body:y});if(!l.ok){let p=`Failed to upload chunk ${u+1}`;try{p=(await l.json()).error||p}catch{p=await l.text().catch(()=>p)}throw new Error(p)}const v=(u+1)/n*100;t(v)}const a=await fetch(`${s}/api/upload/complete/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!a.ok){let u="Failed to complete upload";try{u=(await a.json()).error||u}catch{u=await a.text().catch(()=>u)}throw new Error(u)}return await a.json()}var Mc=C('<button type="button"><svg class="drop-zone-icon svelte-17hyuhr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-17hyuhr">drop a file here or click to browse</p> <p class="drop-zone-hint svelte-17hyuhr">supports video and audio files (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>'),$c=Re('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Ic=Re('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),Dc=C("<button> </button>"),Bc=C('<div class="file-info svelte-17hyuhr"><div class="file-header svelte-17hyuhr"><div class="file-icon svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><!></svg></div> <div class="file-details svelte-17hyuhr"><div class="file-name svelte-17hyuhr"> </div> <div class="file-size svelte-17hyuhr"> </div></div> <button class="file-remove svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="convert-options svelte-17hyuhr"><div class="option-label svelte-17hyuhr">convert to</div> <div class="segmented-control svelte-17hyuhr"></div></div> <button class="convert-btn svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> </button></div>'),Rc=C('<div class="progress-container svelte-17hyuhr"><!></div>'),Ac=C("<div> </div>"),Nc=C('<!> <main class="svelte-17hyuhr"><div class="page-header svelte-17hyuhr"><h1 class="svelte-17hyuhr">convert</h1> <p class="svelte-17hyuhr">change video and audio file formats</p></div> <div class="converter svelte-17hyuhr"><!> <!> <!></div></main> <!>',1);function Oc(e,t){mt(t,!0);let s=D(null),n=D("mp4"),i=D(!1),r=D(0),a=D(""),u=D(null),c=D(""),d=D(!1),f;const y=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"wav",label:"wav"}];function l(U){return U.type.startsWith("audio/")||["mp3","m4a","wav","flac","ogg","opus"].some(V=>U.name.toLowerCase().endsWith("."+V))}function v(U){if(!U)return;const V=8*1024*1024*1024;if(U.size>V){h(u,"error"),h(c,"File too large. Maximum size is 8GB.");return}h(s,U,!0),h(u,null),h(c,"")}function p(){h(s,null),h(r,0),h(a,""),h(u,null),h(c,""),f&&(f.value="")}async function x(U){let V="";try{V=await(await U.blob()).text()}catch{V=await U.text().catch(()=>"")}try{return JSON.parse(V).error||`Request failed with status ${U.status}`}catch{return V||`Request failed with status ${U.status}`}}async function m(){if(!o(s)||o(i))return;h(i,!0),h(r,0),h(a,"Uploading..."),h(u,null),h(c,"");const U=o(s).size>90*1024*1024;let V=null;const ve=Date.now().toString()+Math.random().toString(36).substr(2,9);pe.add({id:ve,title:`${o(s).name} â .${o(n)}`,type:"convert",stage:"uploading",status:"uploading...",progress:0,startTime:Date.now()});try{V=Er();let T;if(U){const{filePath:ae,fileName:Ce}=await uo(o(s),H=>{h(r,H,!0),h(a,"Uploading..."),pe.updateItem(ve,{progress:H,status:"uploading..."})});h(r,0),h(a,"Converting..."),pe.updateItem(ve,{stage:"converting",status:"converting...",progress:0});const Y=await fetch(`${Ee()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:ae,fileName:Ce,format:o(n)})});if(!Y.ok)throw new Error(await x(Y));const{jobId:_e}=await Y.json();let te=0;for(;;){if(te>=300)throw new Error("Conversion timed out after 10 minutes");te++,await new Promise(I=>setTimeout(I,2e3));const H=new AbortController,Q=setTimeout(()=>H.abort(),1e4);let de;try{de=await fetch(`${Ee()}/api/job/${_e}/status`,{signal:H.signal})}finally{clearTimeout(Q)}if(!de.ok)throw de.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const q=await de.json();if(q.status==="error")throw new Error(q.error||"Conversion failed");if(h(r,q.progress||0,!0),h(a,q.message||"processing...",!0),pe.updateItem(ve,{progress:q.progress||0,status:q.message||"converting..."}),q.status==="complete")break}T=await fetch(`${Ee()}/api/job/${_e}/download`)}else T=await new Promise((ae,Ce)=>{const Y=new XMLHttpRequest;Y.open("POST",`${Ee()}/api/convert`),Y.upload.onprogress=te=>{if(te.lengthComputable){const H=Math.round(te.loaded/te.total*90);h(r,H,!0),h(a,`uploading... ${H}%`),pe.updateItem(ve,{progress:H,status:`uploading... ${H}%`})}},Y.onload=()=>{h(r,95),h(a,"processing..."),pe.updateItem(ve,{stage:"converting",status:"converting...",progress:95}),ae(new Response(Y.response,{status:Y.status,statusText:Y.statusText,headers:{"Content-Disposition":Y.getResponseHeader("Content-Disposition")||""}}))},Y.onerror=()=>Ce(new Error("Network error during upload")),Y.responseType="blob";const _e=new FormData;_e.append("file",o(s)),_e.append("format",o(n)),Y.send(_e)});if(!T.ok)throw new Error(await x(T));h(r,100),h(a,"complete!");const $=T.headers.get("Content-Disposition");let F=o(s).name.replace(/\.[^.]+$/,"")+"."+o(n);if($){const ae=$.match(/filename="?([^"]+)"?/);ae&&(F=ae[1])}const L=await T.blob();no(L,F),h(u,"success"),h(c,"conversion complete! download started."),pe.updateItem(ve,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>pe.remove(ve),5e3)}catch(T){h(u,"error"),h(c,T.message||"conversion failed",!0),h(r,0),h(a,""),pe.updateItem(ve,{stage:"error",status:T.message||"conversion failed"})}finally{h(i,!1),V&&Pr(V)}}var k=Nc(),P=Se(k);kn(P,{extraContent:V=>{Vn(V,{})}});var R=_(P,2),ue=_(g(R),2),G=g(ue);{var ne=U=>{var V=Mc();let ve;V.__click=()=>f==null?void 0:f.click();var T=_(g(V),6);T.__change=$=>{var F;v((F=$.target.files)==null?void 0:F[0]),$.target.value=""},bn(T,$=>f=$,()=>f),J(()=>ve=ke(V,1,"drop-zone svelte-17hyuhr",null,ve,{dragover:o(d)})),Ct("dragover",V,$=>{$.preventDefault(),h(d,!0)}),Ct("dragleave",V,$=>{$.preventDefault(),h(d,!1)}),Ct("drop",V,$=>{var F,L;$.preventDefault(),h(d,!1),v((L=(F=$.dataTransfer)==null?void 0:F.files)==null?void 0:L[0])}),b(U,V)},xe=U=>{var V=Bc(),ve=g(V),T=g(ve),$=g(T),F=g($);{var L=X=>{var le=$c();b(X,le)},ae=X=>{var le=Ic();b(X,le)};B(F,X=>{l(o(s))?X(L):X(ae,!1)})}var Ce=_(T,2),Y=g(Ce),_e=g(Y),te=_(Y,2),H=g(te),Q=_(Ce,2);Q.__click=p;var de=_(ve,2),q=_(g(de),2);Ge(q,21,()=>y,tt,(X,le)=>{var we=Dc();let $e;we.__click=()=>h(n,o(le).value,!0);var He=g(we);J(()=>{$e=ke(we,1,"segment svelte-17hyuhr",null,$e,{active:o(n)===o(le).value}),O(He,o(le).label)}),b(X,we)});var I=_(de,2);I.__click=m;var K=_(g(I));J(X=>{cs(Y,"title",o(s).name),O(_e,o(s).name),O(H,X),I.disabled=o(i),O(K,` ${o(i)?"converting...":"convert"}`)},[()=>lo(o(s).size)]),b(U,V)};B(G,U=>{o(s)?U(xe,!1):U(ne)})}var be=_(G,2);{var he=U=>{var V=Rc(),ve=g(V);co(ve,{get percent(){return o(r)},get label(){return o(a)}}),b(U,V)};B(be,U=>{o(i)&&U(he)})}var Ae=_(be,2);{var Ye=U=>{var V=Ac(),ve=g(V);J(()=>{ke(V,1,`status ${o(u)??""}`,"svelte-17hyuhr"),O(ve,o(c))}),b(U,V)};B(Ae,U=>{o(u)&&U(Ye)})}var Qe=_(R,2);Hn(Qe),b(e,k),_t()}Kt(["click","change"]);Kt(["click","keydown"]);var Fc=C('<button type="button"><svg class="drop-zone-icon svelte-15o2uhu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-15o2uhu">drop a video here or click to browse</p> <p class="drop-zone-hint svelte-15o2uhu">supports mp4, webm, mov, mkv, avi (max 8GB)</p> <input type="file" accept="video/*" style="display: none;"/></button>'),Lc=C('<div class="file-info svelte-15o2uhu"><div class="file-header svelte-15o2uhu"><div class="file-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-15o2uhu"><div class="file-name svelte-15o2uhu"> </div> <div class="file-size svelte-15o2uhu"> </div></div> <button class="file-remove svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-15o2uhu"><span> </span> <span> </span></div></div>'),Uc=C('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),Vc=C('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),Hc=C('<div class="progress-container svelte-15o2uhu"><div class="progress-header svelte-15o2uhu"><span class="progress-status svelte-15o2uhu"> </span> <span class="progress-percent svelte-15o2uhu"> </span></div> <!> <div class="progress-details svelte-15o2uhu"> </div></div>'),Jc=C('<div class="result-container svelte-15o2uhu"><div class="result-header svelte-15o2uhu"><div class="result-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-15o2uhu">compression complete!</div></div> <div class="result-stats svelte-15o2uhu"><div class="result-stat svelte-15o2uhu"><div class="result-stat-value svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">original</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value arrow svelte-15o2uhu">-></div> <div class="result-stat-label svelte-15o2uhu"></div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">compressed</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">saved</div></div></div> <button class="result-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> compress another</button></div>'),Wc=C('<div class="quality-overlay svelte-15o2uhu"><div class="quality-modal svelte-15o2uhu"><div class="quality-modal-title svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg> quality warning</div> <div class="quality-gauge svelte-15o2uhu"><div class="quality-gauge-bg svelte-15o2uhu"></div> <div class="quality-gauge-mask svelte-15o2uhu"></div> <div class="quality-gauge-needle svelte-15o2uhu"></div> <div class="quality-gauge-center svelte-15o2uhu"></div> <div class="quality-gauge-value svelte-15o2uhu"><span> </span> <span class="quality-gauge-unit svelte-15o2uhu">kbps</span></div></div> <div class="quality-modal-message svelte-15o2uhu">Your video is <strong class="svelte-15o2uhu"> </strong> long. At this size, the estimated bitrate is very low and the output <strong class="svelte-15o2uhu">may look blocky or blurry</strong>. <br/><br/> For better results, try a <strong class="svelte-15o2uhu">shorter clip</strong> or a <strong class="svelte-15o2uhu">larger target size</strong>.</div> <div class="quality-modal-buttons svelte-15o2uhu"><button class="quality-modal-btn cancel svelte-15o2uhu">cancel</button> <button class="quality-modal-btn proceed svelte-15o2uhu">compress anyway</button></div></div></div>'),Gc=C('<!> <main class="svelte-15o2uhu"><div class="page-header svelte-15o2uhu"><h1 class="svelte-15o2uhu">compress</h1> <p class="svelte-15o2uhu">shrink videos for discord, email, or anywhere!</p></div> <div class="compress-container svelte-15o2uhu"><!> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">target size</div> <div class="size-description svelte-15o2uhu">choose a size limit or enter a custom size</div> <div class="size-grid svelte-15o2uhu"></div> <div class="custom-size-row svelte-15o2uhu"><input type="number" class="custom-size-input svelte-15o2uhu" placeholder="custom" min="1" max="4096"/> <span class="custom-size-suffix svelte-15o2uhu">MB</span></div> <div class="estimate svelte-15o2uhu"><span class="estimate-label svelte-15o2uhu">estimated quality</span> <span> </span></div></div> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">encoding preset</div> <div class="size-description svelte-15o2uhu">quality = better compression, slower | fast = quicker encoding</div> <div class="preset-grid svelte-15o2uhu"></div> <label class="checkbox-row svelte-15o2uhu"><input type="checkbox" class="svelte-15o2uhu"/> <span class="svelte-15o2uhu">downscale for better quality (reduces blockiness)</span></label></div> <button class="compress-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg> </button> <!> <!></div></main> <!> <!>',1);function Yc(e,t){mt(t,!0);let s=D(null),n=D(0),i=D(0),r=D(0),a=D(50),u=D(47),c=D(""),d=D(!1),f=D("balanced"),y=D(!1),l=D(!1),v=D(0),p=D(""),x=D(""),m=D(!1),k=D(""),P=D(""),R=D(""),ue=D(!1),G=D(!1),ne;const xe=[{size:8,actual:7.5,label:"MB free"},{size:10,actual:9.5,label:"MB"},{size:50,actual:47,label:"MB basic"},{size:100,actual:95,label:"MB"},{size:500,actual:475,label:"MB nitro"}],be=[{id:"fast",label:"fast",sublabel:"quick encode"},{id:"balanced",label:"balanced",sublabel:"recommended"},{id:"quality",label:"quality",sublabel:"best results"}];let he=ye(()=>{if(!o(s)||!o(n))return 0;const E=o(u)*1024*1024,M=128*1024,S=E-M/8*o(n);return Math.floor(S*8/o(n)/1024)}),Ae=ye(()=>!o(s)||!o(n)?"select a file to see estimate":o(s).size/(1024*1024)<=o(u)?`already under ${o(a)}MB!`:o(he)<500?`~${o(he)} kbps video - very low quality (may be blocky)`:o(he)<1e3?`~${o(he)} kbps video - low quality`:o(he)<2500?`~${o(he)} kbps video - medium quality`:o(he)<5e3?`~${o(he)} kbps video - good quality`:`~${o(he)} kbps video - excellent quality`),Ye=ye(()=>o(s)&&o(n)&&o(he)<500&&o(s).size/(1024*1024)>o(u)),Qe=ye(()=>-90+Math.min(o(he),2e3)/2e3*180),U=ye(()=>{if(!o(n))return"--:--";const E=Math.floor(o(n)/60),M=Math.floor(o(n)%60);return`${E}:${M.toString().padStart(2,"0")}`}),V=ye(()=>!o(i)||!o(r)?"unknown":`${o(i)}x${o(r)}`);function ve(E){return new Promise(M=>{const S=document.createElement("video");S.preload="metadata",S.onloadedmetadata=()=>{URL.revokeObjectURL(S.src),M({duration:S.duration,width:S.videoWidth,height:S.videoHeight})},S.onerror=()=>{M({duration:0,width:0,height:0})},S.src=URL.createObjectURL(E)})}async function T(E){if(!E)return;if(!E.type.startsWith("video/")){fe("Please select a video file","error");return}const M=8*1024*1024*1024;if(E.size>M){fe("File too large. Maximum size is 8GB.","error");return}h(s,E,!0),h(m,!1);const S=await ve(E);h(n,S.duration,!0),h(i,S.width,!0),h(r,S.height,!0)}function $(){h(s,null),h(n,0),h(i,0),h(r,0),h(v,0),h(p,""),h(x,""),h(m,!1),h(c,""),h(d,!1),ne&&(ne.value="")}function F(E){h(a,E.size,!0),h(u,E.actual,!0),h(d,!1),h(c,"")}function L(E){h(c,E,!0);const M=parseInt(E);M&&M>0&&(h(a,M,!0),h(u,M*.95),h(d,!0))}function ae(){(!o(c)||parseInt(o(c))<=0)&&o(d)&&(h(a,50),h(u,47),h(d,!1))}function Ce(){if(!o(s))return;if(o(s).size/(1024*1024)<=o(u)){fe(`File is already under ${o(a)}MB!`,"success");return}o(he)<500?h(G,!0):Y()}async function Y(){if(!o(s)||o(l))return;if(h(G,!1),o(s).size/(1024*1024)<=o(u)){fe(`File is already under ${o(a)}MB!`,"success");return}h(l,!0),h(v,0),h(p,"uploading..."),h(x,"sending file to server..."),h(m,!1);const M=Date.now().toString()+Math.random().toString(36).substr(2,9),S=M;pe.add({id:S,title:`${o(s).name} â ${o(a)}MB`,type:"compress",stage:"uploading",status:"uploading...",progress:0,startTime:Date.now()});const Z=o(s).size>90*1024*1024;let A=null,ee=null;try{A=Er(),ee=fr(M,{onMessage:ze=>{ze.stage==="compressing"&&(h(p,"compressing..."),ze.progress!==void 0&&h(v,ze.progress,!0),ze.message&&h(x,ze.message,!0),pe.updateItem(S,{stage:"compressing",progress:ze.progress||0,status:ze.message||"compressing..."}))},onError:()=>{}});let N;if(Z){h(p,"uploading..."),h(x,"large file detected, uploading in chunks...");const ze=await uo(o(s),ot=>{h(v,ot,!0),h(x,"uploading chunks..."),pe.updateItem(S,{progress:ot,status:"uploading..."})}),{filePath:Lt,fileName:qs}=ze;h(v,0),h(p,"compressing..."),h(x,"starting compression..."),pe.updateItem(S,{stage:"compressing",status:"compressing...",progress:0});const Xs=await fetch(`${Ee()}/api/compress-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:Lt,fileName:qs,targetSize:o(u).toString(),duration:o(n).toString(),progressId:M,preset:o(f),downscale:o(y)})});if(!Xs.ok){let ot="Failed to start compression";try{ot=(await Xs.json()).error||ot}catch{}throw new Error(ot)}const{jobId:xn}=await Xs.json(),Ms=Date.now(),Sn=1800*1e3;let Jn=0;for(;Date.now()-Ms<=Sn;){await new Promise(ot=>setTimeout(ot,2e3));try{const ot=new AbortController,Mr=setTimeout(()=>ot.abort(),1e4);let Cn;try{Cn=await fetch(`${Ee()}/api/job/${xn}/status`,{signal:ot.signal})}finally{clearTimeout(Mr)}if(!Cn.ok)throw new Error(`Server returned ${Cn.status}`);const Ut=await Cn.json();if(Jn=0,Ut.status==="error")throw new Error(Ut.error||"Compression failed");if(Ut.progress!==void 0&&h(v,Ut.progress,!0),Ut.message&&h(x,Ut.message,!0),pe.updateItem(S,{progress:Ut.progress||0,status:Ut.message||"compressing..."}),Ut.status==="complete")break}catch(ot){if(Jn++,Jn>=3)throw new Error(`Failed to check job status after 3 attempts: ${ot.message}`)}}if(Date.now()-Ms>Sn)throw new Error("Job timed out after 30 minutes.");N=await fetch(`${Ee()}/api/job/${xn}/download`)}else{const ze=new FormData;ze.append("file",o(s)),ze.append("targetSize",o(u).toString()),ze.append("duration",o(n).toString()),ze.append("progressId",M),ze.append("preset",o(f)),ze.append("downscale",o(y)),N=await fetch(`${Ee()}/api/compress`,{method:"POST",body:ze})}if(ee&&ee.close(),!N.ok){let ze="Compression failed";try{ze=(await N.json()).error||ze}catch{}throw new Error(ze)}const re=await N.blob(),me=re.size,Te=(o(s).size/(1024*1024)).toFixed(1),Pe=(me/(1024*1024)).toFixed(1),Me=Math.round((1-me/o(s).size)*100);h(k,`${Te} MB`),h(P,`${Pe} MB`),h(R,`${Me}%`),h(m,!0);const qe=o(s).name.lastIndexOf("."),yt=qe>0?o(s).name.slice(0,qe):o(s).name;no(re,`${yt}_compressed.mp4`),fe("Compression complete!","success"),pe.updateItem(S,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>pe.remove(S),5e3)}catch(N){fe(N.message||"Compression failed","error"),pe.updateItem(S,{stage:"error",status:N.message||"compression failed"}),ee&&ee.close()}finally{h(l,!1),h(v,0),h(p,""),h(x,""),A&&Pr(A)}}var _e=Gc(),te=Se(_e);kn(te,{extraContent:M=>{Vn(M,{})}});var H=_(te,2),Q=_(g(H),2),de=g(Q);{var q=E=>{var M=Fc();let S;M.__click=()=>ne==null?void 0:ne.click();var Z=_(g(M),6);Z.__change=A=>{var ee;T((ee=A.target.files)==null?void 0:ee[0]),A.target.value=""},bn(Z,A=>ne=A,()=>ne),J(()=>S=ke(M,1,"drop-zone svelte-15o2uhu",null,S,{dragover:o(ue)})),Ct("dragover",M,A=>{A.preventDefault(),h(ue,!0)}),Ct("dragleave",M,A=>{A.preventDefault(),h(ue,!1)}),Ct("drop",M,A=>{var ee,N;A.preventDefault(),h(ue,!1),T((N=(ee=A.dataTransfer)==null?void 0:ee.files)==null?void 0:N[0])}),b(E,M)},I=E=>{var M=Lc(),S=g(M),Z=_(g(S),2),A=g(Z),ee=g(A),N=_(A,2),re=g(N),me=_(Z,2);me.__click=$;var Te=_(S,2),Pe=g(Te),Me=g(Pe),qe=_(Pe,2),yt=g(qe);J(ze=>{cs(A,"title",o(s).name),O(ee,o(s).name),O(re,ze),O(Me,`duration: ${(o(n)?o(U):"unknown")??""}`),O(yt,`resolution: ${o(V)??""}`)},[()=>lo(o(s).size)]),b(E,M)};B(de,E=>{o(s)?E(I,!1):E(q)})}var K=_(de,2),X=_(g(K),4);Ge(X,21,()=>xe,tt,(E,M)=>{var S=Uc();let Z;S.__click=()=>F(o(M));var A=g(S),ee=g(A),N=_(A,2),re=g(N);J(()=>{Z=ke(S,1,"size-option svelte-15o2uhu",null,Z,{active:!o(d)&&o(a)===o(M).size}),O(ee,o(M).size),O(re,o(M).label)}),b(E,S)});var le=_(X,2),we=g(le);we.__input=E=>L(E.target.value);var $e=_(le,2),He=_(g($e),2);let Je;var rt=g(He),Ke=_(K,2),it=_(g(Ke),4);Ge(it,21,()=>be,tt,(E,M)=>{var S=Vc();let Z;S.__click=()=>h(f,o(M).id,!0);var A=g(S),ee=g(A),N=_(A,2),re=g(N);J(()=>{Z=ke(S,1,"size-option svelte-15o2uhu",null,Z,{active:o(f)===o(M).id}),O(ee,o(M).label),O(re,o(M).sublabel)}),b(E,S)});var Nt=_(it,2),vs=g(Nt),Ot=_(Ke,2);Ot.__click=Ce;var wt=_(g(Ot)),Ft=_(Ot,2);{var Qs=E=>{var M=Hc(),S=g(M),Z=g(S),A=g(Z),ee=_(Z,2),N=g(ee),re=_(S,2);co(re,{get percent(){return o(v)}});var me=_(re,2),Te=g(me);J(Pe=>{O(A,o(p)),O(N,`${Pe??""}%`),O(Te,o(x))},[()=>Math.round(o(v))]),b(E,M)};B(Ft,E=>{o(l)&&E(Qs)})}var Ks=_(Ft,2);{var j=E=>{var M=Jc(),S=_(g(M),2),Z=g(S),A=g(Z),ee=g(A),N=_(Z,4),re=g(N),me=g(re),Te=_(N,2),Pe=g(Te),Me=g(Pe),qe=_(S,2);qe.__click=$,J(()=>{O(ee,o(k)),O(me,o(P)),O(Me,o(R))}),b(E,M)};B(Ks,E=>{o(m)&&E(j)})}var z=_(H,2);{var W=E=>{var M=Wc();M.__click=ze=>{ze.target===ze.currentTarget&&h(G,!1)};var S=g(M),Z=_(g(S),2),A=_(g(Z),4),ee=_(A,4),N=g(ee),re=g(N),me=_(Z,2),Te=_(g(me)),Pe=g(Te),Me=_(me,2),qe=g(Me);qe.__click=()=>h(G,!1);var yt=_(qe,2);yt.__click=Y,J(()=>{yn(A,`transform: translateX(-50%) rotate(${o(Qe)??""}deg);`),O(re,o(he)),O(Pe,o(U))}),b(E,M)};B(z,E=>{o(G)&&E(W)})}var ge=_(z,2);Hn(ge),J(()=>{Ea(we,o(c)),Je=ke(He,1,"estimate-value svelte-15o2uhu",null,Je,{"estimate-warning":o(Ye)}),O(rt,o(Ae)),Ot.disabled=!o(s)||o(l),O(wt,` ${o(l)?"compressing...":"compress video"}`)}),Ct("blur",we,ae),Zi(vs,()=>o(y),E=>h(y,E)),b(e,_e),_t()}Kt(["click","change","input"]);var Qc=C(`<!> <main class="svelte-13tj7i"><div class="page-header svelte-13tj7i"><h1 class="svelte-13tj7i">privacy policy</h1> <p class="svelte-13tj7i">no legal jargon, just the truth</p></div> <div class="tldr-box svelte-13tj7i"><h3 class="svelte-13tj7i">tl;dr</h3> <p class="svelte-13tj7i">yoink doesn't collect anything. no tracking, no cookies, no analytics. your files are stored on an encrypted volume with a key that only exists in RAM, and get wiped automatically.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">who runs this</h2> <p class="svelte-13tj7i">just me, one person. i made yoink because i wanted a simple tool that does what it says without being weird about your data. i was inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-13tj7i">cobalt.tools</a> and <a href="https://vert.sh" target="_blank" rel="noopener" class="svelte-13tj7i">vert.sh</a>, and wanted to combine the best parts into one site.</p> <p class="svelte-13tj7i">im not a company, i have no investors, and i have no reason to collect your data.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">your files</h2> <p class="svelte-13tj7i">files are stored on a LUKS2 encrypted volume on the server. the encryption key is randomly generated at every boot, stored only in RAM, and never written to disk â so if the server ever powers off, the key is gone and the data is unrecoverable by design.</p> <p class="svelte-13tj7i">once your download or conversion is done, the file gets deleted immediately from that encrypted volume. there's also a cleanup job that runs every 5 minutes and wipes anything older than 20 minutes no matter what, just in case something slips through.</p> <p class="svelte-13tj7i">we don't log what you download, what you convert, what you compress, or any filenames or URLs. none of that gets saved anywhere.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">what we collect</h2> <p class="svelte-13tj7i">nothing. literally zero.</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">no analytics</strong> - no tracking scripts, no usage stats, nothing</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no cookies</strong> - we don't set a single cookie</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no IP logging</strong> - your IP isn't stored or logged</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no content logging</strong> - URLs, filenames, and what you do here are not recorded</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no accounts</strong> - there's nothing to sign up for, no emails collected</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no third party stuff</strong> - no google analytics, no facebook pixel, no ad networks</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">encryption</h2> <p class="svelte-13tj7i">two layers:</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">in transit</strong> â everything goes through HTTPS, so your connection to yoink is encrypted end to end. nobody between you and the server can see what you're doing.</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">at rest</strong> â all temporary files are stored on a LUKS2 encrypted volume (AES-256). the decryption key is generated fresh at every server boot using /dev/urandom and kept only in RAM. there's no way to recover files from the disk after a reboot, and no way to read them without the key that lives purely in memory.</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">open source</h2> <p class="svelte-13tj7i">the whole thing is on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>. you can read every line of code yourself if you want to verify any of this. if you find something off, please tell me.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">contact</h2> <p class="svelte-13tj7i">questions, concerns, or just want to say hi, reach me at <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-13tj7i">coah80.com</a> or open an issue on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">changes</h2> <p class="svelte-13tj7i">if this policy changes, it gets updated here. no sneaky edits. last updated: <strong class="svelte-13tj7i">february 23, 2026</strong>.</p></div></main> <!>`,1);function Kc(e){var t=Qc(),s=Se(t);kn(s,{});var n=_(s,4);Hn(n),b(e,t)}var Xc=C('<div class="spinner-wrap svelte-121vd2i"><!></div> <h1 class="svelte-121vd2i">downloading...</h1> <p class="svelte-121vd2i">your download should start automatically</p>',1),Zc=C('<h1 class="success svelte-121vd2i">done</h1> <p class="svelte-121vd2i">download started successfully</p>',1),eu=C('<h1 class="error svelte-121vd2i">download failed</h1> <p class="svelte-121vd2i">this file is no longer available</p>',1),tu=C('<main class="svelte-121vd2i"><div class="download-container svelte-121vd2i"><!> <div> </div></div></main>');function su(e,t){mt(t,!0);const s=()=>Bt(Aa,"$query",n),[n,i]=Xt();let r=D("loading"),a=D("preparing download..."),u=ye(()=>s().token||"");Ln(()=>{const m=window.location.pathname.replace("/download","").replace(/^\//,""),k=o(u)||m;if(!k){h(r,"error"),h(a,"no download token provided");return}const P=`${Ee()}/api/bot/download/${k}`;h(a,"starting download..."),fetch(P,{method:"HEAD"}).then(R=>{if(R.ok)h(a,"download started"),window.location.href=P,setTimeout(()=>{h(r,"success"),h(a,"you can close this page now")},2e3);else throw new Error("Download not available")}).catch(()=>{h(r,"error"),h(a,"the download link has expired (5 minute limit)")})});var c=tu(),d=g(c),f=g(d);{var y=m=>{var k=Xc(),P=Se(k),R=g(P);ao(R),b(m,k)},l=m=>{var k=Be(),P=Se(k);{var R=G=>{var ne=Zc();b(G,ne)},ue=G=>{var ne=eu();b(G,ne)};B(P,G=>{o(r)==="success"?G(R):G(ue,!1)},!0)}b(m,k)};B(f,m=>{o(r)==="loading"?m(y):m(l,!1)})}var v=_(f,2);let p;var x=g(v);J(()=>{p=ke(v,1,"status svelte-121vd2i",null,p,{error:o(r)==="error",success:o(r)==="success"}),O(x,o(a))}),b(e,c),_t(),i()}var nu=C('<main class="svelte-zxc657"><p>Redirecting...</p></main>');function ru(e,t){mt(t,!1),Ln(()=>{const n=new URLSearchParams(window.location.search),r=(n.get("url")||n.get("text")||"").match(/https?:\/\/[^\s]+/);let a=r?r[0]:"";if(a=a.replace(/[.,!?;:)\]}>]+$/,""),a)try{const u=new URL(a);(u.protocol==="http:"||u.protocol==="https:")&&localStorage.setItem("yoink_shared_url",JSON.stringify({url:a,timestamp:Date.now()}))}catch{}to("/")}),qa();var s=nu();b(e,s),_t()}var iu=C(`<!> <main class="svelte-kbj945"><div class="not-found svelte-kbj945"><h1 class="svelte-kbj945">404</h1> <p class="svelte-kbj945">this page doesn't exist</p> <a href="/" class="back-link svelte-kbj945">go back home</a></div></main>`,1);function ou(e){var t=iu(),s=Se(t);kn(s,{}),b(e,t)}var au=C("<!> <!> <!>",1);function lu(e,t){mt(t,!0);const s=()=>Bt(zr,"$path",n),[n,i]=Xt(),r={"/":cc,"/settings":Ec,"/convert":Oc,"/compress":Yc,"/privacy":Kc,"/download":su,"/share":ru};let a=ye(s),u=ye(()=>r[o(a)]||ou);function c(v){const p=v.target.closest("a");if(!p)return;const x=p.getAttribute("href");!x||!x.startsWith("/")||p.target==="_blank"||(v.preventDefault(),to(x))}Ln(()=>{Qa(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(pe.reconnectOnResume(),Ka())})});var d=au();Ct("click",Nn.body,c);var f=Se(d);Sa(f,()=>o(u),(v,p)=>{p(v,{})});var y=_(f,2);Bl(y,{});var l=_(y,2);Va(l),b(e,d),_t(),i()}_a(lu,{target:document.getElementById("app")});
