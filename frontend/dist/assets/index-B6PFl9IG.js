var Va=Object.defineProperty;var di=t=>{throw TypeError(t)};var Wa=(t,s,r)=>s in t?Va(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r;var vs=(t,s,r)=>Wa(t,typeof s!="symbol"?s+"":s,r),Tn=(t,s,r)=>s.has(t)||di("Cannot "+r);var M=(t,s,r)=>(Tn(t,s,"read from private field"),r?r.call(t):s.get(t)),Ge=(t,s,r)=>s.has(t)?di("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),Je=(t,s,r,i)=>(Tn(t,s,"write to private field"),i?i.call(t,r):s.set(t,r),r),It=(t,s,r)=>(Tn(t,s,"access private method"),r);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const v of a.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&i(v)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const In=!1;var $i=Array.isArray,Ja=Array.prototype.indexOf,xr=Array.prototype.includes,hn=Array.from,Bi=Object.defineProperty,pr=Object.getOwnPropertyDescriptor,Di=Object.getOwnPropertyDescriptors,Ya=Object.prototype,Ga=Array.prototype,Gn=Object.getPrototypeOf,fi=Object.isExtensible;const Bs=()=>{};function Qa(t){return t()}function cn(t){for(var s=0;s<t.length;s++)t[s]()}function Ni(){var t,s,r=new Promise((i,o)=>{t=i,s=o});return{promise:r,resolve:t,reject:s}}const Pt=2,vn=4,Gr=8,Li=1<<24,Es=16,ls=32,cr=64,Qn=128,Yt=512,Ct=1024,Et=2048,os=4096,Ut=8192,js=16384,Xn=32768,Fs=65536,pi=1<<17,Ai=1<<18,Tr=1<<19,Oi=1<<20,Ts=1<<25,ir=32768,Rn=1<<21,Kn=1<<22,Ds=1<<23,tr=Symbol("$state"),Xa=Symbol("legacy props"),Ka=Symbol(""),fr=new class extends Error{constructor(){super(...arguments);vs(this,"name","StaleReactionError");vs(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Za(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function eo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function to(t,s,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function so(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ro(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function no(t){throw new Error("https://svelte.dev/e/effect_orphan")}function io(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ao(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function oo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function lo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function co(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function vo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const uo=1,fo=2,Fi=4,po=8,ho=16,go=1,mo=2,wo=4,_o=8,yo=16,Ui=1,bo=2,jt=Symbol(),xo="http://www.w3.org/1999/xhtml";function ko(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Hi(t){return t===this.v}function Vi(t,s){return t!=t?s==s:t!==s||t!==null&&typeof t=="object"||typeof t=="function"}function Wi(t){return!Vi(t,this.v)}let jr=!1,So=!1;function Co(){jr=!0}let yt=null;function kr(t){yt=t}function xt(t,s=!1,r){yt={p:yt,i:!1,c:null,e:null,s:t,x:null,l:jr&&!s?{s:null,u:null,$:[]}:null}}function kt(t){var s=yt,r=s.e;if(r!==null){s.e=null;for(var i of r)fa(i)}return s.i=!0,yt=s.p,{}}function Qr(){return!jr||yt!==null&&yt.l===null}let Js=[];function Ji(){var t=Js;Js=[],cn(t)}function zs(t){if(Js.length===0&&!Lr){var s=Js;queueMicrotask(()=>{s===Js&&Ji()})}Js.push(t)}function To(){for(;Js.length>0;)Ji()}function Yi(t){var s=lt;if(s===null)return Xe.f|=Ds,t;if((s.f&Xn)===0){if((s.f&Qn)===0)throw t;s.b.error(t)}else Sr(t,s)}function Sr(t,s){for(;s!==null;){if((s.f&Qn)!==0)try{s.b.error(t);return}catch(r){t=r}s=s.parent}throw t}const jo=-7169;function _t(t,s){t.f=t.f&jo|s}function Zn(t){(t.f&Yt)!==0||t.deps===null?_t(t,Ct):_t(t,os)}function Gi(t){if(t!==null)for(const s of t)(s.f&Pt)===0||(s.f&ir)===0||(s.f^=ir,Gi(s.deps))}function Qi(t,s,r){(t.f&Et)!==0?s.add(t):(t.f&os)!==0&&r.add(t),Gi(t.deps),_t(t,Ct)}const rn=new Set;let Qe=null,qn=null,zt=null,Dt=[],gn=null,$n=!1,Lr=!1;var hr,gr,Gs,mr,Vr,Wr,Qs,xs,wr,ws,Bn,Dn,Xi;const li=class li{constructor(){Ge(this,ws);vs(this,"committed",!1);vs(this,"current",new Map);vs(this,"previous",new Map);Ge(this,hr,new Set);Ge(this,gr,new Set);Ge(this,Gs,0);Ge(this,mr,0);Ge(this,Vr,null);Ge(this,Wr,new Set);Ge(this,Qs,new Set);Ge(this,xs,new Map);vs(this,"is_fork",!1);Ge(this,wr,!1)}is_deferred(){return this.is_fork||M(this,mr)>0}skip_effect(s){M(this,xs).has(s)||M(this,xs).set(s,{d:[],m:[]})}unskip_effect(s){var r=M(this,xs).get(s);if(r){M(this,xs).delete(s);for(var i of r.d)_t(i,Et),ns(i);for(i of r.m)_t(i,os),ns(i)}}process(s){var o;Dt=[],this.apply();var r=[],i=[];for(const a of s)It(this,ws,Bn).call(this,a,r,i);if(this.is_deferred()){It(this,ws,Dn).call(this,i),It(this,ws,Dn).call(this,r);for(const[a,v]of M(this,xs))ta(a,v)}else{for(const a of M(this,hr))a();M(this,hr).clear(),M(this,Gs)===0&&It(this,ws,Xi).call(this),qn=this,Qe=null,hi(i),hi(r),qn=null,(o=M(this,Vr))==null||o.resolve()}zt=null}capture(s,r){r!==jt&&!this.previous.has(s)&&this.previous.set(s,r),(s.f&Ds)===0&&(this.current.set(s,s.v),zt==null||zt.set(s,s.v))}activate(){Qe=this,this.apply()}deactivate(){Qe===this&&(Qe=null,zt=null)}flush(){if(this.activate(),Dt.length>0){if(Ki(),Qe!==null&&Qe!==this)return}else M(this,Gs)===0&&this.process([]);this.deactivate()}discard(){for(const s of M(this,gr))s(this);M(this,gr).clear()}increment(s){Je(this,Gs,M(this,Gs)+1),s&&Je(this,mr,M(this,mr)+1)}decrement(s){Je(this,Gs,M(this,Gs)-1),s&&Je(this,mr,M(this,mr)-1),!M(this,wr)&&(Je(this,wr,!0),zs(()=>{Je(this,wr,!1),this.is_deferred()?Dt.length>0&&this.flush():this.revive()}))}revive(){for(const s of M(this,Wr))M(this,Qs).delete(s),_t(s,Et),ns(s);for(const s of M(this,Qs))_t(s,os),ns(s);this.flush()}oncommit(s){M(this,hr).add(s)}ondiscard(s){M(this,gr).add(s)}settled(){return(M(this,Vr)??Je(this,Vr,Ni())).promise}static ensure(){if(Qe===null){const s=Qe=new li;rn.add(Qe),Lr||zs(()=>{Qe===s&&s.flush()})}return Qe}apply(){}};hr=new WeakMap,gr=new WeakMap,Gs=new WeakMap,mr=new WeakMap,Vr=new WeakMap,Wr=new WeakMap,Qs=new WeakMap,xs=new WeakMap,wr=new WeakMap,ws=new WeakSet,Bn=function(s,r,i){s.f^=Ct;for(var o=s.first,a=null;o!==null;){var v=o.f,f=(v&(ls|cr))!==0,l=f&&(v&Ct)!==0,h=l||(v&Ut)!==0||M(this,xs).has(o);if(!h&&o.fn!==null){f?o.f^=Ct:a!==null&&(v&(vn|Gr|Li))!==0?a.b.defer_effect(o):(v&vn)!==0?r.push(o):en(o)&&((v&Es)!==0&&M(this,Qs).add(o),Or(o));var m=o.first;if(m!==null){o=m;continue}}var x=o.parent;for(o=o.next;o===null&&x!==null;)x===a&&(a=null),o=x.next,x=x.parent}},Dn=function(s){for(var r=0;r<s.length;r+=1)Qi(s[r],M(this,Wr),M(this,Qs))},Xi=function(){var o;if(rn.size>1){this.previous.clear();var s=zt,r=!0;for(const a of rn){if(a===this){r=!1;continue}const v=[];for(const[l,h]of this.current){if(a.current.has(l))if(r&&h!==a.current.get(l))a.current.set(l,h);else continue;v.push(l)}if(v.length===0)continue;const f=[...a.current.keys()].filter(l=>!this.current.has(l));if(f.length>0){var i=Dt;Dt=[];const l=new Set,h=new Map;for(const m of v)Zi(m,f,l,h);if(Dt.length>0){Qe=a,a.apply();for(const m of Dt)It(o=a,ws,Bn).call(o,m,[],[]);a.deactivate()}Dt=i}}Qe=null,zt=s}this.committed=!0,rn.delete(this)};let Ns=li;function zo(t){var s=Lr;Lr=!0;try{for(var r;;){if(To(),Dt.length===0&&(Qe==null||Qe.flush(),Dt.length===0))return gn=null,r;Ki()}}finally{Lr=s}}function Ki(){$n=!0;var t=null;try{for(var s=0;Dt.length>0;){var r=Ns.ensure();if(s++>1e3){var i,o;Po()}r.process(Dt),Ls.clear()}}finally{Dt=[],$n=!1,gn=null}}function Po(){try{io()}catch(t){Sr(t,gn)}}let ts=null;function hi(t){var s=t.length;if(s!==0){for(var r=0;r<s;){var i=t[r++];if((i.f&(js|Ut))===0&&en(i)&&(ts=new Set,Or(i),i.deps===null&&i.first===null&&i.nodes===null&&(i.teardown===null&&i.ac===null?ga(i):i.fn=null),(ts==null?void 0:ts.size)>0)){Ls.clear();for(const o of ts){if((o.f&(js|Ut))!==0)continue;const a=[o];let v=o.parent;for(;v!==null;)ts.has(v)&&(ts.delete(v),a.push(v)),v=v.parent;for(let f=a.length-1;f>=0;f--){const l=a[f];(l.f&(js|Ut))===0&&Or(l)}}ts.clear()}}ts=null}}function Zi(t,s,r,i){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const o of t.reactions){const a=o.f;(a&Pt)!==0?Zi(o,s,r,i):(a&(Kn|Es))!==0&&(a&Et)===0&&ea(o,s,i)&&(_t(o,Et),ns(o))}}function ea(t,s,r){const i=r.get(t);if(i!==void 0)return i;if(t.deps!==null)for(const o of t.deps){if(xr.call(s,o))return!0;if((o.f&Pt)!==0&&ea(o,s,r))return r.set(o,!0),!0}return r.set(t,!1),!1}function ns(t){for(var s=gn=t;s.parent!==null;){s=s.parent;var r=s.f;if($n&&s===lt&&(r&Es)!==0&&(r&Ai)===0)return;if((r&(cr|ls))!==0){if((r&Ct)===0)return;s.f^=Ct}}Dt.push(s)}function ta(t,s){if(!((t.f&ls)!==0&&(t.f&Ct)!==0)){(t.f&Et)!==0?s.d.push(t):(t.f&os)!==0&&s.m.push(t),_t(t,Ct);for(var r=t.first;r!==null;)ta(r,s),r=r.next}}function Eo(t){let s=0,r=ar(0),i;return()=>{si()&&(e(r),wn(()=>(s===0&&(i=Hs(()=>t(()=>Ar(r)))),s+=1,()=>{zs(()=>{s-=1,s===0&&(i==null||i(),i=void 0,Ar(r))})})))}}var Mo=Fs|Tr|Qn;function Io(t,s,r){new Ro(t,s,r)}var Vt,Yn,us,Xs,ds,Wt,Bt,fs,ks,Rs,Ks,qs,_r,Zs,yr,br,Ss,fn,Tt,qo,$o,Nn,an,on,Ln;class Ro{constructor(s,r,i){Ge(this,Tt);vs(this,"parent");vs(this,"is_pending",!1);Ge(this,Vt);Ge(this,Yn,null);Ge(this,us);Ge(this,Xs);Ge(this,ds);Ge(this,Wt,null);Ge(this,Bt,null);Ge(this,fs,null);Ge(this,ks,null);Ge(this,Rs,null);Ge(this,Ks,0);Ge(this,qs,0);Ge(this,_r,!1);Ge(this,Zs,!1);Ge(this,yr,new Set);Ge(this,br,new Set);Ge(this,Ss,null);Ge(this,fn,Eo(()=>(Je(this,Ss,ar(M(this,Ks))),()=>{Je(this,Ss,null)})));Je(this,Vt,s),Je(this,us,r),Je(this,Xs,i),this.parent=lt.b,this.is_pending=!!M(this,us).pending,Je(this,ds,Zr(()=>{lt.b=this;{var o=It(this,Tt,Nn).call(this);try{Je(this,Wt,Jt(()=>i(o)))}catch(a){this.error(a)}M(this,qs)>0?It(this,Tt,on).call(this):this.is_pending=!1}return()=>{var a;(a=M(this,Rs))==null||a.remove()}},Mo))}defer_effect(s){Qi(s,M(this,yr),M(this,br))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!M(this,us).pending}update_pending_count(s){It(this,Tt,Ln).call(this,s),Je(this,Ks,M(this,Ks)+s),!(!M(this,Ss)||M(this,_r))&&(Je(this,_r,!0),zs(()=>{Je(this,_r,!1),M(this,Ss)&&Cr(M(this,Ss),M(this,Ks))}))}get_effect_pending(){return M(this,fn).call(this),e(M(this,Ss))}error(s){var r=M(this,us).onerror;let i=M(this,us).failed;if(M(this,Zs)||!r&&!i)throw s;M(this,Wt)&&(At(M(this,Wt)),Je(this,Wt,null)),M(this,Bt)&&(At(M(this,Bt)),Je(this,Bt,null)),M(this,fs)&&(At(M(this,fs)),Je(this,fs,null));var o=!1,a=!1;const v=()=>{if(o){ko();return}o=!0,a&&vo(),Ns.ensure(),Je(this,Ks,0),M(this,fs)!==null&&sr(M(this,fs),()=>{Je(this,fs,null)}),this.is_pending=this.has_pending_snippet(),Je(this,Wt,It(this,Tt,an).call(this,()=>(Je(this,Zs,!1),Jt(()=>M(this,Xs).call(this,M(this,Vt)))))),M(this,qs)>0?It(this,Tt,on).call(this):this.is_pending=!1};zs(()=>{try{a=!0,r==null||r(s,v),a=!1}catch(f){Sr(f,M(this,ds)&&M(this,ds).parent)}i&&Je(this,fs,It(this,Tt,an).call(this,()=>{Ns.ensure(),Je(this,Zs,!0);try{return Jt(()=>{i(M(this,Vt),()=>s,()=>v)})}catch(f){return Sr(f,M(this,ds).parent),null}finally{Je(this,Zs,!1)}}))})}}Vt=new WeakMap,Yn=new WeakMap,us=new WeakMap,Xs=new WeakMap,ds=new WeakMap,Wt=new WeakMap,Bt=new WeakMap,fs=new WeakMap,ks=new WeakMap,Rs=new WeakMap,Ks=new WeakMap,qs=new WeakMap,_r=new WeakMap,Zs=new WeakMap,yr=new WeakMap,br=new WeakMap,Ss=new WeakMap,fn=new WeakMap,Tt=new WeakSet,qo=function(){try{Je(this,Wt,Jt(()=>M(this,Xs).call(this,M(this,Vt))))}catch(s){this.error(s)}},$o=function(){const s=M(this,us).pending;s&&(Je(this,Bt,Jt(()=>s(M(this,Vt)))),zs(()=>{var r=It(this,Tt,Nn).call(this);Je(this,Wt,It(this,Tt,an).call(this,()=>(Ns.ensure(),Jt(()=>M(this,Xs).call(this,r))))),M(this,qs)>0?It(this,Tt,on).call(this):(sr(M(this,Bt),()=>{Je(this,Bt,null)}),this.is_pending=!1)}))},Nn=function(){var s=M(this,Vt);return this.is_pending&&(Je(this,Rs,As()),M(this,Vt).before(M(this,Rs)),s=M(this,Rs)),s},an=function(s){var r=lt,i=Xe,o=yt;ms(M(this,ds)),Qt(M(this,ds)),kr(M(this,ds).ctx);try{return s()}catch(a){return Yi(a),null}finally{ms(r),Qt(i),kr(o)}},on=function(){const s=M(this,us).pending;M(this,Wt)!==null&&(Je(this,ks,document.createDocumentFragment()),M(this,ks).append(M(this,Rs)),_a(M(this,Wt),M(this,ks))),M(this,Bt)===null&&Je(this,Bt,Jt(()=>s(M(this,Vt))))},Ln=function(s){var r;if(!this.has_pending_snippet()){this.parent&&It(r=this.parent,Tt,Ln).call(r,s);return}if(Je(this,qs,M(this,qs)+s),M(this,qs)===0){this.is_pending=!1;for(const i of M(this,yr))_t(i,Et),ns(i);for(const i of M(this,br))_t(i,os),ns(i);M(this,yr).clear(),M(this,br).clear(),M(this,Bt)&&sr(M(this,Bt),()=>{Je(this,Bt,null)}),M(this,ks)&&(M(this,Vt).before(M(this,ks)),Je(this,ks,null))}};function Bo(t,s,r,i){const o=Qr()?Xr:ei;var a=t.filter(d=>!d.settled);if(r.length===0&&a.length===0){i(s.map(o));return}var v=Qe,f=lt,l=Do(),h=a.length===1?a[0].promise:a.length>1?Promise.all(a.map(d=>d.promise)):null;function m(d){l();try{i(d)}catch(p){(f.f&js)===0&&Sr(p,f)}v==null||v.deactivate(),An()}if(r.length===0){h.then(()=>m(s.map(o)));return}function x(){l(),Promise.all(r.map(d=>No(d))).then(d=>m([...s.map(o),...d])).catch(d=>Sr(d,f))}h?h.then(x):x()}function Do(){var t=lt,s=Xe,r=yt,i=Qe;return function(a=!0){ms(t),Qt(s),kr(r),a&&(i==null||i.activate())}}function An(){ms(null),Qt(null),kr(null)}function Xr(t){var s=Pt|Et,r=Xe!==null&&(Xe.f&Pt)!==0?Xe:null;return lt!==null&&(lt.f|=Tr),{ctx:yt,deps:null,effects:null,equals:Hi,f:s,fn:t,reactions:null,rv:0,v:jt,wv:0,parent:r??lt,ac:null}}function No(t,s,r){let i=lt;i===null&&eo();var o=i.b,a=void 0,v=ar(jt),f=!Xe,l=new Map;return Yo(()=>{var p;var h=Ni();a=h.promise;try{Promise.resolve(t()).then(h.resolve,h.reject).then(()=>{m===Qe&&m.committed&&m.deactivate(),An()})}catch(w){h.reject(w),An()}var m=Qe;if(f){var x=o.is_rendered();o.update_pending_count(1),m.increment(x),(p=l.get(m))==null||p.reject(fr),l.delete(m),l.set(m,h)}const d=(w,T=void 0)=>{if(m.activate(),T)T!==fr&&(v.f|=Ds,Cr(v,T));else{(v.f&Ds)!==0&&(v.f^=Ds),Cr(v,w);for(const[_,y]of l){if(l.delete(_),_===m)break;y.reject(fr)}}f&&(o.update_pending_count(-1),m.decrement(x))};h.promise.then(d,w=>d(null,w||"unknown"))}),ri(()=>{for(const h of l.values())h.reject(fr)}),new Promise(h=>{function m(x){function d(){x===a?h(v):m(a)}x.then(d,d)}m(a)})}function be(t){const s=Xr(t);return ya(s),s}function ei(t){const s=Xr(t);return s.equals=Wi,s}function sa(t){var s=t.effects;if(s!==null){t.effects=null;for(var r=0;r<s.length;r+=1)At(s[r])}}function Lo(t){for(var s=t.parent;s!==null;){if((s.f&Pt)===0)return(s.f&js)===0?s:null;s=s.parent}return null}function ti(t){var s,r=lt;ms(Lo(t));try{t.f&=~ir,sa(t),s=Sa(t)}finally{ms(r)}return s}function ra(t){var s=ti(t);if(!t.equals(s)&&(t.wv=xa(),(!(Qe!=null&&Qe.is_fork)||t.deps===null)&&(t.v=s,t.deps===null))){_t(t,Ct);return}Us||(zt!==null?(si()||Qe!=null&&Qe.is_fork)&&zt.set(t,s):Zn(t))}let On=new Set;const Ls=new Map;let na=!1;function ar(t,s){var r={f:0,v:t,reactions:null,equals:Hi,rv:0,wv:0};return r}function E(t,s){const r=ar(t);return ya(r),r}function ia(t,s=!1,r=!0){var o;const i=ar(t);return s||(i.equals=Wi),jr&&r&&yt!==null&&yt.l!==null&&((o=yt.l).s??(o.s=[])).push(i),i}function n(t,s,r=!1){Xe!==null&&(!is||(Xe.f&pi)!==0)&&Qr()&&(Xe.f&(Pt|Es|Kn|pi))!==0&&(Gt===null||!xr.call(Gt,t))&&co();let i=r?$s(s):s;return Cr(t,i)}function Cr(t,s){if(!t.equals(s)){var r=t.v;Us?Ls.set(t,s):Ls.set(t,r),t.v=s;var i=Ns.ensure();if(i.capture(t,r),(t.f&Pt)!==0){const o=t;(t.f&Et)!==0&&ti(o),Zn(o)}t.wv=xa(),aa(t,Et),Qr()&&lt!==null&&(lt.f&Ct)!==0&&(lt.f&(ls|cr))===0&&(Ht===null?Xo([t]):Ht.push(t)),!i.is_fork&&On.size>0&&!na&&Ao()}return s}function Ao(){na=!1;for(const t of On)(t.f&Ct)!==0&&_t(t,os),en(t)&&Or(t);On.clear()}function Ar(t){n(t,t.v+1)}function aa(t,s){var r=t.reactions;if(r!==null)for(var i=Qr(),o=r.length,a=0;a<o;a++){var v=r[a],f=v.f;if(!(!i&&v===lt)){var l=(f&Et)===0;if(l&&_t(v,s),(f&Pt)!==0){var h=v;zt==null||zt.delete(h),(f&ir)===0&&(f&Yt&&(v.f|=ir),aa(h,os))}else l&&((f&Es)!==0&&ts!==null&&ts.add(v),ns(v))}}}function $s(t){if(typeof t!="object"||t===null||tr in t)return t;const s=Gn(t);if(s!==Ya&&s!==Ga)return t;var r=new Map,i=$i(t),o=E(0),a=rr,v=f=>{if(rr===a)return f();var l=Xe,h=rr;Qt(null),_i(a);var m=f();return Qt(l),_i(h),m};return i&&r.set("length",E(t.length)),new Proxy(t,{defineProperty(f,l,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&oo();var m=r.get(l);return m===void 0?m=v(()=>{var x=E(h.value);return r.set(l,x),x}):n(m,h.value,!0),!0},deleteProperty(f,l){var h=r.get(l);if(h===void 0){if(l in f){const m=v(()=>E(jt));r.set(l,m),Ar(o)}}else n(h,jt),Ar(o);return!0},get(f,l,h){var p;if(l===tr)return t;var m=r.get(l),x=l in f;if(m===void 0&&(!x||(p=pr(f,l))!=null&&p.writable)&&(m=v(()=>{var w=$s(x?f[l]:jt),T=E(w);return T}),r.set(l,m)),m!==void 0){var d=e(m);return d===jt?void 0:d}return Reflect.get(f,l,h)},getOwnPropertyDescriptor(f,l){var h=Reflect.getOwnPropertyDescriptor(f,l);if(h&&"value"in h){var m=r.get(l);m&&(h.value=e(m))}else if(h===void 0){var x=r.get(l),d=x==null?void 0:x.v;if(x!==void 0&&d!==jt)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return h},has(f,l){var d;if(l===tr)return!0;var h=r.get(l),m=h!==void 0&&h.v!==jt||Reflect.has(f,l);if(h!==void 0||lt!==null&&(!m||(d=pr(f,l))!=null&&d.writable)){h===void 0&&(h=v(()=>{var p=m?$s(f[l]):jt,w=E(p);return w}),r.set(l,h));var x=e(h);if(x===jt)return!1}return m},set(f,l,h,m){var I;var x=r.get(l),d=l in f;if(i&&l==="length")for(var p=h;p<x.v;p+=1){var w=r.get(p+"");w!==void 0?n(w,jt):p in f&&(w=v(()=>E(jt)),r.set(p+"",w))}if(x===void 0)(!d||(I=pr(f,l))!=null&&I.writable)&&(x=v(()=>E(void 0)),n(x,$s(h)),r.set(l,x));else{d=x.v!==jt;var T=v(()=>$s(h));n(x,T)}var _=Reflect.getOwnPropertyDescriptor(f,l);if(_!=null&&_.set&&_.set.call(m,h),!d){if(i&&typeof l=="string"){var y=r.get("length"),C=Number(l);Number.isInteger(C)&&C>=y.v&&n(y,C+1)}Ar(o)}return!0},ownKeys(f){e(o);var l=Reflect.ownKeys(f).filter(x=>{var d=r.get(x);return d===void 0||d.v!==jt});for(var[h,m]of r)m.v!==jt&&!(h in f)&&l.push(h);return l},setPrototypeOf(){lo()}})}var gi,zr,oa,la,ca;function Oo(){if(gi===void 0){gi=window,zr=document,oa=/Firefox/.test(navigator.userAgent);var t=Element.prototype,s=Node.prototype,r=Text.prototype;la=pr(s,"firstChild").get,ca=pr(s,"nextSibling").get,fi(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),fi(r)&&(r.__t=void 0)}}function As(t=""){return document.createTextNode(t)}function Cs(t){return la.call(t)}function Kr(t){return ca.call(t)}function c(t,s){return Cs(t)}function he(t,s=!1){{var r=Cs(t);return r instanceof Comment&&r.data===""?Kr(r):r}}function u(t,s=1,r=!1){let i=t;for(;s--;)i=Kr(i);return i}function Fo(t){t.textContent=""}function va(){return!1}let mi=!1;function Uo(){mi||(mi=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var s;if(!t.defaultPrevented)for(const r of t.target.elements)(s=r.__on_r)==null||s.call(r)})},{capture:!0}))}function mn(t){var s=Xe,r=lt;Qt(null),ms(null);try{return t()}finally{Qt(s),ms(r)}}function ua(t,s,r,i=r){t.addEventListener(s,()=>mn(r));const o=t.__on_r;o?t.__on_r=()=>{o(),i(!0)}:t.__on_r=()=>i(!0),Uo()}function da(t){lt===null&&(Xe===null&&no(),ro()),Us&&so()}function Ho(t,s){var r=s.last;r===null?s.last=s.first=t:(r.next=t,t.prev=r,s.last=t)}function _s(t,s,r){var i=lt;i!==null&&(i.f&Ut)!==0&&(t|=Ut);var o={ctx:yt,deps:null,nodes:null,f:t|Et|Yt,first:null,fn:s,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{Or(o),o.f|=Xn}catch(f){throw At(o),f}else s!==null&&ns(o);var a=o;if(r&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&Tr)===0&&(a=a.first,(t&Es)!==0&&(t&Fs)!==0&&a!==null&&(a.f|=Fs)),a!==null&&(a.parent=i,i!==null&&Ho(a,i),Xe!==null&&(Xe.f&Pt)!==0&&(t&cr)===0)){var v=Xe;(v.effects??(v.effects=[])).push(a)}return o}function si(){return Xe!==null&&!is}function ri(t){const s=_s(Gr,null,!1);return _t(s,Ct),s.teardown=t,s}function Ps(t){da();var s=lt.f,r=!Xe&&(s&ls)!==0&&(s&Xn)===0;if(r){var i=yt;(i.e??(i.e=[])).push(t)}else return fa(t)}function fa(t){return _s(vn|Oi,t,!1)}function Vo(t){return da(),_s(Gr|Oi,t,!0)}function Wo(t){Ns.ensure();const s=_s(cr|Tr,t,!0);return(r={})=>new Promise(i=>{r.outro?sr(s,()=>{At(s),i(void 0)}):(At(s),i(void 0))})}function Jo(t){return _s(vn,t,!1)}function Yo(t){return _s(Kn|Tr,t,!0)}function wn(t,s=0){return _s(Gr|s,t,!0)}function Q(t,s=[],r=[],i=[]){Bo(i,s,r,o=>{_s(Gr,()=>t(...o.map(e)),!0)})}function Zr(t,s=0){var r=_s(Es|s,t,!0);return r}function Jt(t){return _s(ls|Tr,t,!0)}function pa(t){var s=t.teardown;if(s!==null){const r=Us,i=Xe;wi(!0),Qt(null);try{s.call(null)}finally{wi(r),Qt(i)}}}function ha(t,s=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const o=r.ac;o!==null&&mn(()=>{o.abort(fr)});var i=r.next;(r.f&cr)!==0?r.parent=null:At(r,s),r=i}}function Go(t){for(var s=t.first;s!==null;){var r=s.next;(s.f&ls)===0&&At(s),s=r}}function At(t,s=!0){var r=!1;(s||(t.f&Ai)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Qo(t.nodes.start,t.nodes.end),r=!0),ha(t,s&&!r),un(t,0),_t(t,js);var i=t.nodes&&t.nodes.t;if(i!==null)for(const a of i)a.stop();pa(t);var o=t.parent;o!==null&&o.first!==null&&ga(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Qo(t,s){for(;t!==null;){var r=t===s?null:Kr(t);t.remove(),t=r}}function ga(t){var s=t.parent,r=t.prev,i=t.next;r!==null&&(r.next=i),i!==null&&(i.prev=r),s!==null&&(s.first===t&&(s.first=i),s.last===t&&(s.last=r))}function sr(t,s,r=!0){var i=[];ma(t,i,!0);var o=()=>{r&&At(t),s&&s()},a=i.length;if(a>0){var v=()=>--a||o();for(var f of i)f.out(v)}else o()}function ma(t,s,r){if((t.f&Ut)===0){t.f^=Ut;var i=t.nodes&&t.nodes.t;if(i!==null)for(const f of i)(f.is_global||r)&&s.push(f);for(var o=t.first;o!==null;){var a=o.next,v=(o.f&Fs)!==0||(o.f&ls)!==0&&(t.f&Es)!==0;ma(o,s,v?r:!1),o=a}}}function ni(t){wa(t,!0)}function wa(t,s){if((t.f&Ut)!==0){t.f^=Ut,(t.f&Ct)===0&&(_t(t,Et),ns(t));for(var r=t.first;r!==null;){var i=r.next,o=(r.f&Fs)!==0||(r.f&ls)!==0;wa(r,o?s:!1),r=i}var a=t.nodes&&t.nodes.t;if(a!==null)for(const v of a)(v.is_global||s)&&v.in()}}function _a(t,s){if(t.nodes)for(var r=t.nodes.start,i=t.nodes.end;r!==null;){var o=r===i?null:Kr(r);s.append(r),r=o}}let ln=!1,Us=!1;function wi(t){Us=t}let Xe=null,is=!1;function Qt(t){Xe=t}let lt=null;function ms(t){lt=t}let Gt=null;function ya(t){Xe!==null&&(Gt===null?Gt=[t]:Gt.push(t))}let Nt=null,Ot=0,Ht=null;function Xo(t){Ht=t}let ba=1,Ys=0,rr=Ys;function _i(t){rr=t}function xa(){return++ba}function en(t){var s=t.f;if((s&Et)!==0)return!0;if(s&Pt&&(t.f&=~ir),(s&os)!==0){for(var r=t.deps,i=r.length,o=0;o<i;o++){var a=r[o];if(en(a)&&ra(a),a.wv>t.wv)return!0}(s&Yt)!==0&&zt===null&&_t(t,Ct)}return!1}function ka(t,s,r=!0){var i=t.reactions;if(i!==null&&!(Gt!==null&&xr.call(Gt,t)))for(var o=0;o<i.length;o++){var a=i[o];(a.f&Pt)!==0?ka(a,s,!1):s===a&&(r?_t(a,Et):(a.f&Ct)!==0&&_t(a,os),ns(a))}}function Sa(t){var T;var s=Nt,r=Ot,i=Ht,o=Xe,a=Gt,v=yt,f=is,l=rr,h=t.f;Nt=null,Ot=0,Ht=null,Xe=(h&(ls|cr))===0?t:null,Gt=null,kr(t.ctx),is=!1,rr=++Ys,t.ac!==null&&(mn(()=>{t.ac.abort(fr)}),t.ac=null);try{t.f|=Rn;var m=t.fn,x=m(),d=t.deps,p=Qe==null?void 0:Qe.is_fork;if(Nt!==null){var w;if(p||un(t,Ot),d!==null&&Ot>0)for(d.length=Ot+Nt.length,w=0;w<Nt.length;w++)d[Ot+w]=Nt[w];else t.deps=d=Nt;if(si()&&(t.f&Yt)!==0)for(w=Ot;w<d.length;w++)((T=d[w]).reactions??(T.reactions=[])).push(t)}else!p&&d!==null&&Ot<d.length&&(un(t,Ot),d.length=Ot);if(Qr()&&Ht!==null&&!is&&d!==null&&(t.f&(Pt|os|Et))===0)for(w=0;w<Ht.length;w++)ka(Ht[w],t);if(o!==null&&o!==t){if(Ys++,o.deps!==null)for(let _=0;_<r;_+=1)o.deps[_].rv=Ys;if(s!==null)for(const _ of s)_.rv=Ys;Ht!==null&&(i===null?i=Ht:i.push(...Ht))}return(t.f&Ds)!==0&&(t.f^=Ds),x}catch(_){return Yi(_)}finally{t.f^=Rn,Nt=s,Ot=r,Ht=i,Xe=o,Gt=a,kr(v),is=f,rr=l}}function Ko(t,s){let r=s.reactions;if(r!==null){var i=Ja.call(r,t);if(i!==-1){var o=r.length-1;o===0?r=s.reactions=null:(r[i]=r[o],r.pop())}}if(r===null&&(s.f&Pt)!==0&&(Nt===null||!xr.call(Nt,s))){var a=s;(a.f&Yt)!==0&&(a.f^=Yt,a.f&=~ir),Zn(a),sa(a),un(a,0)}}function un(t,s){var r=t.deps;if(r!==null)for(var i=s;i<r.length;i++)Ko(t,r[i])}function Or(t){var s=t.f;if((s&js)===0){_t(t,Ct);var r=lt,i=ln;lt=t,ln=!0;try{(s&(Es|Li))!==0?Go(t):ha(t),pa(t);var o=Sa(t);t.teardown=typeof o=="function"?o:null,t.wv=ba;var a;In&&So&&(t.f&Et)!==0&&t.deps}finally{ln=i,lt=r}}}async function Zo(){await Promise.resolve(),zo()}function e(t){var s=t.f,r=(s&Pt)!==0;if(Xe!==null&&!is){var i=lt!==null&&(lt.f&js)!==0;if(!i&&(Gt===null||!xr.call(Gt,t))){var o=Xe.deps;if((Xe.f&Rn)!==0)t.rv<Ys&&(t.rv=Ys,Nt===null&&o!==null&&o[Ot]===t?Ot++:Nt===null?Nt=[t]:Nt.push(t));else{(Xe.deps??(Xe.deps=[])).push(t);var a=t.reactions;a===null?t.reactions=[Xe]:xr.call(a,Xe)||a.push(Xe)}}}if(Us&&Ls.has(t))return Ls.get(t);if(r){var v=t;if(Us){var f=v.v;return((v.f&Ct)===0&&v.reactions!==null||Ta(v))&&(f=ti(v)),Ls.set(v,f),f}var l=(v.f&Yt)===0&&!is&&Xe!==null&&(ln||(Xe.f&Yt)!==0),h=v.deps===null;en(v)&&(l&&(v.f|=Yt),ra(v)),l&&!h&&Ca(v)}if(zt!=null&&zt.has(t))return zt.get(t);if((t.f&Ds)!==0)throw t.v;return t.v}function Ca(t){if(t.deps!==null){t.f|=Yt;for(const s of t.deps)(s.reactions??(s.reactions=[])).push(t),(s.f&Pt)!==0&&(s.f&Yt)===0&&Ca(s)}}function Ta(t){if(t.v===jt)return!0;if(t.deps===null)return!1;for(const s of t.deps)if(Ls.has(s)||(s.f&Pt)!==0&&Ta(s))return!0;return!1}function Hs(t){var s=is;try{return is=!0,t()}finally{is=s}}function el(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(tr in t)Fn(t);else if(!Array.isArray(t))for(let s in t){const r=t[s];typeof r=="object"&&r&&tr in r&&Fn(r)}}}function Fn(t,s=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!s.has(t)){s.add(t),t instanceof Date&&t.getTime();for(let i in t)try{Fn(t[i],s)}catch{}const r=Gn(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const i=Di(r);for(let o in i){const a=i[o].get;if(a)try{a.call(t)}catch{}}}}}const tl=["touchstart","touchmove"];function sl(t){return tl.includes(t)}const ja=new Set,Un=new Set;function rl(t,s,r,i={}){function o(a){if(i.capture||Dr.call(s,a),!a.cancelBubble)return mn(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?zs(()=>{s.addEventListener(t,o,i)}):s.addEventListener(t,o,i),o}function ht(t,s,r,i,o){var a={capture:i,passive:o},v=rl(t,s,r,a);(s===document.body||s===window||s===document||s instanceof HTMLMediaElement)&&ri(()=>{s.removeEventListener(t,v,a)})}function Mt(t){for(var s=0;s<t.length;s++)ja.add(t[s]);for(var r of Un)r(t)}let yi=null;function Dr(t){var _;var s=this,r=s.ownerDocument,i=t.type,o=((_=t.composedPath)==null?void 0:_.call(t))||[],a=o[0]||t.target;yi=t;var v=0,f=yi===t&&t.__root;if(f){var l=o.indexOf(f);if(l!==-1&&(s===document||s===window)){t.__root=s;return}var h=o.indexOf(s);if(h===-1)return;l<=h&&(v=l)}if(a=o[v]||t.target,a!==s){Bi(t,"currentTarget",{configurable:!0,get(){return a||r}});var m=Xe,x=lt;Qt(null),ms(null);try{for(var d,p=[];a!==null;){var w=a.assignedSlot||a.parentNode||a.host||null;try{var T=a["__"+i];T!=null&&(!a.disabled||t.target===a)&&T.call(a,t)}catch(y){d?p.push(y):d=y}if(t.cancelBubble||w===s||w===null)break;a=w}if(d){for(let y of p)queueMicrotask(()=>{throw y});throw d}}finally{t.__root=s,delete t.currentTarget,Qt(m),ms(x)}}}function za(t){var s=document.createElement("template");return s.innerHTML=t.replaceAll("<!>","<!---->"),s.content}function Fr(t,s){var r=lt;r.nodes===null&&(r.nodes={start:t,end:s,a:null,t:null})}function P(t,s){var r=(s&Ui)!==0,i=(s&bo)!==0,o,a=!t.startsWith("<!>");return()=>{o===void 0&&(o=za(a?t:"<!>"+t),r||(o=Cs(o)));var v=i||oa?document.importNode(o,!0):o.cloneNode(!0);if(r){var f=Cs(v),l=v.lastChild;Fr(f,l)}else Fr(v,v);return v}}function nl(t,s,r="svg"){var i=!t.startsWith("<!>"),o=(s&Ui)!==0,a=`<${r}>${i?t:"<!>"+t}</${r}>`,v;return()=>{if(!v){var f=za(a),l=Cs(f);if(o)for(v=document.createDocumentFragment();Cs(l);)v.appendChild(Cs(l));else v=Cs(l)}var h=v.cloneNode(!0);if(o){var m=Cs(h),x=h.lastChild;Fr(m,x)}else Fr(h,h);return h}}function Ue(t,s){return nl(t,s,"svg")}function Oe(){var t=document.createDocumentFragment(),s=document.createComment(""),r=As();return t.append(s,r),Fr(s,r),t}function g(t,s){t!==null&&t.before(s)}function L(t,s){var r=s==null?"":typeof s=="object"?s+"":s;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function il(t,s){return al(t,s)}const ur=new Map;function al(t,{target:s,anchor:r,props:i={},events:o,context:a,intro:v=!0}){Oo();var f=new Set,l=x=>{for(var d=0;d<x.length;d++){var p=x[d];if(!f.has(p)){f.add(p);var w=sl(p);s.addEventListener(p,Dr,{passive:w});var T=ur.get(p);T===void 0?(document.addEventListener(p,Dr,{passive:w}),ur.set(p,1)):ur.set(p,T+1)}}};l(hn(ja)),Un.add(l);var h=void 0,m=Wo(()=>{var x=r??s.appendChild(As());return Io(x,{pending:()=>{}},d=>{xt({});var p=yt;a&&(p.c=a),o&&(i.$$events=o),h=t(d,i)||{},kt()}),()=>{var w;for(var d of f){s.removeEventListener(d,Dr);var p=ur.get(d);--p===0?(document.removeEventListener(d,Dr),ur.delete(d)):ur.set(d,p)}Un.delete(l),x!==r&&((w=x.parentNode)==null||w.removeChild(x))}});return ol.set(h,m),h}let ol=new WeakMap;var ss,ps,Ft,er,Jr,Yr,pn;class ii{constructor(s,r=!0){vs(this,"anchor");Ge(this,ss,new Map);Ge(this,ps,new Map);Ge(this,Ft,new Map);Ge(this,er,new Set);Ge(this,Jr,!0);Ge(this,Yr,()=>{var s=Qe;if(M(this,ss).has(s)){var r=M(this,ss).get(s),i=M(this,ps).get(r);if(i)ni(i),M(this,er).delete(r);else{var o=M(this,Ft).get(r);o&&(M(this,ps).set(r,o.effect),M(this,Ft).delete(r),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),i=o.effect)}for(const[a,v]of M(this,ss)){if(M(this,ss).delete(a),a===s)break;const f=M(this,Ft).get(v);f&&(At(f.effect),M(this,Ft).delete(v))}for(const[a,v]of M(this,ps)){if(a===r||M(this,er).has(a))continue;const f=()=>{if(Array.from(M(this,ss).values()).includes(a)){var h=document.createDocumentFragment();_a(v,h),h.append(As()),M(this,Ft).set(a,{effect:v,fragment:h})}else At(v);M(this,er).delete(a),M(this,ps).delete(a)};M(this,Jr)||!i?(M(this,er).add(a),sr(v,f,!1)):f()}}});Ge(this,pn,s=>{M(this,ss).delete(s);const r=Array.from(M(this,ss).values());for(const[i,o]of M(this,Ft))r.includes(i)||(At(o.effect),M(this,Ft).delete(i))});this.anchor=s,Je(this,Jr,r)}ensure(s,r){var i=Qe,o=va();if(r&&!M(this,ps).has(s)&&!M(this,Ft).has(s))if(o){var a=document.createDocumentFragment(),v=As();a.append(v),M(this,Ft).set(s,{effect:Jt(()=>r(v)),fragment:a})}else M(this,ps).set(s,Jt(()=>r(this.anchor)));if(M(this,ss).set(i,s),o){for(const[f,l]of M(this,ps))f===s?i.unskip_effect(l):i.skip_effect(l);for(const[f,l]of M(this,Ft))f===s?i.unskip_effect(l.effect):i.skip_effect(l.effect);i.oncommit(M(this,Yr)),i.ondiscard(M(this,pn))}else M(this,Yr).call(this)}}ss=new WeakMap,ps=new WeakMap,Ft=new WeakMap,er=new WeakMap,Jr=new WeakMap,Yr=new WeakMap,pn=new WeakMap;function B(t,s,r=!1){var i=new ii(t),o=r?Fs:0;function a(v,f){i.ensure(v,f)}Zr(()=>{var v=!1;s((f,l=!0)=>{v=!0,a(l,f)}),v||a(!1,null)},o)}function ct(t,s){return s}function ll(t,s,r){for(var i=[],o=s.length,a,v=s.length,f=0;f<o;f++){let x=s[f];sr(x,()=>{if(a){if(a.pending.delete(x),a.done.add(x),a.pending.size===0){var d=t.outrogroups;Hn(hn(a.done)),d.delete(a),d.size===0&&(t.outrogroups=null)}}else v-=1},!1)}if(v===0){var l=i.length===0&&r!==null;if(l){var h=r,m=h.parentNode;Fo(m),m.append(h),t.items.clear()}Hn(s,!l)}else a={pending:new Set(s),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(a)}function Hn(t,s=!0){for(var r=0;r<t.length;r++)At(t[r],s)}var bi;function at(t,s,r,i,o,a=null){var v=t,f=new Map,l=(s&Fi)!==0;if(l){var h=t;v=h.appendChild(As())}var m=null,x=ei(()=>{var y=r();return $i(y)?y:y==null?[]:hn(y)}),d,p=!0;function w(){_.fallback=m,cl(_,d,v,s,i),m!==null&&(d.length===0?(m.f&Ts)===0?ni(m):(m.f^=Ts,Nr(m,null,v)):sr(m,()=>{m=null}))}var T=Zr(()=>{d=e(x);for(var y=d.length,C=new Set,I=Qe,F=va(),Y=0;Y<y;Y+=1){var ce=d[Y],xe=i(ce,Y),Ce=p?null:f.get(xe);Ce?(Ce.v&&Cr(Ce.v,ce),Ce.i&&Cr(Ce.i,Y),F&&I.unskip_effect(Ce.e)):(Ce=vl(f,p?v:bi??(bi=As()),ce,xe,Y,o,s,r),p||(Ce.e.f|=Ts),f.set(xe,Ce)),C.add(xe)}if(y===0&&a&&!m&&(p?m=Jt(()=>a(v)):(m=Jt(()=>a(bi??(bi=As()))),m.f|=Ts)),y>C.size&&to(),!p)if(F){for(const[Pe,K]of f)C.has(Pe)||I.skip_effect(K.e);I.oncommit(w),I.ondiscard(()=>{})}else w();e(x)}),_={effect:T,items:f,outrogroups:null,fallback:m};p=!1}function Br(t){for(;t!==null&&(t.f&ls)===0;)t=t.next;return t}function cl(t,s,r,i,o){var K,Ee,We,ge,ke,Ne,ue,j,q;var a=(i&po)!==0,v=s.length,f=t.items,l=Br(t.effect.first),h,m=null,x,d=[],p=[],w,T,_,y;if(a)for(y=0;y<v;y+=1)w=s[y],T=o(w,y),_=f.get(T).e,(_.f&Ts)===0&&((Ee=(K=_.nodes)==null?void 0:K.a)==null||Ee.measure(),(x??(x=new Set)).add(_));for(y=0;y<v;y+=1){if(w=s[y],T=o(w,y),_=f.get(T).e,t.outrogroups!==null)for(const Z of t.outrogroups)Z.pending.delete(_),Z.done.delete(_);if((_.f&Ts)!==0)if(_.f^=Ts,_===l)Nr(_,null,r);else{var C=m?m.next:l;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Is(t,m,_),Is(t,_,C),Nr(_,C,r),m=_,d=[],p=[],l=Br(m.next);continue}if((_.f&Ut)!==0&&(ni(_),a&&((ge=(We=_.nodes)==null?void 0:We.a)==null||ge.unfix(),(x??(x=new Set)).delete(_))),_!==l){if(h!==void 0&&h.has(_)){if(d.length<p.length){var I=p[0],F;m=I.prev;var Y=d[0],ce=d[d.length-1];for(F=0;F<d.length;F+=1)Nr(d[F],I,r);for(F=0;F<p.length;F+=1)h.delete(p[F]);Is(t,Y.prev,ce.next),Is(t,m,Y),Is(t,ce,I),l=I,m=ce,y-=1,d=[],p=[]}else h.delete(_),Nr(_,l,r),Is(t,_.prev,_.next),Is(t,_,m===null?t.effect.first:m.next),Is(t,m,_),m=_;continue}for(d=[],p=[];l!==null&&l!==_;)(h??(h=new Set)).add(l),p.push(l),l=Br(l.next);if(l===null)continue}(_.f&Ts)===0&&d.push(_),m=_,l=Br(_.next)}if(t.outrogroups!==null){for(const Z of t.outrogroups)Z.pending.size===0&&(Hn(hn(Z.done)),(ke=t.outrogroups)==null||ke.delete(Z));t.outrogroups.size===0&&(t.outrogroups=null)}if(l!==null||h!==void 0){var xe=[];if(h!==void 0)for(_ of h)(_.f&Ut)===0&&xe.push(_);for(;l!==null;)(l.f&Ut)===0&&l!==t.fallback&&xe.push(l),l=Br(l.next);var Ce=xe.length;if(Ce>0){var Pe=(i&Fi)!==0&&v===0?r:null;if(a){for(y=0;y<Ce;y+=1)(ue=(Ne=xe[y].nodes)==null?void 0:Ne.a)==null||ue.measure();for(y=0;y<Ce;y+=1)(q=(j=xe[y].nodes)==null?void 0:j.a)==null||q.fix()}ll(t,xe,Pe)}}a&&zs(()=>{var Z,oe;if(x!==void 0)for(_ of x)(oe=(Z=_.nodes)==null?void 0:Z.a)==null||oe.apply()})}function vl(t,s,r,i,o,a,v,f){var l=(v&uo)!==0?(v&ho)===0?ia(r,!1,!1):ar(r):null,h=(v&fo)!==0?ar(o):null;return{v:l,i:h,e:Jt(()=>(a(s,l??r,h??o,f),()=>{t.delete(i)}))}}function Nr(t,s,r){if(t.nodes)for(var i=t.nodes.start,o=t.nodes.end,a=s&&(s.f&Ts)===0?s.nodes.start:r;i!==null;){var v=Kr(i);if(a.before(i),i===o)return;i=v}}function Is(t,s,r){s===null?t.effect.first=r:s.next=r,r===null?t.effect.last=s:r.prev=s}function Pa(t,s,...r){var i=new ii(t);Zr(()=>{const o=s()??null;i.ensure(o,o&&(a=>o(a,...r)))},Fs)}function ul(t,s,r){var i=new ii(t);Zr(()=>{var o=s()??null;i.ensure(o,o&&(a=>r(a,o)))},Fs)}const xi=[...` 	
\r\fÂ \v\uFEFF`];function dl(t,s,r){var i=t==null?"":""+t;if(s&&(i=i?i+" "+s:s),r){for(var o in r)if(r[o])i=i?i+" "+o:o;else if(i.length)for(var a=o.length,v=0;(v=i.indexOf(o,v))>=0;){var f=v+a;(v===0||xi.includes(i[v-1]))&&(f===i.length||xi.includes(i[f]))?i=(v===0?"":i.substring(0,v))+i.substring(f+1):v=f}}return i===""?null:i}function fl(t,s){return t==null?null:String(t)}function ye(t,s,r,i,o,a){var v=t.__className;if(v!==r||v===void 0){var f=dl(r,i,a);f==null?t.removeAttribute("class"):s?t.className=f:t.setAttribute("class",f),t.__className=r}else if(a&&o!==a)for(var l in a){var h=!!a[l];(o==null||h!==!!o[l])&&t.classList.toggle(l,h)}return a}function wt(t,s,r,i){var o=t.__style;if(o!==s){var a=fl(s);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=s}return i}const pl=Symbol("is custom element"),hl=Symbol("is html");function dn(t,s){var r=Ea(t);r.value===(r.value=s??void 0)||t.value===s&&(s!==0||t.nodeName!=="PROGRESS")||(t.value=s??"")}function bt(t,s,r,i){var o=Ea(t);o[s]!==(o[s]=r)&&(s==="loading"&&(t[Ka]=r),r==null?t.removeAttribute(s):typeof r!="string"&&gl(t).includes(s)?t[s]=r:t.setAttribute(s,r))}function Ea(t){return t.__attributes??(t.__attributes={[pl]:t.nodeName.includes("-"),[hl]:t.namespaceURI===xo})}var ki=new Map;function gl(t){var s=t.getAttribute("is")||t.nodeName,r=ki.get(s);if(r)return r;ki.set(s,r=[]);for(var i,o=t,a=Element.prototype;a!==o;){i=Di(o);for(var v in i)i[v].set&&r.push(v);o=Gn(o)}return r}function rs(t,s,r=s){var i=new WeakSet;ua(t,"input",async o=>{var a=o?t.defaultValue:t.value;if(a=jn(t)?zn(a):a,r(a),Qe!==null&&i.add(Qe),await Zo(),a!==(a=s())){var v=t.selectionStart,f=t.selectionEnd,l=t.value.length;if(t.value=a??"",f!==null){var h=t.value.length;v===f&&f===l&&h>l?(t.selectionStart=h,t.selectionEnd=h):(t.selectionStart=v,t.selectionEnd=Math.min(f,h))}}}),Hs(s)==null&&t.value&&(r(jn(t)?zn(t.value):t.value),Qe!==null&&i.add(Qe)),wn(()=>{var o=s();if(t===document.activeElement){var a=qn??Qe;if(i.has(a))return}jn(t)&&o===zn(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Vn(t,s,r=s){ua(t,"change",i=>{var o=i?t.defaultChecked:t.checked;r(o)}),Hs(s)==null&&r(t.checked),wn(()=>{var i=s();t.checked=!!i})}function jn(t){var s=t.type;return s==="number"||s==="range"}function zn(t){return t===""?null:+t}function Si(t,s){return t===s||(t==null?void 0:t[tr])===s}function as(t={},s,r,i){return Jo(()=>{var o,a;return wn(()=>{o=a,a=[],Hs(()=>{t!==r(...a)&&(s(t,...a),o&&Si(r(...o),t)&&s(null,...o))})}),()=>{zs(()=>{a&&Si(r(...a),t)&&s(null,...a)})}}),t}function Ma(t=!1){const s=yt,r=s.l.u;if(!r)return;let i=()=>el(s.s);if(t){let o=0,a={};const v=Xr(()=>{let f=!1;const l=s.s;for(const h in l)l[h]!==a[h]&&(a[h]=l[h],f=!0);return f&&o++,o});i=()=>e(v)}r.b.length&&Vo(()=>{Ci(s,i),cn(r.b)}),Ps(()=>{const o=Hs(()=>r.m.map(Qa));return()=>{for(const a of o)typeof a=="function"&&a()}}),r.a.length&&Ps(()=>{Ci(s,i),cn(r.a)})}function Ci(t,s){if(t.l.s)for(const r of t.l.s)e(r);s()}function ai(t,s,r){if(t==null)return s(void 0),r&&r(void 0),Bs;const i=Hs(()=>t.subscribe(s,r));return i.unsubscribe?()=>i.unsubscribe():i}const dr=[];function ml(t,s){return{subscribe:Pr(t,s).subscribe}}function Pr(t,s=Bs){let r=null;const i=new Set;function o(f){if(Vi(t,f)&&(t=f,r)){const l=!dr.length;for(const h of i)h[1](),dr.push(h,t);if(l){for(let h=0;h<dr.length;h+=2)dr[h][0](dr[h+1]);dr.length=0}}}function a(f){o(f(t))}function v(f,l=Bs){const h=[f,l];return i.add(h),i.size===1&&(r=s(o,a)||Bs),f(t),()=>{i.delete(h),i.size===0&&r&&(r(),r=null)}}return{set:o,update:a,subscribe:v}}function oi(t,s,r){const i=!Array.isArray(t),o=i?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=s.length<2;return ml(r,(v,f)=>{let l=!1;const h=[];let m=0,x=Bs;const d=()=>{if(m)return;x();const w=s(i?h[0]:h,v,f);a?v(w):x=typeof w=="function"?w:Bs},p=o.map((w,T)=>ai(w,_=>{h[T]=_,m&=~(1<<T),l&&d()},()=>{m|=1<<T}));return l=!0,d(),function(){cn(p),x(),l=!1}})}function gs(t){let s;return ai(t,r=>s=r)(),s}let nn=!1,Wn=Symbol();function Xt(t,s,r){const i=r[s]??(r[s]={store:null,source:ia(void 0),unsubscribe:Bs});if(i.store!==t&&!(Wn in r))if(i.unsubscribe(),i.store=t??null,t==null)i.source.v=void 0,i.unsubscribe=Bs;else{var o=!0;i.unsubscribe=ai(t,a=>{o?i.source.v=a:n(i.source,a)}),o=!1}return t&&Wn in r?gs(t):e(i.source)}function ys(){const t={};function s(){ri(()=>{for(var r in t)t[r].unsubscribe();Bi(t,Wn,{enumerable:!1,value:!0})})}return[t,s]}function wl(t){var s=nn;try{return nn=!1,[t(),nn]}finally{nn=s}}function ft(t,s,r,i){var I;var o=!jr||(r&mo)!==0,a=(r&_o)!==0,v=(r&yo)!==0,f=i,l=!0,h=()=>(l&&(l=!1,f=v?Hs(i):i),f),m;if(a){var x=tr in t||Xa in t;m=((I=pr(t,s))==null?void 0:I.set)??(x&&s in t?F=>t[s]=F:void 0)}var d,p=!1;a?[d,p]=wl(()=>t[s]):d=t[s],d===void 0&&i!==void 0&&(d=h(),m&&(o&&ao(),m(d)));var w;if(o?w=()=>{var F=t[s];return F===void 0?h():(l=!0,F)}:w=()=>{var F=t[s];return F!==void 0&&(f=void 0),F===void 0?f:F},o&&(r&wo)===0)return w;if(m){var T=t.$$legacy;return(function(F,Y){return arguments.length>0?((!o||!Y||T||p)&&m(Y?w():F),F):w()})}var _=!1,y=((r&go)!==0?Xr:ei)(()=>(_=!1,w()));a&&e(y);var C=lt;return(function(F,Y){if(arguments.length>0){const ce=Y?e(y):o&&a?$s(F):F;return n(y,ce),_=!0,f!==void 0&&(f=ce),F}return Us&&_||(C.f&js)!==0?y.v:e(y)})}function Er(t){yt===null&&Za(),jr&&yt.l!==null?_l(yt).m.push(t):Ps(()=>{const s=Hs(t);if(typeof s=="function")return s})}function _l(t){var s=t.l;return s.u??(s.u={a:[],b:[],m:[]})}const yl="5";var qi;typeof window<"u"&&((qi=window.__svelte??(window.__svelte={})).v??(qi.v=new Set)).add(yl);function Ia(){return window.location.pathname||"/"}function Ra(){return window.location.search?window.location.search.slice(1):""}function bl(){const t=window.location.hash;if(t&&t.startsWith("#/")){const s=t.slice(1);history.replaceState(null,"",s)}}bl();const _n=Pr(Ia());window.addEventListener("popstate",()=>{_n.set(Ia())});const yn=oi(_n,t=>t.split("?")[0]||"/"),xl=oi(_n,()=>Ra()),qa=oi(xl,t=>Object.fromEntries(new URLSearchParams(t)));function Mr(t){history.pushState(null,"",t),_n.set(t)}function bn(){const t=Ra();return Object.fromEntries(new URLSearchParams(t))}Co();let kl=0;function Sl(){const{subscribe:t,update:s}=Pr([]);return{subscribe:t,add(r,i="info",o=3e3){const a={id:kl++,message:r,type:i};s(v=>[...v,a]),setTimeout(()=>{s(v=>v.filter(f=>f.id!==a.id))},o)},remove(r){s(i=>i.filter(o=>o.id!==r))}}}const $a=Sl();function He(t,s,r){$a.add(t,s,r)}var Cl=P('<div role="alert"> </div>');function Tl(t,s){let r=ft(s,"type",3,"info");var i=Cl(),o=c(i);Q(()=>{ye(i,1,`toast ${r()??""}`,"svelte-1i7wnxu"),L(o,s.message)}),g(t,i)}var jl=P('<div class="toast-container svelte-3knp8x"></div>');function zl(t){const s=()=>Xt($a,"$toasts",r),[r,i]=ys();var o=jl();at(o,5,s,a=>a.id,(a,v)=>{Tl(a,{get message(){return e(v).message},get type(){return e(v).type}})}),g(t,o),i()}function Fe(){const t=window.location.hostname;return t==="localhost"||t==="127.0.0.1"?"http://localhost:3001":"https://yoink.coah80.com"}async function Pl(t,s={}){const r=await fetch(t,s),i=r.headers.get("content-type");if(!r.ok){let o=`Request failed (${r.status})`;if(i&&i.includes("application/json"))o=(await r.json()).error||o;else{const a=await r.text();console.error("Non-JSON error response:",a.substring(0,500)),o=`Server error ${r.status} (likely VPN blocked)`}throw new Error(o)}return r.json()}async function El(t,s={}){return Pl(`${Fe()}${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}function Jn(t,{onMessage:s,onError:r,maxReconnectAttempts:i=10}){let o=0,a=null,v=!1;function f(){v||(a=new EventSource(`${Fe()}/api/progress/${t}`),a.onmessage=h=>{try{const m=JSON.parse(h.data);o=0,s(m),(m.stage==="complete"||m.stage==="error"||m.stage==="cancelled")&&l()}catch(m){console.error("SSE parse error:",m)}},a.onerror=()=>{if(a.close(),!v)if(o<i){o++;const h=Math.min(1e3*o,5e3);r&&r({type:"reconnecting",attempt:o,max:i}),setTimeout(f,h)}else r&&r({type:"failed",message:"Connection lost - refresh page to retry"})})}function l(){v=!0,a&&(a.close(),a=null)}return f(),{close:l}}const Ur=[],Ml=5;function Ti(t){t.parentNode&&t.parentNode.removeChild(t);const s=Ur.indexOf(t);s>-1&&Ur.splice(s,1)}function Il(){for(;Ur.length>Ml;){const t=Ur.shift();t&&t.parentNode&&t.parentNode.removeChild(t)}}function ji(t){const s=document.createElement("iframe");s.style.display="none",s.src=t,document.body.appendChild(s),Ur.push(s),Il(),s.onload=()=>setTimeout(()=>Ti(s),5e3),setTimeout(()=>Ti(s),120*1e3)}function Hr(t,s){const r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}const or=Pr(sessionStorage.getItem("yoink_clientId")||null),nr=new Set;let Rl=0,Lt=null,hs=0;const Ba=3;async function ql(){let t=gs(or);if(!t){try{t=(await(await fetch(`${Fe()}/api/connect`,{method:"POST"})).json()).clientId}catch{t="local-"+Date.now()+"-"+Math.random().toString(36).slice(2,11)}sessionStorage.setItem("yoink_clientId",t),or.set(t)}return t}function tn(){const t=`job-${++Rl}-${Date.now()}`,s=nr.size===0;if(nr.add(t),s&&!Lt){hs=0;const r=gs(or);r&&!r.startsWith("local-")&&fetch(`${Fe()}/api/heartbeat/${r}`,{method:"POST"}).catch(()=>{}),Lt=setInterval(async()=>{const i=gs(or);if(!(!i||i.startsWith("local-")))try{await fetch(`${Fe()}/api/heartbeat/${i}`,{method:"POST"}),hs=0}catch{hs++,hs>=Ba&&(clearInterval(Lt),Lt=null,hs=0)}},15e3)}return t}function $l(){if(nr.size>0&&!Lt){hs=0;const t=gs(or);t&&!t.startsWith("local-")&&fetch(`${Fe()}/api/heartbeat/${t}`,{method:"POST"}).catch(()=>{}),Lt=setInterval(async()=>{const s=gs(or);if(!(!s||s.startsWith("local-")))try{await fetch(`${Fe()}/api/heartbeat/${s}`,{method:"POST"}),hs=0}catch{hs++,hs>=Ba&&(clearInterval(Lt),Lt=null,hs=0)}},15e3)}}function sn(t){t?nr.delete(t):nr.clear(),nr.size===0&&Lt&&(clearInterval(Lt),Lt=null)}typeof window<"u"&&window.addEventListener("beforeunload",()=>{Lt&&(clearInterval(Lt),Lt=null),nr.clear()});const zi=[{text:"yoink it, go on..."},{text:"not cobalt"},{text:"im bored"},{text:"have you yoinked it today?"},{text:"download helium browser",link:"https://helium.computer/",classes:["clickable"]},{text:"dont like it? use cliply (dont)"},{text:"the biggest yt-dlp wrapper of them all"},{text:"awesome name, right?"},{text:"get yoinked!"},{text:"funny message here"},{text:"SHOUTOUT TO COAH"},{text:"new feature: yoink!"},{text:"new feature: ai download"},{text:"welcome to yoink.tools"},{text:"feelin' yoinky?"},{text:"im parched"},{text:"stay hydrated!"},{text:"computers are cool"},{text:"missing assignments?"},{text:"procrastinate with yoink"},{text:"newgrounds.com",link:"https://newgrounds.com",classes:["clickable"]},{text:"bring back flash!"},{text:"FUCK ICE"},{text:"post this one to twitter"},{text:"google i need yoinks! NOW!!!!!"},{text:"im feeling fancy today...",classes:["fancy"]},{text:"powered by yt-dlp"},{text:"hello world!"},{text:"1000+ sites!",link:"https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md",classes:["clickable"]},{text:"yes, that site works. even the one you're thinking of."}],Bl=["4tube","alphaporno","beeg","behindkink","bongacams","cam4","cammodels","camsoda","chaturbate","drtuber","empflix","eporner","erocast","eroprofile","fux","hellporno","hotmovs","iceporn","lovehomeporn","manyvids","motherless","moviefap","noodlemagazine","nuvid","peekvideos","peekvids","playvids","porn","pornbox","pornerbros","pornflip","pornhub","pornotube","pornovoisines","pornoxo","porntop","porntube","redtube","rule34video","slutload","spankbang","stripchat","sunporno","thisvid","tnaflix","tube8","txxx","xhamster","xnxx","xvideos","xxxymovies","youjizz","youporn","zenporn","xtube","erome","hentai","hclips","gotporn","fuq","ashemaletube"];function Dl(t){try{const s=new URL(t).hostname.toLowerCase().replace("www.","");return Bl.some(r=>s.includes(r))}catch{return!1}}const Pn={quality:"1080p",codec:"h264",container:"mp4",audioFormat:"mp3",audioBitrate:"320",filenameStyle:"basic",playlistPreference:null,tiktokCarouselPreference:null,twitterGifs:!0},Ws=["starting","downloading","processing","remuxing","sending","zipping","playlist-info","reconnecting","uploading","converting","compressing","transcribing"];function Nl(){let t={...Pn};try{const a=localStorage.getItem("yoink_settings");a&&(t={...Pn,...JSON.parse(a)})}catch{}const{subscribe:s,set:r,update:i}=Pr(t);function o(a){localStorage.setItem("yoink_settings",JSON.stringify(a))}return{subscribe:s,set(a){o(a),r(a)},update(a){i(v=>{const f=a(v);return o(f),f})},setSetting(a,v){i(f=>{const l={...f,[a]:v};return o(l),l})},reset(){const a={...Pn};o(a),r(a)}}}const Os=Nl();let Pi=!1;async function Da(){if(!(Pi||!("serviceWorker"in navigator)))try{await navigator.serviceWorker.register("/sw.js"),Pi=!0}catch{}}async function Ll(){return"Notification"in window?Notification.permission==="granted"?"granted":Notification.permission==="denied"?"denied":await Notification.requestPermission():"unsupported"}async function Al(t,s){if(!(!("Notification"in window)||Notification.permission!=="granted")){if(await Da(),"serviceWorker"in navigator)try{const r=await navigator.serviceWorker.ready;if(r.active){r.active.postMessage({type:"PLAYLIST_COMPLETE",message:`${t} is ready to download!`,jobId:s});return}}catch{}new Notification("yoink",{body:`${t} is ready to download!`,icon:"/icons/icon-192.png"})}}function Ol(){let t=[];try{const d=localStorage.getItem("yoink_queue");d&&(t=JSON.parse(d).map(p=>p.isPlaylist&&p.serverJobId&&p.stage!=="ready"?{...p,stage:"reconnecting",progress:p.progress||0,status:"reconnecting..."}:Ws.includes(p.stage)?{...p,stage:"queued",progress:0,status:"interrupted - tap to restart"}:p).filter(p=>p.stage!=="complete"&&p.stage!=="error"))}catch{t=[]}const{subscribe:s,set:r,update:i}=Pr(t),o=new Map,a=new Map,v=new Map;function f(d){localStorage.setItem("yoink_queue",JSON.stringify(d))}function l(){return gs({subscribe:s})}function h(d){const p=v.get(d);p&&(clearInterval(p),v.delete(d))}function m(d){const p=o.get(d);p&&(p.close(),o.delete(d)),h(d);const w=a.get(d);w&&(sn(w),a.delete(d))}const x={subscribe:s,add(d){i(p=>{if(p.some(T=>T.id===d.id))return p;const w=[...p,d];return f(w),w})},remove(d){const w=l().find(T=>T.id===d);if(m(d),w&&Ws.includes(w.stage)){const T=w.serverJobId||d;fetch(`${Fe()}/api/cancel/${T}`,{method:"POST"}).catch(()=>{})}i(T=>{const _=T.filter(y=>y.id!==d);return f(_),_}),w&&!w.isPlaylist&&Ws.includes(w.stage)&&setTimeout(()=>this.processNext(),100)},updateItem(d,p){i(w=>{const T=w.map(_=>_.id===d?{..._,...p}:_);return f(T),T})},clear(){l().forEach(p=>{if(m(p.id),Ws.includes(p.stage)){const w=p.serverJobId||p.id;fetch(`${Fe()}/api/cancel/${w}`,{method:"POST"}).catch(()=>{})}}),o.clear(),a.clear(),v.clear(),r([]),f([])},startDownload(d){if(d.isPlaylist){this._startPlaylistDownload(d);return}this._startDirectDownload(d)},_startDirectDownload(d){const p=gs(Os),w=tn();a.set(d.id,w),this.updateItem(d.id,{stage:"starting",status:"starting download...",startTime:Date.now()});const T=Jn(d.id,{onMessage:C=>{const I={stage:C.stage,status:C.message};if(C.progress!==void 0&&(I.progress=C.progress),C.speed!==void 0&&(I.speed=C.speed),C.eta!==void 0&&(I.eta=C.eta),C.totalVideos!==void 0&&(I.videoCount=C.totalVideos),C.currentVideo!==void 0&&(I.currentVideo=C.currentVideo),C.currentVideoTitle!==void 0&&(I.currentVideoTitle=C.currentVideoTitle),C.format!==void 0&&(I.formatDisplay=C.format),C.downloadedCount!==void 0&&(I.downloadedCount=C.downloadedCount),C.failedVideos&&(I.failedVideos=C.failedVideos),C.failedCount!==void 0&&(I.failedCount=C.failedCount),this.updateItem(d.id,I),C.stage==="complete"){I.endTime=Date.now(),this.updateItem(d.id,I),m(d.id);const Y=l().find(Pe=>Pe.id===d.id),ce=Y!=null&&Y.startTime?Math.floor((Date.now()-Y.startTime)/1e3):0,xe=ce>=60?`${Math.floor(ce/60)}m ${ce%60}s`:`${ce}s`,Ce=d.format==="images"?"gallery download complete!":d.format==="slideshow"?`slideshow created! (${xe})`:`download complete! (${xe})`;He(Ce,"success"),this.processNext(),setTimeout(()=>this.remove(d.id),5e3)}else C.stage==="error"?(m(d.id),He(C.message,"error"),this.processNext()):C.stage==="cancelled"&&(m(d.id),this.processNext())},onError:C=>{C.type==="reconnecting"?this.updateItem(d.id,{status:`reconnecting... (${C.attempt}/${C.max})`}):(this.updateItem(d.id,{stage:"error",status:C.message}),m(d.id),this.processNext())}});o.set(d.id,T);const _=new URLSearchParams({url:d.url,format:d.format,filename:d.title,quality:p.quality,container:p.container,audioFormat:p.audioFormat,audioBitrate:p.audioBitrate,progressId:d.id,twitterGifs:p.twitterGifs!==!1?"true":"false"});let y;d.format==="slideshow"?y="/api/gallery/slideshow":d.format==="images"?y="/api/gallery/download":y="/api/download",ji(`${Fe()}${y}?${_.toString()}`)},async _startPlaylistDownload(d){const p=gs(Os),w=d.resumeFrom>1;this.updateItem(d.id,{stage:"starting",status:w?`resuming from video ${d.resumeFrom}...`:"starting playlist download...",startTime:Date.now()}),Da(),Ll();try{const T=gs(or),y=(await El("/api/playlist/start",{url:d.url,format:d.format,quality:p.quality,container:p.container,audioFormat:p.audioFormat,audioBitrate:p.audioBitrate,clientId:T||void 0,resumeFrom:d.resumeFrom||1})).jobId;this.updateItem(d.id,{serverJobId:y}),this._connectPlaylistSSE(d.id,y),this._startPlaylistPolling(d.id,y)}catch(T){this.updateItem(d.id,{stage:"error",status:T.message||"failed to start playlist"}),He(T.message||"failed to start playlist","error")}},_connectPlaylistSSE(d,p){const w=Jn(p,{onMessage:T=>{this._handlePlaylistUpdate(d,T)},onError:()=>{}});o.set(d,w)},_startPlaylistPolling(d,p){h(d);const w=setInterval(async()=>{try{const T=await fetch(`${Fe()}/api/playlist/status/${p}`);if(!T.ok){T.status===404&&(this.updateItem(d,{stage:"error",status:"playlist expired, try again!"}),m(d),He("playlist expired, try again!","error"));return}const _=await T.json();this._handlePlaylistUpdate(d,{stage:_.status==="complete"?"complete":_.status,message:_.message,progress:_.progress,totalVideos:_.totalVideos,currentVideo:_.currentVideo,currentVideoTitle:_.currentVideoTitle,failedVideos:_.failedVideos,failedCount:_.failedCount,downloadedCount:_.videosCompleted,downloadToken:_.downloadToken,fileName:_.fileName,fileSize:_.fileSize,speed:_.speed,eta:_.eta})}catch{}},3e3);v.set(d,w)},_handlePlaylistUpdate(d,p){const w={stage:p.stage,status:p.message};if(p.progress!==void 0&&(w.progress=p.progress),p.speed!==void 0&&(w.speed=p.speed),p.eta!==void 0&&(w.eta=p.eta),p.totalVideos!==void 0&&(w.videoCount=p.totalVideos),p.currentVideo!==void 0&&(w.currentVideo=p.currentVideo),p.currentVideoTitle!==void 0&&(w.currentVideoTitle=p.currentVideoTitle),p.downloadedCount!==void 0&&(w.downloadedCount=p.downloadedCount),p.failedVideos&&(w.failedVideos=p.failedVideos),p.failedCount!==void 0&&(w.failedCount=p.failedCount),p.stage==="complete"&&p.downloadToken){w.stage="ready",w.downloadToken=p.downloadToken,w.fileName=p.fileName,w.fileSize=p.fileSize,w.endTime=Date.now(),w.status="playlist ready, tap to download",this.updateItem(d,w),m(d);const _=l().find(y=>y.id===d);He(`${(_==null?void 0:_.title)||"playlist"} is ready to download!`,"success",8e3),Al((_==null?void 0:_.title)||"playlist",_==null?void 0:_.serverJobId);return}if(p.stage==="error"){this.updateItem(d,w),m(d),He(p.message,"error");return}if(p.stage==="cancelled"){this.updateItem(d,w),m(d);return}this.updateItem(d,w)},async downloadReady(d){const w=l().find(T=>T.id===d);if(!(!w||!w.downloadToken)){if(w.serverJobId)try{if(!(await fetch(`${Fe()}/api/playlist/status/${w.serverJobId}`)).ok){this.updateItem(d,{stage:"error",status:"playlist expired, try again!"}),He("playlist expired, try again!","error");return}}catch{this.updateItem(d,{stage:"error",status:"playlist expired, try again!"}),He("playlist expired, try again!","error");return}ji(`${Fe()}/api/playlist/download/${w.downloadToken}`),He("downloading playlist zip...","success"),setTimeout(()=>this.remove(d),1e4)}},processNext(){const d=l();if(d.some(T=>!T.isPlaylist&&Ws.includes(T.stage)))return;const w=d.find(T=>T.stage==="queued");w&&this.startDownload(w)},startAllQueued(){this.processNext()},retryDownload(d){const w=l().find(_=>_.id===d);if(!w)return;m(d);const T=Date.now().toString()+Math.random().toString(36).substr(2,9);if(w.isPlaylist){const _=(w.downloadedCount||0)+1,y=_>1?`resuming from video ${_}...`:"queued for retry";this.updateItem(d,{id:T,stage:"queued",progress:w.progress||0,status:y,endTime:null,serverJobId:null,downloadToken:null,resumeFrom:_})}else this.updateItem(d,{id:T,stage:"queued",progress:0,status:"queued for retry",logs:[],endTime:null,serverJobId:null,downloadToken:null});this.processNext()},async finishPlaylistEarly(d){const w=l().find(_=>_.id===d),T=(w==null?void 0:w.serverJobId)||d;try{await fetch(`${Fe()}/api/finish-early/${T}`,{method:"POST"})}catch{He("failed to finish early","error")}},resumePlaylistJobs(){l().filter(p=>p.stage==="reconnecting"&&p.serverJobId).forEach(p=>{this._connectPlaylistSSE(p.id,p.serverJobId),this._startPlaylistPolling(p.id,p.serverJobId)})},reconnectOnResume(){l().filter(p=>p.isPlaylist&&p.serverJobId&&Ws.includes(p.stage)).forEach(p=>{const w=o.get(p.id);w&&(w.close(),o.delete(p.id)),this._connectPlaylistSSE(p.id,p.serverJobId),h(p.id),this._startPlaylistPolling(p.id,p.serverJobId)})}};return typeof window<"u"&&setTimeout(()=>x.resumePlaylistJobs(),500),x}const _e=Ol();var Fl=Ue('<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',1),Ul=Ue('<polyline points="20 6 9 17 4 12"></polyline>'),Hl=Ue('<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',1),Vl=Ue('<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',1),Wl=Ue('<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',1),Jl=Ue('<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',1),Yl=Ue('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Gl=Ue('<path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path d="M9 12l2 2 4-4"></path>',1),Ql=Ue('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),Xl=P('<span class="queue-item-format svelte-151vo4w"> </span>'),Kl=P('<span class="queue-item-timer svelte-151vo4w"> </span>'),Zl=P('<span class="queue-item-timer svelte-151vo4w"> </span>'),ec=P('<button class="queue-item-download svelte-151vo4w" title="Download"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),tc=P('<button class="queue-item-retry svelte-151vo4w" title="Retry"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg></button>'),sc=P('<button class="queue-item-retry svelte-151vo4w" title="Start now"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button>'),rc=P('<button class="queue-item-retry svelte-151vo4w" title="Download now (skip remaining)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),nc=P('<div class="send-to-flyout svelte-151vo4w"><button class="send-to-option svelte-151vo4w"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> transcribe</button> <button class="send-to-option svelte-151vo4w"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg> compress</button> <button class="send-to-option svelte-151vo4w"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg> trim</button> <button class="send-to-option svelte-151vo4w"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> convert</button></div>'),ic=P('<div class="send-to-wrapper svelte-151vo4w"><button class="queue-item-sendto svelte-151vo4w" title="Send to..."><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></button> <!></div>'),ac=P('<div class="queue-item-progress svelte-151vo4w"><div class="queue-item-progress-fill svelte-151vo4w"></div></div>'),oc=P('<div class="queue-item-failed-item svelte-151vo4w"><span class="queue-item-failed-num svelte-151vo4w"> </span> <span> </span></div>'),lc=P('<div class="queue-item-failed svelte-151vo4w"><div class="queue-item-failed-header svelte-151vo4w"> </div> <!></div>'),cc=P('<div><div class="queue-item-header svelte-151vo4w"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-151vo4w"><!></svg></div> <div class="queue-item-info svelte-151vo4w"><div class="queue-item-title svelte-151vo4w"> <!> <!></div> <div> </div></div> <div class="queue-item-actions svelte-151vo4w"><!> <!> <!> <!> <button class="queue-item-remove svelte-151vo4w" title="Remove"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div></div> <!> <!></div>');function vc(t,s){xt(s,!0);let r=E(!1),i=E(null),o=be(()=>Ws.includes(s.item.stage)),a=be(()=>s.item.stage==="complete"),v=be(()=>s.item.stage==="error"),f=be(()=>s.item.stage==="queued"),l=be(()=>s.item.stage==="ready"),h=be(()=>e(o)&&s.item.progress!==void 0),m=be(()=>e(l)?"success":e(o)?"active":e(a)?"success":e(v)?"error":""),x=be(()=>{if(!s.item.fileSize)return"";const H=s.item.fileSize/(1024*1024);return H>=1024?`${(H/1024).toFixed(1)} GB`:`${H.toFixed(1)} MB`}),d=be(()=>{if(!s.item.startTime||!e(o)&&!e(a))return"";const H=e(a)&&s.item.endTime?s.item.endTime:Date.now(),G=Math.floor((H-s.item.startTime)/1e3),Te=Math.floor(G/60);return Te>0?`${Te}m ${G%60}s`:`${G}s`}),p=be(()=>{if(s.item.isPlaylist&&s.item.currentVideo&&s.item.videoCount)return`${s.item.currentVideo}/${s.item.videoCount} - ${s.item.currentVideoTitle||s.item.status}`;let H=s.item.status||"waiting...";if(e(o)&&(s.item.speed||s.item.eta)){const G=[];s.item.speed&&G.push(s.item.speed),s.item.eta&&G.push(`~${s.item.eta} left`),G.length&&(H+=` Â· ${G.join(" Â· ")}`)}return H}),w=be(()=>!!s.item.url);function T(H){Mr(`/${H}?url=${encodeURIComponent(s.item.url)}`),n(r,!1)}function _(H){e(i)&&!e(i).contains(H.target)&&n(r,!1)}Ps(()=>{if(e(r))return document.addEventListener("click",_,!0),()=>document.removeEventListener("click",_,!0)});var y=cc();let C;y.__click=()=>{e(l)?_e.downloadReady(s.item.id):e(f)&&_e.startDownload(s.item)};var I=c(y),F=c(I);let Y;var ce=c(F),xe=c(ce);{var Ce=H=>{var G=Fl();g(H,G)},Pe=H=>{var G=Oe(),Te=he(G);{var Ke=Re=>{var Ve=Ul();g(Re,Ve)},Ze=Re=>{var Ve=Oe(),ut=he(Ve);{var pt=gt=>{var ot=Hl();g(gt,ot)},mt=gt=>{var ot=Oe(),dt=he(ot);{var Kt=St=>{var qt=Vl();g(St,qt)},Rt=St=>{var qt=Oe(),cs=he(qt);{var Zt=fe=>{var R=Wl();g(fe,R)},es=fe=>{var R=Oe(),$=he(R);{var ee=ve=>{var le=Jl();g(ve,le)},de=ve=>{var le=Oe(),Ie=he(le);{var k=A=>{var N=Yl();g(A,N)},S=A=>{var N=Oe(),J=he(N);{var je=b=>{var z=Gl();g(b,z)},ne=b=>{var z=Ql();g(b,z)};B(J,b=>{e(o)?b(je):b(ne,!1)},!0)}g(A,N)};B(Ie,A=>{s.item.format==="audio"?A(k):A(S,!1)},!0)}g(ve,le)};B($,ve=>{s.item.type==="compress"?ve(ee):ve(de,!1)},!0)}g(fe,R)};B(cs,fe=>{s.item.type==="convert"?fe(Zt):fe(es,!1)},!0)}g(St,qt)};B(dt,St=>{s.item.isPlaylist?St(Kt):St(Rt,!1)},!0)}g(gt,ot)};B(ut,gt=>{e(v)?gt(pt):gt(mt,!1)},!0)}g(Re,Ve)};B(Te,Re=>{e(a)?Re(Ke):Re(Ze,!1)},!0)}g(H,G)};B(xe,H=>{e(l)?H(Ce):H(Pe,!1)})}var K=u(F,2),Ee=c(K),We=c(Ee),ge=u(We);{var ke=H=>{var G=Xl(),Te=c(G);Q(()=>L(Te,s.item.formatDisplay)),g(H,G)};B(ge,H=>{s.item.isPlaylist&&s.item.formatDisplay&&H(ke)})}var Ne=u(ge,2);{var ue=H=>{var G=Kl(),Te=c(G);Q(()=>L(Te,e(x))),g(H,G)},j=H=>{var G=Oe(),Te=he(G);{var Ke=Ze=>{var Re=Zl(),Ve=c(Re);Q(()=>L(Ve,e(d))),g(Ze,Re)};B(Te,Ze=>{e(d)&&Ze(Ke)},!0)}g(H,G)};B(Ne,H=>{e(l)&&e(x)?H(ue):H(j,!1)})}var q=u(Ee,2),Z=c(q),oe=u(K,2),X=c(oe);{var D=H=>{var G=ec();G.__click=Te=>{Te.stopPropagation(),_e.downloadReady(s.item.id)},g(H,G)},O=H=>{var G=Oe(),Te=he(G);{var Ke=Ze=>{var Re=tc();Re.__click=Ve=>{Ve.stopPropagation(),_e.retryDownload(s.item.id)},g(Ze,Re)};B(Te,Ze=>{e(v)&&s.item.url&&Ze(Ke)},!0)}g(H,G)};B(X,H=>{e(l)?H(D):H(O,!1)})}var re=u(X,2);{var U=H=>{var G=sc();G.__click=Te=>{Te.stopPropagation(),_e.startDownload(s.item)},g(H,G)};B(re,H=>{e(f)&&H(U)})}var V=u(re,2);{var W=H=>{var G=rc();G.__click=Te=>{Te.stopPropagation(),_e.finishPlaylistEarly(s.item.id)},g(H,G)};B(V,H=>{s.item.isPlaylist&&e(o)&&s.item.currentVideo>0&&H(W)})}var ae=u(V,2);{var we=H=>{var G=ic(),Te=c(G);Te.__click=Re=>{Re.stopPropagation(),n(r,!e(r))};var Ke=u(Te,2);{var Ze=Re=>{var Ve=nc(),ut=c(Ve);ut.__click=ot=>{ot.stopPropagation(),T("transcribe")};var pt=u(ut,2);pt.__click=ot=>{ot.stopPropagation(),T("compress")};var mt=u(pt,2);mt.__click=ot=>{ot.stopPropagation(),T("trim")};var gt=u(mt,2);gt.__click=ot=>{ot.stopPropagation(),T("convert")},g(Re,Ve)};B(Ke,Re=>{e(r)&&Re(Ze)})}as(G,Re=>n(i,Re),()=>e(i)),g(H,G)};B(ae,H=>{e(w)&&H(we)})}var Se=u(ae,2);Se.__click=H=>{H.stopPropagation(),_e.remove(s.item.id)};var pe=u(I,2);{var Me=H=>{var G=ac(),Te=c(G);Q(()=>wt(Te,`width: ${(s.item.progress||0)??""}%`)),g(H,G)};B(pe,H=>{e(h)&&H(Me)})}var $e=u(pe,2);{var Be=H=>{var G=lc(),Te=c(G),Ke=c(Te),Ze=u(Te,2);at(Ze,17,()=>s.item.failedVideos,ct,(Re,Ve)=>{var ut=oc(),pt=c(ut),mt=c(pt),gt=u(pt,2),ot=c(gt);Q(()=>{L(mt,`#${e(Ve).num??""}`),L(ot,`${(e(Ve).title||"Video")??""} - ${(e(Ve).reason||"Download failed")??""}`)}),g(Re,ut)}),Q(()=>L(Ke,`failed videos (${(s.item.failedCount||s.item.failedVideos.length)??""})`)),g(H,G)};B($e,H=>{var G;s.item.isPlaylist&&((G=s.item.failedVideos)==null?void 0:G.length)>0&&H(Be)})}Q(()=>{C=ye(y,1,"queue-item svelte-151vo4w",null,C,{clickable:e(l)||e(f)}),Y=ye(F,1,"queue-item-icon svelte-151vo4w",null,Y,{spinning:e(o),ready:e(l)}),L(We,`${s.item.title??""} `),ye(q,1,`queue-item-status ${e(m)??""}`,"svelte-151vo4w"),L(Z,e(p))}),g(t,y),kt()}Mt(["click"]);var uc=P('<button class="queue-clear svelte-i3r5ty">clear all</button>'),dc=P('<div class="queue-empty svelte-i3r5ty">nothing here yet</div>'),fc=P('<div class="queue-dropdown-header svelte-i3r5ty"><span class="queue-dropdown-title svelte-i3r5ty">queue</span> <div class="queue-header-actions svelte-i3r5ty"><button class="queue-start-all svelte-i3r5ty" title="Start all queued"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-i3r5ty"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button> <!></div></div> <div class="queue-list svelte-i3r5ty"><!></div>',1);function Na(t,s){xt(s,!0);const r=()=>Xt(_e,"$queue",i),[i,o]=ys();let a=be(r),v=be(()=>e(a).length>0);var f=fc(),l=he(f),h=u(c(l),2),m=c(h);m.__click=()=>_e.startAllQueued();var x=u(m,2);{var d=y=>{var C=uc();C.__click=()=>{_e.clear(),He("Queue cleared","info")},g(y,C)};B(x,y=>{e(v)&&y(d)})}var p=u(l,2),w=c(p);{var T=y=>{var C=Oe(),I=he(C);at(I,17,()=>e(a),F=>F.id,(F,Y)=>{vc(F,{get item(){return e(Y)}})}),g(y,C)},_=y=>{var C=dc();g(y,C)};B(w,y=>{e(v)?y(T):y(_,!1)})}g(t,f),kt(),o()}Mt(["click"]);var pc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-1xkxv2n"></path><polyline points="7 10 12 15 17 10" class="svelte-1xkxv2n"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-1xkxv2n"></line></svg>'),hc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="17 1 21 5 17 9" class="svelte-1xkxv2n"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" class="svelte-1xkxv2n"></path><polyline points="7 23 3 19 7 15" class="svelte-1xkxv2n"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" class="svelte-1xkxv2n"></path></svg>'),gc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="4 14 10 14 10 20" class="svelte-1xkxv2n"></polyline><polyline points="20 10 14 10 14 4" class="svelte-1xkxv2n"></polyline><line x1="14" y1="10" x2="21" y2="3" class="svelte-1xkxv2n"></line><line x1="3" y1="21" x2="10" y2="14" class="svelte-1xkxv2n"></line></svg>'),mc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><circle cx="6" cy="6" r="3" class="svelte-1xkxv2n"></circle><circle cx="6" cy="18" r="3" class="svelte-1xkxv2n"></circle><line x1="20" y1="4" x2="8.12" y2="15.88" class="svelte-1xkxv2n"></line><line x1="14.47" y1="14.48" x2="20" y2="20" class="svelte-1xkxv2n"></line><line x1="8.12" y1="8.12" x2="12" y2="12" class="svelte-1xkxv2n"></line></svg>'),wc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" class="svelte-1xkxv2n"></path></svg>'),_c=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><circle cx="12" cy="12" r="3" class="svelte-1xkxv2n"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" class="svelte-1xkxv2n"></path></svg>'),yc=P('<a><div class="nav-icon svelte-1xkxv2n"><!></div> <span class="nav-label svelte-1xkxv2n"> </span></a>'),bc=P('<span class="nav-badge svelte-1xkxv2n"> </span>'),xc=P('<div class="queue-sheet-overlay svelte-1xkxv2n"></div> <div><div class="sheet-handle svelte-1xkxv2n"></div> <!></div>',1),kc=P('<nav class="bottom-nav svelte-1xkxv2n"><!> <button><div class="nav-icon svelte-1xkxv2n"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><line x1="8" y1="6" x2="21" y2="6" class="svelte-1xkxv2n"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-1xkxv2n"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-1xkxv2n"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-1xkxv2n"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-1xkxv2n"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-1xkxv2n"></line></svg> <!></div> <span class="nav-label svelte-1xkxv2n">queue</span></button></nav> <!>',1);function Sc(t,s){xt(s,!0);const r=()=>Xt(_e,"$queue",o),i=()=>Xt(yn,"$path",o),[o,a]=ys();let v=E(!1),f,l=E(0),h=E(!1),m=0,x=0,d=be(r),p=be(()=>e(d).length),w=be(i),T=be(()=>e(d).filter(ue=>["starting","downloading","processing","zipping","sending","transcribing"].includes(ue.stage)).length);function _(ue){ue.preventDefault(),ue.stopPropagation(),n(v,!e(v)),n(l,0)}function y(){n(v,!1),n(l,0)}function C(ue){const j=f;j&&(j.scrollTop>0&&ue.target.closest(".queue-sheet")&&!ue.target.closest(".sheet-handle")||(m=ue.touches[0].clientY,x=Date.now(),n(h,!0)))}function I(ue){if(!e(h))return;const j=ue.touches[0].clientY-m;j>0?(n(l,j),ue.preventDefault()):n(l,0)}function F(){if(!e(h))return;n(h,!1);const ue=e(l)/(Date.now()-x);e(l)>80||ue>.5?y():n(l,0)}const Y=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/trim",label:"trim",icon:"trim"},{href:"/transcribe",label:"transcribe",icon:"transcribe"},{href:"/settings",label:"settings",icon:"settings"}];var ce=kc();ht("keydown",zr,ue=>{ue.key==="Escape"&&e(v)&&y()});var xe=he(ce),Ce=c(xe);at(Ce,17,()=>Y,ct,(ue,j)=>{var q=yc();let Z;var oe=c(q),X=c(oe);{var D=V=>{var W=pc();g(V,W)},O=V=>{var W=Oe(),ae=he(W);{var we=pe=>{var Me=hc();g(pe,Me)},Se=pe=>{var Me=Oe(),$e=he(Me);{var Be=G=>{var Te=gc();g(G,Te)},H=G=>{var Te=Oe(),Ke=he(Te);{var Ze=Ve=>{var ut=mc();g(Ve,ut)},Re=Ve=>{var ut=Oe(),pt=he(ut);{var mt=ot=>{var dt=wc();g(ot,dt)},gt=ot=>{var dt=Oe(),Kt=he(dt);{var Rt=St=>{var qt=_c();g(St,qt)};B(Kt,St=>{e(j).icon==="settings"&&St(Rt)},!0)}g(ot,dt)};B(pt,ot=>{e(j).icon==="transcribe"?ot(mt):ot(gt,!1)},!0)}g(Ve,ut)};B(Ke,Ve=>{e(j).icon==="trim"?Ve(Ze):Ve(Re,!1)},!0)}g(G,Te)};B($e,G=>{e(j).icon==="compress"?G(Be):G(H,!1)},!0)}g(pe,Me)};B(ae,pe=>{e(j).icon==="convert"?pe(we):pe(Se,!1)},!0)}g(V,W)};B(X,V=>{e(j).icon==="download"?V(D):V(O,!1)})}var re=u(oe,2),U=c(re);Q(()=>{Z=ye(q,1,"bottom-nav-item svelte-1xkxv2n",null,Z,{active:e(w)===e(j).href}),bt(q,"href",e(j).href),L(U,e(j).label)}),g(ue,q)});var Pe=u(Ce,2);let K;Pe.__click=_;var Ee=c(Pe),We=u(c(Ee),2);{var ge=ue=>{var j=bc(),q=c(j);Q(()=>L(q,e(p))),g(ue,j)};B(We,ue=>{e(p)>0&&ue(ge)})}var ke=u(xe,2);{var Ne=ue=>{var j=xc(),q=he(j);q.__click=y;var Z=u(q,2);let oe;Z.__touchstart=C,Z.__touchmove=I,Z.__touchend=F;var X=u(c(Z),2);Na(X,{}),as(Z,D=>f=D,()=>f),Q(()=>{oe=ye(Z,1,"queue-sheet svelte-1xkxv2n",null,oe,{swiping:e(h)}),wt(Z,e(l)>0?`transform: translateY(${e(l)}px)`:"")}),g(ue,j)};B(ke,ue=>{e(v)&&ue(Ne)})}Q(()=>K=ye(Pe,1,"bottom-nav-item queue-item svelte-1xkxv2n",null,K,{active:e(v),"has-active":e(T)>0})),g(t,ce),kt(),a()}Mt(["click","touchstart","touchmove","touchend"]);var Cc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),Tc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),jc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),zc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg>'),Pc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),Ec=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),Mc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),Ic=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),Rc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg>'),qc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),$c=P("<a><!> <span> </span></a>"),Bc=P('<div class="nav-dropdown svelte-4b3o1e"></div>'),Dc=P('<header class="svelte-4b3o1e"><div class="header-left svelte-4b3o1e"><a href="/" class="logo-link svelte-4b3o1e"><span class="logo-text svelte-4b3o1e">yoink</span> <span class="logo-tld svelte-4b3o1e">.tools</span></a></div> <div class="header-right svelte-4b3o1e"><!> <div class="nav-dropdown-wrapper svelte-4b3o1e"><button class="nav-trigger svelte-4b3o1e"><!> <span> </span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div> <a href="/settings" aria-label="Settings"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></a></div></header>');function Nc(t,s){const r=()=>Xt(yn,"$path",i),[i,o]=ys();let a=E(!1);const v=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/trim",label:"trim",icon:"trim"},{href:"/transcribe",label:"transcribe",icon:"transcribe"}];let f=be(()=>v.find(K=>K.href===r())||v[0]),l=be(()=>r()==="/settings");var h=Dc();ht("click",zr,K=>{K.target.closest(".nav-dropdown-wrapper")||n(a,!1)});var m=u(c(h),2),x=c(m);{var d=K=>{var Ee=Oe(),We=he(Ee);Pa(We,()=>s.extraContent),g(K,Ee)};B(x,K=>{s.extraContent&&K(d)})}var p=u(x,2),w=c(p);w.__click=()=>n(a,!e(a));var T=c(w);{var _=K=>{var Ee=Cc();g(K,Ee)},y=K=>{var Ee=Oe(),We=he(Ee);{var ge=Ne=>{var ue=Tc();g(Ne,ue)},ke=Ne=>{var ue=Oe(),j=he(ue);{var q=oe=>{var X=jc();g(oe,X)},Z=oe=>{var X=Oe(),D=he(X);{var O=U=>{var V=zc();g(U,V)},re=U=>{var V=Oe(),W=he(V);{var ae=we=>{var Se=Pc();g(we,Se)};B(W,we=>{e(f).icon==="transcribe"&&we(ae)},!0)}g(U,V)};B(D,U=>{e(f).icon==="trim"?U(O):U(re,!1)},!0)}g(oe,X)};B(j,oe=>{e(f).icon==="compress"?oe(q):oe(Z,!1)},!0)}g(Ne,ue)};B(We,Ne=>{e(f).icon==="convert"?Ne(ge):Ne(ke,!1)},!0)}g(K,Ee)};B(T,K=>{e(f).icon==="download"?K(_):K(y,!1)})}var C=u(T,2),I=c(C),F=u(C,2);let Y;var ce=u(w,2);{var xe=K=>{var Ee=Bc();at(Ee,21,()=>v,ct,(We,ge)=>{var ke=$c();let Ne;ke.__click=()=>n(a,!1);var ue=c(ke);{var j=X=>{var D=Ec();g(X,D)},q=X=>{var D=Oe(),O=he(D);{var re=V=>{var W=Mc();g(V,W)},U=V=>{var W=Oe(),ae=he(W);{var we=pe=>{var Me=Ic();g(pe,Me)},Se=pe=>{var Me=Oe(),$e=he(Me);{var Be=G=>{var Te=Rc();g(G,Te)},H=G=>{var Te=Oe(),Ke=he(Te);{var Ze=Re=>{var Ve=qc();g(Re,Ve)};B(Ke,Re=>{e(ge).icon==="transcribe"&&Re(Ze)},!0)}g(G,Te)};B($e,G=>{e(ge).icon==="trim"?G(Be):G(H,!1)},!0)}g(pe,Me)};B(ae,pe=>{e(ge).icon==="compress"?pe(we):pe(Se,!1)},!0)}g(V,W)};B(O,V=>{e(ge).icon==="convert"?V(re):V(U,!1)},!0)}g(X,D)};B(ue,X=>{e(ge).icon==="download"?X(j):X(q,!1)})}var Z=u(ue,2),oe=c(Z);Q(()=>{Ne=ye(ke,1,"nav-dropdown-item svelte-4b3o1e",null,Ne,{active:e(ge).href===e(f).href}),bt(ke,"href",e(ge).href),L(oe,e(ge).label)}),g(We,ke)}),g(K,Ee)};B(ce,K=>{e(a)&&K(xe)})}var Ce=u(p,2);let Pe;Q(()=>{L(I,e(f).label),Y=ye(F,0,"chevron svelte-4b3o1e",null,Y,{open:e(a)}),Pe=ye(Ce,1,"settings-btn svelte-4b3o1e",null,Pe,{active:e(l)})}),g(t,h),o()}Mt(["click"]);var Lc=P('<footer class="svelte-ww03jg"><div class="footer-left svelte-ww03jg"><div>this is a <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-ww03jg">yt-dlp</a> wrapper</div> <div>inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt</a>, love u wukko</div> <div>youtube powered by <a href="https://patriick.dev/" target="_blank" rel="noopener" class="svelte-ww03jg">patrick</a> at <a href="https://cobalt.meowing.de" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt.meowing.de</a></div> <div class="legal svelte-ww03jg">by using this site you agree to our <a href="/privacy" class="svelte-ww03jg">privacy policy</a></div></div> <div class="footer-right svelte-ww03jg"><a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-ww03jg">github</a> <span>Â·</span> <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-ww03jg">coah80.com</a> <span>Â·</span> <a href="/privacy" class="svelte-ww03jg">privacy</a> <span>Â·</span> <a href="/?updates" class="svelte-ww03jg">updates</a></div></footer>');function Ac(t){var s=Lc();g(t,s)}var Oc=P('<span class="queue-badge svelte-1picwiz"> </span>'),Fc=P('<div class="queue-dropdown svelte-1picwiz"><!></div>'),Uc=P('<div class="queue-menu svelte-1picwiz"><button class="queue-toggle svelte-1picwiz"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1picwiz"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> queue <!></button> <!></div>');function Ir(t,s){xt(s,!0);const r=()=>Xt(_e,"$queue",i),[i,o]=ys();let a=E(!1),v,f=be(r),l=be(()=>e(f).length);function h(y){y.stopPropagation(),n(a,!e(a))}function m(y){v&&!v.contains(y.target)&&n(a,!1)}Ps(()=>(document.addEventListener("click",m),()=>document.removeEventListener("click",m)));var x=Uc(),d=c(x);d.__click=h;var p=u(c(d),2);{var w=y=>{var C=Oc(),I=c(C);Q(()=>L(I,e(l))),g(y,C)};B(p,y=>{e(l)>0&&y(w)})}var T=u(d,2);{var _=y=>{var C=Fc(),I=c(C);Na(I,{}),g(y,C)};B(T,y=>{e(a)&&y(_)})}as(x,y=>v=y,()=>v),g(t,x),kt(),o()}Mt(["click"]);var Hc=P('<div class="spinner svelte-1ea6fjo" role="status" aria-label="Loading"></div>');function La(t){var s=Hc();g(t,s)}function lr(t){if(t===0||!Number.isFinite(t)||t<0)return"0 B";const s=1024,r=["B","KB","MB","GB","TB"],i=Math.min(Math.max(Math.floor(Math.log(t)/Math.log(s)),0),r.length-1);return parseFloat((t/Math.pow(s,i)).toFixed(2))+" "+r[i]}function Ei(t){try{const s=new URL(t);if(s.hostname==="youtu.be"){const r=s.pathname.slice(1).split("?")[0],i=s.searchParams.get("list");return`https://www.youtube.com/watch?v=${r}${i?`&list=${i}`:""}`}if(s.hostname.includes("youtube.com")){if(s.pathname.startsWith("/shorts/"))return`https://www.youtube.com/watch?v=${s.pathname.replace("/shorts/","").split("?")[0]}`;if(s.searchParams.get("v")){const r=s.searchParams.get("list");return`https://www.youtube.com/watch?v=${s.searchParams.get("v")}${r?`&list=${r}`:""}`}if(s.pathname==="/playlist"&&s.searchParams.get("list"))return`https://www.youtube.com/playlist?list=${s.searchParams.get("list")}`}return t}catch{return t}}function Mi(t){try{const s=new URL(t).hostname;return s==="youtu.be"||s.includes("youtube.com")}catch{return!1}}function Ii(t){try{return new URL(t).searchParams.has("list")}catch{return!1}}function Ri(){return Date.now().toString()+Math.random().toString(36).substr(2,9)}const En="2.1",Aa=[{version:"2.1",date:"february 23, 2026",title:"trim & crop tool, cobalt for youtube across all tools",image:"/updates/v2.1.png",summary:"new trim & crop tool for cutting videos and changing aspect ratios. youtube links now use cobalt across convert, compress, transcribe, and trim for faster, more reliable downloads.",content:`new tool and a big quality-of-life fix for youtube links.

## trim & crop

new tool for cutting and cropping videos. upload a file or paste a link, set your start and end times with a video preview, pick an aspect ratio if you want to crop (16:9, 9:16, 1:1, etc.), and download the result. good for clipping highlights or reformatting videos for different platforms.

## cobalt everywhere

pasting youtube links into convert, compress, transcribe, and trim now uses cobalt instead of yt-dlp. same fast downloads you get on the main download page, now everywhere. non-youtube links still use yt-dlp as before.

## other stuff

- crop aspect ratios: 16:9, 9:16, 1:1, 4:3, 4:5
- trim shows a video preview with set start/end buttons
- crop overlay preview shows what gets cut
- manual time inputs for URL mode (no preview)`},{version:"2.0",date:"february 23, 2026",title:"transcription, encryption, and fixes",image:"/updates/v2.png",summary:"transcription, server-side encryption, gallery-dl auto-fallback, and a ton of fixes across the board.",content:`big update. transcription, server encryption, and a bunch of stuff got cleaned up.

## transcribe

the biggest new thing. drop a video or audio file and get back a plain text transcript, subtitle file (SRT or ASS), or a version with captions burned right into the video. four model sizes from tiny to medium, auto language detection, and new caption formatting controls so you can set max words per caption, line wrapping, minimum duration, and gaps between captions. works with anything ffmpeg can read.

## encryption

all files on the server are now encrypted at rest using LUKS. the encryption key only lives in RAM, so if the server reboots, everything is gone. temp files are processed in encrypted storage and cleaned up after. the server also sanitizes all logs now, no URLs, filenames, or IPs are stored anywhere.

## gallery-dl fallback

when yt-dlp can't handle something (like image-only tweets), yoink now automatically falls back to gallery-dl. you don't have to do anything different, it just works.

## queue improvements

downloads now process one at a time instead of all at once, which is way more reliable. convert and compress jobs show up in the queue now too. playlists resume from where they left off if you retry after an error instead of starting over from scratch.

## other stuff

- switched from hash routing to clean URLs (/convert instead of #/convert)
- disk space checks before starting any job
- job limits so the server doesn't get overwhelmed
- rewrote the privacy page in plain english
- a bunch of bug fixes and cleanup`}];var Vc=P("<p> </p>"),Wc=P('<button class="clear-btn svelte-et6md" type="button" title="Clear"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button>'),Jc=P('<button class="paste-btn svelte-et6md" type="button" title="Paste from clipboard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" class="svelte-et6md"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" class="svelte-et6md"></path></svg></button>'),Yc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" class="svelte-et6md"></polygon></svg>'),Gc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" class="svelte-et6md"></rect><line x1="7" y1="2" x2="7" y2="22" class="svelte-et6md"></line><line x1="17" y1="2" x2="17" y2="22" class="svelte-et6md"></line><line x1="2" y1="12" x2="22" y2="12" class="svelte-et6md"></line><line x1="2" y1="7" x2="7" y2="7" class="svelte-et6md"></line><line x1="2" y1="17" x2="7" y2="17" class="svelte-et6md"></line><line x1="17" y1="17" x2="22" y2="17" class="svelte-et6md"></line><line x1="17" y1="7" x2="22" y2="7" class="svelte-et6md"></line></svg>'),Qc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M9 18V5l12-2v13" class="svelte-et6md"></path><circle cx="6" cy="18" r="3" class="svelte-et6md"></circle><circle cx="18" cy="16" r="3" class="svelte-et6md"></circle></svg>'),Xc=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" class="svelte-et6md"></rect><circle cx="8.5" cy="8.5" r="1.5" class="svelte-et6md"></circle><polyline points="21 15 16 10 5 21" class="svelte-et6md"></polyline></svg>'),Kc=P('<button><!> <span class="svelte-et6md"> </span></button>'),Zc=P('<div class="yoink-dropdown svelte-et6md"><button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button> <button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> batch add urls</button></div>'),ev=P("<div><!> </div>"),tv=P('<div class="modal-overlay svelte-et6md"><div class="modal svelte-et6md"><div class="modal-title svelte-et6md">playlist detected!</div> <div class="modal-subtitle svelte-et6md">do you want to download just this video, or the whole playlist?</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="5 3 19 12 5 21 5 3" class="svelte-et6md"></polygon></svg> video</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> playlist</button></div> <label class="modal-toggle svelte-et6md"><input type="checkbox" class="svelte-et6md"/> <span class="modal-toggle-switch svelte-et6md"></span> <span class="modal-toggle-label svelte-et6md">remember this choice</span></label> <div class="modal-hint svelte-et6md">this can be changed in <a href="/settings" class="svelte-et6md">settings</a>!</div></div></div>'),sv=P('<div class="modal-overlay svelte-et6md"><div class="modal svelte-et6md"><div class="modal-title svelte-et6md">tiktok photo post detected!</div> <div class="modal-subtitle svelte-et6md">download just the photos, or as a video with the audio?</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" class="svelte-et6md"></rect><circle cx="8.5" cy="8.5" r="1.5" class="svelte-et6md"></circle><polyline points="21 15 16 10 5 21" class="svelte-et6md"></polyline></svg> photos</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="5 3 19 12 5 21 5 3" class="svelte-et6md"></polygon></svg> video (includes audio)</button></div> <label class="modal-toggle svelte-et6md"><input type="checkbox" class="svelte-et6md"/> <span class="modal-toggle-switch svelte-et6md"></span> <span class="modal-toggle-label svelte-et6md">remember this choice</span></label> <div class="modal-hint svelte-et6md">this can be changed in <a href="/settings" class="svelte-et6md">settings</a>!</div></div></div>'),rv=P('<div class="modal-overlay svelte-et6md"><div class="modal batch-modal svelte-et6md"><div class="modal-title svelte-et6md">batch add urls</div> <div class="modal-subtitle svelte-et6md">paste multiple URLs, one per line</div> <textarea class="batch-textarea svelte-et6md"></textarea> <div class="batch-count svelte-et6md"><span class="svelte-et6md"> </span> urls detected</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md">cancel</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button></div></div></div>'),nv=P('<h3 class="svelte-et6md"> </h3>'),iv=P('<li class="svelte-et6md"> </li>'),av=P('<ul class="svelte-et6md"></ul>'),ov=P('<p class="svelte-et6md"> </p>'),lv=P('<article class="update-card svelte-et6md"><div class="update-meta svelte-et6md"><span class="update-version svelte-et6md"> </span> <span class="update-date svelte-et6md"> </span></div> <h2 class="update-title svelte-et6md"> </h2> <img class="update-image svelte-et6md"/> <div class="update-content svelte-et6md"></div></article>'),cv=P('<div role="dialog" aria-modal="true" aria-label="Updates"><div class="updates-scroll svelte-et6md"><div class="updates-header svelte-et6md"><span class="updates-pill svelte-et6md">updates</span> <button class="updates-close svelte-et6md" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button></div> <!></div></div>'),vv=P('<!> <main class="svelte-et6md"><div class="branding svelte-et6md"><h1 class="svelte-et6md">yoink<span class="brand-tld svelte-et6md">.tools</span></h1> <!></div> <div class="input-container svelte-et6md"><div class="url-input-wrapper svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" class="svelte-et6md"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" class="svelte-et6md"></path></svg> <input type="text" class="url-input svelte-et6md" placeholder="paste the link here..." autocomplete="off" spellcheck="false"/> <!></div> <div class="format-section svelte-et6md"><div class="segmented-control svelte-et6md"></div> <div><button class="yoink-btn svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-et6md"></path><polyline points="7 10 12 15 17 10" class="svelte-et6md"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-et6md"></line></svg> </button> <button class="yoink-dropdown-toggle svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polyline points="6 9 12 15 18 9" class="svelte-et6md"></polyline></svg></button> <!></div></div> <!></div></main> <!> <!> <!> <!> <!>',1);function uv(t,s){xt(s,!0);const r=()=>Xt(Os,"$settings",o),i=()=>Xt(qa,"$query",o),[o,a]=ys();let v=E(""),f=E("auto"),l=E(!1),h=E(null),m=E(""),x=E(!1),d=E(!1),p=E(!1),w=E(""),T=E(null),_=E(!1),y=E(null),C=E(null),I,F=be(()=>e(w).split(`
`).filter(k=>{const S=k.trim();if(!S)return!1;try{return new URL(S),!0}catch{return!1}}).length);const Y=[{id:"auto",label:"auto",icon:"bolt"},{id:"video",label:"video",icon:"video"},{id:"audio",label:"audio",icon:"audio"},{id:"images",label:"images",icon:"image"}];function ce(){n(C,zi[Math.floor(Math.random()*zi.length)],!0)}function xe(){var k;(k=e(C))!=null&&k.link&&window.open(e(C).link,"_blank")}function Ce(){let k=null;try{const S=localStorage.getItem("yoink_shared_url");if(S){const A=JSON.parse(S);Date.now()-A.timestamp<300*1e3&&(k=A.url),localStorage.removeItem("yoink_shared_url")}}catch{localStorage.removeItem("yoink_shared_url")}if(!k&&window.location.pathname==="/share"){const S=new URLSearchParams(window.location.search),N=(S.get("url")||S.get("text")||"").match(/https?:\/\/[^\s]+/);N&&(k=N[0].replace(/[.,!?;:)\]}>]+$/,"")),history.replaceState(null,"","/")}k&&(n(v,k,!0),setTimeout(()=>oe(),150))}Er(()=>{ce(),Ce()});async function Pe(){try{const k=await navigator.clipboard.readText();k&&(n(v,k.trim(),!0),I==null||I.focus())}catch{He("Could not read clipboard","error")}}function K(k,S){n(h,k,!0),n(m,S,!0)}function Ee(){n(h,null),n(m,"")}function We(){return new Promise(k=>{n(U,!1),n(T,k,!0),n(x,!0)})}function ge(k,S){S&&Os.setSetting("playlistPreference",k),e(T)&&e(T)(k),n(T,null),n(x,!1)}function ke(){e(T)&&e(T)(null),n(T,null),n(x,!1)}function Ne(){return new Promise(k=>{n(U,!1),n(y,k,!0),n(_,!0)})}function ue(k,S){S&&Os.setSetting("tiktokCarouselPreference",k),e(y)&&e(y)(k),n(y,null),n(_,!1)}function j(){e(y)&&e(y)(null),n(y,null),n(_,!1)}async function q(k,S){return!k.isTikTokCarousel||!k.hasAudio?"skip":S.tiktokCarouselPreference==="photos"?"photos":S.tiktokCarouselPreference==="video"?"video":await Ne()}async function Z(k,S=!1){const A=Ei(k),N=e(f)==="auto"?"video":e(f);let J=N;if(N==="images"&&Mi(A))return He("YouTube doesn't support image downloads","error"),null;const je=Ri(),ne=r();let b=!1;if(N!=="images"&&Ii(A))if(ne.playlistPreference==="video")b=!1;else if(ne.playlistPreference==="playlist")b=!0;else{const te=await We();if(te===null)return null;b=te==="playlist"}let z="Loading...";try{if(N==="images"){const te=await fetch(`${Fe()}/api/gallery/metadata?url=${encodeURIComponent(A)}`),ze=te.headers.get("content-type");if(te.ok&&(ze!=null&&ze.includes("application/json"))){const me=await te.json();z=me.title||"Image";const De=await q(me,ne);if(De===null)return null;De==="video"&&(J="slideshow")}else z=A.substring(0,50)}else{const te=await fetch(`${Fe()}/api/metadata?url=${encodeURIComponent(A)}&playlist=${b}`),ze=te.headers.get("content-type");if(te.ok&&(ze!=null&&ze.includes("application/json"))){const me=await te.json();z=me.title||"Unknown",me.isGallery===!0&&(J="images");const De=await q(me,ne);if(De===null)return null;if(De==="video"&&(J="slideshow"),me.usingCookies&&He("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3),me.clipNote){const ie=me.clipNote.toLowerCase().includes("warning")||me.originalDuration>600;He(me.clipNote,ie?"warning":"info",6e3)}}else if(!te.ok&&(ze!=null&&ze.includes("application/json"))){const me=await te.json();if(me.clipUnsupported)return He("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),null;throw new Error(me.error||"Metadata fetch failed")}else z=A.substring(0,50)}}catch{z=A.substring(0,50)}const se={id:je,title:z,url:A,format:J,stage:S?"starting":"queued",status:S?"initializing...":"in queue",progress:0,isPlaylist:b,formatDisplay:J==="slideshow"?"slideshow":J==="images"?"images":J==="audio"?ne.audioFormat:`${ne.quality} ${ne.container}`,startTime:S?Date.now():null,failedVideos:[]};return _e.add(se),S&&_e.startDownload(se),se}async function oe(){const k=e(v).trim();if(!k){He("Please enter a URL","error");return}const S=Ei(k);try{new URL(S)}catch{He("Please enter a valid URL","error");return}if(Dl(S)&&n(C,{text:"okay dude are you just gonna download porn"},!0),e(f)==="images"&&Mi(S)){He("YouTube doesn't support image downloads, use video or audio","error");return}n(l,!0);const A=e(f)==="auto"?"video":e(f),N=r();let J=!1;if(A!=="images"&&Ii(S))if(N.playlistPreference==="video")J=!1;else if(N.playlistPreference==="playlist")J=!0;else{const ne=await We();if(ne===null){n(l,!1);return}J=ne==="playlist"}const je=Ri();try{K("loading",A==="images"?"fetching gallery info...":"fetching video info...");let ne;if(A==="images"){const ie=await fetch(`${Fe()}/api/gallery/metadata?url=${encodeURIComponent(S)}`),Le=ie.headers.get("content-type");if(!ie.ok){let tt="Failed to fetch gallery info";if(Le!=null&&Le.includes("application/json"))tt=(await ie.json()).error||tt;else{const Ae=await ie.text();tt=Ae.includes("Cloudflare")||Ae.includes("403")?"Access denied (VPN blocked?)":`Server error: ${ie.status}`}throw new Error(tt)}ne=await ie.json(),ne.title=ne.title||"Image"}else{const ie=await fetch(`${Fe()}/api/metadata?url=${encodeURIComponent(S)}&playlist=${J}`),Le=ie.headers.get("content-type");if(!ie.ok){let tt="Failed to fetch metadata";if(Le!=null&&Le.includes("application/json")){const Ae=await ie.json();if(Ae.clipUnsupported){K("error","Could not parse YouTube clip"),He("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),n(l,!1);return}tt=Ae.error||tt}else{const Ae=await ie.text();tt=`Server error ${ie.status} (likely VPN blocked)`}throw new Error(tt)}ne=await ie.json()}const b=ne.title,z=ne.isPlaylist&&J,se=A==="images"||ne.isGallery===!0;let te=ne.isGallery===!0?"images":A;const ze=ne.videoCount||ne.imageCount||0,me=await q(ne,N);if(me===null){n(l,!1);return}me==="video"&&(te="slideshow"),ne.usingCookies&&He("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3);const De={id:je,title:b,url:S,format:te,stage:"starting",status:"initializing...",progress:0,isPlaylist:z,isGallery:se,videoCount:ze,currentVideo:0,currentVideoTitle:"",formatDisplay:te==="slideshow"?"slideshow":se?"images":te==="audio"?N.audioFormat:`${N.quality} ${N.container}`,failedVideos:[],startTime:Date.now()};_e.add(De),_e.startDownload(De),n(v,""),Ee()}catch(ne){K("error",ne.message||"Download failed"),He(ne.message||"Download failed","error")}finally{n(l,!1)}}function X(k){k.key==="Enter"&&oe()}async function D(){n(p,!1);const k=e(v).trim();if(!k){He("Please enter a URL","error");return}try{new URL(k)}catch{He("Please enter a valid URL","error");return}await Z(k),n(v,"")}function O(){n(p,!1),n(w,""),n(d,!0)}async function re(){const k=e(w).split(`
`).map(S=>S.trim()).filter(S=>{try{return new URL(S),!0}catch{return!1}});if(k.length===0){He("No valid URLs found","error");return}n(d,!1),He(`Adding ${k.length} URLs to queue...`,"info");for(const S of k)await Z(S,!1);He(`${k.length} items added to queue`,"success")}let U=E(!1),V=be(()=>"updates"in i()),W=E(!1),ae=E(!1),we=null;Ps(()=>{e(V)&&(n(W,!0),n(ae,!1),we&&(clearTimeout(we),we=null))});function Se(){e(ae)||(n(ae,!0),Mr("/"),we=setTimeout(()=>{n(W,!1),n(ae,!1),we=null},350))}var pe=vv();ht("click",zr,k=>{k.target.closest(".yoink-btn-wrapper")||n(p,!1)});var Me=he(pe);Nc(Me,{extraContent:S=>{Ir(S,{})}});var $e=u(Me,2),Be=c($e),H=u(c(Be),2);{var G=k=>{var S=Vc();let A;S.__click=xe;var N=c(S);Q(J=>{A=ye(S,1,"splash svelte-et6md",null,A,J),wt(S,e(C).link?"cursor: pointer;":""),L(N,e(C).text)},[()=>{var J,je,ne;return{fancy:(J=e(C).classes)==null?void 0:J.includes("fancy"),clickable:(je=e(C).classes)==null?void 0:je.includes("clickable"),rainbow:(ne=e(C).classes)==null?void 0:ne.includes("rainbow")}}]),g(k,S)};B(H,k=>{e(C)&&k(G)})}var Te=u(Be,2),Ke=c(Te),Ze=u(c(Ke),2);Ze.__keydown=X,as(Ze,k=>I=k,()=>I);var Re=u(Ze,2);{var Ve=k=>{var S=Wc();S.__click=()=>{n(v,""),I==null||I.focus()},g(k,S)},ut=k=>{var S=Jc();S.__click=Pe,g(k,S)};B(Re,k=>{e(v)?k(Ve):k(ut,!1)})}var pt=u(Ke,2),mt=c(pt);at(mt,21,()=>Y,ct,(k,S)=>{var A=Kc();let N;A.__click=()=>n(f,e(S).id,!0);var J=c(A);{var je=se=>{var te=Yc();g(se,te)},ne=se=>{var te=Oe(),ze=he(te);{var me=ie=>{var Le=Gc();g(ie,Le)},De=ie=>{var Le=Oe(),tt=he(Le);{var Ae=nt=>{var et=Qc();g(nt,et)},qe=nt=>{var et=Oe(),Ye=he(et);{var it=rt=>{var st=Xc();g(rt,st)};B(Ye,rt=>{e(S).icon==="image"&&rt(it)},!0)}g(nt,et)};B(tt,nt=>{e(S).icon==="audio"?nt(Ae):nt(qe,!1)},!0)}g(ie,Le)};B(ze,ie=>{e(S).icon==="video"?ie(me):ie(De,!1)},!0)}g(se,te)};B(J,se=>{e(S).icon==="bolt"?se(je):se(ne,!1)})}var b=u(J,2),z=c(b);Q(()=>{N=ye(A,1,"segment svelte-et6md",null,N,{active:e(f)===e(S).id}),L(z,e(S).label)}),g(k,A)});var gt=u(mt,2);let ot;var dt=c(gt);dt.__click=oe;var Kt=u(c(dt)),Rt=u(dt,2);Rt.__click=k=>{k.stopPropagation(),n(p,!e(p))};var St=u(Rt,2);{var qt=k=>{var S=Zc(),A=c(S);A.__click=D;var N=u(A,2);N.__click=O,g(k,S)};B(St,k=>{e(p)&&k(qt)})}var cs=u(pt,2);{var Zt=k=>{var S=ev(),A=c(S);{var N=je=>{La(je)};B(A,je=>{e(h)==="loading"&&je(N)})}var J=u(A);Q(()=>{ye(S,1,`status ${e(h)??""}`,"svelte-et6md"),L(J,` ${e(m)??""}`)}),g(k,S)};B(cs,k=>{e(h)&&k(Zt)})}var es=u($e,2);Ac(es);var fe=u(es,2);{var R=k=>{var S=tv();S.__click=z=>{z.target===z.currentTarget&&ke()};var A=c(S),N=u(c(A),4),J=c(N);J.__click=()=>ge("video",e(U));var je=u(J,2);je.__click=()=>ge("playlist",e(U));var ne=u(N,2),b=c(ne);Vn(b,()=>e(U),z=>n(U,z)),g(k,S)};B(fe,k=>{e(x)&&k(R)})}var $=u(fe,2);{var ee=k=>{var S=sv();S.__click=z=>{z.target===z.currentTarget&&j()};var A=c(S),N=u(c(A),4),J=c(N);J.__click=()=>ue("photos",e(U));var je=u(J,2);je.__click=()=>ue("video",e(U));var ne=u(N,2),b=c(ne);Vn(b,()=>e(U),z=>n(U,z)),g(k,S)};B($,k=>{e(_)&&k(ee)})}var de=u($,2);{var ve=k=>{var S=rv();S.__click=te=>{te.target===te.currentTarget&&n(d,!1)};var A=c(S),N=u(c(A),4);bt(N,"placeholder",`https://youtube.com/watch?v=...
https://youtube.com/watch?v=...
https://youtube.com/watch?v=...`);var J=u(N,2),je=c(J),ne=c(je),b=u(J,2),z=c(b);z.__click=()=>n(d,!1);var se=u(z,2);se.__click=re,Q(()=>L(ne,e(F))),rs(N,()=>e(w),te=>n(w,te)),g(k,S)};B(de,k=>{e(d)&&k(ve)})}var le=u(de,2);{var Ie=k=>{var S=cv();let A;S.__click=b=>{b.target===b.currentTarget&&Se()},S.__keydown=b=>{b.key==="Escape"&&Se()};var N=c(S),J=c(N),je=u(c(J),2);je.__click=Se;var ne=u(J,2);at(ne,17,()=>Aa,ct,(b,z)=>{var se=lv(),te=c(se),ze=c(te),me=c(ze),De=u(ze,2),ie=c(De),Le=u(te,2),tt=c(Le),Ae=u(Le,2),qe=u(Ae,2);at(qe,21,()=>e(z).content.split(`

`),ct,(nt,et)=>{var Ye=Oe(),it=he(Ye);{var rt=vt=>{var $t=nv(),bs=c($t);Q(Vs=>L(bs,Vs),[()=>e(et).replace("## ","")]),g(vt,$t)},st=vt=>{var $t=Oe(),bs=he($t);{var Vs=Ms=>{var $r=av();at($r,21,()=>e(et).split(`
`),ct,(Sn,ci)=>{var vi=Oe(),Oa=he(vi);{var Fa=Cn=>{var ui=iv(),Ua=c(ui);Q(Ha=>L(Ua,Ha),[()=>e(ci).replace("- ","")]),g(Cn,ui)};B(Oa,Cn=>{e(ci).startsWith("- ")&&Cn(Fa)})}g(Sn,vi)}),g(Ms,$r)},qr=Ms=>{var $r=ov(),Sn=c($r);Q(()=>L(Sn,e(et))),g(Ms,$r)};B(bs,Ms=>{e(et).startsWith("- ")?Ms(Vs):Ms(qr,!1)},!0)}g(vt,$t)};B(it,vt=>{e(et).startsWith("## ")?vt(rt):vt(st,!1)})}g(nt,Ye)}),Q(()=>{L(me,e(z).version),L(ie,e(z).date),L(tt,e(z).title),bt(Ae,"src",e(z).image),bt(Ae,"alt",e(z).title)}),g(b,se)}),Q(()=>A=ye(S,1,"updates-overlay svelte-et6md",null,A,{closing:e(ae)})),g(k,S)};B(le,k=>{e(W)&&k(Ie)})}Q(()=>{ot=ye(gt,1,"yoink-btn-wrapper svelte-et6md",null,ot,{open:e(p)}),dt.disabled=e(l),L(Kt,` ${e(l)?"loading...":"yoink"}`)}),ht("focus",Ze,Ee),rs(Ze,()=>e(v),k=>n(v,k)),g(t,pe),kt(),a()}Mt(["click","keydown"]);var dv=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),fv=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),pv=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),hv=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg>'),gv=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),mv=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),wv=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),_v=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),yv=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg>'),bv=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),xv=P("<a><!> <span> </span></a>"),kv=P('<div class="nav-dropdown svelte-67r2h0"></div>'),Sv=P('<header class="svelte-67r2h0"><div class="header-center svelte-67r2h0"><a href="/" class="logo-link svelte-67r2h0"><span class="logo-text svelte-67r2h0">yoink</span> <span class="logo-tld svelte-67r2h0">.tools</span></a></div> <div class="header-right svelte-67r2h0"><!> <div class="nav-dropdown-wrapper svelte-67r2h0"><button class="nav-trigger svelte-67r2h0"><!> <span> </span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div> <a href="/settings" aria-label="Settings"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></a></div></header>');function vr(t,s){const r=()=>Xt(yn,"$path",i),[i,o]=ys();let a=E(!1);const v=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/trim",label:"trim",icon:"trim"},{href:"/transcribe",label:"transcribe",icon:"transcribe"}];let f=be(()=>v.find(K=>K.href===r())||v[0]),l=be(()=>r()==="/settings");var h=Sv();ht("click",zr,K=>{K.target.closest(".nav-dropdown-wrapper")||n(a,!1)});var m=u(c(h),2),x=c(m);{var d=K=>{var Ee=Oe(),We=he(Ee);Pa(We,()=>s.extraContent),g(K,Ee)};B(x,K=>{s.extraContent&&K(d)})}var p=u(x,2),w=c(p);w.__click=()=>n(a,!e(a));var T=c(w);{var _=K=>{var Ee=dv();g(K,Ee)},y=K=>{var Ee=Oe(),We=he(Ee);{var ge=Ne=>{var ue=fv();g(Ne,ue)},ke=Ne=>{var ue=Oe(),j=he(ue);{var q=oe=>{var X=pv();g(oe,X)},Z=oe=>{var X=Oe(),D=he(X);{var O=U=>{var V=hv();g(U,V)},re=U=>{var V=Oe(),W=he(V);{var ae=we=>{var Se=gv();g(we,Se)};B(W,we=>{e(f).icon==="transcribe"&&we(ae)},!0)}g(U,V)};B(D,U=>{e(f).icon==="trim"?U(O):U(re,!1)},!0)}g(oe,X)};B(j,oe=>{e(f).icon==="compress"?oe(q):oe(Z,!1)},!0)}g(Ne,ue)};B(We,Ne=>{e(f).icon==="convert"?Ne(ge):Ne(ke,!1)},!0)}g(K,Ee)};B(T,K=>{e(f).icon==="download"?K(_):K(y,!1)})}var C=u(T,2),I=c(C),F=u(C,2);let Y;var ce=u(w,2);{var xe=K=>{var Ee=kv();at(Ee,21,()=>v,ct,(We,ge)=>{var ke=xv();let Ne;ke.__click=()=>n(a,!1);var ue=c(ke);{var j=X=>{var D=mv();g(X,D)},q=X=>{var D=Oe(),O=he(D);{var re=V=>{var W=wv();g(V,W)},U=V=>{var W=Oe(),ae=he(W);{var we=pe=>{var Me=_v();g(pe,Me)},Se=pe=>{var Me=Oe(),$e=he(Me);{var Be=G=>{var Te=yv();g(G,Te)},H=G=>{var Te=Oe(),Ke=he(Te);{var Ze=Re=>{var Ve=bv();g(Re,Ve)};B(Ke,Re=>{e(ge).icon==="transcribe"&&Re(Ze)},!0)}g(G,Te)};B($e,G=>{e(ge).icon==="trim"?G(Be):G(H,!1)},!0)}g(pe,Me)};B(ae,pe=>{e(ge).icon==="compress"?pe(we):pe(Se,!1)},!0)}g(V,W)};B(O,V=>{e(ge).icon==="convert"?V(re):V(U,!1)},!0)}g(X,D)};B(ue,X=>{e(ge).icon==="download"?X(j):X(q,!1)})}var Z=u(ue,2),oe=c(Z);Q(()=>{Ne=ye(ke,1,"nav-dropdown-item svelte-67r2h0",null,Ne,{active:e(ge).href===e(f).href}),bt(ke,"href",e(ge).href),L(oe,e(ge).label)}),g(We,ke)}),g(K,Ee)};B(ce,K=>{e(a)&&K(xe)})}var Ce=u(p,2);let Pe;Q(()=>{L(I,e(f).label),Y=ye(F,0,"chevron svelte-67r2h0",null,Y,{open:e(a)}),Pe=ye(Ce,1,"settings-btn svelte-67r2h0",null,Pe,{active:e(l)})}),g(t,h),o()}Mt(["click"]);var Cv=P('<footer class="svelte-1dij6pu"><a href="/" class="svelte-1dij6pu">yoink.tools</a> - powered by <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-1dij6pu">yt-dlp</a> Â· <a href="/privacy" class="svelte-1dij6pu">privacy</a></footer>');function Rr(t){var s=Cv();g(t,s)}var Tv=P("<button><span> </span></button>"),jv=P("<button> </button>"),zv=P("<button> </button>"),Pv=P("<button> </button>"),Ev=P(`<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">video</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">video quality</div> <div class="quality-grid svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">if preferred quality isn't available, the next best option will be used. 1080p is recommended for most uses.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">preferred codec</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">h264: best compatibility, max 1080p. av1: best quality & efficiency, supports 8k & HDR. vp9: same quality as av1 but ~2x larger.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">file container</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp4 has the best compatibility. webm is great for web. mkv supports more features but has limited playback support.</p></div></section>`),Mv=P("<button> </button>"),Iv=P("<button> </button>"),Rv=P('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">audio</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio format</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp3: universal compatibility. m4a: better quality at same size. opus: best compression. flac/wav: lossless quality.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio bitrate</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">higher bitrate = better quality but larger file size. 320kbps is CD-quality for most people.</p></div></section>'),qv=P("<button> </button>"),$v=P("<button> </button>"),Bv=P("<button> </button>"),Dv=P('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">downloads</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">filename style</div> <div class="segmented-control svelte-1ozf5k3"></div> <div class="filename-preview svelte-1ozf5k3"><code class="svelte-1ozf5k3"> </code></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">twitter/x gifs as gif</div> <p class="setting-description svelte-1ozf5k3">automatically convert twitter/x "gifs" (which are actually videos) to real gif files. turn off to keep them as mp4.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">playlist behavior</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">when a link contains a playlist, should we download just the video or the entire playlist? "ask me" will show a popup each time.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">tiktok photo posts</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">tiktok photo posts have background music. download just the photos, or create a slideshow video with the audio? "ask me" will show a popup each time.</p></div></section>'),Nv=P('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">advanced</h2> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">allow h265 codec</div> <p class="setting-description svelte-1ozf5k3">enables downloading h265/HEVC videos for platforms like TikTok. higher quality but may have compatibility issues with some players.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">embed metadata</div> <p class="setting-description svelte-1ozf5k3">include title, artist, and other metadata in downloaded files.</p></div> <button></button></div></div> <div class="divider svelte-1ozf5k3"></div> <button class="reset-btn svelte-1ozf5k3">reset all settings</button></section>'),Lv=P('<!> <main class="svelte-1ozf5k3"><div class="page-header svelte-1ozf5k3"><h1 class="svelte-1ozf5k3">settings</h1> <p class="svelte-1ozf5k3">customize your download experience</p></div> <nav class="settings-nav svelte-1ozf5k3"></nav> <!> <!> <!> <!></main> <!>',1);function Av(t,s){xt(s,!0);const r=()=>Xt(Os,"$settings",i),[i,o]=ys();let a=E("video"),v=be(r);const f=[{id:"video",label:"video"},{id:"audio",label:"audio"},{id:"downloads",label:"downloads"},{id:"advanced",label:"advanced"}],l=["best","4k","1440p","1080p","720p","480p","360p"],h={best:"8k+","4k":"4k","1440p":"1440p","1080p":"1080p","720p":"720p","480p":"480p","360p":"360p"},m=[{value:"h264",label:"h264 + aac"},{value:"av1",label:"av1 + opus"},{value:"vp9",label:"vp9 + opus"}],x=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mkv",label:"mkv"}],d=[{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"opus",label:"opus"},{value:"flac",label:"flac"},{value:"wav",label:"wav"}],p=[{value:"320",label:"320 kbps"},{value:"256",label:"256 kbps"},{value:"192",label:"192 kbps"},{value:"128",label:"128 kbps"}],w=[{value:"classic",label:"classic"},{value:"basic",label:"basic"},{value:"pretty",label:"pretty"},{value:"nerdy",label:"nerdy"}],T=[{value:"ask",label:"ask me"},{value:"video",label:"just video"},{value:"playlist",label:"full playlist"}],_=[{value:"ask",label:"ask me"},{value:"photos",label:"photos only"},{value:"video",label:"video + audio"}];let y=be(()=>{const j=e(v).container||"mp4",q={classic:`Video Title (${e(v).quality}).${j}`,basic:`Video Title.${j}`,pretty:`Video Title - Author (${e(v).quality}, ${e(v).codec}).${j}`,nerdy:`Video_Title_${e(v).quality}_${e(v).codec}_aac.${j}`};return q[e(v).filenameStyle]||q.basic});function C(j,q){Os.setSetting(j,q)}function I(){confirm("Reset all settings to defaults?")&&(Os.reset(),He("Settings reset!","success"))}var F=Lv(),Y=he(F);vr(Y,{extraContent:q=>{Ir(q,{})}});var ce=u(Y,2),xe=u(c(ce),2);at(xe,21,()=>f,ct,(j,q)=>{var Z=Tv();let oe;Z.__click=()=>n(a,e(q).id,!0);var X=c(Z),D=c(X);Q(()=>{oe=ye(Z,1,"settings-nav-item svelte-1ozf5k3",null,oe,{active:e(a)===e(q).id}),L(D,e(q).label)}),g(j,Z)});var Ce=u(xe,2);{var Pe=j=>{var q=Ev(),Z=u(c(q),2),oe=u(c(Z),2);at(oe,21,()=>l,ct,(U,V)=>{var W=jv();let ae;W.__click=()=>C("quality",e(V));var we=c(W);Q(()=>{ae=ye(W,1,"quality-option svelte-1ozf5k3",null,ae,{active:e(v).quality===e(V)}),L(we,h[e(V)])}),g(U,W)});var X=u(Z,2),D=u(c(X),2);at(D,21,()=>m,ct,(U,V)=>{var W=zv();let ae;W.__click=()=>C("codec",e(V).value);var we=c(W);Q(()=>{ae=ye(W,1,"segment svelte-1ozf5k3",null,ae,{active:e(v).codec===e(V).value}),L(we,e(V).label)}),g(U,W)});var O=u(X,2),re=u(c(O),2);at(re,21,()=>x,ct,(U,V)=>{var W=Pv();let ae;W.__click=()=>C("container",e(V).value);var we=c(W);Q(()=>{ae=ye(W,1,"segment svelte-1ozf5k3",null,ae,{active:e(v).container===e(V).value}),L(we,e(V).label)}),g(U,W)}),g(j,q)};B(Ce,j=>{e(a)==="video"&&j(Pe)})}var K=u(Ce,2);{var Ee=j=>{var q=Rv(),Z=u(c(q),2),oe=u(c(Z),2);at(oe,21,()=>d,ct,(O,re)=>{var U=Mv();let V;U.__click=()=>C("audioFormat",e(re).value);var W=c(U);Q(()=>{V=ye(U,1,"segment svelte-1ozf5k3",null,V,{active:e(v).audioFormat===e(re).value}),L(W,e(re).label)}),g(O,U)});var X=u(Z,2),D=u(c(X),2);at(D,21,()=>p,ct,(O,re)=>{var U=Iv();let V;U.__click=()=>C("audioBitrate",e(re).value);var W=c(U);Q(()=>{V=ye(U,1,"segment svelte-1ozf5k3",null,V,{active:e(v).audioBitrate===e(re).value}),L(W,e(re).label)}),g(O,U)}),g(j,q)};B(K,j=>{e(a)==="audio"&&j(Ee)})}var We=u(K,2);{var ge=j=>{var q=Dv(),Z=u(c(q),2),oe=u(c(Z),2);at(oe,21,()=>w,ct,(Me,$e)=>{var Be=qv();let H;Be.__click=()=>C("filenameStyle",e($e).value);var G=c(Be);Q(()=>{H=ye(Be,1,"segment svelte-1ozf5k3",null,H,{active:e(v).filenameStyle===e($e).value}),L(G,e($e).label)}),g(Me,Be)});var X=u(oe,2),D=c(X),O=c(D),re=u(Z,2),U=c(re),V=u(c(U),2);let W;V.__click=()=>C("twitterGifs",!(!e(v).twitterGifs||e(v).twitterGifs===void 0));var ae=u(re,2),we=u(c(ae),2);at(we,21,()=>T,ct,(Me,$e)=>{var Be=$v();let H;Be.__click=()=>C("playlistPreference",e($e).value==="ask"?null:e($e).value);var G=c(Be);Q(()=>{H=ye(Be,1,"segment svelte-1ozf5k3",null,H,{active:(e(v).playlistPreference===null?"ask":e(v).playlistPreference)===e($e).value}),L(G,e($e).label)}),g(Me,Be)});var Se=u(ae,2),pe=u(c(Se),2);at(pe,21,()=>_,ct,(Me,$e)=>{var Be=Bv();let H;Be.__click=()=>C("tiktokCarouselPreference",e($e).value==="ask"?null:e($e).value);var G=c(Be);Q(()=>{H=ye(Be,1,"segment svelte-1ozf5k3",null,H,{active:(e(v).tiktokCarouselPreference===null?"ask":e(v).tiktokCarouselPreference)===e($e).value}),L(G,e($e).label)}),g(Me,Be)}),Q(()=>{L(O,e(y)),W=ye(V,1,"toggle svelte-1ozf5k3",null,W,{active:e(v).twitterGifs!==!1})}),g(j,q)};B(We,j=>{e(a)==="downloads"&&j(ge)})}var ke=u(We,2);{var Ne=j=>{var q=Nv(),Z=u(c(q),2),oe=c(Z),X=u(c(oe),2);let D;X.__click=()=>C("h265",!e(v).h265);var O=u(Z,2),re=c(O),U=u(c(re),2);let V;U.__click=()=>C("metadata",e(v).metadata===!1);var W=u(O,4);W.__click=I,Q(()=>{D=ye(X,1,"toggle svelte-1ozf5k3",null,D,{active:e(v).h265}),V=ye(U,1,"toggle svelte-1ozf5k3",null,V,{active:e(v).metadata!==!1})}),g(j,q)};B(ke,j=>{e(a)==="advanced"&&j(Ne)})}var ue=u(ce,2);Rr(ue),g(t,F),kt(),o()}Mt(["click"]);var Ov=P('<span class="progress-label svelte-1untuf7"> </span>'),Fv=P('<div class="progress-wrapper svelte-1untuf7"><!> <div class="progress-track svelte-1untuf7" role="progressbar"><div class="progress-fill svelte-1untuf7"></div></div></div>');function xn(t,s){let r=ft(s,"percent",3,0),i=ft(s,"label",3,""),o=be(()=>Math.min(100,Math.max(0,r())));var a=Fv(),v=c(a);{var f=m=>{var x=Ov(),d=c(x);Q(()=>L(d,i())),g(m,x)};B(v,m=>{i()&&m(f)})}var l=u(v,2);bt(l,"aria-valuemin",0),bt(l,"aria-valuemax",100);var h=c(l);Q(()=>{bt(l,"aria-valuenow",e(o)),wt(h,`width: ${e(o)??""}%`)}),g(t,a)}const Mn=50*1024*1024;async function kn(t,s){const r=Fe(),i=Math.ceil(t.size/Mn),o=await fetch(`${r}/api/upload/init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:t.name,fileSize:t.size,totalChunks:i})});if(!o.ok){let f="Failed to initialize upload";try{f=(await o.json()).error||f}catch{f=await o.text().catch(()=>f)}throw new Error(f)}const{uploadId:a}=await o.json();for(let f=0;f<i;f++){const l=f*Mn,h=Math.min(l+Mn,t.size),m=t.slice(l,h),x=new FormData;x.append("chunk",m);const d=await fetch(`${r}/api/upload/chunk/${a}/${f}`,{method:"POST",body:x});if(!d.ok){let w=`Failed to upload chunk ${f+1}`;try{w=(await d.json()).error||w}catch{w=await d.text().catch(()=>w)}throw new Error(w)}const p=(f+1)/i*100;s(p)}const v=await fetch(`${r}/api/upload/complete/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!v.ok){let f="Failed to complete upload";try{f=(await v.json()).error||f}catch{f=await v.text().catch(()=>f)}throw new Error(f)}return await v.json()}var Uv=P('<div class="input-tabs svelte-17hyuhr"><button>upload file</button> <button>paste link</button></div> <button type="button"><svg class="drop-zone-icon svelte-17hyuhr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-17hyuhr">drop a file here or click to browse</p> <p class="drop-zone-hint svelte-17hyuhr">supports video and audio files (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>',1),Hv=P("<button> </button>"),Vv=P('<div class="input-tabs svelte-17hyuhr"><button>upload file</button> <button>paste link</button></div> <div class="url-input-section svelte-17hyuhr"><input type="url" class="url-input svelte-17hyuhr" placeholder="https://youtube.com/watch?v=..."/></div> <div class="convert-options svelte-17hyuhr"><div class="option-label svelte-17hyuhr">convert to</div> <div class="segmented-control svelte-17hyuhr"></div></div> <button class="convert-btn svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> </button>',1),Wv=Ue('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Jv=Ue('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),Yv=P("<button> </button>"),Gv=P('<div class="file-info svelte-17hyuhr"><div class="file-header svelte-17hyuhr"><div class="file-icon svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><!></svg></div> <div class="file-details svelte-17hyuhr"><div class="file-name svelte-17hyuhr"> </div> <div class="file-size svelte-17hyuhr"> </div></div> <button class="file-remove svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="convert-options svelte-17hyuhr"><div class="option-label svelte-17hyuhr">convert to</div> <div class="segmented-control svelte-17hyuhr"></div></div> <button class="convert-btn svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> </button></div>'),Qv=P('<div class="progress-container svelte-17hyuhr"><!></div>'),Xv=P("<div> </div>"),Kv=P('<!> <main class="svelte-17hyuhr"><div class="page-header svelte-17hyuhr"><h1 class="svelte-17hyuhr">convert</h1> <p class="svelte-17hyuhr">change video and audio file formats</p></div> <div class="converter svelte-17hyuhr"><!> <!> <!></div></main> <!>',1);function Zv(t,s){xt(s,!0);let r=E(null),i=E("mp4"),o=E(""),a=E("file"),v=E(null);const f=bn();f.url&&(n(o,f.url,!0),n(a,"url"));let l=E(!1),h=E(0),m=E(""),x=E(null),d=E(""),p=E(!1),w;const T=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"wav",label:"wav"}];function _(j){return j.type.startsWith("audio/")||["mp3","m4a","wav","flac","ogg","opus"].some(q=>j.name.toLowerCase().endsWith("."+q))}function y(j){if(!j)return;const q=8*1024*1024*1024;if(j.size>q){n(x,"error"),n(d,"File too large. Maximum size is 8GB.");return}n(r,j,!0),n(x,null),n(d,"")}function C(){n(r,null),n(h,0),n(m,""),n(x,null),n(d,""),w&&(w.value="")}async function I(j){let q="";try{q=await(await j.blob()).text()}catch{q=await j.text().catch(()=>"")}try{return JSON.parse(q).error||`Request failed with status ${j.status}`}catch{return q||`Request failed with status ${j.status}`}}async function F(){const j=e(a)==="url"&&e(o).trim();if(!e(r)&&!j||e(l))return;n(l,!0),n(h,0),n(x,null),n(d,"");const q=Date.now().toString()+Math.random().toString(36).substr(2,9),Z=j?`URL â .${e(i)}`:`${e(r).name} â .${e(i)}`;_e.add({id:q,title:Z,type:"convert",stage:j?"downloading":"uploading",status:j?"downloading media...":"uploading...",progress:0,startTime:Date.now()});let oe=null;try{oe=tn();let X;if(j){n(m,"Downloading media..."),_e.updateItem(q,{status:"downloading media..."});const D=await fetch(`${Fe()}/api/fetch-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(o).trim()})});if(!D.ok){let Se="Failed to download from URL";try{Se=(await D.json()).error||Se}catch{}throw new Error(Se)}const O=await D.json();n(v,O,!0),_e.updateItem(q,{title:`${O.fileName} â .${e(i)}`,stage:"converting",status:"converting...",progress:0}),n(h,0),n(m,"Converting...");const re=await fetch(`${Fe()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:O.filePath,fileName:O.fileName,format:e(i)})});if(!re.ok)throw new Error(await I(re));const{jobId:U}=await re.json();let V=0;for(;;){if(V>=300)throw new Error("Conversion timed out after 10 minutes");V++,await new Promise(Be=>setTimeout(Be,2e3));const Se=new AbortController,pe=setTimeout(()=>Se.abort(),1e4);let Me;try{Me=await fetch(`${Fe()}/api/job/${U}/status`,{signal:Se.signal})}finally{clearTimeout(pe)}if(!Me.ok)throw Me.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const $e=await Me.json();if($e.status==="error")throw new Error($e.error||"Conversion failed");if(n(h,$e.progress||0,!0),n(m,$e.message||"processing...",!0),_e.updateItem(q,{progress:$e.progress||0,status:$e.message||"converting..."}),$e.status==="complete")break}if(X=await fetch(`${Fe()}/api/job/${U}/download`),!X.ok)throw new Error(await I(X));n(h,100),n(m,"complete!");const W=X.headers.get("Content-Disposition");let ae=O.fileName.replace(/\.[^.]+$/,"")+"."+e(i);if(W){const Se=W.match(/filename="?([^"]+)"?/);Se&&(ae=Se[1])}const we=await X.blob();Hr(we,ae),n(x,"success"),n(d,"conversion complete! download started."),_e.updateItem(q,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>_e.remove(q),5e3)}else{const D=e(r).size>94371840;if(n(m,"Uploading..."),D){const{filePath:V,fileName:W}=await kn(e(r),pe=>{n(h,pe,!0),n(m,"Uploading..."),_e.updateItem(q,{progress:pe,status:"uploading..."})});n(h,0),n(m,"Converting..."),_e.updateItem(q,{stage:"converting",status:"converting...",progress:0});const ae=await fetch(`${Fe()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:V,fileName:W,format:e(i)})});if(!ae.ok)throw new Error(await I(ae));const{jobId:we}=await ae.json();let Se=0;for(;;){if(Se>=300)throw new Error("Conversion timed out after 10 minutes");Se++,await new Promise(H=>setTimeout(H,2e3));const pe=new AbortController,Me=setTimeout(()=>pe.abort(),1e4);let $e;try{$e=await fetch(`${Fe()}/api/job/${we}/status`,{signal:pe.signal})}finally{clearTimeout(Me)}if(!$e.ok)throw $e.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const Be=await $e.json();if(Be.status==="error")throw new Error(Be.error||"Conversion failed");if(n(h,Be.progress||0,!0),n(m,Be.message||"processing...",!0),_e.updateItem(q,{progress:Be.progress||0,status:Be.message||"converting..."}),Be.status==="complete")break}X=await fetch(`${Fe()}/api/job/${we}/download`)}else X=await new Promise((V,W)=>{const ae=new XMLHttpRequest;ae.open("POST",`${Fe()}/api/convert`),ae.upload.onprogress=Se=>{if(Se.lengthComputable){const pe=Math.round(Se.loaded/Se.total*90);n(h,pe,!0),n(m,`uploading... ${pe}%`),_e.updateItem(q,{progress:pe,status:`uploading... ${pe}%`})}},ae.onload=()=>{n(h,95),n(m,"processing..."),_e.updateItem(q,{stage:"converting",status:"converting...",progress:95}),V(new Response(ae.response,{status:ae.status,statusText:ae.statusText,headers:{"Content-Disposition":ae.getResponseHeader("Content-Disposition")||""}}))},ae.onerror=()=>W(new Error("Network error during upload")),ae.responseType="blob";const we=new FormData;we.append("file",e(r)),we.append("format",e(i)),ae.send(we)});if(!X.ok)throw new Error(await I(X));n(h,100),n(m,"complete!");const O=X.headers.get("Content-Disposition");let re=e(r).name.replace(/\.[^.]+$/,"")+"."+e(i);if(O){const V=O.match(/filename="?([^"]+)"?/);V&&(re=V[1])}const U=await X.blob();Hr(U,re),n(x,"success"),n(d,"conversion complete! download started."),_e.updateItem(q,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>_e.remove(q),5e3)}}catch(X){n(x,"error"),n(d,X.message||"conversion failed",!0),n(h,0),n(m,""),_e.updateItem(q,{stage:"error",status:X.message||"conversion failed"})}finally{n(l,!1),oe&&sn(oe)}}var Y=Kv(),ce=he(Y);vr(ce,{extraContent:q=>{Ir(q,{})}});var xe=u(ce,2),Ce=u(c(xe),2),Pe=c(Ce);{var K=j=>{var q=Uv(),Z=he(q),oe=c(Z);let X;oe.__click=()=>n(a,"file");var D=u(oe,2);let O;D.__click=()=>n(a,"url");var re=u(Z,2);let U;re.__click=()=>w==null?void 0:w.click();var V=u(c(re),6);V.__change=W=>{var ae;y((ae=W.target.files)==null?void 0:ae[0]),W.target.value=""},as(V,W=>w=W,()=>w),Q(()=>{X=ye(oe,1,"input-tab svelte-17hyuhr",null,X,{active:e(a)==="file"}),O=ye(D,1,"input-tab svelte-17hyuhr",null,O,{active:e(a)==="url"}),U=ye(re,1,"drop-zone svelte-17hyuhr",null,U,{dragover:e(p)})}),ht("dragover",re,W=>{W.preventDefault(),n(p,!0)}),ht("dragleave",re,W=>{W.preventDefault(),n(p,!1)}),ht("drop",re,W=>{var ae,we;W.preventDefault(),n(p,!1),y((we=(ae=W.dataTransfer)==null?void 0:ae.files)==null?void 0:we[0])}),g(j,q)},Ee=j=>{var q=Oe(),Z=he(q);{var oe=D=>{var O=Vv(),re=he(O),U=c(re);let V;U.__click=()=>n(a,"file");var W=u(U,2);let ae;W.__click=()=>n(a,"url");var we=u(re,2),Se=c(we),pe=u(we,2),Me=u(c(pe),2);at(Me,21,()=>T,ct,(H,G)=>{var Te=Hv();let Ke;Te.__click=()=>n(i,e(G).value,!0);var Ze=c(Te);Q(()=>{Ke=ye(Te,1,"segment svelte-17hyuhr",null,Ke,{active:e(i)===e(G).value}),L(Ze,e(G).label)}),g(H,Te)});var $e=u(pe,2);$e.__click=F;var Be=u(c($e));Q(H=>{V=ye(U,1,"input-tab svelte-17hyuhr",null,V,{active:e(a)==="file"}),ae=ye(W,1,"input-tab svelte-17hyuhr",null,ae,{active:e(a)==="url"}),$e.disabled=H,L(Be,` ${e(l)?"converting...":"convert"}`)},[()=>!e(o).trim()||e(l)]),rs(Se,()=>e(o),H=>n(o,H)),g(D,O)},X=D=>{var O=Gv(),re=c(O),U=c(re),V=c(U),W=c(V);{var ae=Re=>{var Ve=Wv();g(Re,Ve)},we=Re=>{var Ve=Jv();g(Re,Ve)};B(W,Re=>{e(r)&&_(e(r))?Re(ae):Re(we,!1)})}var Se=u(U,2),pe=c(Se),Me=c(pe),$e=u(pe,2),Be=c($e),H=u(Se,2);H.__click=C;var G=u(re,2),Te=u(c(G),2);at(Te,21,()=>T,ct,(Re,Ve)=>{var ut=Yv();let pt;ut.__click=()=>n(i,e(Ve).value,!0);var mt=c(ut);Q(()=>{pt=ye(ut,1,"segment svelte-17hyuhr",null,pt,{active:e(i)===e(Ve).value}),L(mt,e(Ve).label)}),g(Re,ut)});var Ke=u(G,2);Ke.__click=F;var Ze=u(c(Ke));Q(Re=>{bt(pe,"title",e(r).name),L(Me,e(r).name),L(Be,Re),Ke.disabled=e(l),L(Ze,` ${e(l)?"converting...":"convert"}`)},[()=>lr(e(r).size)]),g(D,O)};B(Z,D=>{e(a)==="url"&&!e(r)?D(oe):D(X,!1)},!0)}g(j,q)};B(Pe,j=>{!e(r)&&e(a)!=="url"?j(K):j(Ee,!1)})}var We=u(Pe,2);{var ge=j=>{var q=Qv(),Z=c(q);xn(Z,{get percent(){return e(h)},get label(){return e(m)}}),g(j,q)};B(We,j=>{e(l)&&j(ge)})}var ke=u(We,2);{var Ne=j=>{var q=Xv(),Z=c(q);Q(()=>{ye(q,1,`status ${e(x)??""}`,"svelte-17hyuhr"),L(Z,e(d))}),g(j,q)};B(ke,j=>{e(x)&&j(Ne)})}var ue=u(xe,2);Rr(ue),g(t,Y),kt()}Mt(["click","change"]);Mt(["click","keydown"]);var eu=P('<button type="button"><svg class="drop-zone-icon svelte-15o2uhu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-15o2uhu">drop a video here or click to browse</p> <p class="drop-zone-hint svelte-15o2uhu">supports mp4, webm, mov, mkv, avi (max 8GB)</p> <input type="file" accept="video/*" style="display: none;"/></button>'),tu=P('<div class="url-input-section svelte-15o2uhu"><input type="url" class="url-input svelte-15o2uhu" placeholder="https://youtube.com/watch?v=..."/></div>'),su=P('<div class="input-tabs svelte-15o2uhu"><button>upload file</button> <button>paste link</button></div> <!>',1),ru=P('<div class="file-info svelte-15o2uhu"><div class="file-header svelte-15o2uhu"><div class="file-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-15o2uhu"><div class="file-name svelte-15o2uhu"> </div> <div class="file-size svelte-15o2uhu"> </div></div> <button class="file-remove svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-15o2uhu"><span> </span> <span> </span></div></div>'),nu=P('<div class="file-info svelte-15o2uhu"><div class="file-header svelte-15o2uhu"><div class="file-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-15o2uhu"><div class="file-name svelte-15o2uhu"> </div> <div class="file-size svelte-15o2uhu"> </div></div> <button class="file-remove svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-15o2uhu"><span> </span> <span> </span></div></div>'),iu=P('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),au=P('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),ou=P('<div class="progress-container svelte-15o2uhu"><div class="progress-header svelte-15o2uhu"><span class="progress-status svelte-15o2uhu"> </span> <span class="progress-percent svelte-15o2uhu"> </span></div> <!> <div class="progress-details svelte-15o2uhu"> </div></div>'),lu=P('<div class="result-container svelte-15o2uhu"><div class="result-header svelte-15o2uhu"><div class="result-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-15o2uhu">compression complete!</div></div> <div class="result-stats svelte-15o2uhu"><div class="result-stat svelte-15o2uhu"><div class="result-stat-value svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">original</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value arrow svelte-15o2uhu">-></div> <div class="result-stat-label svelte-15o2uhu"></div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">compressed</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">saved</div></div></div> <button class="result-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> compress another</button></div>'),cu=P('<div class="quality-overlay svelte-15o2uhu"><div class="quality-modal svelte-15o2uhu"><div class="quality-modal-title svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg> quality warning</div> <div class="quality-gauge svelte-15o2uhu"><div class="quality-gauge-bg svelte-15o2uhu"></div> <div class="quality-gauge-mask svelte-15o2uhu"></div> <div class="quality-gauge-needle svelte-15o2uhu"></div> <div class="quality-gauge-center svelte-15o2uhu"></div> <div class="quality-gauge-value svelte-15o2uhu"><span> </span> <span class="quality-gauge-unit svelte-15o2uhu">kbps</span></div></div> <div class="quality-modal-message svelte-15o2uhu">Your video is <strong class="svelte-15o2uhu"> </strong> long. At this size, the estimated bitrate is very low and the output <strong class="svelte-15o2uhu">may look blocky or blurry</strong>. <br/><br/> For better results, try a <strong class="svelte-15o2uhu">shorter clip</strong> or a <strong class="svelte-15o2uhu">larger target size</strong>.</div> <div class="quality-modal-buttons svelte-15o2uhu"><button class="quality-modal-btn cancel svelte-15o2uhu">cancel</button> <button class="quality-modal-btn proceed svelte-15o2uhu">compress anyway</button></div></div></div>'),vu=P('<!> <main class="svelte-15o2uhu"><div class="page-header svelte-15o2uhu"><h1 class="svelte-15o2uhu">compress</h1> <p class="svelte-15o2uhu">shrink videos for discord, email, or anywhere!</p></div> <div class="compress-container svelte-15o2uhu"><!> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">target size</div> <div class="size-description svelte-15o2uhu">choose a size limit or enter a custom size</div> <div class="size-grid svelte-15o2uhu"></div> <div class="custom-size-row svelte-15o2uhu"><input type="number" class="custom-size-input svelte-15o2uhu" placeholder="custom" min="1" max="4096"/> <span class="custom-size-suffix svelte-15o2uhu">MB</span></div> <div class="estimate svelte-15o2uhu"><span class="estimate-label svelte-15o2uhu">estimated quality</span> <span> </span></div></div> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">encoding preset</div> <div class="size-description svelte-15o2uhu">quality = better compression, slower | fast = quicker encoding</div> <div class="preset-grid svelte-15o2uhu"></div> <label class="checkbox-row svelte-15o2uhu"><input type="checkbox" class="svelte-15o2uhu"/> <span class="svelte-15o2uhu">downscale for better quality (reduces blockiness)</span></label></div> <button class="compress-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg> </button> <!> <!></div></main> <!> <!>',1);function uu(t,s){xt(s,!0);let r=E(null),i=E(0),o=E(0),a=E(0),v=E(""),f=E("file"),l=E(null);const h=bn();h.url&&(n(v,h.url,!0),n(f,"url"));let m=E(50),x=E(47),d=E(""),p=E(!1),w=E("balanced"),T=E(!1),_=E(!1),y=E(0),C=E(""),I=E(""),F=E(!1),Y=E(""),ce=E(""),xe=E(""),Ce=E(!1),Pe=E(!1),K;const Ee=[{size:8,actual:7.5,label:"MB free"},{size:10,actual:9.5,label:"MB"},{size:50,actual:47,label:"MB basic"},{size:100,actual:95,label:"MB"},{size:500,actual:475,label:"MB nitro"}],We=[{id:"fast",label:"fast",sublabel:"quick encode"},{id:"balanced",label:"balanced",sublabel:"recommended"},{id:"quality",label:"quality",sublabel:"best results"}];let ge=be(()=>{if(!e(r)&&!e(l)||!e(i))return 0;const R=e(x)*1024*1024,$=128*1024,ee=R-$/8*e(i);return Math.floor(ee*8/e(i)/1024)}),ke=be(()=>e(f)==="url"&&!e(l)&&!e(r)?e(v)?"fetch the URL to see estimate":"paste a link to see estimate":!e(r)&&!e(l)||!e(i)?"select a file to see estimate":(e(l)?e(l).fileSize/(1024*1024):e(r).size/(1024*1024))<=e(x)?`already under ${e(m)}MB!`:e(ge)<500?`~${e(ge)} kbps video - very low quality (may be blocky)`:e(ge)<1e3?`~${e(ge)} kbps video - low quality`:e(ge)<2500?`~${e(ge)} kbps video - medium quality`:e(ge)<5e3?`~${e(ge)} kbps video - good quality`:`~${e(ge)} kbps video - excellent quality`),Ne=be(()=>{var $;const R=e(l)?e(l).fileSize:($=e(r))==null?void 0:$.size;return(e(r)||e(l))&&e(i)&&e(ge)<500&&R&&R/(1024*1024)>e(x)}),ue=be(()=>-90+Math.min(e(ge),2e3)/2e3*180),j=be(()=>{if(!e(i))return"--:--";const R=Math.floor(e(i)/60),$=Math.floor(e(i)%60);return`${R}:${$.toString().padStart(2,"0")}`}),q=be(()=>!e(o)||!e(a)?"unknown":`${e(o)}x${e(a)}`);function Z(R){return new Promise($=>{const ee=document.createElement("video");ee.preload="metadata",ee.onloadedmetadata=()=>{URL.revokeObjectURL(ee.src),$({duration:ee.duration,width:ee.videoWidth,height:ee.videoHeight})},ee.onerror=()=>{$({duration:0,width:0,height:0})},ee.src=URL.createObjectURL(R)})}async function oe(R){if(!R)return;if(!R.type.startsWith("video/")){He("Please select a video file","error");return}const $=8*1024*1024*1024;if(R.size>$){He("File too large. Maximum size is 8GB.","error");return}n(r,R,!0),n(F,!1);const ee=await Z(R);n(i,ee.duration,!0),n(o,ee.width,!0),n(a,ee.height,!0)}function X(){n(r,null),n(i,0),n(o,0),n(a,0),n(y,0),n(C,""),n(I,""),n(F,!1),n(d,""),n(p,!1),K&&(K.value="")}function D(R){n(m,R.size,!0),n(x,R.actual,!0),n(p,!1),n(d,"")}function O(R){n(d,R,!0);const $=parseInt(R);$&&$>0&&(n(m,$,!0),n(x,$*.95),n(p,!0))}function re(){(!e(d)||parseInt(e(d))<=0)&&e(p)&&(n(m,50),n(x,47),n(p,!1))}async function U(){if(e(v).trim()){n(_,!0),n(C,"downloading media..."),n(I,"fetching media from URL..."),n(y,0);try{const R=await fetch(`${Fe()}/api/fetch-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(v).trim()})});if(!R.ok){let ee="Failed to download from URL";try{ee=(await R.json()).error||ee}catch{}throw new Error(ee)}const $=await R.json();n(l,$,!0),n(i,$.duration||0,!0),n(o,$.width||0,!0),n(a,$.height||0,!0),n(_,!1),n(C,""),n(I,""),n(y,0)}catch(R){He(R.message||"Failed to fetch URL","error"),n(_,!1),n(C,""),n(I,""),n(y,0)}}}function V(){if(e(f)==="url"&&e(v).trim()&&!e(l)){U();return}if(!e(r)&&!e(l))return;if((e(l)?e(l).fileSize/(1024*1024):e(r).size/(1024*1024))<=e(x)){He(`File is already under ${e(m)}MB!`,"success");return}e(ge)<500?n(Pe,!0):W()}async function W(){if(!e(r)&&!e(l)||e(_))return;n(Pe,!1);const R=!!e(l),$=R?e(l).fileSize:e(r).size,ee=R?e(l).fileName:e(r).name;if($/(1024*1024)<=e(x)){He(`File is already under ${e(m)}MB!`,"success");return}n(_,!0),n(y,0),n(C,R?"compressing...":"uploading...",!0),n(I,R?"starting compression...":"sending file to server...",!0),n(F,!1);const ve=Date.now().toString()+Math.random().toString(36).substr(2,9),le=ve;_e.add({id:le,title:`${ee} â ${e(m)}MB`,type:"compress",stage:R?"compressing":"uploading",status:R?"compressing...":"uploading...",progress:0,startTime:Date.now()});let Ie=null,k=null;try{Ie=tn(),k=Jn(ve,{onMessage:se=>{se.stage==="compressing"&&(n(C,"compressing..."),se.progress!==void 0&&n(y,se.progress,!0),se.message&&n(I,se.message,!0),_e.updateItem(le,{stage:"compressing",progress:se.progress||0,status:se.message||"compressing..."}))},onError:()=>{}});let S;if(R){n(y,0),n(C,"compressing..."),n(I,"starting compression..."),_e.updateItem(le,{stage:"compressing",status:"compressing...",progress:0});const se=await fetch(`${Fe()}/api/compress-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:e(l).filePath,fileName:e(l).fileName,targetSize:e(x).toString(),duration:e(i).toString(),progressId:ve,preset:e(w),downscale:e(T)})});if(!se.ok){let ie="Failed to start compression";try{ie=(await se.json()).error||ie}catch{}throw new Error(ie)}const{jobId:te}=await se.json(),ze=Date.now(),me=1800*1e3;let De=0;for(;Date.now()-ze<=me;){await new Promise(ie=>setTimeout(ie,2e3));try{const ie=new AbortController,Le=setTimeout(()=>ie.abort(),1e4);let tt;try{tt=await fetch(`${Fe()}/api/job/${te}/status`,{signal:ie.signal})}finally{clearTimeout(Le)}if(!tt.ok)throw new Error(`Server returned ${tt.status}`);const Ae=await tt.json();if(De=0,Ae.status==="error")throw new Error(Ae.error||"Compression failed");if(Ae.progress!==void 0&&n(y,Ae.progress,!0),Ae.message&&n(I,Ae.message,!0),_e.updateItem(le,{progress:Ae.progress||0,status:Ae.message||"compressing..."}),Ae.status==="complete")break}catch(ie){if(De++,De>=3)throw new Error(`Failed to check job status after 3 attempts: ${ie.message}`)}}if(Date.now()-ze>me)throw new Error("Job timed out after 30 minutes.");S=await fetch(`${Fe()}/api/job/${te}/download`)}else if(e(r).size>94371840){n(C,"uploading..."),n(I,"large file detected, uploading in chunks...");const te=await kn(e(r),qe=>{n(y,qe,!0),n(I,"uploading chunks..."),_e.updateItem(le,{progress:qe,status:"uploading..."})}),{filePath:ze,fileName:me}=te;n(y,0),n(C,"compressing..."),n(I,"starting compression..."),_e.updateItem(le,{stage:"compressing",status:"compressing...",progress:0});const De=await fetch(`${Fe()}/api/compress-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:ze,fileName:me,targetSize:e(x).toString(),duration:e(i).toString(),progressId:ve,preset:e(w),downscale:e(T)})});if(!De.ok){let qe="Failed to start compression";try{qe=(await De.json()).error||qe}catch{}throw new Error(qe)}const{jobId:ie}=await De.json(),Le=Date.now(),tt=1800*1e3;let Ae=0;for(;Date.now()-Le<=tt;){await new Promise(qe=>setTimeout(qe,2e3));try{const qe=new AbortController,nt=setTimeout(()=>qe.abort(),1e4);let et;try{et=await fetch(`${Fe()}/api/job/${ie}/status`,{signal:qe.signal})}finally{clearTimeout(nt)}if(!et.ok)throw new Error(`Server returned ${et.status}`);const Ye=await et.json();if(Ae=0,Ye.status==="error")throw new Error(Ye.error||"Compression failed");if(Ye.progress!==void 0&&n(y,Ye.progress,!0),Ye.message&&n(I,Ye.message,!0),_e.updateItem(le,{progress:Ye.progress||0,status:Ye.message||"compressing..."}),Ye.status==="complete")break}catch(qe){if(Ae++,Ae>=3)throw new Error(`Failed to check job status after 3 attempts: ${qe.message}`)}}if(Date.now()-Le>tt)throw new Error("Job timed out after 30 minutes.");S=await fetch(`${Fe()}/api/job/${ie}/download`)}else{const te=new FormData;te.append("file",e(r)),te.append("targetSize",e(x).toString()),te.append("duration",e(i).toString()),te.append("progressId",ve),te.append("preset",e(w)),te.append("downscale",e(T)),S=await fetch(`${Fe()}/api/compress`,{method:"POST",body:te})}if(k&&k.close(),!S.ok){let se="Compression failed";try{se=(await S.json()).error||se}catch{}throw new Error(se)}const A=await S.blob(),N=A.size,J=($/(1024*1024)).toFixed(1),je=(N/(1024*1024)).toFixed(1),ne=Math.round((1-N/$)*100);n(Y,`${J} MB`),n(ce,`${je} MB`),n(xe,`${ne}%`),n(F,!0);const b=ee.lastIndexOf("."),z=b>0?ee.slice(0,b):ee;Hr(A,`${z}_compressed.mp4`),He("Compression complete!","success"),_e.updateItem(le,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>_e.remove(le),5e3)}catch(S){He(S.message||"Compression failed","error"),_e.updateItem(le,{stage:"error",status:S.message||"compression failed"}),k&&k.close()}finally{n(_,!1),n(y,0),n(C,""),n(I,""),Ie&&sn(Ie)}}var ae=vu(),we=he(ae);vr(we,{extraContent:$=>{Ir($,{})}});var Se=u(we,2),pe=u(c(Se),2),Me=c(pe);{var $e=R=>{var $=su(),ee=he($),de=c(ee);let ve;de.__click=()=>n(f,"file");var le=u(de,2);let Ie;le.__click=()=>n(f,"url");var k=u(ee,2);{var S=N=>{var J=eu();let je;J.__click=()=>K==null?void 0:K.click();var ne=u(c(J),6);ne.__change=b=>{var z;oe((z=b.target.files)==null?void 0:z[0]),b.target.value=""},as(ne,b=>K=b,()=>K),Q(()=>je=ye(J,1,"drop-zone svelte-15o2uhu",null,je,{dragover:e(Ce)})),ht("dragover",J,b=>{b.preventDefault(),n(Ce,!0)}),ht("dragleave",J,b=>{b.preventDefault(),n(Ce,!1)}),ht("drop",J,b=>{var z,se;b.preventDefault(),n(Ce,!1),oe((se=(z=b.dataTransfer)==null?void 0:z.files)==null?void 0:se[0])}),g(N,J)},A=N=>{var J=tu(),je=c(J);rs(je,()=>e(v),ne=>n(v,ne)),g(N,J)};B(k,N=>{e(f)==="file"?N(S):N(A,!1)})}Q(()=>{ve=ye(de,1,"input-tab svelte-15o2uhu",null,ve,{active:e(f)==="file"}),Ie=ye(le,1,"input-tab svelte-15o2uhu",null,Ie,{active:e(f)==="url"})}),g(R,$)},Be=R=>{var $=Oe(),ee=he($);{var de=le=>{var Ie=ru(),k=c(Ie),S=u(c(k),2),A=c(S),N=c(A),J=u(A,2),je=c(J),ne=u(S,2);ne.__click=()=>{n(l,null),n(i,0),n(o,0),n(a,0)};var b=u(k,2),z=c(b),se=c(z),te=u(z,2),ze=c(te);Q(me=>{bt(A,"title",e(l).fileName),L(N,e(l).fileName),L(je,me),L(se,`duration: ${(e(i)?e(j):"unknown")??""}`),L(ze,`resolution: ${e(q)??""}`)},[()=>lr(e(l).fileSize)]),g(le,Ie)},ve=le=>{var Ie=nu(),k=c(Ie),S=u(c(k),2),A=c(S),N=c(A),J=u(A,2),je=c(J),ne=u(S,2);ne.__click=X;var b=u(k,2),z=c(b),se=c(z),te=u(z,2),ze=c(te);Q(me=>{bt(A,"title",e(r).name),L(N,e(r).name),L(je,me),L(se,`duration: ${(e(i)?e(j):"unknown")??""}`),L(ze,`resolution: ${e(q)??""}`)},[()=>lr(e(r).size)]),g(le,Ie)};B(ee,le=>{e(l)?le(de):le(ve,!1)},!0)}g(R,$)};B(Me,R=>{!e(r)&&!e(l)?R($e):R(Be,!1)})}var H=u(Me,2),G=u(c(H),4);at(G,21,()=>Ee,ct,(R,$)=>{var ee=iu();let de;ee.__click=()=>D(e($));var ve=c(ee),le=c(ve),Ie=u(ve,2),k=c(Ie);Q(()=>{de=ye(ee,1,"size-option svelte-15o2uhu",null,de,{active:!e(p)&&e(m)===e($).size}),L(le,e($).size),L(k,e($).label)}),g(R,ee)});var Te=u(G,2),Ke=c(Te);Ke.__input=R=>O(R.target.value);var Ze=u(Te,2),Re=u(c(Ze),2);let Ve;var ut=c(Re),pt=u(H,2),mt=u(c(pt),4);at(mt,21,()=>We,ct,(R,$)=>{var ee=au();let de;ee.__click=()=>n(w,e($).id,!0);var ve=c(ee),le=c(ve),Ie=u(ve,2),k=c(Ie);Q(()=>{de=ye(ee,1,"size-option svelte-15o2uhu",null,de,{active:e(w)===e($).id}),L(le,e($).label),L(k,e($).sublabel)}),g(R,ee)});var gt=u(mt,2),ot=c(gt),dt=u(pt,2);dt.__click=V;var Kt=u(c(dt)),Rt=u(dt,2);{var St=R=>{var $=ou(),ee=c($),de=c(ee),ve=c(de),le=u(de,2),Ie=c(le),k=u(ee,2);xn(k,{get percent(){return e(y)}});var S=u(k,2),A=c(S);Q(N=>{L(ve,e(C)),L(Ie,`${N??""}%`),L(A,e(I))},[()=>Math.round(e(y))]),g(R,$)};B(Rt,R=>{e(_)&&R(St)})}var qt=u(Rt,2);{var cs=R=>{var $=lu(),ee=u(c($),2),de=c(ee),ve=c(de),le=c(ve),Ie=u(de,4),k=c(Ie),S=c(k),A=u(Ie,2),N=c(A),J=c(N),je=u(ee,2);je.__click=X,Q(()=>{L(le,e(Y)),L(S,e(ce)),L(J,e(xe))}),g(R,$)};B(qt,R=>{e(F)&&R(cs)})}var Zt=u(Se,2);{var es=R=>{var $=cu();$.__click=b=>{b.target===b.currentTarget&&n(Pe,!1)};var ee=c($),de=u(c(ee),2),ve=u(c(de),4),le=u(ve,4),Ie=c(le),k=c(Ie),S=u(de,2),A=u(c(S)),N=c(A),J=u(S,2),je=c(J);je.__click=()=>n(Pe,!1);var ne=u(je,2);ne.__click=W,Q(()=>{wt(ve,`transform: translateX(-50%) rotate(${e(ue)??""}deg);`),L(k,e(ge)),L(N,e(j))}),g(R,$)};B(Zt,R=>{e(Pe)&&R(es)})}var fe=u(Zt,2);Rr(fe),Q(R=>{dn(Ke,e(d)),Ve=ye(Re,1,"estimate-value svelte-15o2uhu",null,Ve,{"estimate-warning":e(Ne)}),L(ut,e(ke)),dt.disabled=R,L(Kt,` ${e(_)?"compressing...":"compress video"}`)},[()=>!e(r)&&!e(l)&&!(e(f)==="url"&&e(v).trim())||e(_)]),ht("blur",Ke,re),Vn(ot,()=>e(T),R=>n(T,R)),g(t,ae),kt()}Mt(["click","change","input"]);var du=P('<div class="handle svelte-1wkvc90"></div>'),fu=P('<div class="dim-label svelte-1wkvc90"> </div>'),pu=P('<div class="crop-overlay-container svelte-1wkvc90"><div class="mask mask-top svelte-1wkvc90"></div> <div class="mask mask-bottom svelte-1wkvc90"></div> <div class="mask mask-left svelte-1wkvc90"></div> <div class="mask mask-right svelte-1wkvc90"></div>  <div class="crop-rect svelte-1wkvc90" role="application"></div> <!></div>');function hu(t,s){xt(s,!0);let r=ft(s,"cropX",3,0),i=ft(s,"cropY",3,0),o=ft(s,"cropW",3,0),a=ft(s,"cropH",3,0),v=ft(s,"aspectLock",3,""),f=ft(s,"onCropChange",3,()=>{}),l=E(null),h=E(null);const m=20;let x=be(()=>s.containerWidth&&s.videoWidth?s.containerWidth/s.videoWidth:1),d=be(()=>s.containerHeight&&s.videoHeight?s.containerHeight/s.videoHeight:1),p=be(()=>r()*e(x)),w=be(()=>i()*e(d)),T=be(()=>o()*e(x)),_=be(()=>a()*e(d)),y=be(()=>s.containerHeight>0?e(w)/s.containerHeight*100:0),C=be(()=>s.containerHeight>0?(s.containerHeight-e(w)-e(_))/s.containerHeight*100:0),I=be(()=>s.containerWidth>0?e(p)/s.containerWidth*100:0),F=be(()=>s.containerWidth>0?(s.containerWidth-e(p)-e(T))/s.containerWidth*100:0),Y=be(()=>`${Math.round(o())} x ${Math.round(a())}`);function ce(D,O,re,U){return re=Math.max(m,Math.min(re,s.videoWidth)),U=Math.max(m,Math.min(U,s.videoHeight)),D=Math.max(0,Math.min(D,s.videoWidth-re)),O=Math.max(0,Math.min(O,s.videoHeight-U)),{x:D,y:O,w:re,h:U}}function xe(D,O,re){if(!v())return{w:D,h:O};const[U,V]=v().split(":").map(Number);if(!U||!V)return{w:D,h:O};const W=U/V;return re==="nw"||re==="ne"||re==="sw"||re==="se"?D/O>W?D=O*W:O=D/W:re==="e"||re==="w"?O=D/W:(re==="n"||re==="s")&&(D=O*W),{w:Math.max(m,D),h:Math.max(m,O)}}function Ce(D,O){D.preventDefault(),D.stopPropagation(),n(l,O,!0),n(h,{clientX:D.clientX,clientY:D.clientY,cropX:r(),cropY:i(),cropW:o(),cropH:a()},!0),window.addEventListener("pointermove",Pe),window.addEventListener("pointerup",K)}function Pe(D){if(!e(l)||!e(h))return;D.preventDefault();const O=(D.clientX-e(h).clientX)/e(x),re=(D.clientY-e(h).clientY)/e(d),{cropX:U,cropY:V,cropW:W,cropH:ae}=e(h);let we=U,Se=V,pe=W,Me=ae;if(e(l)==="move"){we=U+O,Se=V+re;const H=ce(we,Se,pe,Me);f()(H.x,H.y,H.w,H.h);return}e(l).includes("w")&&(pe=W-O,we=U+O),e(l).includes("e")&&(pe=W+O),e(l).includes("n")&&(Me=ae-re,Se=V+re),e(l).includes("s")&&(Me=ae+re),(e(l)==="n"||e(l)==="s")&&(pe=W),(e(l)==="e"||e(l)==="w")&&(Me=ae);const $e=xe(pe,Me,e(l));pe=$e.w,Me=$e.h,e(l).includes("w")&&(we=U+W-pe),e(l).includes("n")&&(Se=V+ae-Me),pe<m&&(pe=m,e(l).includes("w")&&(we=U+W-m)),Me<m&&(Me=m,e(l).includes("n")&&(Se=V+ae-m));const Be=ce(we,Se,pe,Me);f()(Be.x,Be.y,Be.w,Be.h)}function K(){n(l,null),n(h,null),window.removeEventListener("pointermove",Pe),window.removeEventListener("pointerup",K)}const Ee=["nw","n","ne","e","se","s","sw","w"];function We(D){const O={};return D.includes("n")&&(O.top="0%"),D.includes("s")&&(O.top="100%"),(D==="e"||D==="w"||D==="n"||D==="s")&&((D==="n"||D==="s")&&(O.left="50%"),D==="e"&&(O.top="50%",O.left="100%"),D==="w"&&(O.top="50%",O.left="0%")),D==="nw"&&(O.left="0%"),D==="ne"&&(O.left="100%"),D==="sw"&&(O.left="0%"),D==="se"&&(O.left="100%"),`top: ${O.top||"0%"}; left: ${O.left||"0%"}; transform: translate(-50%, -50%);`}function ge(D){return{nw:"nwse-resize",ne:"nesw-resize",sw:"nesw-resize",se:"nwse-resize",n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"}[D]||"move"}var ke=pu(),Ne=c(ke),ue=u(Ne,2),j=u(ue,2),q=u(j,2),Z=u(q,2);Z.__pointerdown=D=>Ce(D,"move"),at(Z,21,()=>Ee,ct,(D,O)=>{var re=du();re.__pointerdown=U=>Ce(U,e(O)),Q((U,V)=>wt(re,`${U??""} cursor: ${V??""};`),[()=>We(e(O)),()=>ge(e(O))]),g(D,re)});var oe=u(Z,2);{var X=D=>{var O=fu(),re=c(O);Q(()=>{wt(O,`left: ${e(p)+e(T)/2}px; top: ${e(w)+e(_)+6}px;`),L(re,e(Y))}),g(D,O)};B(oe,D=>{e(T)>60&&e(_)>20&&D(X)})}Q(()=>{wt(ke,`width: ${s.containerWidth??""}px; height: ${s.containerHeight??""}px;`),wt(Ne,`height: ${e(y)??""}%`),wt(ue,`height: ${e(C)??""}%`),wt(j,`width: ${e(I)??""}%; top: ${e(y)??""}%; bottom: ${e(C)??""}%`),wt(q,`width: ${e(F)??""}%; top: ${e(y)??""}%; bottom: ${e(C)??""}%`),wt(Z,`left: ${e(p)??""}px; top: ${e(w)??""}px; width: ${e(T)??""}px; height: ${e(_)??""}px;`)}),g(t,ke),kt()}Mt(["pointerdown"]);var gu=P('<img alt="" class="thumb svelte-1uef6zn" draggable="false"/>'),mu=P('<span class="thumb-loading-text svelte-1uef6zn">generating thumbnails...</span>'),wu=P("<div><!></div>"),_u=P('<div class="segment-marker svelte-1uef6zn"></div>'),yu=P('<div class="timeline svelte-1uef6zn"><div class="thumbnail-strip svelte-1uef6zn"><!></div> <div class="dim-overlay dim-left svelte-1uef6zn"></div> <div class="dim-overlay dim-right svelte-1uef6zn"></div> <!>  <div class="trim-handle trim-handle-left svelte-1uef6zn"><div class="trim-handle-bar svelte-1uef6zn"></div></div> <div class="trim-handle trim-handle-right svelte-1uef6zn"><div class="trim-handle-bar svelte-1uef6zn"></div></div>  <div class="playhead svelte-1uef6zn"><div class="playhead-head svelte-1uef6zn"></div> <div class="playhead-line svelte-1uef6zn"></div></div></div>');function bu(t,s){xt(s,!0);let r=ft(s,"duration",3,0),i=ft(s,"currentTime",3,0),o=ft(s,"startTime",3,0),a=ft(s,"endTime",3,0),v=ft(s,"thumbnails",19,()=>[]),f=ft(s,"thumbnailsLoading",3,!1),l=ft(s,"segments",19,()=>[]),h=ft(s,"onSeek",3,()=>{}),m=ft(s,"onStartTimeChange",3,()=>{}),x=ft(s,"onEndTimeChange",3,()=>{}),d=E(null),p=E(null),w=be(()=>r()>0?o()/r()*100:0),T=be(()=>r()>0?a()/r()*100:100),_=be(()=>r()>0?i()/r()*100:0);function y(j){if(!e(d)||r()<=0)return 0;const q=e(d).getBoundingClientRect();return Math.max(0,Math.min(1,(j-q.left)/q.width))*r()}function C(j){if(e(p))return;const q=y(j.clientX);h()(q)}function I(j,q){j.preventDefault(),j.stopPropagation(),n(p,q,!0),window.addEventListener("pointermove",F),window.addEventListener("pointerup",Y)}function F(j){if(!e(p))return;j.preventDefault();const q=y(j.clientX);e(p)==="start"?m()(Math.min(q,a()-.1)):e(p)==="end"?x()(Math.max(q,o()+.1)):e(p)==="playhead"&&h()(Math.max(0,Math.min(r(),q)))}function Y(){n(p,null),window.removeEventListener("pointermove",F),window.removeEventListener("pointerup",Y)}var ce=yu();ce.__click=C;var xe=c(ce),Ce=c(xe);{var Pe=j=>{var q=Oe(),Z=he(q);at(Z,17,v,ct,(oe,X)=>{var D=gu();Q(()=>bt(D,"src",e(X))),g(oe,D)}),g(j,q)},K=j=>{var q=wu();let Z;var oe=c(q);{var X=D=>{var O=mu();g(D,O)};B(oe,D=>{f()&&D(X)})}Q(()=>Z=ye(q,1,"thumb-placeholder svelte-1uef6zn",null,Z,{loading:f()})),g(j,q)};B(Ce,j=>{v().length>0?j(Pe):j(K,!1)})}var Ee=u(xe,2),We=u(Ee,2),ge=u(We,2);at(ge,17,l,ct,(j,q,Z)=>{var oe=Oe(),X=he(oe);{var D=O=>{const re=be(()=>r()>0?e(q).start/r()*100:0);var U=_u();Q(()=>wt(U,`left: ${e(re)??""}%`)),g(O,U)};B(X,O=>{Z>0&&O(D)})}g(j,oe)});var ke=u(ge,2);ke.__pointerdown=j=>I(j,"start");var Ne=u(ke,2);Ne.__pointerdown=j=>I(j,"end");var ue=u(Ne,2);ue.__pointerdown=j=>I(j,"playhead"),as(ce,j=>n(d,j),()=>e(d)),Q(()=>{wt(Ee,`width: ${e(w)??""}%`),wt(We,`width: ${100-e(T)}%`),wt(ke,`left: ${e(w)??""}%`),wt(Ne,`left: ${e(T)??""}%`),wt(ue,`left: ${e(_)??""}%`)}),g(t,ce),kt()}Mt(["click","pointerdown"]);var xu=Ue('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16" rx="1"></rect><rect x="14" y="4" width="4" height="16" rx="1"></rect></svg>'),ku=Ue('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><polygon points="6 3 20 12 6 21 6 3"></polygon></svg>'),Su=P('<div class="controls svelte-yeeqvx"><button class="play-btn svelte-yeeqvx"><!></button> <div class="time-display svelte-yeeqvx"><span class="time-current"> </span> <span class="time-sep svelte-yeeqvx">/</span> <span class="time-total svelte-yeeqvx"> </span></div> <button class="split-btn svelte-yeeqvx" title="Split at playhead"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg> split</button></div>');function Cu(t,s){xt(s,!0);let r=ft(s,"isPlaying",3,!1),i=ft(s,"currentTime",3,0),o=ft(s,"duration",3,0),a=ft(s,"onPlayPause",3,()=>{}),v=ft(s,"onSplitAtPlayhead",3,()=>{});function f(I){if(!I||!isFinite(I))return"0:00.0";const F=Math.floor(I/60),Y=Math.floor(I%60),ce=Math.floor(I%1*10);return`${F}:${Y.toString().padStart(2,"0")}.${ce}`}var l=Su(),h=c(l);h.__click=function(...I){var F;(F=a())==null||F.apply(this,I)};var m=c(h);{var x=I=>{var F=xu();g(I,F)},d=I=>{var F=ku();g(I,F)};B(m,I=>{r()?I(x):I(d,!1)})}var p=u(h,2),w=c(p),T=c(w),_=u(w,4),y=c(_),C=u(p,2);C.__click=function(...I){var F;(F=v())==null||F.apply(this,I)},Q((I,F)=>{bt(h,"title",r()?"Pause":"Play"),L(T,I),L(y,F)},[()=>f(i()),()=>f(o())]),g(t,l),kt()}Mt(["click"]);var Tu=P('<button type="button"><svg class="drop-zone-icon svelte-oxrnxe" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-oxrnxe">drop a video here or click to browse</p> <p class="drop-zone-hint svelte-oxrnxe">supports mp4, webm, mov, mkv (max 8GB)</p> <input type="file" accept="video/*" style="display: none;"/></button>'),ju=P('<div class="url-input-section svelte-oxrnxe"><input type="url" class="url-input svelte-oxrnxe" placeholder="https://youtube.com/watch?v=..."/></div>'),zu=P('<div class="input-tabs svelte-oxrnxe"><button>upload file</button> <button>paste link</button></div> <!>',1),Pu=P('<div class="file-info svelte-oxrnxe"><div class="file-header svelte-oxrnxe"><div class="file-icon svelte-oxrnxe"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-oxrnxe"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></div> <div class="file-details svelte-oxrnxe"><div class="file-name svelte-oxrnxe"> </div> <div class="file-size svelte-oxrnxe"> </div></div> <button class="file-remove svelte-oxrnxe"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div></div>'),Eu=P("<button> </button>"),Mu=P('<div class="segment-row svelte-oxrnxe"><div class="segment-color svelte-oxrnxe"></div> <span class="segment-range svelte-oxrnxe"> </span> <button class="segment-remove svelte-oxrnxe" title="Remove segment"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div>'),Iu=P('<div class="segment-list svelte-oxrnxe"><div class="segment-list-label svelte-oxrnxe">segments</div> <!></div>'),Ru=P('<div class="editor-section svelte-oxrnxe"><div class="video-wrapper svelte-oxrnxe"><video preload="metadata" class="svelte-oxrnxe"></video> <!></div> <div class="aspect-bar svelte-oxrnxe"></div> <!> <!> <!></div>',2),qu=P("<button> </button>"),$u=P('<div class="input-section svelte-oxrnxe"><div class="section svelte-oxrnxe"><div class="section-label svelte-oxrnxe">trim times (seconds or MM:SS)</div> <div class="manual-time-inputs svelte-oxrnxe"><div class="time-field svelte-oxrnxe"><label class="svelte-oxrnxe">start</label> <input type="text" placeholder="0:00" class="svelte-oxrnxe"/></div> <span class="trim-arrow svelte-oxrnxe">â</span> <div class="time-field svelte-oxrnxe"><label class="svelte-oxrnxe">end</label> <input type="text" placeholder="0:30" class="svelte-oxrnxe"/></div></div></div> <div class="section svelte-oxrnxe"><div class="section-label svelte-oxrnxe">crop aspect ratio</div> <div class="segmented-control svelte-oxrnxe"></div></div></div>'),Bu=P('<div class="progress-container svelte-oxrnxe"><!></div>'),Du=P("<div> </div>"),Nu=P('<!> <main class="svelte-oxrnxe"><div class="page-header svelte-oxrnxe"><h1 class="svelte-oxrnxe">trim & crop</h1> <p class="svelte-oxrnxe">cut videos and change aspect ratios</p></div> <div class="input-section svelte-oxrnxe"><!></div> <!> <!> <div class="input-section svelte-oxrnxe"><button class="process-btn svelte-oxrnxe"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-oxrnxe"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg> </button> <!> <!></div></main> <!>',1);function Lu(t,s){xt(s,!0);let r=E(null),i=E(""),o=E("file"),a=E(null);const v=bn();v.url&&(n(i,v.url,!0),n(o,"url"));let f=E(0),l=E(0),h=E(0),m=E(0),x=E(0),d=E(""),p=E(""),w=E(!1),T=E(0),_=E(""),y=E(null),C=E(""),I=E(!1),F,Y=E(null),ce=E(""),xe=E(0),Ce=E(0),Pe=E(0),K=E(0),Ee=E(""),We=E(!1),ge=E(0),ke=E($s([])),Ne=E($s([])),ue=E(!1),j=E(0),q=E(0),Z=E(null),oe=1;const X=["var(--purple-400)","#3b82f6","#22c55e","#f59e0b","#ef4444","#ec4899"],D=[{value:"",label:"free"},{value:"16:9",label:"16:9"},{value:"9:16",label:"9:16"},{value:"1:1",label:"1:1"},{value:"4:3",label:"4:3"},{value:"4:5",label:"4:5"}];let O=be(()=>e(l)>0&&e(h)>0&&(e(xe)>0||e(Ce)>0||e(Pe)<e(l)||e(K)<e(h))),re=be(()=>e(x)>e(m)&&e(x)>0&&(e(f)===0||e(m)>.1||e(x)<e(f)-.1)),U=be(()=>e(ke).length>1),V=be(()=>e(U)?"export":e(O)&&e(re)?"trim & crop":e(O)?"crop":"trim");function W(b){const z=Math.floor(b/60),se=Math.floor(b%60),te=Math.floor(b%1*10);return`${z}:${se.toString().padStart(2,"0")}.${te}`}function ae(b){if(!b)return null;if(b=b.trim(),/^\d+(\.\d+)?$/.test(b))return parseFloat(b);const z=b.match(/^(\d+):(\d{1,2})(?:\.(\d+))?$/);return z?parseInt(z[1])*60+parseInt(z[2])+(z[3]?parseFloat("0."+z[3]):0):null}function we(){e(Y)&&(n(f,e(Y).duration,!0),n(l,e(Y).videoWidth,!0),n(h,e(Y).videoHeight,!0),n(x,e(Y).duration,!0),n(p,W(e(Y).duration),!0),n(m,0),n(d,"0:00.0"),n(xe,0),n(Ce,0),n(Pe,e(l),!0),n(K,e(h),!0),n(ke,[{id:oe++,start:0,end:e(Y).duration,color:X[0]}],!0),e(ce)&&e(ce).startsWith("blob:")&&gt())}let Se=null;function pe(){if(Se)return;function b(){e(Y)&&!e(Y).paused?(n(ge,e(Y).currentTime,!0),Se=requestAnimationFrame(b)):Se=null}Se=requestAnimationFrame(b)}function Me(){n(We,!0),pe()}function $e(){n(We,!1)}function Be(){n(We,!1)}function H(){e(Y)&&(e(Y).paused?e(Y).play():e(Y).pause())}function G(b){if(!e(Y))return;const z=Math.max(0,Math.min(e(f),b));e(Y).currentTime=z,n(ge,z,!0)}function Te(b){n(m,Math.max(0,b),!0),n(d,W(e(m)),!0)}function Ke(b){n(x,Math.min(e(f),b),!0),n(p,W(e(x)),!0)}function Ze(b){n(d,b,!0);const z=ae(b);z!==null&&z>=0&&n(m,z,!0)}function Re(b){n(p,b,!0);const z=ae(b);z!==null&&z>=0&&n(x,z,!0)}function Ve(b,z,se,te){n(xe,b,!0),n(Ce,z,!0),n(Pe,se,!0),n(K,te,!0)}function ut(b){if(n(Ee,b,!0),!e(l)||!e(h))return;if(b===""){n(xe,0),n(Ce,0),n(Pe,e(l),!0),n(K,e(h),!0);return}const[z,se]=b.split(":").map(Number),te=z/se;let ze,me;e(l)/e(h)>te?(me=e(h),ze=me*te):(ze=e(l),me=ze/te),n(xe,(e(l)-ze)/2),n(Ce,(e(h)-me)/2),n(Pe,ze,!0),n(K,me,!0)}function pt(){if(e(ke).length===0)return;const b=e(ge),z=e(ke).findIndex(De=>b>De.start+.05&&b<De.end-.05);if(z===-1)return;const se=e(ke)[z],te=[...e(ke)],ze=z%X.length,me=(z+1)%X.length;te.splice(z,1,{id:oe++,start:se.start,end:b,color:X[ze]},{id:oe++,start:b,end:se.end,color:X[me]}),n(ke,te.map((De,ie)=>({...De,color:X[ie%X.length]})),!0)}function mt(b){n(ke,e(ke).filter(z=>z.id!==b),!0),e(ke).length===0&&n(ke,[{id:oe++,start:e(m),end:e(x),color:X[0]}],!0),n(ke,e(ke).map((z,se)=>({...z,color:X[se%X.length]})),!0)}async function gt(){if(!(!e(ce)||e(ue))){n(ue,!0),n(Ne,[],!0);try{const b=document.createElement("video");b.crossOrigin="anonymous",b.muted=!0,b.preload="auto",b.src=e(ce),await new Promise((De,ie)=>{const Le=setTimeout(()=>ie(new Error("video load timeout")),1e4);b.onloadeddata=()=>{clearTimeout(Le),De()},b.onerror=()=>{clearTimeout(Le),ie(new Error("video load error"))}});const z=Math.min(Math.ceil(e(f)/2),60),se=document.createElement("canvas"),te=se.getContext("2d"),ze=b.videoWidth/b.videoHeight;se.height=56,se.width=Math.round(56*ze);const me=[];for(let De=0;De<z;De++){const ie=De/z*e(f);b.currentTime=ie,await new Promise(Le=>{b.onseeked=Le,setTimeout(Le,500)}),te.drawImage(b,0,0,se.width,se.height),me.push(se.toDataURL("image/jpeg",.6))}n(Ne,me,!0),b.src="",b.load()}catch(b){console.warn("thumbnail generation failed:",b)}finally{n(ue,!1)}}}function ot(){e(Z)&&e(Y)&&(n(j,e(Y).clientWidth,!0),n(q,e(Y).clientHeight,!0))}Ps(()=>{if(e(Z)){const b=new ResizeObserver(ot);return b.observe(e(Z)),()=>b.disconnect()}}),Ps(()=>()=>{Se&&cancelAnimationFrame(Se)});async function dt(b){if(!b)return;if(!b.type.startsWith("video/")){He("please select a video file","error");return}const z=8*1024*1024*1024;if(b.size>z){He("file too large. maximum size is 8GB.","error");return}n(r,b,!0),n(y,null),n(C,""),e(ce)&&URL.revokeObjectURL(e(ce)),n(ce,URL.createObjectURL(b),!0)}function Kt(){n(r,null),n(a,null),e(ce)&&URL.revokeObjectURL(e(ce)),n(ce,""),n(f,0),n(l,0),n(h,0),n(m,0),n(x,0),n(d,""),n(p,""),n(xe,0),n(Ce,0),n(Pe,0),n(K,0),n(Ee,""),n(We,!1),n(ge,0),n(ke,[],!0),n(Ne,[],!0),n(T,0),n(_,""),n(y,null),n(C,""),F&&(F.value="")}async function Rt(b){let z="";try{z=await(await b.blob()).text()}catch{z=await b.text().catch(()=>"")}try{return JSON.parse(z).error||`Request failed with status ${b.status}`}catch{return z||`Request failed with status ${b.status}`}}async function St(){const b=e(o)==="url"&&e(i).trim();if(!e(r)&&!b&&!e(a)||e(w))return;if(!e(re)&&!e(O)&&!e(U)){He("set start and end times, pick a crop, or split the video","error");return}n(w,!0),n(T,0),n(y,null),n(C,"");const z=Date.now().toString()+Math.random().toString(36).substr(2,9),te=`${e(a)?e(a).fileName:e(r)?e(r).name:"video"} â ${e(V)}`;_e.add({id:z,title:te,type:"convert",stage:b&&!e(a)?"downloading":"uploading",status:b&&!e(a)?"downloading media...":"uploading...",progress:0,startTime:Date.now()});let ze=null;try{ze=tn();let me,De;if(b&&!e(a)){n(_,"Downloading media..."),_e.updateItem(z,{status:"downloading media..."});const it=await fetch(`${Fe()}/api/fetch-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(i).trim()})});if(!it.ok){let st="Failed to download from URL";try{st=(await it.json()).error||st}catch{}throw new Error(st)}const rt=await it.json();n(a,rt,!0),me=rt.filePath,De=rt.fileName,!e(f)&&rt.duration&&n(f,rt.duration,!0),!e(l)&&rt.width&&n(l,rt.width,!0),!e(h)&&rt.height&&n(h,rt.height,!0),!e(x)&&rt.duration&&(n(x,rt.duration,!0),n(p,W(rt.duration),!0)),_e.updateItem(z,{title:`${rt.fileName} â ${e(V)}`,stage:"processing",status:"processing...",progress:0})}else if(e(a))me=e(a).filePath,De=e(a).fileName,_e.updateItem(z,{stage:"processing",status:"processing...",progress:0});else{n(_,"Uploading...");const it=await kn(e(r),rt=>{n(T,rt,!0),n(_,"Uploading..."),_e.updateItem(z,{progress:rt,status:"uploading..."})});me=it.filePath,De=it.fileName,_e.updateItem(z,{stage:"processing",status:"processing...",progress:0})}n(T,0),n(_,"Processing...");const ie={filePath:me,fileName:De,format:"mp4",reencode:"always"};e(re)&&!e(U)&&(ie.startTime=String(e(m)),ie.endTime=String(e(x))),e(O)?(ie.cropX=Math.round(e(xe)),ie.cropY=Math.round(e(Ce)),ie.cropW=Math.round(e(Pe))-Math.round(e(Pe))%2,ie.cropH=Math.round(e(K))-Math.round(e(K))%2):e(Ee)&&(ie.cropRatio=e(Ee)),e(U)&&(ie.segments=e(ke).map(it=>({start:it.start,end:it.end})));const Le=await fetch(`${Fe()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie)});if(!Le.ok)throw new Error(await Rt(Le));const{jobId:tt}=await Le.json();let Ae=0;for(;;){if(Ae>=600)throw new Error("Processing timed out after 20 minutes");Ae++,await new Promise($t=>setTimeout($t,2e3));const it=new AbortController,rt=setTimeout(()=>it.abort(),1e4);let st;try{st=await fetch(`${Fe()}/api/job/${tt}/status`,{signal:it.signal})}finally{clearTimeout(rt)}if(!st.ok)throw st.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const vt=await st.json();if(vt.status==="error")throw new Error(vt.error||"Processing failed");if(n(T,vt.progress||0,!0),n(_,vt.message||"processing...",!0),_e.updateItem(z,{progress:vt.progress||0,status:vt.message||"processing..."}),vt.status==="complete")break}const qe=await fetch(`${Fe()}/api/job/${tt}/download`);if(!qe.ok)throw new Error(await Rt(qe));n(T,100),n(_,"complete!");const et=`${(De||"video").replace(/\.[^.]+$/,"")}_trimmed.mp4`,Ye=await qe.blob();Hr(Ye,et),n(y,"success"),n(C,`${e(V)} complete! download started.`),_e.updateItem(z,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>_e.remove(z),5e3)}catch(me){n(y,"error"),n(C,me.message||"processing failed",!0),n(T,0),n(_,""),_e.updateItem(z,{stage:"error",status:me.message||"processing failed"})}finally{n(w,!1),ze&&sn(ze)}}var qt=Nu(),cs=he(qt);vr(cs,{extraContent:z=>{Ir(z,{})}});var Zt=u(cs,2),es=u(c(Zt),2),fe=c(es);{var R=b=>{var z=zu(),se=he(z),te=c(se);let ze;te.__click=()=>n(o,"file");var me=u(te,2);let De;me.__click=()=>n(o,"url");var ie=u(se,2);{var Le=Ae=>{var qe=Tu();let nt;qe.__click=()=>F==null?void 0:F.click();var et=u(c(qe),6);et.__change=Ye=>{var it;dt((it=Ye.target.files)==null?void 0:it[0]),Ye.target.value=""},as(et,Ye=>F=Ye,()=>F),Q(()=>nt=ye(qe,1,"drop-zone svelte-oxrnxe",null,nt,{dragover:e(I)})),ht("dragover",qe,Ye=>{Ye.preventDefault(),n(I,!0)}),ht("dragleave",qe,Ye=>{Ye.preventDefault(),n(I,!1)}),ht("drop",qe,Ye=>{var it,rt;Ye.preventDefault(),n(I,!1),dt((rt=(it=Ye.dataTransfer)==null?void 0:it.files)==null?void 0:rt[0])}),g(Ae,qe)},tt=Ae=>{var qe=ju(),nt=c(qe);rs(nt,()=>e(i),et=>n(i,et)),g(Ae,qe)};B(ie,Ae=>{e(o)==="file"?Ae(Le):Ae(tt,!1)})}Q(()=>{ze=ye(te,1,"input-tab svelte-oxrnxe",null,ze,{active:e(o)==="file"}),De=ye(me,1,"input-tab svelte-oxrnxe",null,De,{active:e(o)==="url"})}),g(b,z)},$=b=>{var z=Pu(),se=c(z),te=u(c(se),2),ze=c(te),me=c(ze),De=u(ze,2),ie=c(De),Le=u(te,2);Le.__click=Kt,Q(tt=>{bt(ze,"title",e(a)?e(a).fileName:e(r).name),L(me,e(a)?e(a).fileName:e(r).name),L(ie,`${tt??""}${e(l)&&e(h)?` â¢ ${e(l)}x${e(h)}`:""}`)},[()=>e(a)?lr(e(a).fileSize):lr(e(r).size)]),g(b,z)};B(fe,b=>{!e(r)&&!e(a)?b(R):b($,!1)})}var ee=u(es,2);{var de=b=>{var z=Ru(),se=c(z),te=c(se);te.__click=H,as(te,qe=>n(Y,qe),()=>e(Y));var ze=u(te,2);{var me=qe=>{hu(qe,{get videoWidth(){return e(l)},get videoHeight(){return e(h)},get containerWidth(){return e(j)},get containerHeight(){return e(q)},get cropX(){return e(xe)},get cropY(){return e(Ce)},get cropW(){return e(Pe)},get cropH(){return e(K)},get aspectLock(){return e(Ee)},onCropChange:Ve})};B(ze,qe=>{e(l)>0&&e(j)>0&&qe(me)})}as(se,qe=>n(Z,qe),()=>e(Z));var De=u(se,2);at(De,21,()=>D,ct,(qe,nt)=>{var et=Eu();let Ye;et.__click=()=>ut(e(nt).value);var it=c(et);Q(()=>{Ye=ye(et,1,"aspect-btn svelte-oxrnxe",null,Ye,{active:e(Ee)===e(nt).value}),L(it,e(nt).label)}),g(qe,et)});var ie=u(De,2);Cu(ie,{get isPlaying(){return e(We)},get currentTime(){return e(ge)},get duration(){return e(f)},onPlayPause:H,onSplitAtPlayhead:pt});var Le=u(ie,2);bu(Le,{get duration(){return e(f)},get currentTime(){return e(ge)},get startTime(){return e(m)},get endTime(){return e(x)},get thumbnails(){return e(Ne)},get thumbnailsLoading(){return e(ue)},get segments(){return e(ke)},onSeek:G,onStartTimeChange:Te,onEndTimeChange:Ke});var tt=u(Le,2);{var Ae=qe=>{var nt=Iu(),et=u(c(nt),2);at(et,17,()=>e(ke),ct,(Ye,it)=>{var rt=Mu(),st=c(rt),vt=u(st,2),$t=c(vt),bs=u(vt,2);bs.__click=()=>mt(e(it).id),Q((Vs,qr)=>{wt(st,`background: ${e(it).color??""}`),L($t,`${Vs??""} â ${qr??""}`)},[()=>W(e(it).start),()=>W(e(it).end)]),g(Ye,rt)}),g(qe,nt)};B(tt,qe=>{e(ke).length>1&&qe(Ae)})}Q(()=>bt(te,"src",e(ce))),ht("loadedmetadata",te,we),ht("play",te,Me),ht("pause",te,$e),ht("ended",te,Be),g(b,z)};B(ee,b=>{e(r)&&e(ce)&&b(de)})}var ve=u(ee,2);{var le=b=>{var z=$u(),se=c(z),te=u(c(se),2),ze=c(te),me=u(c(ze),2);me.__input=Ae=>Ze(Ae.target.value);var De=u(ze,4),ie=u(c(De),2);ie.__input=Ae=>Re(Ae.target.value);var Le=u(se,2),tt=u(c(Le),2);at(tt,21,()=>D.slice(1),ct,(Ae,qe)=>{var nt=qu();let et;nt.__click=()=>{n(Ee,e(Ee)===e(qe).value?"":e(qe).value,!0)};var Ye=c(nt);Q(()=>{et=ye(nt,1,"segment svelte-oxrnxe",null,et,{active:e(Ee)===e(qe).value}),L(Ye,e(qe).label)}),g(Ae,nt)}),Q(()=>{dn(me,e(d)),dn(ie,e(p))}),g(b,z)};B(ve,b=>{e(o)==="url"&&!e(r)&&!e(a)&&b(le)})}var Ie=u(ve,2),k=c(Ie);k.__click=St;var S=u(c(k)),A=u(k,2);{var N=b=>{var z=Bu(),se=c(z);xn(se,{get percent(){return e(T)},get label(){return e(_)}}),g(b,z)};B(A,b=>{e(w)&&b(N)})}var J=u(A,2);{var je=b=>{var z=Du(),se=c(z);Q(()=>{ye(z,1,`status ${e(y)??""}`,"svelte-oxrnxe"),L(se,e(C))}),g(b,z)};B(J,b=>{e(y)&&b(je)})}var ne=u(Zt,2);Rr(ne),Q(b=>{k.disabled=b,L(S,` ${(e(w)?"processing...":e(V))??""}`)},[()=>e(w)||!e(r)&&!e(a)&&!(e(o)==="url"&&e(i).trim())]),g(t,qt),kt()}Mt(["click","change","input"]);var Au=P('<button type="button"><svg class="drop-zone-icon svelte-am61ph" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-am61ph">drop a video or audio file here</p> <p class="drop-zone-hint svelte-am61ph">supports mp4, webm, mov, mkv, mp3, wav, flac, m4a (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>'),Ou=P('<div class="url-input-section svelte-am61ph"><input type="url" class="url-input svelte-am61ph" placeholder="https://youtube.com/watch?v=..."/></div>'),Fu=P('<div class="input-tabs svelte-am61ph"><button>upload file</button> <button>paste link</button></div> <!>',1),Uu=P('<div class="file-info svelte-am61ph"><div class="file-header svelte-am61ph"><div class="file-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-am61ph"><div class="file-name svelte-am61ph"> </div> <div class="file-size svelte-am61ph"> </div></div> <button class="file-remove svelte-am61ph" aria-label="Remove file"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-am61ph"><span> </span></div></div>'),Hu=Ue('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Vu=Ue('<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line>',1),Wu=P('<div class="file-info svelte-am61ph"><div class="file-header svelte-am61ph"><div class="file-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><!></svg></div> <div class="file-details svelte-am61ph"><div class="file-name svelte-am61ph"> </div> <div class="file-size svelte-am61ph"> </div></div> <button class="file-remove svelte-am61ph" aria-label="Remove file"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-am61ph"><span> </span></div></div>'),Ju=P('<button><div class="mode-option-value svelte-am61ph"> </div> <div class="mode-option-label svelte-am61ph"> </div></button>'),Yu=P('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">subtitle format</div> <div class="format-row svelte-am61ph"><button>SRT</button> <button>ASS</button></div></div>'),Gu=P('<button><div class="mode-option-value svelte-am61ph"> </div> <div class="mode-option-label svelte-am61ph"> </div></button>'),Qu=P('<div class="caption-preview svelte-am61ph"><div class="caption-preview-text svelte-am61ph"> </div></div>'),Xu=P('<div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">caption size</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="40" max="120" step="2"/> <div class="slider-hint svelte-am61ph">size of caption text</div></div>'),Ku=P('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">caption formatting</div> <div class="section-description svelte-am61ph">control how captions are split and timed</div> <!> <!> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">max words per caption</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="20" step="1"/> <div class="slider-hint svelte-am61ph">split long captions into smaller chunks</div></div> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">max characters per line</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="80" step="1"/> <div class="slider-hint svelte-am61ph">wrap long lines to fit on screen</div></div> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">minimum duration</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="5" step="0.1"/> <div class="slider-hint svelte-am61ph">keep captions on screen longer</div></div> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">gap between captions</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="1" step="0.05"/> <div class="slider-hint svelte-am61ph">add breathing room between captions</div></div></div>'),Zu=P('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">language hint</div> <div class="section-description svelte-am61ph">optional, auto-detected if empty (e.g. en, es, ja, fr)</div> <input type="text" class="language-input svelte-am61ph" placeholder="auto-detect" maxlength="5"/></div> <!>',1),ed=P('<div class="progress-container svelte-am61ph"><div class="progress-header svelte-am61ph"><span class="progress-status svelte-am61ph"> </span> <span class="progress-percent svelte-am61ph"> </span></div> <!> <div class="progress-details svelte-am61ph"> </div></div>'),td=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg> copied!',1),sd=Ue('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> copy text',1),rd=P('<div class="result-container svelte-am61ph"><div class="result-header svelte-am61ph"><div class="result-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-am61ph">transcription complete!</div></div> <div class="transcript-box svelte-am61ph"><pre class="transcript-text svelte-am61ph"> </pre></div> <div class="result-actions svelte-am61ph"><button class="result-btn copy-btn svelte-am61ph"><!></button> <button class="result-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> transcribe another</button></div></div>'),nd=P('<div class="result-container svelte-am61ph"><div class="result-header svelte-am61ph"><div class="result-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-am61ph"> </div></div> <button class="result-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> transcribe another</button></div>'),id=P('<!> <main class="svelte-am61ph"><div class="page-header svelte-am61ph"><h1 class="svelte-am61ph">transcribe</h1> <p class="svelte-am61ph">get subtitles, captions, or a text transcript from any video or audio</p></div> <div class="transcribe-container svelte-am61ph"><!> <div class="section svelte-am61ph"><div class="section-label svelte-am61ph">output mode</div> <div class="section-description svelte-am61ph">choose what you want back</div> <div class="mode-grid svelte-am61ph"></div></div> <!> <div class="section svelte-am61ph"><div class="section-label svelte-am61ph">model</div> <div class="section-description svelte-am61ph">larger models are more accurate but slower</div> <div class="model-grid svelte-am61ph"></div></div> <button class="advanced-toggle svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg> advanced options</button> <!> <div class="estimate-row svelte-am61ph"><span class="estimate-label svelte-am61ph">estimated time</span> <span> </span></div> <button class="transcribe-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </button> <!> <!></div></main> <!>',1);function ad(t,s){xt(s,!0);let r=E(null),i=E(0),o=E(""),a=E("file"),v=E(null);const f=bn();f.url&&(n(o,f.url,!0),n(a,"url"));let l=E("text"),h=E("base"),m=E("srt"),x=E(""),d=E(72),p=E(0),w=E(0),T=E(0),_=E(0),y=E(!1),C=E(!1),I=E(0),F=E(""),Y=E(""),ce=E(!1),xe=E(""),Ce=E(!1),Pe=E(!1),K;const Ee=[{id:"text",label:"text",sublabel:"plain transcript"},{id:"subtitles",label:"subtitles",sublabel:"SRT / ASS file"},{id:"captions",label:"captions",sublabel:"burned into video"}],We=[{id:"tiny",label:"tiny",sublabel:"fastest, less accurate"},{id:"base",label:"base",sublabel:"recommended"},{id:"small",label:"small",sublabel:"slower, more accurate"},{id:"medium",label:"medium",sublabel:"slowest local model"},{id:"large",label:"large",sublabel:"cloud, best quality"}];let ge=be(()=>e(l)==="subtitles"||e(l)==="captions");const ke="lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua".split(" ");let Ne=be(()=>{const fe=e(p)>0?e(p):7;let R=ke.slice(0,fe).join(" ");if(e(w)>0){const $=R.split(" "),ee=[];let de=$[0]||"";for(let ve=1;ve<$.length;ve++)de.length+1+$[ve].length<=e(w)?de+=" "+$[ve]:(ee.push(de),de=$[ve]);ee.push(de),R=ee.join(`
`)}return R});const ue={tiny:.17,base:.33,small:1,medium:3.3,large:1.5};let j=be(()=>{if(e(a)==="url"&&!e(v)&&!e(r))return e(o)?"paste a link and transcribe to see estimate":"paste a link to see estimate";if(!e(r)&&!e(v)||!e(i))return"select a file to see estimate";const fe=e(i)/60,R=ue[e(h)],$=Math.ceil(fe*R);return $<1?"less than a minute":$===1?"~1 minute":`~${$} minutes`}),q=be(()=>e(r)&&e(i)&&Math.ceil(e(i)/60*ue[e(h)])>30),Z=be(()=>{if(!e(i))return"--:--";const fe=Math.floor(e(i)/60),R=Math.floor(e(i)%60);return`${fe}:${R.toString().padStart(2,"0")}`});function oe(fe){return new Promise(R=>{const $=fe.type.startsWith("video/")?document.createElement("video"):document.createElement("audio");$.preload="metadata",$.onloadedmetadata=()=>{URL.revokeObjectURL($.src),R($.duration||0)},$.onerror=()=>{URL.revokeObjectURL($.src),R(0)},$.src=URL.createObjectURL(fe)})}async function X(fe){if(!fe)return;if(!(fe.type.startsWith("video/")||fe.type.startsWith("audio/"))){He("Please select a video or audio file","error");return}const $=8*1024*1024*1024;if(fe.size>$){He("File too large. Maximum size is 8GB.","error");return}n(r,fe,!0),n(ce,!1),n(xe,""),n(i,await oe(fe),!0)}function D(){n(r,null),n(i,0),n(I,0),n(F,""),n(Y,""),n(ce,!1),n(xe,""),n(Ce,!1),K&&(K.value="")}async function O(){try{await navigator.clipboard.writeText(e(xe)),n(Ce,!0),He("Copied to clipboard!","success"),setTimeout(()=>{n(Ce,!1)},2e3)}catch{He("Failed to copy","error")}}async function re(){const fe=e(a)==="url"&&e(o).trim();if(!e(r)&&!fe||e(C))return;e(q)&&He("This may take over 30 minutes. Consider using a faster model.","warning"),n(C,!0),n(I,0),n(ce,!1),n(xe,"");const R=fe?`URL â ${e(l)}`:`${e(r).name} â ${e(l)}`,$=Date.now().toString()+Math.random().toString(36).slice(2,11);_e.add({id:$,title:R,type:"transcribe",stage:fe?"downloading":"uploading",status:fe?"downloading media...":"uploading...",progress:0,startTime:Date.now()});let ee=null;try{ee=tn();let de;if(fe){n(F,"downloading media..."),n(Y,"fetching media from URL..."),_e.updateItem($,{status:"downloading media..."});const k=await fetch(`${Fe()}/api/fetch-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(o).trim()})});if(!k.ok){let J="Failed to download from URL";try{J=(await k.json()).error||J}catch{}throw new Error(J)}const S=await k.json();n(v,S,!0),n(i,S.duration||0,!0),_e.updateItem($,{title:`${S.fileName} â ${e(l)}`,stage:"transcribing",status:"transcribing...",progress:0}),n(I,0),n(F,"transcribing..."),n(Y,"starting transcription...");const A=await fetch(`${Fe()}/api/transcribe-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:S.filePath,fileName:S.fileName,outputMode:e(l),model:e(h),subtitleFormat:e(m),language:e(x)||void 0,...e(d)!==72&&{captionSize:e(d)},...e(p)>0&&{maxWordsPerCaption:e(p)},...e(w)>0&&{maxCharsPerLine:e(w)},...e(T)>0&&{minDuration:e(T)},...e(_)>0&&{captionGap:e(_)}})});if(!A.ok){let J="Failed to start transcription";try{J=(await A.json()).error||J}catch{}throw new Error(J)}de=(await A.json()).jobId}else{const k=e(r).size>94371840;if(n(F,"uploading..."),n(Y,"sending file to server..."),k){n(F,"uploading..."),n(Y,"large file detected, uploading in chunks...");const S=await kn(e(r),ne=>{n(I,ne,!0),n(Y,"uploading chunks..."),_e.updateItem($,{progress:ne,status:"uploading..."})}),{filePath:A,fileName:N}=S;n(I,0),n(F,"transcribing..."),n(Y,"starting transcription..."),_e.updateItem($,{stage:"transcribing",status:"transcribing...",progress:0});const J=await fetch(`${Fe()}/api/transcribe-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:A,fileName:N,outputMode:e(l),model:e(h),subtitleFormat:e(m),language:e(x)||void 0,...e(d)!==72&&{captionSize:e(d)},...e(p)>0&&{maxWordsPerCaption:e(p)},...e(w)>0&&{maxCharsPerLine:e(w)},...e(T)>0&&{minDuration:e(T)},...e(_)>0&&{captionGap:e(_)}})});if(!J.ok){let ne="Failed to start transcription";try{ne=(await J.json()).error||ne}catch{}throw new Error(ne)}de=(await J.json()).jobId}else{const S=new FormData;S.append("file",e(r)),S.append("outputMode",e(l)),S.append("model",e(h)),S.append("subtitleFormat",e(m)),e(x)&&S.append("language",e(x)),e(d)!==72&&S.append("captionSize",e(d)),e(p)>0&&S.append("maxWordsPerCaption",e(p)),e(w)>0&&S.append("maxCharsPerLine",e(w)),e(T)>0&&S.append("minDuration",e(T)),e(_)>0&&S.append("captionGap",e(_));const A=await fetch(`${Fe()}/api/transcribe`,{method:"POST",body:S});if(!A.ok){let J="Failed to start transcription";try{J=(await A.json()).error||J}catch{}throw new Error(J)}de=(await A.json()).jobId}}n(F,"transcribing..."),n(Y,"starting transcription..."),_e.updateItem($,{stage:"transcribing",status:"transcribing...",progress:0});const ve=Date.now(),le=3600*1e3;let Ie=0;for(;Date.now()-ve<=le;){await new Promise(k=>setTimeout(k,2e3));try{const k=new AbortController,S=setTimeout(()=>k.abort(),1e4);let A;try{A=await fetch(`${Fe()}/api/job/${de}/status`,{signal:k.signal})}finally{clearTimeout(S)}if(!A.ok)throw new Error(`Server returned ${A.status}`);const N=await A.json();if(Ie=0,N.status==="error")throw new Error(N.error||"Transcription failed");if(N.progress!==void 0&&n(I,N.progress,!0),N.message&&(n(Y,N.message,!0),n(F,"transcribing...")),_e.updateItem($,{progress:N.progress||0,status:N.message||"transcribing..."}),N.status==="complete"){N.textContent&&n(xe,N.textContent,!0);break}}catch(k){if(Ie++,Ie>=5)throw new Error(`Failed to check job status after 5 attempts: ${k.message}`)}}if(Date.now()-ve>le)throw new Error("Job timed out after 60 minutes.");if(e(l)==="text"){if(!e(xe)){const k=await fetch(`${Fe()}/api/job/${de}/download`);if(!k.ok)throw new Error("Failed to download transcript");n(xe,await k.text(),!0)}n(ce,!0),He("Transcription complete!","success")}else{const k=await fetch(`${Fe()}/api/job/${de}/download`);if(!k.ok)throw new Error("Failed to download result");const S=await k.blob(),N=(k.headers.get("content-disposition")||"").match(/filename="([^"]+)"/),J=N?N[1]:e(l)==="captions"?"captioned.mp4":`subtitles.${e(m)}`;Hr(S,J),n(ce,!0),He("Transcription complete!","success")}_e.updateItem($,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>_e.remove($),5e3)}catch(de){He(de.message||"Transcription failed","error"),_e.updateItem($,{stage:"error",status:de.message||"transcription failed"})}finally{n(C,!1),n(I,0),n(F,""),n(Y,""),ee&&sn(ee)}}var U=id(),V=he(U);vr(V,{extraContent:R=>{Ir(R,{})}});var W=u(V,2),ae=u(c(W),2),we=c(ae);{var Se=fe=>{var R=Fu(),$=he(R),ee=c($);let de;ee.__click=()=>n(a,"file");var ve=u(ee,2);let le;ve.__click=()=>n(a,"url");var Ie=u($,2);{var k=A=>{var N=Au();let J;N.__click=()=>K==null?void 0:K.click();var je=u(c(N),6);je.__change=ne=>{var b;X((b=ne.target.files)==null?void 0:b[0]),ne.target.value=""},as(je,ne=>K=ne,()=>K),Q(()=>J=ye(N,1,"drop-zone svelte-am61ph",null,J,{dragover:e(Pe)})),ht("dragover",N,ne=>{ne.preventDefault(),n(Pe,!0)}),ht("dragleave",N,ne=>{ne.preventDefault(),n(Pe,!1)}),ht("drop",N,ne=>{var b,z;ne.preventDefault(),n(Pe,!1),X((z=(b=ne.dataTransfer)==null?void 0:b.files)==null?void 0:z[0])}),g(A,N)},S=A=>{var N=Ou(),J=c(N);rs(J,()=>e(o),je=>n(o,je)),g(A,N)};B(Ie,A=>{e(a)==="file"?A(k):A(S,!1)})}Q(()=>{de=ye(ee,1,"input-tab svelte-am61ph",null,de,{active:e(a)==="file"}),le=ye(ve,1,"input-tab svelte-am61ph",null,le,{active:e(a)==="url"})}),g(fe,R)},pe=fe=>{var R=Oe(),$=he(R);{var ee=ve=>{var le=Uu(),Ie=c(le),k=u(c(Ie),2),S=c(k),A=c(S),N=u(S,2),J=c(N),je=u(k,2);je.__click=()=>{n(v,null),n(i,0)};var ne=u(Ie,2),b=c(ne),z=c(b);Q(se=>{bt(S,"title",e(v).fileName),L(A,e(v).fileName),L(J,se),L(z,`duration: ${(e(i)?e(Z):"unknown")??""}`)},[()=>lr(e(v).fileSize)]),g(ve,le)},de=ve=>{var le=Wu(),Ie=c(le),k=c(Ie),S=c(k),A=c(S);{var N=ie=>{var Le=Hu();g(ie,Le)},J=ie=>{var Le=Vu();g(ie,Le)};B(A,ie=>{e(r).type.startsWith("audio/")?ie(N):ie(J,!1)})}var je=u(k,2),ne=c(je),b=c(ne),z=u(ne,2),se=c(z),te=u(je,2);te.__click=D;var ze=u(Ie,2),me=c(ze),De=c(me);Q(ie=>{bt(ne,"title",e(r).name),L(b,e(r).name),L(se,ie),L(De,`duration: ${(e(i)?e(Z):"unknown")??""}`)},[()=>lr(e(r).size)]),g(ve,le)};B($,ve=>{e(v)?ve(ee):ve(de,!1)},!0)}g(fe,R)};B(we,fe=>{!e(r)&&!e(v)?fe(Se):fe(pe,!1)})}var Me=u(we,2),$e=u(c(Me),4);at($e,21,()=>Ee,ct,(fe,R)=>{var $=Ju();let ee;$.__click=()=>n(l,e(R).id,!0);var de=c($),ve=c(de),le=u(de,2),Ie=c(le);Q(()=>{ee=ye($,1,"mode-option svelte-am61ph",null,ee,{active:e(l)===e(R).id}),L(ve,e(R).label),L(Ie,e(R).sublabel)}),g(fe,$)});var Be=u(Me,2);{var H=fe=>{var R=Yu(),$=u(c(R),2),ee=c($);let de;ee.__click=()=>n(m,"srt");var ve=u(ee,2);let le;ve.__click=()=>n(m,"ass"),Q(()=>{de=ye(ee,1,"format-btn svelte-am61ph",null,de,{active:e(m)==="srt"}),le=ye(ve,1,"format-btn svelte-am61ph",null,le,{active:e(m)==="ass"})}),g(fe,R)};B(Be,fe=>{e(l)==="subtitles"&&fe(H)})}var G=u(Be,2),Te=u(c(G),4);at(Te,21,()=>We,ct,(fe,R)=>{var $=Gu();let ee;$.__click=()=>n(h,e(R).id,!0);var de=c($),ve=c(de),le=u(de,2),Ie=c(le);Q(()=>{ee=ye($,1,"mode-option svelte-am61ph",null,ee,{active:e(h)===e(R).id}),L(ve,e(R).label),L(Ie,e(R).sublabel)}),g(fe,$)});var Ke=u(G,2);Ke.__click=()=>n(y,!e(y));var Ze=c(Ke);let Re;var Ve=u(Ke,2);{var ut=fe=>{var R=Zu(),$=he(R),ee=u(c($),4);ee.__input=le=>n(x,le.target.value.trim(),!0);var de=u($,2);{var ve=le=>{var Ie=Ku(),k=u(c(Ie),4);{var S=st=>{var vt=Qu(),$t=c(vt),bs=c($t);Q(()=>{wt($t,`font-size: calc(${e(d)??""} / 19.2 * 1cqw); white-space: pre-line;`),L(bs,e(Ne))}),g(st,vt)};B(k,st=>{(e(l)==="captions"||e(m)==="ass")&&st(S)})}var A=u(k,2);{var N=st=>{var vt=Xu(),$t=c(vt),bs=u(c($t),2),Vs=c(bs),qr=u($t,2);Q(()=>L(Vs,e(d))),rs(qr,()=>e(d),Ms=>n(d,Ms)),g(st,vt)};B(A,st=>{(e(l)==="captions"||e(m)==="ass")&&st(N)})}var J=u(A,2),je=c(J),ne=u(c(je),2),b=c(ne),z=u(je,2),se=u(J,2),te=c(se),ze=u(c(te),2),me=c(ze),De=u(te,2),ie=u(se,2),Le=c(ie),tt=u(c(Le),2),Ae=c(tt),qe=u(Le,2),nt=u(ie,2),et=c(nt),Ye=u(c(et),2),it=c(Ye),rt=u(et,2);Q((st,vt)=>{L(b,e(p)===0?"off":e(p)),L(me,e(w)===0?"off":e(w)),L(Ae,st),L(it,vt)},[()=>e(T)===0?"off":e(T).toFixed(1)+"s",()=>e(_)===0?"off":e(_).toFixed(2)+"s"]),rs(z,()=>e(p),st=>n(p,st)),rs(De,()=>e(w),st=>n(w,st)),rs(qe,()=>e(T),st=>n(T,st)),rs(rt,()=>e(_),st=>n(_,st)),g(le,Ie)};B(de,le=>{e(ge)&&le(ve)})}Q(()=>dn(ee,e(x))),g(fe,R)};B(Ve,fe=>{e(y)&&fe(ut)})}var pt=u(Ve,2),mt=u(c(pt),2);let gt;var ot=c(mt),dt=u(pt,2);dt.__click=re;var Kt=u(c(dt)),Rt=u(dt,2);{var St=fe=>{var R=ed(),$=c(R),ee=c($),de=c(ee),ve=u(ee,2),le=c(ve),Ie=u($,2);xn(Ie,{get percent(){return e(I)}});var k=u(Ie,2),S=c(k);Q(A=>{L(de,e(F)),L(le,`${A??""}%`),L(S,e(Y))},[()=>Math.round(e(I))]),g(fe,R)};B(Rt,fe=>{e(C)&&fe(St)})}var qt=u(Rt,2);{var cs=fe=>{var R=rd(),$=u(c(R),2),ee=c($),de=c(ee),ve=u($,2),le=c(ve);le.__click=O;var Ie=c(le);{var k=N=>{var J=td();g(N,J)},S=N=>{var J=sd();g(N,J)};B(Ie,N=>{e(Ce)?N(k):N(S,!1)})}var A=u(le,2);A.__click=D,Q(()=>L(de,e(xe))),g(fe,R)},Zt=fe=>{var R=Oe(),$=he(R);{var ee=de=>{var ve=nd(),le=c(ve),Ie=u(c(le),2),k=c(Ie),S=u(le,2);S.__click=D,Q(()=>L(k,e(l)==="captions"?"captions burned in!":"subtitles ready!")),g(de,ve)};B($,de=>{e(ce)&&de(ee)},!0)}g(fe,R)};B(qt,fe=>{e(ce)&&e(l)==="text"?fe(cs):fe(Zt,!1)})}var es=u(W,2);Rr(es),Q(fe=>{Re=ye(Ze,0,"svelte-am61ph",null,Re,{rotated:e(y)}),gt=ye(mt,1,"estimate-value svelte-am61ph",null,gt,{"estimate-warning":e(q)}),L(ot,e(j)),dt.disabled=fe,L(Kt,` ${e(C)?"transcribing...":"transcribe"}`)},[()=>!e(r)&&!(e(a)==="url"&&e(o).trim())||e(C)]),g(t,U),kt()}Mt(["click","change","input"]);var od=P(`<!> <main class="svelte-13tj7i"><div class="page-header svelte-13tj7i"><h1 class="svelte-13tj7i">privacy policy</h1> <p class="svelte-13tj7i">no legal jargon, just the truth</p></div> <div class="tldr-box svelte-13tj7i"><h3 class="svelte-13tj7i">tl;dr</h3> <p class="svelte-13tj7i">yoink doesn't collect anything. no tracking, no cookies, no analytics. your files are stored on an encrypted volume with a key that only exists in RAM, and get wiped automatically.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">who runs this</h2> <p class="svelte-13tj7i">just me, one person. i made yoink because i wanted a simple tool that does what it says without being weird about your data. i was inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-13tj7i">cobalt.tools</a> and <a href="https://vert.sh" target="_blank" rel="noopener" class="svelte-13tj7i">vert.sh</a>, and wanted to combine the best parts into one site.</p> <p class="svelte-13tj7i">im not a company, i have no investors, and i have no reason to collect your data.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">your files</h2> <p class="svelte-13tj7i">files are stored on a LUKS2 encrypted volume on the server. the encryption key is randomly generated at every boot, stored only in RAM, never written to disk, so if the server ever powers off the key is gone and the data is just unrecoverable.</p> <p class="svelte-13tj7i">once your download or conversion is done, the file gets deleted immediately from that encrypted volume. there's also a cleanup job that runs every 5 minutes and wipes anything older than 20 minutes no matter what, just in case something slips through.</p> <p class="svelte-13tj7i">we don't log what you download, what you convert, what you compress, or any filenames or URLs. none of that gets saved anywhere.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">what we collect</h2> <p class="svelte-13tj7i">nothing. literally zero.</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">no analytics</strong> - no tracking scripts, no usage stats, nothing</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no cookies</strong> - we don't set a single cookie</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no IP logging</strong> - your IP isn't stored or logged</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no content logging</strong> - URLs, filenames, and what you do here are not recorded</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no accounts</strong> - there's nothing to sign up for, no emails collected</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no third party stuff</strong> - no google analytics, no facebook pixel, no ad networks</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">encryption</h2> <p class="svelte-13tj7i">two layers:</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">in transit</strong>: everything goes through HTTPS, so your connection to yoink is encrypted end to end, nobody between you and the server can see what you're doing.</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">at rest</strong>: all temporary files go on a LUKS2 encrypted volume (AES-256). the decryption key is generated fresh at every server boot using /dev/urandom, kept only in RAM, never written anywhere. no way to recover files after a reboot, and no way to read them without the key that only exists in memory.</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">open source</h2> <p class="svelte-13tj7i">the whole thing is on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>. you can read every line of code yourself if you want to verify any of this. if you find something off, please tell me.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">contact</h2> <p class="svelte-13tj7i">questions, concerns, or just want to say hi, reach me at <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-13tj7i">coah80.com</a> or open an issue on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">changes</h2> <p class="svelte-13tj7i">if this policy changes, it gets updated here. no sneaky edits. last updated: <strong class="svelte-13tj7i">february 23, 2026</strong>.</p></div></main> <!>`,1);function ld(t){var s=od(),r=he(s);vr(r,{});var i=u(r,4);Rr(i),g(t,s)}var cd=P('<div class="spinner-wrap svelte-121vd2i"><!></div> <h1 class="svelte-121vd2i">downloading...</h1> <p class="svelte-121vd2i">your download should start automatically</p>',1),vd=P('<h1 class="success svelte-121vd2i">done</h1> <p class="svelte-121vd2i">download started successfully</p>',1),ud=P('<h1 class="error svelte-121vd2i">download failed</h1> <p class="svelte-121vd2i">this file is no longer available</p>',1),dd=P('<main class="svelte-121vd2i"><div class="download-container svelte-121vd2i"><!> <div> </div></div></main>');function fd(t,s){xt(s,!0);const r=()=>Xt(qa,"$query",i),[i,o]=ys();let a=E("loading"),v=E("preparing download..."),f=be(()=>r().token||"");Er(()=>{const _=window.location.pathname.replace("/download","").replace(/^\//,""),y=e(f)||_;if(!y){n(a,"error"),n(v,"no download token provided");return}const C=`${Fe()}/api/bot/download/${y}`;n(v,"starting download..."),fetch(C,{method:"HEAD"}).then(I=>{if(I.ok)n(v,"download started"),window.location.href=C,setTimeout(()=>{n(a,"success"),n(v,"you can close this page now")},2e3);else throw new Error("Download not available")}).catch(()=>{n(a,"error"),n(v,"the download link has expired (5 minute limit)")})});var l=dd(),h=c(l),m=c(h);{var x=_=>{var y=cd(),C=he(y),I=c(C);La(I),g(_,y)},d=_=>{var y=Oe(),C=he(y);{var I=Y=>{var ce=vd();g(Y,ce)},F=Y=>{var ce=ud();g(Y,ce)};B(C,Y=>{e(a)==="success"?Y(I):Y(F,!1)},!0)}g(_,y)};B(m,_=>{e(a)==="loading"?_(x):_(d,!1)})}var p=u(m,2);let w;var T=c(p);Q(()=>{w=ye(p,1,"status svelte-121vd2i",null,w,{error:e(a)==="error",success:e(a)==="success"}),L(T,e(v))}),g(t,l),kt(),o()}var pd=P('<main class="svelte-zxc657"><p>Redirecting...</p></main>');function hd(t,s){xt(s,!1),Er(()=>{const i=new URLSearchParams(window.location.search),a=(i.get("url")||i.get("text")||"").match(/https?:\/\/[^\s]+/);let v=a?a[0]:"";if(v=v.replace(/[.,!?;:)\]}>]+$/,""),v)try{const f=new URL(v);(f.protocol==="http:"||f.protocol==="https:")&&localStorage.setItem("yoink_shared_url",JSON.stringify({url:v,timestamp:Date.now()}))}catch{}Mr("/")}),Ma();var r=pd();g(t,r),kt()}function gd(t,s){xt(s,!1),Er(()=>{Mr("/?updates")}),Ma(),kt()}var md=P(`<!> <main class="svelte-kbj945"><div class="not-found svelte-kbj945"><h1 class="svelte-kbj945">404</h1> <p class="svelte-kbj945">this page doesn't exist</p> <a href="/" class="back-link svelte-kbj945">go back home</a></div></main>`,1);function wd(t){var s=md(),r=he(s);vr(r,{}),g(t,s)}var _d=P(`<div class="banner-overlay svelte-v9gb2s" role="dialog" aria-modal="true" aria-label="What's new"><div class="banner-card svelte-v9gb2s"><div class="banner-meta svelte-v9gb2s"><span class="banner-version svelte-v9gb2s"> </span> <span class="banner-date svelte-v9gb2s"> </span></div> <h2 class="banner-title svelte-v9gb2s"> </h2> <img class="banner-image svelte-v9gb2s"/> <p class="banner-summary svelte-v9gb2s"> </p> <div class="banner-actions svelte-v9gb2s"><button class="banner-btn primary svelte-v9gb2s">go to post</button> <button class="banner-btn svelte-v9gb2s">dismiss</button></div></div></div>`);function yd(t,s){xt(s,!0);let r=E(!1),i=Aa[0];Er(()=>{localStorage.getItem("yoink-update-dismissed")!==En&&n(r,!0)});function o(){localStorage.setItem("yoink-update-dismissed",En),n(r,!1)}function a(){localStorage.setItem("yoink-update-dismissed",En),n(r,!1),Mr("/?updates")}var v=Oe(),f=he(v);{var l=h=>{var m=_d();m.__click=Pe=>{Pe.target===Pe.currentTarget&&o()},m.__keydown=Pe=>{Pe.key==="Escape"&&o()};var x=c(m),d=c(x),p=c(d),w=c(p),T=u(p,2),_=c(T),y=u(d,2),C=c(y),I=u(y,2),F=u(I,2),Y=c(F),ce=u(F,2),xe=c(ce);xe.__click=a;var Ce=u(xe,2);Ce.__click=o,Q(()=>{L(w,i.version),L(_,i.date),L(C,i.title),bt(I,"src",i.image),bt(I,"alt",i.title),L(Y,i.summary)}),g(h,m)};B(f,h=>{e(r)&&h(l)})}g(t,v),kt()}Mt(["click","keydown"]);var bd=P("<!> <!> <!> <!>",1);function xd(t,s){xt(s,!0);const r=()=>Xt(yn,"$path",i),[i,o]=ys(),a={"/":uv,"/settings":Av,"/convert":Zv,"/compress":uu,"/trim":Lu,"/transcribe":ad,"/privacy":ld,"/download":fd,"/share":hd,"/updates":gd},v={"/":["yoink - download youtube videos, audio, and clips for free","yoink - free video downloader for youtube, twitter, tiktok","yoink - save videos from any site in seconds","yoink - fast youtube downloader, no ads, no signup","yoink - download videos and audio from 1000+ sites"],"/convert":["yoink - convert videos to mp4, webm, mp3, and more","yoink - free online video and audio converter","yoink - convert any video format instantly","yoink - turn videos into mp3, mp4, wav, flac, and more","yoink - fast video converter, no file size limit"],"/compress":["yoink - compress videos to any file size for free","yoink - shrink video files without losing quality","yoink - free video compressor for discord, email, and more","yoink - make videos smaller in seconds","yoink - reduce video file size online, fast and free"],"/trim":["yoink - trim and crop videos online for free","yoink - cut videos to any length and aspect ratio","yoink - clip videos for reels, shorts, and tiktok","yoink - free video trimmer with crop and preview","yoink - trim videos to 9:16, 16:9, 1:1, and more"],"/transcribe":["yoink - transcribe videos and audio to text for free","yoink - free video transcription with subtitles and captions","yoink - generate subtitles from any video or audio file","yoink - turn speech into text, srt, or burned-in captions","yoink - free audio transcription, no account needed"],"/settings":["yoink - settings"],"/privacy":["yoink - privacy"],"/updates":["yoink - updates and changelog"]};function f(_){const y=v[_];return y?y[Math.floor(Math.random()*y.length)]:"yoink.tools"}let l=be(r),h=be(()=>a[e(l)]||wd);Ps(()=>{document.title=f(e(l))});function m(_){const y=_.target.closest("a");if(!y)return;const C=y.getAttribute("href");!C||!C.startsWith("/")||y.target==="_blank"||(_.preventDefault(),Mr(C))}Er(()=>{ql(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(_e.reconnectOnResume(),$l())})});var x=bd();ht("click",zr.body,m);var d=he(x);ul(d,()=>e(h),(_,y)=>{y(_,{})});var p=u(d,2);Sc(p,{});var w=u(p,2);zl(w);var T=u(w,2);yd(T,{}),g(t,x),kt(),o()}il(xd,{target:document.getElementById("app")});
