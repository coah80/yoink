var di=Object.defineProperty;var Rr=e=>{throw TypeError(e)};var fi=(e,t,s)=>t in e?di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var qt=(e,t,s)=>fi(e,typeof t!="symbol"?t+"":t,s),Yn=(e,t,s)=>t.has(e)||Rr("Cannot "+s);var b=(e,t,s)=>(Yn(e,t,"read from private field"),s?s.call(e):t.get(e)),be=(e,t,s)=>t.has(e)?Rr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),fe=(e,t,s,r)=>(Yn(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),nt=(e,t,s)=>(Yn(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();const er=!1;var oa=Array.isArray,pi=Array.prototype.indexOf,Js=Array.prototype.includes,An=Array.from,la=Object.defineProperty,an=Object.getOwnPropertyDescriptor,ca=Object.getOwnPropertyDescriptors,hi=Object.prototype,gi=Array.prototype,mr=Object.getPrototypeOf,Ar=Object.isExtensible;const os=()=>{};function mi(e){return e()}function Pn(e){for(var t=0;t<e.length;t++)e[t]()}function ua(){var e,t,s=new Promise((r,i)=>{e=r,t=i});return{promise:s,resolve:e,reject:t}}const tt=2,qn=4,gn=8,va=1<<24,ss=16,Pt=32,$s=64,wr=128,xt=512,Ge=1024,st=2048,$t=4096,gt=8192,ls=16384,_r=32768,fs=65536,Fr=1<<17,da=1<<18,Qs=1<<19,fa=1<<20,Zt=1<<25,Cs=32768,tr=1<<21,yr=1<<22,cs=1<<23,As=Symbol("$state"),wi=Symbol(""),Rs=new class extends Error{constructor(){super(...arguments);qt(this,"name","StaleReactionError");qt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function _i(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function yi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function bi(e,t,s){throw new Error("https://svelte.dev/e/each_key_duplicate")}function ki(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function xi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Si(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ji(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ti(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ci(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ei(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Mi=1,$i=2,pa=4,Pi=8,qi=16,ha=1,Ii=2,Ze=Symbol(),Di="http://www.w3.org/1999/xhtml";function Bi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ga(e){return e===this.v}function ma(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function wa(e){return!ma(e,this.v)}let mn=!1,Ri=!1;function Ai(){mn=!0}let Ve=null;function Ws(e){Ve=e}function mt(e,t=!1,s){Ve={p:Ve,i:!1,c:null,e:null,s:e,x:null,l:mn&&!t?{s:null,u:null,$:[]}:null}}function wt(e){var t=Ve,s=t.e;if(s!==null){t.e=null;for(var r of s)Na(r)}return t.i=!0,Ve=t.p,{}}function wn(){return!mn||Ve!==null&&Ve.l===null}let hs=[];function _a(){var e=hs;hs=[],Pn(e)}function es(e){if(hs.length===0&&!on){var t=hs;queueMicrotask(()=>{t===hs&&_a()})}hs.push(e)}function Fi(){for(;hs.length>0;)_a()}function ya(e){var t=Ie;if(t===null)return Se.f|=cs,e;if((t.f&_r)===0){if((t.f&wr)===0)throw e;t.b.error(e)}else Gs(e,t)}function Gs(e,t){for(;t!==null;){if((t.f&wr)!==0)try{t.b.error(e);return}catch(s){e=s}t=t.parent}throw e}const Ni=-7169;function Ue(e,t){e.f=e.f&Ni|t}function br(e){(e.f&xt)!==0||e.deps===null?Ue(e,Ge):Ue(e,$t)}function ba(e){if(e!==null)for(const t of e)(t.f&tt)===0||(t.f&Cs)===0||(t.f^=Cs,ba(t.deps))}function ka(e,t,s){(e.f&st)!==0?t.add(e):(e.f&$t)!==0&&s.add(e),ba(e.deps),Ue(e,Ge)}const zn=new Set;let ke=null,sr=null,et=null,lt=[],Fn=null,nr=!1,on=!1;var Fs,Ns,ms,Os,dn,fn,ws,Gt,Ls,Lt,rr,ar,xa;const Dr=class Dr{constructor(){be(this,Lt);qt(this,"committed",!1);qt(this,"current",new Map);qt(this,"previous",new Map);be(this,Fs,new Set);be(this,Ns,new Set);be(this,ms,0);be(this,Os,0);be(this,dn,null);be(this,fn,new Set);be(this,ws,new Set);be(this,Gt,new Map);qt(this,"is_fork",!1);be(this,Ls,!1)}is_deferred(){return this.is_fork||b(this,Os)>0}skip_effect(t){b(this,Gt).has(t)||b(this,Gt).set(t,{d:[],m:[]})}unskip_effect(t){var s=b(this,Gt).get(t);if(s){b(this,Gt).delete(t);for(var r of s.d)Ue(r,st),Et(r);for(r of s.m)Ue(r,$t),Et(r)}}process(t){var i;lt=[],this.apply();var s=[],r=[];for(const a of t)nt(this,Lt,rr).call(this,a,s,r);if(this.is_deferred()){nt(this,Lt,ar).call(this,r),nt(this,Lt,ar).call(this,s);for(const[a,o]of b(this,Gt))Ca(a,o)}else{for(const a of b(this,Fs))a();b(this,Fs).clear(),b(this,ms)===0&&nt(this,Lt,xa).call(this),sr=this,ke=null,Nr(r),Nr(s),sr=null,(i=b(this,dn))==null||i.resolve()}et=null}capture(t,s){s!==Ze&&!this.previous.has(t)&&this.previous.set(t,s),(t.f&cs)===0&&(this.current.set(t,t.v),et==null||et.set(t,t.v))}activate(){ke=this,this.apply()}deactivate(){ke===this&&(ke=null,et=null)}flush(){if(this.activate(),lt.length>0){if(Sa(),ke!==null&&ke!==this)return}else b(this,ms)===0&&this.process([]);this.deactivate()}discard(){for(const t of b(this,Ns))t(this);b(this,Ns).clear()}increment(t){fe(this,ms,b(this,ms)+1),t&&fe(this,Os,b(this,Os)+1)}decrement(t){fe(this,ms,b(this,ms)-1),t&&fe(this,Os,b(this,Os)-1),!b(this,Ls)&&(fe(this,Ls,!0),es(()=>{fe(this,Ls,!1),this.is_deferred()?lt.length>0&&this.flush():this.revive()}))}revive(){for(const t of b(this,fn))b(this,ws).delete(t),Ue(t,st),Et(t);for(const t of b(this,ws))Ue(t,$t),Et(t);this.flush()}oncommit(t){b(this,Fs).add(t)}ondiscard(t){b(this,Ns).add(t)}settled(){return(b(this,dn)??fe(this,dn,ua())).promise}static ensure(){if(ke===null){const t=ke=new Dr;zn.add(ke),on||es(()=>{ke===t&&t.flush()})}return ke}apply(){}};Fs=new WeakMap,Ns=new WeakMap,ms=new WeakMap,Os=new WeakMap,dn=new WeakMap,fn=new WeakMap,ws=new WeakMap,Gt=new WeakMap,Ls=new WeakMap,Lt=new WeakSet,rr=function(t,s,r){t.f^=Ge;for(var i=t.first,a=null;i!==null;){var o=i.f,c=(o&(Pt|$s))!==0,u=c&&(o&Ge)!==0,p=u||(o&gt)!==0||b(this,Gt).has(i);if(!p&&i.fn!==null){c?i.f^=Ge:a!==null&&(o&(qn|gn|va))!==0?a.b.defer_effect(i):(o&qn)!==0?s.push(i):bn(i)&&((o&ss)!==0&&b(this,ws).add(i),cn(i));var m=i.first;if(m!==null){i=m;continue}}var _=i.parent;for(i=i.next;i===null&&_!==null;)_===a&&(a=null),i=_.next,_=_.parent}},ar=function(t){for(var s=0;s<t.length;s+=1)ka(t[s],b(this,fn),b(this,ws))},xa=function(){var i;if(zn.size>1){this.previous.clear();var t=et,s=!0;for(const a of zn){if(a===this){s=!1;continue}const o=[];for(const[u,p]of this.current){if(a.current.has(u))if(s&&p!==a.current.get(u))a.current.set(u,p);else continue;o.push(u)}if(o.length===0)continue;const c=[...a.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var r=lt;lt=[];const u=new Set,p=new Map;for(const m of o)ja(m,c,u,p);if(lt.length>0){ke=a,a.apply();for(const m of lt)nt(i=a,Lt,rr).call(i,m,[],[]);a.deactivate()}lt=r}}ke=null,et=t}this.committed=!0,zn.delete(this)};let us=Dr;function Oi(e){var t=on;on=!0;try{for(var s;;){if(Fi(),lt.length===0&&(ke==null||ke.flush(),lt.length===0))return Fn=null,s;Sa()}}finally{on=t}}function Sa(){nr=!0;var e=null;try{for(var t=0;lt.length>0;){var s=us.ensure();if(t++>1e3){var r,i;Li()}s.process(lt),vs.clear()}}finally{lt=[],nr=!1,Fn=null}}function Li(){try{ji()}catch(e){Gs(e,Fn)}}let Ct=null;function Nr(e){var t=e.length;if(t!==0){for(var s=0;s<t;){var r=e[s++];if((r.f&(ls|gt))===0&&bn(r)&&(Ct=new Set,cn(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?Ua(r):r.fn=null),(Ct==null?void 0:Ct.size)>0)){vs.clear();for(const i of Ct){if((i.f&(ls|gt))!==0)continue;const a=[i];let o=i.parent;for(;o!==null;)Ct.has(o)&&(Ct.delete(o),a.push(o)),o=o.parent;for(let c=a.length-1;c>=0;c--){const u=a[c];(u.f&(ls|gt))===0&&cn(u)}}Ct.clear()}}Ct=null}}function ja(e,t,s,r){if(!s.has(e)&&(s.add(e),e.reactions!==null))for(const i of e.reactions){const a=i.f;(a&tt)!==0?ja(i,t,s,r):(a&(yr|ss))!==0&&(a&st)===0&&Ta(i,t,r)&&(Ue(i,st),Et(i))}}function Ta(e,t,s){const r=s.get(e);if(r!==void 0)return r;if(e.deps!==null)for(const i of e.deps){if(Js.call(t,i))return!0;if((i.f&tt)!==0&&Ta(i,t,s))return s.set(i,!0),!0}return s.set(e,!1),!1}function Et(e){for(var t=Fn=e;t.parent!==null;){t=t.parent;var s=t.f;if(nr&&t===Ie&&(s&ss)!==0&&(s&da)===0)return;if((s&($s|Pt))!==0){if((s&Ge)===0)return;t.f^=Ge}}lt.push(t)}function Ca(e,t){if(!((e.f&Pt)!==0&&(e.f&Ge)!==0)){(e.f&st)!==0?t.d.push(e):(e.f&$t)!==0&&t.m.push(e),Ue(e,Ge);for(var s=e.first;s!==null;)Ca(s,t),s=s.next}}function Ui(e){let t=0,s=zs(0),r;return()=>{xr()&&(n(s),Un(()=>(t===0&&(r=Ps(()=>e(()=>ln(s)))),t+=1,()=>{es(()=>{t-=1,t===0&&(r==null||r(),r=void 0,ln(s))})})))}}var Vi=fs|Qs|wr;function Hi(e,t,s){new Ji(e,t,s)}var yt,gr,It,_s,Dt,bt,ot,Bt,Yt,as,ys,is,Us,bs,Vs,Hs,Qt,Bn,Ye,Wi,Gi,ir,En,Mn,or;class Ji{constructor(t,s,r){be(this,Ye);qt(this,"parent");qt(this,"is_pending",!1);be(this,yt);be(this,gr,null);be(this,It);be(this,_s);be(this,Dt);be(this,bt,null);be(this,ot,null);be(this,Bt,null);be(this,Yt,null);be(this,as,null);be(this,ys,0);be(this,is,0);be(this,Us,!1);be(this,bs,!1);be(this,Vs,new Set);be(this,Hs,new Set);be(this,Qt,null);be(this,Bn,Ui(()=>(fe(this,Qt,zs(b(this,ys))),()=>{fe(this,Qt,null)})));fe(this,yt,t),fe(this,It,s),fe(this,_s,r),this.parent=Ie.b,this.is_pending=!!b(this,It).pending,fe(this,Dt,yn(()=>{Ie.b=this;{var i=nt(this,Ye,ir).call(this);try{fe(this,bt,kt(()=>r(i)))}catch(a){this.error(a)}b(this,is)>0?nt(this,Ye,Mn).call(this):this.is_pending=!1}return()=>{var a;(a=b(this,as))==null||a.remove()}},Vi))}defer_effect(t){ka(t,b(this,Vs),b(this,Hs))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!b(this,It).pending}update_pending_count(t){nt(this,Ye,or).call(this,t),fe(this,ys,b(this,ys)+t),!(!b(this,Qt)||b(this,Us))&&(fe(this,Us,!0),es(()=>{fe(this,Us,!1),b(this,Qt)&&Ys(b(this,Qt),b(this,ys))}))}get_effect_pending(){return b(this,Bn).call(this),n(b(this,Qt))}error(t){var s=b(this,It).onerror;let r=b(this,It).failed;if(b(this,bs)||!s&&!r)throw t;b(this,bt)&&(dt(b(this,bt)),fe(this,bt,null)),b(this,ot)&&(dt(b(this,ot)),fe(this,ot,null)),b(this,Bt)&&(dt(b(this,Bt)),fe(this,Bt,null));var i=!1,a=!1;const o=()=>{if(i){Bi();return}i=!0,a&&Ei(),us.ensure(),fe(this,ys,0),b(this,Bt)!==null&&xs(b(this,Bt),()=>{fe(this,Bt,null)}),this.is_pending=this.has_pending_snippet(),fe(this,bt,nt(this,Ye,En).call(this,()=>(fe(this,bs,!1),kt(()=>b(this,_s).call(this,b(this,yt)))))),b(this,is)>0?nt(this,Ye,Mn).call(this):this.is_pending=!1};es(()=>{try{a=!0,s==null||s(t,o),a=!1}catch(c){Gs(c,b(this,Dt)&&b(this,Dt).parent)}r&&fe(this,Bt,nt(this,Ye,En).call(this,()=>{us.ensure(),fe(this,bs,!0);try{return kt(()=>{r(b(this,yt),()=>t,()=>o)})}catch(c){return Gs(c,b(this,Dt).parent),null}finally{fe(this,bs,!1)}}))})}}yt=new WeakMap,gr=new WeakMap,It=new WeakMap,_s=new WeakMap,Dt=new WeakMap,bt=new WeakMap,ot=new WeakMap,Bt=new WeakMap,Yt=new WeakMap,as=new WeakMap,ys=new WeakMap,is=new WeakMap,Us=new WeakMap,bs=new WeakMap,Vs=new WeakMap,Hs=new WeakMap,Qt=new WeakMap,Bn=new WeakMap,Ye=new WeakSet,Wi=function(){try{fe(this,bt,kt(()=>b(this,_s).call(this,b(this,yt))))}catch(t){this.error(t)}},Gi=function(){const t=b(this,It).pending;t&&(fe(this,ot,kt(()=>t(b(this,yt)))),es(()=>{var s=nt(this,Ye,ir).call(this);fe(this,bt,nt(this,Ye,En).call(this,()=>(us.ensure(),kt(()=>b(this,_s).call(this,s))))),b(this,is)>0?nt(this,Ye,Mn).call(this):(xs(b(this,ot),()=>{fe(this,ot,null)}),this.is_pending=!1)}))},ir=function(){var t=b(this,yt);return this.is_pending&&(fe(this,as,ds()),b(this,yt).before(b(this,as)),t=b(this,as)),t},En=function(t){var s=Ie,r=Se,i=Ve;Nt(b(this,Dt)),jt(b(this,Dt)),Ws(b(this,Dt).ctx);try{return t()}catch(a){return ya(a),null}finally{Nt(s),jt(r),Ws(i)}},Mn=function(){const t=b(this,It).pending;b(this,bt)!==null&&(fe(this,Yt,document.createDocumentFragment()),b(this,Yt).append(b(this,as)),Ja(b(this,bt),b(this,Yt))),b(this,ot)===null&&fe(this,ot,kt(()=>t(b(this,yt))))},or=function(t){var s;if(!this.has_pending_snippet()){this.parent&&nt(s=this.parent,Ye,or).call(s,t);return}if(fe(this,is,b(this,is)+t),b(this,is)===0){this.is_pending=!1;for(const r of b(this,Vs))Ue(r,st),Et(r);for(const r of b(this,Hs))Ue(r,$t),Et(r);b(this,Vs).clear(),b(this,Hs).clear(),b(this,ot)&&xs(b(this,ot),()=>{fe(this,ot,null)}),b(this,Yt)&&(b(this,yt).before(b(this,Yt)),fe(this,Yt,null))}};function Yi(e,t,s,r){const i=wn()?Nn:za;var a=e.filter(l=>!l.settled);if(s.length===0&&a.length===0){r(t.map(i));return}var o=ke,c=Ie,u=Qi(),p=a.length===1?a[0].promise:a.length>1?Promise.all(a.map(l=>l.promise)):null;function m(l){u();try{r(l)}catch(v){(c.f&ls)===0&&Gs(v,c)}o==null||o.deactivate(),lr()}if(s.length===0){p.then(()=>m(t.map(i)));return}function _(){u(),Promise.all(s.map(l=>Ki(l))).then(l=>m([...t.map(i),...l])).catch(l=>Gs(l,c))}p?p.then(_):_()}function Qi(){var e=Ie,t=Se,s=Ve,r=ke;return function(a=!0){Nt(e),jt(t),Ws(s),a&&(r==null||r.activate())}}function lr(){Nt(null),jt(null),Ws(null)}function Nn(e){var t=tt|st,s=Se!==null&&(Se.f&tt)!==0?Se:null;return Ie!==null&&(Ie.f|=Qs),{ctx:Ve,deps:null,effects:null,equals:ga,f:t,fn:e,reactions:null,rv:0,v:Ze,wv:0,parent:s??Ie,ac:null}}function Ki(e,t,s){let r=Ie;r===null&&yi();var i=r.b,a=void 0,o=zs(Ze),c=!Se,u=new Map;return oo(()=>{var v;var p=ua();a=p.promise;try{Promise.resolve(e()).then(p.resolve,p.reject).then(()=>{m===ke&&m.committed&&m.deactivate(),lr()})}catch(g){p.reject(g),lr()}var m=ke;if(c){var _=i.is_rendered();i.update_pending_count(1),m.increment(_),(v=u.get(m))==null||v.reject(Rs),u.delete(m),u.set(m,p)}const l=(g,S=void 0)=>{if(m.activate(),S)S!==Rs&&(o.f|=cs,Ys(o,S));else{(o.f&cs)!==0&&(o.f^=cs),Ys(o,g);for(const[w,k]of u){if(u.delete(w),w===m)break;k.reject(Rs)}}c&&(i.update_pending_count(-1),m.decrement(_))};p.promise.then(l,g=>l(null,g||"unknown"))}),Sr(()=>{for(const p of u.values())p.reject(Rs)}),new Promise(p=>{function m(_){function l(){_===a?p(o):m(a)}_.then(l,l)}m(a)})}function je(e){const t=Nn(e);return Wa(t),t}function za(e){const t=Nn(e);return t.equals=wa,t}function Ea(e){var t=e.effects;if(t!==null){e.effects=null;for(var s=0;s<t.length;s+=1)dt(t[s])}}function Xi(e){for(var t=e.parent;t!==null;){if((t.f&tt)===0)return(t.f&ls)===0?t:null;t=t.parent}return null}function kr(e){var t,s=Ie;Nt(Xi(e));try{e.f&=~Cs,Ea(e),t=Ka(e)}finally{Nt(s)}return t}function Ma(e){var t=kr(e);if(!e.equals(t)&&(e.wv=Ya(),(!(ke!=null&&ke.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){Ue(e,Ge);return}Es||(et!==null?(xr()||ke!=null&&ke.is_fork)&&et.set(e,t):br(e))}let cr=new Set;const vs=new Map;let $a=!1;function zs(e,t){var s={f:0,v:e,reactions:null,equals:ga,rv:0,wv:0};return s}function I(e,t){const s=zs(e);return Wa(s),s}function Pa(e,t=!1,s=!0){var i;const r=zs(e);return t||(r.equals=wa),mn&&s&&Ve!==null&&Ve.l!==null&&((i=Ve.l).s??(i.s=[])).push(r),r}function d(e,t,s=!1){Se!==null&&(!Mt||(Se.f&Fr)!==0)&&wn()&&(Se.f&(tt|ss|yr|Fr))!==0&&(St===null||!Js.call(St,e))&&zi();let r=s?sn(t):t;return Ys(e,r)}function Ys(e,t){if(!e.equals(t)){var s=e.v;Es?vs.set(e,t):vs.set(e,s),e.v=t;var r=us.ensure();if(r.capture(e,s),(e.f&tt)!==0){const i=e;(e.f&st)!==0&&kr(i),br(i)}e.wv=Ya(),qa(e,st),wn()&&Ie!==null&&(Ie.f&Ge)!==0&&(Ie.f&(Pt|$s))===0&&(_t===null?uo([e]):_t.push(e)),!r.is_fork&&cr.size>0&&!$a&&Zi()}return t}function Zi(){$a=!1;for(const e of cr)(e.f&Ge)!==0&&Ue(e,$t),bn(e)&&cn(e);cr.clear()}function ln(e){d(e,e.v+1)}function qa(e,t){var s=e.reactions;if(s!==null)for(var r=wn(),i=s.length,a=0;a<i;a++){var o=s[a],c=o.f;if(!(!r&&o===Ie)){var u=(c&st)===0;if(u&&Ue(o,t),(c&tt)!==0){var p=o;et==null||et.delete(p),(c&Cs)===0&&(c&xt&&(o.f|=Cs),qa(p,$t))}else u&&((c&ss)!==0&&Ct!==null&&Ct.add(o),Et(o))}}}function sn(e){if(typeof e!="object"||e===null||As in e)return e;const t=mr(e);if(t!==hi&&t!==gi)return e;var s=new Map,r=oa(e),i=I(0),a=Ss,o=c=>{if(Ss===a)return c();var u=Se,p=Ss;jt(null),Vr(a);var m=c();return jt(u),Vr(p),m};return r&&s.set("length",I(e.length)),new Proxy(e,{defineProperty(c,u,p){(!("value"in p)||p.configurable===!1||p.enumerable===!1||p.writable===!1)&&Ti();var m=s.get(u);return m===void 0?m=o(()=>{var _=I(p.value);return s.set(u,_),_}):d(m,p.value,!0),!0},deleteProperty(c,u){var p=s.get(u);if(p===void 0){if(u in c){const m=o(()=>I(Ze));s.set(u,m),ln(i)}}else d(p,Ze),ln(i);return!0},get(c,u,p){var v;if(u===As)return e;var m=s.get(u),_=u in c;if(m===void 0&&(!_||(v=an(c,u))!=null&&v.writable)&&(m=o(()=>{var g=sn(_?c[u]:Ze),S=I(g);return S}),s.set(u,m)),m!==void 0){var l=n(m);return l===Ze?void 0:l}return Reflect.get(c,u,p)},getOwnPropertyDescriptor(c,u){var p=Reflect.getOwnPropertyDescriptor(c,u);if(p&&"value"in p){var m=s.get(u);m&&(p.value=n(m))}else if(p===void 0){var _=s.get(u),l=_==null?void 0:_.v;if(_!==void 0&&l!==Ze)return{enumerable:!0,configurable:!0,value:l,writable:!0}}return p},has(c,u){var l;if(u===As)return!0;var p=s.get(u),m=p!==void 0&&p.v!==Ze||Reflect.has(c,u);if(p!==void 0||Ie!==null&&(!m||(l=an(c,u))!=null&&l.writable)){p===void 0&&(p=o(()=>{var v=m?sn(c[u]):Ze,g=I(v);return g}),s.set(u,p));var _=n(p);if(_===Ze)return!1}return m},set(c,u,p,m){var O;var _=s.get(u),l=u in c;if(r&&u==="length")for(var v=p;v<_.v;v+=1){var g=s.get(v+"");g!==void 0?d(g,Ze):v in c&&(g=o(()=>I(Ze)),s.set(v+"",g))}if(_===void 0)(!l||(O=an(c,u))!=null&&O.writable)&&(_=o(()=>I(void 0)),d(_,sn(p)),s.set(u,_));else{l=_.v!==Ze;var S=o(()=>sn(p));d(_,S)}var w=Reflect.getOwnPropertyDescriptor(c,u);if(w!=null&&w.set&&w.set.call(m,p),!l){if(r&&typeof u=="string"){var k=s.get("length"),$=Number(u);Number.isInteger($)&&$>=k.v&&d(k,$+1)}ln(i)}return!0},ownKeys(c){n(i);var u=Reflect.ownKeys(c).filter(_=>{var l=s.get(_);return l===void 0||l.v!==Ze});for(var[p,m]of s)m.v!==Ze&&!(p in c)&&u.push(p);return u},setPrototypeOf(){Ci()}})}var Or,On,Ia,Da,Ba;function eo(){if(Or===void 0){Or=window,On=document,Ia=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,s=Text.prototype;Da=an(t,"firstChild").get,Ba=an(t,"nextSibling").get,Ar(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ar(s)&&(s.__t=void 0)}}function ds(e=""){return document.createTextNode(e)}function Kt(e){return Da.call(e)}function _n(e){return Ba.call(e)}function f(e,t){return Kt(e)}function Ce(e,t=!1){{var s=Kt(e);return s instanceof Comment&&s.data===""?_n(s):s}}function h(e,t=1,s=!1){let r=e;for(;t--;)r=_n(r);return r}function to(e){e.textContent=""}function Ra(){return!1}let Lr=!1;function so(){Lr||(Lr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const s of e.target.elements)(t=s.__on_r)==null||t.call(s)})},{capture:!0}))}function Ln(e){var t=Se,s=Ie;jt(null),Nt(null);try{return e()}finally{jt(t),Nt(s)}}function Aa(e,t,s,r=s){e.addEventListener(t,()=>Ln(s));const i=e.__on_r;i?e.__on_r=()=>{i(),r(!0)}:e.__on_r=()=>r(!0),so()}function Fa(e){Ie===null&&(Se===null&&Si(),xi()),Es&&ki()}function no(e,t){var s=t.last;s===null?t.last=t.first=e:(s.next=e,e.prev=s,t.last=e)}function Ut(e,t,s){var r=Ie;r!==null&&(r.f&gt)!==0&&(e|=gt);var i={ctx:Ve,deps:null,nodes:null,f:e|st|xt,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(s)try{cn(i),i.f|=_r}catch(c){throw dt(i),c}else t!==null&&Et(i);var a=i;if(s&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&Qs)===0&&(a=a.first,(e&ss)!==0&&(e&fs)!==0&&a!==null&&(a.f|=fs)),a!==null&&(a.parent=r,r!==null&&no(a,r),Se!==null&&(Se.f&tt)!==0&&(e&$s)===0)){var o=Se;(o.effects??(o.effects=[])).push(a)}return i}function xr(){return Se!==null&&!Mt}function Sr(e){const t=Ut(gn,null,!1);return Ue(t,Ge),t.teardown=e,t}function In(e){Fa();var t=Ie.f,s=!Se&&(t&Pt)!==0&&(t&_r)===0;if(s){var r=Ve;(r.e??(r.e=[])).push(e)}else return Na(e)}function Na(e){return Ut(qn|fa,e,!1)}function ro(e){return Fa(),Ut(gn|fa,e,!0)}function ao(e){us.ensure();const t=Ut($s|Qs,e,!0);return(s={})=>new Promise(r=>{s.outro?xs(t,()=>{dt(t),r(void 0)}):(dt(t),r(void 0))})}function io(e){return Ut(qn,e,!1)}function oo(e){return Ut(yr|Qs,e,!0)}function Un(e,t=0){return Ut(gn|t,e,!0)}function J(e,t=[],s=[],r=[]){Yi(r,t,s,i=>{Ut(gn,()=>e(...i.map(n)),!0)})}function yn(e,t=0){var s=Ut(ss|t,e,!0);return s}function kt(e){return Ut(Pt|Qs,e,!0)}function Oa(e){var t=e.teardown;if(t!==null){const s=Es,r=Se;Ur(!0),jt(null);try{t.call(null)}finally{Ur(s),jt(r)}}}function La(e,t=!1){var s=e.first;for(e.first=e.last=null;s!==null;){const i=s.ac;i!==null&&Ln(()=>{i.abort(Rs)});var r=s.next;(s.f&$s)!==0?s.parent=null:dt(s,t),s=r}}function lo(e){for(var t=e.first;t!==null;){var s=t.next;(t.f&Pt)===0&&dt(t),t=s}}function dt(e,t=!0){var s=!1;(t||(e.f&da)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(co(e.nodes.start,e.nodes.end),s=!0),La(e,t&&!s),Dn(e,0),Ue(e,ls);var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)a.stop();Oa(e);var i=e.parent;i!==null&&i.first!==null&&Ua(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function co(e,t){for(;e!==null;){var s=e===t?null:_n(e);e.remove(),e=s}}function Ua(e){var t=e.parent,s=e.prev,r=e.next;s!==null&&(s.next=r),r!==null&&(r.prev=s),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=s))}function xs(e,t,s=!0){var r=[];Va(e,r,!0);var i=()=>{s&&dt(e),t&&t()},a=r.length;if(a>0){var o=()=>--a||i();for(var c of r)c.out(o)}else i()}function Va(e,t,s){if((e.f&gt)===0){e.f^=gt;var r=e.nodes&&e.nodes.t;if(r!==null)for(const c of r)(c.is_global||s)&&t.push(c);for(var i=e.first;i!==null;){var a=i.next,o=(i.f&fs)!==0||(i.f&Pt)!==0&&(e.f&ss)!==0;Va(i,t,o?s:!1),i=a}}}function jr(e){Ha(e,!0)}function Ha(e,t){if((e.f&gt)!==0){e.f^=gt,(e.f&Ge)===0&&(Ue(e,st),Et(e));for(var s=e.first;s!==null;){var r=s.next,i=(s.f&fs)!==0||(s.f&Pt)!==0;Ha(s,i?t:!1),s=r}var a=e.nodes&&e.nodes.t;if(a!==null)for(const o of a)(o.is_global||t)&&o.in()}}function Ja(e,t){if(e.nodes)for(var s=e.nodes.start,r=e.nodes.end;s!==null;){var i=s===r?null:_n(s);t.append(s),s=i}}let $n=!1,Es=!1;function Ur(e){Es=e}let Se=null,Mt=!1;function jt(e){Se=e}let Ie=null;function Nt(e){Ie=e}let St=null;function Wa(e){Se!==null&&(St===null?St=[e]:St.push(e))}let ct=null,pt=0,_t=null;function uo(e){_t=e}let Ga=1,gs=0,Ss=gs;function Vr(e){Ss=e}function Ya(){return++Ga}function bn(e){var t=e.f;if((t&st)!==0)return!0;if(t&tt&&(e.f&=~Cs),(t&$t)!==0){for(var s=e.deps,r=s.length,i=0;i<r;i++){var a=s[i];if(bn(a)&&Ma(a),a.wv>e.wv)return!0}(t&xt)!==0&&et===null&&Ue(e,Ge)}return!1}function Qa(e,t,s=!0){var r=e.reactions;if(r!==null&&!(St!==null&&Js.call(St,e)))for(var i=0;i<r.length;i++){var a=r[i];(a.f&tt)!==0?Qa(a,t,!1):t===a&&(s?Ue(a,st):(a.f&Ge)!==0&&Ue(a,$t),Et(a))}}function Ka(e){var S;var t=ct,s=pt,r=_t,i=Se,a=St,o=Ve,c=Mt,u=Ss,p=e.f;ct=null,pt=0,_t=null,Se=(p&(Pt|$s))===0?e:null,St=null,Ws(e.ctx),Mt=!1,Ss=++gs,e.ac!==null&&(Ln(()=>{e.ac.abort(Rs)}),e.ac=null);try{e.f|=tr;var m=e.fn,_=m(),l=e.deps,v=ke==null?void 0:ke.is_fork;if(ct!==null){var g;if(v||Dn(e,pt),l!==null&&pt>0)for(l.length=pt+ct.length,g=0;g<ct.length;g++)l[pt+g]=ct[g];else e.deps=l=ct;if(xr()&&(e.f&xt)!==0)for(g=pt;g<l.length;g++)((S=l[g]).reactions??(S.reactions=[])).push(e)}else!v&&l!==null&&pt<l.length&&(Dn(e,pt),l.length=pt);if(wn()&&_t!==null&&!Mt&&l!==null&&(e.f&(tt|$t|st))===0)for(g=0;g<_t.length;g++)Qa(_t[g],e);if(i!==null&&i!==e){if(gs++,i.deps!==null)for(let w=0;w<s;w+=1)i.deps[w].rv=gs;if(t!==null)for(const w of t)w.rv=gs;_t!==null&&(r===null?r=_t:r.push(..._t))}return(e.f&cs)!==0&&(e.f^=cs),_}catch(w){return ya(w)}finally{e.f^=tr,ct=t,pt=s,_t=r,Se=i,St=a,Ws(o),Mt=c,Ss=u}}function vo(e,t){let s=t.reactions;if(s!==null){var r=pi.call(s,e);if(r!==-1){var i=s.length-1;i===0?s=t.reactions=null:(s[r]=s[i],s.pop())}}if(s===null&&(t.f&tt)!==0&&(ct===null||!Js.call(ct,t))){var a=t;(a.f&xt)!==0&&(a.f^=xt,a.f&=~Cs),br(a),Ea(a),Dn(a,0)}}function Dn(e,t){var s=e.deps;if(s!==null)for(var r=t;r<s.length;r++)vo(e,s[r])}function cn(e){var t=e.f;if((t&ls)===0){Ue(e,Ge);var s=Ie,r=$n;Ie=e,$n=!0;try{(t&(ss|va))!==0?lo(e):La(e),Oa(e);var i=Ka(e);e.teardown=typeof i=="function"?i:null,e.wv=Ga;var a;er&&Ri&&(e.f&st)!==0&&e.deps}finally{$n=r,Ie=s}}}async function fo(){await Promise.resolve(),Oi()}function n(e){var t=e.f,s=(t&tt)!==0;if(Se!==null&&!Mt){var r=Ie!==null&&(Ie.f&ls)!==0;if(!r&&(St===null||!Js.call(St,e))){var i=Se.deps;if((Se.f&tr)!==0)e.rv<gs&&(e.rv=gs,ct===null&&i!==null&&i[pt]===e?pt++:ct===null?ct=[e]:ct.push(e));else{(Se.deps??(Se.deps=[])).push(e);var a=e.reactions;a===null?e.reactions=[Se]:Js.call(a,Se)||a.push(Se)}}}if(Es&&vs.has(e))return vs.get(e);if(s){var o=e;if(Es){var c=o.v;return((o.f&Ge)===0&&o.reactions!==null||Za(o))&&(c=kr(o)),vs.set(o,c),c}var u=(o.f&xt)===0&&!Mt&&Se!==null&&($n||(Se.f&xt)!==0),p=o.deps===null;bn(o)&&(u&&(o.f|=xt),Ma(o)),u&&!p&&Xa(o)}if(et!=null&&et.has(e))return et.get(e);if((e.f&cs)!==0)throw e.v;return e.v}function Xa(e){if(e.deps!==null){e.f|=xt;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&tt)!==0&&(t.f&xt)===0&&Xa(t)}}function Za(e){if(e.v===Ze)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(vs.has(t)||(t.f&tt)!==0&&Za(t))return!0;return!1}function Ps(e){var t=Mt;try{return Mt=!0,e()}finally{Mt=t}}function po(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(As in e)ur(e);else if(!Array.isArray(e))for(let t in e){const s=e[t];typeof s=="object"&&s&&As in s&&ur(s)}}}function ur(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{ur(e[r],t)}catch{}const s=mr(e);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const r=ca(s);for(let i in r){const a=r[i].get;if(a)try{a.call(e)}catch{}}}}}const ho=["touchstart","touchmove"];function go(e){return ho.includes(e)}const ei=new Set,vr=new Set;function mo(e,t,s,r={}){function i(a){if(r.capture||nn.call(t,a),!a.cancelBubble)return Ln(()=>s==null?void 0:s.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?es(()=>{t.addEventListener(e,i,r)}):t.addEventListener(e,i,r),i}function ut(e,t,s,r,i){var a={capture:r,passive:i},o=mo(e,t,s,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Sr(()=>{t.removeEventListener(e,o,a)})}function Vt(e){for(var t=0;t<e.length;t++)ei.add(e[t]);for(var s of vr)s(e)}let Hr=null;function nn(e){var w;var t=this,s=t.ownerDocument,r=e.type,i=((w=e.composedPath)==null?void 0:w.call(e))||[],a=i[0]||e.target;Hr=e;var o=0,c=Hr===e&&e.__root;if(c){var u=i.indexOf(c);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var p=i.indexOf(t);if(p===-1)return;u<=p&&(o=u)}if(a=i[o]||e.target,a!==t){la(e,"currentTarget",{configurable:!0,get(){return a||s}});var m=Se,_=Ie;jt(null),Nt(null);try{for(var l,v=[];a!==null;){var g=a.assignedSlot||a.parentNode||a.host||null;try{var S=a["__"+r];S!=null&&(!a.disabled||e.target===a)&&S.call(a,e)}catch(k){l?v.push(k):l=k}if(e.cancelBubble||g===t||g===null)break;a=g}if(l){for(let k of v)queueMicrotask(()=>{throw k});throw l}}finally{e.__root=t,delete e.currentTarget,jt(m),Nt(_)}}}function ti(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function un(e,t){var s=Ie;s.nodes===null&&(s.nodes={start:e,end:t,a:null,t:null})}function z(e,t){var s=(t&ha)!==0,r=(t&Ii)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=ti(a?e:"<!>"+e),s||(i=Kt(i)));var o=r||Ia?document.importNode(i,!0):i.cloneNode(!0);if(s){var c=Kt(o),u=o.lastChild;un(c,u)}else un(o,o);return o}}function wo(e,t,s="svg"){var r=!e.startsWith("<!>"),i=(t&ha)!==0,a=`<${s}>${r?e:"<!>"+e}</${s}>`,o;return()=>{if(!o){var c=ti(a),u=Kt(c);if(i)for(o=document.createDocumentFragment();Kt(u);)o.appendChild(Kt(u));else o=Kt(u)}var p=o.cloneNode(!0);if(i){var m=Kt(p),_=p.lastChild;un(m,_)}else un(p,p);return p}}function Ne(e,t){return wo(e,t,"svg")}function Le(){var e=document.createDocumentFragment(),t=document.createComment(""),s=ds();return e.append(t,s),un(t,s),e}function y(e,t){e!==null&&e.before(t)}function B(e,t){var s=t==null?"":typeof t=="object"?t+"":t;s!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=s,e.nodeValue=s+"")}function _o(e,t){return yo(e,t)}const Ds=new Map;function yo(e,{target:t,anchor:s,props:r={},events:i,context:a,intro:o=!0}){eo();var c=new Set,u=_=>{for(var l=0;l<_.length;l++){var v=_[l];if(!c.has(v)){c.add(v);var g=go(v);t.addEventListener(v,nn,{passive:g});var S=Ds.get(v);S===void 0?(document.addEventListener(v,nn,{passive:g}),Ds.set(v,1)):Ds.set(v,S+1)}}};u(An(ei)),vr.add(u);var p=void 0,m=ao(()=>{var _=s??t.appendChild(ds());return Hi(_,{pending:()=>{}},l=>{mt({});var v=Ve;a&&(v.c=a),i&&(r.$$events=i),p=e(l,r)||{},wt()}),()=>{var g;for(var l of c){t.removeEventListener(l,nn);var v=Ds.get(l);--v===0?(document.removeEventListener(l,nn),Ds.delete(l)):Ds.set(l,v)}vr.delete(u),_!==s&&((g=_.parentNode)==null||g.removeChild(_))}});return bo.set(p,m),p}let bo=new WeakMap;var zt,Rt,ht,ks,pn,hn,Rn;class Tr{constructor(t,s=!0){qt(this,"anchor");be(this,zt,new Map);be(this,Rt,new Map);be(this,ht,new Map);be(this,ks,new Set);be(this,pn,!0);be(this,hn,()=>{var t=ke;if(b(this,zt).has(t)){var s=b(this,zt).get(t),r=b(this,Rt).get(s);if(r)jr(r),b(this,ks).delete(s);else{var i=b(this,ht).get(s);i&&(b(this,Rt).set(s,i.effect),b(this,ht).delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[a,o]of b(this,zt)){if(b(this,zt).delete(a),a===t)break;const c=b(this,ht).get(o);c&&(dt(c.effect),b(this,ht).delete(o))}for(const[a,o]of b(this,Rt)){if(a===s||b(this,ks).has(a))continue;const c=()=>{if(Array.from(b(this,zt).values()).includes(a)){var p=document.createDocumentFragment();Ja(o,p),p.append(ds()),b(this,ht).set(a,{effect:o,fragment:p})}else dt(o);b(this,ks).delete(a),b(this,Rt).delete(a)};b(this,pn)||!r?(b(this,ks).add(a),xs(o,c,!1)):c()}}});be(this,Rn,t=>{b(this,zt).delete(t);const s=Array.from(b(this,zt).values());for(const[r,i]of b(this,ht))s.includes(r)||(dt(i.effect),b(this,ht).delete(r))});this.anchor=t,fe(this,pn,s)}ensure(t,s){var r=ke,i=Ra();if(s&&!b(this,Rt).has(t)&&!b(this,ht).has(t))if(i){var a=document.createDocumentFragment(),o=ds();a.append(o),b(this,ht).set(t,{effect:kt(()=>s(o)),fragment:a})}else b(this,Rt).set(t,kt(()=>s(this.anchor)));if(b(this,zt).set(r,t),i){for(const[c,u]of b(this,Rt))c===t?r.unskip_effect(u):r.skip_effect(u);for(const[c,u]of b(this,ht))c===t?r.unskip_effect(u.effect):r.skip_effect(u.effect);r.oncommit(b(this,hn)),r.ondiscard(b(this,Rn))}else b(this,hn).call(this)}}zt=new WeakMap,Rt=new WeakMap,ht=new WeakMap,ks=new WeakMap,pn=new WeakMap,hn=new WeakMap,Rn=new WeakMap;function A(e,t,s=!1){var r=new Tr(e),i=s?fs:0;function a(o,c){r.ensure(o,c)}yn(()=>{var o=!1;t((c,u=!0)=>{o=!0,a(u,c)}),o||a(!1,null)},i)}function rt(e,t){return t}function ko(e,t,s){for(var r=[],i=t.length,a,o=t.length,c=0;c<i;c++){let _=t[c];xs(_,()=>{if(a){if(a.pending.delete(_),a.done.add(_),a.pending.size===0){var l=e.outrogroups;dr(An(a.done)),l.delete(a),l.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var u=r.length===0&&s!==null;if(u){var p=s,m=p.parentNode;to(m),m.append(p),e.items.clear()}dr(t,!u)}else a={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(a)}function dr(e,t=!0){for(var s=0;s<e.length;s++)dt(e[s],t)}var Jr;function We(e,t,s,r,i,a=null){var o=e,c=new Map,u=(t&pa)!==0;if(u){var p=e;o=p.appendChild(ds())}var m=null,_=za(()=>{var k=s();return oa(k)?k:k==null?[]:An(k)}),l,v=!0;function g(){w.fallback=m,xo(w,l,o,t,r),m!==null&&(l.length===0?(m.f&Zt)===0?jr(m):(m.f^=Zt,rn(m,null,o)):xs(m,()=>{m=null}))}var S=yn(()=>{l=n(_);for(var k=l.length,$=new Set,O=ke,ge=Ra(),ee=0;ee<k;ee+=1){var ve=l[ee],$e=r(ve,ee),ze=v?null:c.get($e);ze?(ze.v&&Ys(ze.v,ve),ze.i&&Ys(ze.i,ee),ge&&O.unskip_effect(ze.e)):(ze=So(c,v?o:Jr??(Jr=ds()),ve,$e,ee,i,t,s),v||(ze.e.f|=Zt),c.set($e,ze)),$.add($e)}if(k===0&&a&&!m&&(v?m=kt(()=>a(o)):(m=kt(()=>a(Jr??(Jr=ds()))),m.f|=Zt)),k>$.size&&bi(),!v)if(ge){for(const[xe,Oe]of c)$.has(xe)||O.skip_effect(Oe.e);O.oncommit(g),O.ondiscard(()=>{})}else g();n(_)}),w={effect:S,items:c,outrogroups:null,fallback:m};v=!1}function tn(e){for(;e!==null&&(e.f&Pt)===0;)e=e.next;return e}function xo(e,t,s,r,i){var Oe,Qe,Ke,G,Q,me,M,q,W;var a=(r&Pi)!==0,o=t.length,c=e.items,u=tn(e.effect.first),p,m=null,_,l=[],v=[],g,S,w,k;if(a)for(k=0;k<o;k+=1)g=t[k],S=i(g,k),w=c.get(S).e,(w.f&Zt)===0&&((Qe=(Oe=w.nodes)==null?void 0:Oe.a)==null||Qe.measure(),(_??(_=new Set)).add(w));for(k=0;k<o;k+=1){if(g=t[k],S=i(g,k),w=c.get(S).e,e.outrogroups!==null)for(const Y of e.outrogroups)Y.pending.delete(w),Y.done.delete(w);if((w.f&Zt)!==0)if(w.f^=Zt,w===u)rn(w,null,s);else{var $=m?m.next:u;w===e.effect.last&&(e.effect.last=w.prev),w.prev&&(w.prev.next=w.next),w.next&&(w.next.prev=w.prev),rs(e,m,w),rs(e,w,$),rn(w,$,s),m=w,l=[],v=[],u=tn(m.next);continue}if((w.f&gt)!==0&&(jr(w),a&&((G=(Ke=w.nodes)==null?void 0:Ke.a)==null||G.unfix(),(_??(_=new Set)).delete(w))),w!==u){if(p!==void 0&&p.has(w)){if(l.length<v.length){var O=v[0],ge;m=O.prev;var ee=l[0],ve=l[l.length-1];for(ge=0;ge<l.length;ge+=1)rn(l[ge],O,s);for(ge=0;ge<v.length;ge+=1)p.delete(v[ge]);rs(e,ee.prev,ve.next),rs(e,m,ee),rs(e,ve,O),u=O,m=ve,k-=1,l=[],v=[]}else p.delete(w),rn(w,u,s),rs(e,w.prev,w.next),rs(e,w,m===null?e.effect.first:m.next),rs(e,m,w),m=w;continue}for(l=[],v=[];u!==null&&u!==w;)(p??(p=new Set)).add(u),v.push(u),u=tn(u.next);if(u===null)continue}(w.f&Zt)===0&&l.push(w),m=w,u=tn(w.next)}if(e.outrogroups!==null){for(const Y of e.outrogroups)Y.pending.size===0&&(dr(An(Y.done)),(Q=e.outrogroups)==null||Q.delete(Y));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||p!==void 0){var $e=[];if(p!==void 0)for(w of p)(w.f&gt)===0&&$e.push(w);for(;u!==null;)(u.f&gt)===0&&u!==e.fallback&&$e.push(u),u=tn(u.next);var ze=$e.length;if(ze>0){var xe=(r&pa)!==0&&o===0?s:null;if(a){for(k=0;k<ze;k+=1)(M=(me=$e[k].nodes)==null?void 0:me.a)==null||M.measure();for(k=0;k<ze;k+=1)(W=(q=$e[k].nodes)==null?void 0:q.a)==null||W.fix()}ko(e,$e,xe)}}a&&es(()=>{var Y,de;if(_!==void 0)for(w of _)(de=(Y=w.nodes)==null?void 0:Y.a)==null||de.apply()})}function So(e,t,s,r,i,a,o,c){var u=(o&Mi)!==0?(o&qi)===0?Pa(s,!1,!1):zs(s):null,p=(o&$i)!==0?zs(i):null;return{v:u,i:p,e:kt(()=>(a(t,u??s,p??i,c),()=>{e.delete(r)}))}}function rn(e,t,s){if(e.nodes)for(var r=e.nodes.start,i=e.nodes.end,a=t&&(t.f&Zt)===0?t.nodes.start:s;r!==null;){var o=_n(r);if(a.before(r),r===i)return;r=o}}function rs(e,t,s){t===null?e.effect.first=s:t.next=s,s===null?e.effect.last=t:s.prev=t}function Cr(e,t,...s){var r=new Tr(e);yn(()=>{const i=t()??null;r.ensure(i,i&&(a=>i(a,...s)))},fs)}function jo(e,t,s){var r=new Tr(e);yn(()=>{var i=t()??null;r.ensure(i,i&&(a=>s(a,i)))},fs)}const Wr=[...` 	
\r\fÂ \v\uFEFF`];function To(e,t,s){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),s){for(var i in s)if(s[i])r=r?r+" "+i:i;else if(r.length)for(var a=i.length,o=0;(o=r.indexOf(i,o))>=0;){var c=o+a;(o===0||Wr.includes(r[o-1]))&&(c===r.length||Wr.includes(r[c]))?r=(o===0?"":r.substring(0,o))+r.substring(c+1):o=c}}return r===""?null:r}function Co(e,t){return e==null?null:String(e)}function he(e,t,s,r,i,a){var o=e.__className;if(o!==s||o===void 0){var c=To(s,r,a);c==null?e.removeAttribute("class"):t?e.className=c:e.setAttribute("class",c),e.__className=s}else if(a&&i!==a)for(var u in a){var p=!!a[u];(i==null||p!==!!i[u])&&e.classList.toggle(u,p)}return a}function kn(e,t,s,r){var i=e.__style;if(i!==t){var a=Co(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return r}const zo=Symbol("is custom element"),Eo=Symbol("is html");function si(e,t){var s=ni(e);s.value===(s.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function ts(e,t,s,r){var i=ni(e);i[t]!==(i[t]=s)&&(t==="loading"&&(e[wi]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Mo(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function ni(e){return e.__attributes??(e.__attributes={[zo]:e.nodeName.includes("-"),[Eo]:e.namespaceURI===Di})}var Gr=new Map;function Mo(e){var t=e.getAttribute("is")||e.nodeName,s=Gr.get(t);if(s)return s;Gr.set(t,s=[]);for(var r,i=e,a=Element.prototype;a!==i;){r=ca(i);for(var o in r)r[o].set&&s.push(o);i=mr(i)}return s}function Yr(e,t,s=t){var r=new WeakSet;Aa(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=Qn(e)?Kn(a):a,s(a),ke!==null&&r.add(ke),await fo(),a!==(a=t())){var o=e.selectionStart,c=e.selectionEnd,u=e.value.length;if(e.value=a??"",c!==null){var p=e.value.length;o===c&&c===u&&p>u?(e.selectionStart=p,e.selectionEnd=p):(e.selectionStart=o,e.selectionEnd=Math.min(c,p))}}}),Ps(t)==null&&e.value&&(s(Qn(e)?Kn(e.value):e.value),ke!==null&&r.add(ke)),Un(()=>{var i=t();if(e===document.activeElement){var a=sr??ke;if(r.has(a))return}Qn(e)&&i===Kn(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function ri(e,t,s=t){Aa(e,"change",r=>{var i=r?e.defaultChecked:e.checked;s(i)}),Ps(t)==null&&s(e.checked),Un(()=>{var r=t();e.checked=!!r})}function Qn(e){var t=e.type;return t==="number"||t==="range"}function Kn(e){return e===""?null:+e}function Qr(e,t){return e===t||(e==null?void 0:e[As])===t}function Ks(e={},t,s,r){return io(()=>{var i,a;return Un(()=>{i=a,a=[],Ps(()=>{e!==s(...a)&&(t(e,...a),i&&Qr(s(...i),e)&&t(null,...i))})}),()=>{es(()=>{a&&Qr(s(...a),e)&&t(null,...a)})}}),e}function $o(e=!1){const t=Ve,s=t.l.u;if(!s)return;let r=()=>po(t.s);if(e){let i=0,a={};const o=Nn(()=>{let c=!1;const u=t.s;for(const p in u)u[p]!==a[p]&&(a[p]=u[p],c=!0);return c&&i++,i});r=()=>n(o)}s.b.length&&ro(()=>{Kr(t,r),Pn(s.b)}),In(()=>{const i=Ps(()=>s.m.map(mi));return()=>{for(const a of i)typeof a=="function"&&a()}}),s.a.length&&In(()=>{Kr(t,r),Pn(s.a)})}function Kr(e,t){if(e.l.s)for(const s of e.l.s)n(s);t()}function zr(e,t,s){if(e==null)return t(void 0),s&&s(void 0),os;const r=Ps(()=>e.subscribe(t,s));return r.unsubscribe?()=>r.unsubscribe():r}const Bs=[];function Po(e,t){return{subscribe:Xs(e,t).subscribe}}function Xs(e,t=os){let s=null;const r=new Set;function i(c){if(ma(e,c)&&(e=c,s)){const u=!Bs.length;for(const p of r)p[1](),Bs.push(p,e);if(u){for(let p=0;p<Bs.length;p+=2)Bs[p][0](Bs[p+1]);Bs.length=0}}}function a(c){i(c(e))}function o(c,u=os){const p=[c,u];return r.add(p),r.size===1&&(s=t(i,a)||os),c(e),()=>{r.delete(p),r.size===0&&s&&(s(),s=null)}}return{set:i,update:a,subscribe:o}}function Er(e,t,s){const r=!Array.isArray(e),i=r?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return Po(s,(o,c)=>{let u=!1;const p=[];let m=0,_=os;const l=()=>{if(m)return;_();const g=t(r?p[0]:p,o,c);a?o(g):_=typeof g=="function"?g:os},v=i.map((g,S)=>zr(g,w=>{p[S]=w,m&=~(1<<S),u&&l()},()=>{m|=1<<S}));return u=!0,l(),function(){Pn(v),_(),u=!1}})}function Ft(e){let t;return zr(e,s=>t=s)(),t}let fr=Symbol();function Ot(e,t,s){const r=s[t]??(s[t]={store:null,source:Pa(void 0),unsubscribe:os});if(r.store!==e&&!(fr in s))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=os;else{var i=!0;r.unsubscribe=zr(e,a=>{i?r.source.v=a:d(r.source,a)}),i=!1}return e&&fr in s?Ft(e):n(r.source)}function ns(){const e={};function t(){Sr(()=>{for(var s in e)e[s].unsubscribe();la(e,fr,{enumerable:!1,value:!0})})}return[e,t]}function pr(e,t,s,r){var i=r,a=!0,o=()=>(a&&(a=!1,i=r),i),c;c=e[t],c===void 0&&r!==void 0&&(c=o());var u;return u=()=>{var p=e[t];return p===void 0?o():(a=!0,p)},u}function Vn(e){Ve===null&&_i(),mn&&Ve.l!==null?qo(Ve).m.push(e):In(()=>{const t=Ps(e);if(typeof t=="function")return t})}function qo(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Io="5";var ia;typeof window<"u"&&((ia=window.__svelte??(window.__svelte={})).v??(ia.v=new Set)).add(Io);function ai(){return window.location.pathname||"/"}function Do(){return window.location.search?window.location.search.slice(1):""}function Bo(){const e=window.location.hash;if(e&&e.startsWith("#/")){const t=e.slice(1);history.replaceState(null,"",t)}}Bo();const Hn=Xs(ai());window.addEventListener("popstate",()=>{Hn.set(ai())});const Mr=Er(Hn,e=>e.split("?")[0]||"/"),Ro=Er(Hn,()=>Do()),Ao=Er(Ro,e=>Object.fromEntries(new URLSearchParams(e)));function ii(e){history.pushState(null,"",e),Hn.set(e)}Ai();let Fo=0;function No(){const{subscribe:e,update:t}=Xs([]);return{subscribe:e,add(s,r="info",i=3e3){const a={id:Fo++,message:s,type:r};t(o=>[...o,a]),setTimeout(()=>{t(o=>o.filter(c=>c.id!==a.id))},i)},remove(s){t(r=>r.filter(i=>i.id!==s))}}}const oi=No();function ce(e,t,s){oi.add(e,t,s)}var Oo=z('<div role="alert"> </div>');function Lo(e,t){let s=pr(t,"type",3,"info");var r=Oo(),i=f(r);J(()=>{he(r,1,`toast ${s()??""}`,"svelte-1i7wnxu"),B(i,t.message)}),y(e,r)}var Uo=z('<div class="toast-container svelte-3knp8x"></div>');function Vo(e){const t=()=>Ot(oi,"$toasts",s),[s,r]=ns();var i=Uo();We(i,5,t,a=>a.id,(a,o)=>{Lo(a,{get message(){return n(o).message},get type(){return n(o).type}})}),y(e,i),r()}function Me(){const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"http://localhost:3001":"https://yoink.coah80.com"}async function Ho(e,t={}){const s=await fetch(e,t),r=s.headers.get("content-type");if(!s.ok){let i=`Request failed (${s.status})`;if(r&&r.includes("application/json"))i=(await s.json()).error||i;else{const a=await s.text();console.error("Non-JSON error response:",a.substring(0,500)),i=`Server error ${s.status} (likely VPN blocked)`}throw new Error(i)}return s.json()}async function Jo(e,t={}){return Ho(`${Me()}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function hr(e,{onMessage:t,onError:s,maxReconnectAttempts:r=10}){let i=0,a=null,o=!1;function c(){o||(a=new EventSource(`${Me()}/api/progress/${e}`),a.onmessage=p=>{try{const m=JSON.parse(p.data);i=0,t(m),(m.stage==="complete"||m.stage==="error"||m.stage==="cancelled")&&u()}catch(m){console.error("SSE parse error:",m)}},a.onerror=()=>{if(a.close(),!o)if(i<r){i++;const p=Math.min(1e3*i,5e3);s&&s({type:"reconnecting",attempt:i,max:r}),setTimeout(c,p)}else s&&s({type:"failed",message:"Connection lost - refresh page to retry"})})}function u(){o=!0,a&&(a.close(),a=null)}return c(),{close:u}}const vn=[],Wo=5;function Xr(e){e.parentNode&&e.parentNode.removeChild(e);const t=vn.indexOf(e);t>-1&&vn.splice(t,1)}function Go(){for(;vn.length>Wo;){const e=vn.shift();e&&e.parentNode&&e.parentNode.removeChild(e)}}function Zr(e){const t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t),vn.push(t),Go(),t.onload=()=>setTimeout(()=>Xr(t),5e3),setTimeout(()=>Xr(t),120*1e3)}function $r(e,t){const s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}const Ms=Xs(sessionStorage.getItem("yoink_clientId")||null),js=new Set;let Yo=0,vt=null,At=0;const li=3;async function Qo(){let e=Ft(Ms);if(!e){try{e=(await(await fetch(`${Me()}/api/connect`,{method:"POST"})).json()).clientId}catch{e="local-"+Date.now()+"-"+Math.random().toString(36).slice(2,11)}sessionStorage.setItem("yoink_clientId",e),Ms.set(e)}return e}function Jn(){const e=`job-${++Yo}-${Date.now()}`,t=js.size===0;if(js.add(e),t&&!vt){At=0;const s=Ft(Ms);s&&!s.startsWith("local-")&&fetch(`${Me()}/api/heartbeat/${s}`,{method:"POST"}).catch(()=>{}),vt=setInterval(async()=>{const r=Ft(Ms);if(!(!r||r.startsWith("local-")))try{await fetch(`${Me()}/api/heartbeat/${r}`,{method:"POST"}),At=0}catch{At++,At>=li&&(clearInterval(vt),vt=null,At=0)}},15e3)}return e}function Ko(){if(js.size>0&&!vt){At=0;const e=Ft(Ms);e&&!e.startsWith("local-")&&fetch(`${Me()}/api/heartbeat/${e}`,{method:"POST"}).catch(()=>{}),vt=setInterval(async()=>{const t=Ft(Ms);if(!(!t||t.startsWith("local-")))try{await fetch(`${Me()}/api/heartbeat/${t}`,{method:"POST"}),At=0}catch{At++,At>=li&&(clearInterval(vt),vt=null,At=0)}},15e3)}}function Wn(e){e?js.delete(e):js.clear(),js.size===0&&vt&&(clearInterval(vt),vt=null)}typeof window<"u"&&window.addEventListener("beforeunload",()=>{vt&&(clearInterval(vt),vt=null),js.clear()});const ea=[{text:"yoink it, go on..."},{text:"not cobalt"},{text:"im bored"},{text:"have you yoinked it today?"},{text:"download helium browser",link:"https://helium.computer/",classes:["clickable"]},{text:"dont like it? use cliply (dont)"},{text:"the biggest yt-dlp wrapper of them all"},{text:"awesome name, right?"},{text:"get yoinked!"},{text:"funny message here"},{text:"SHOUTOUT TO COAH"},{text:"new feature: yoink!"},{text:"new feature: ai download"},{text:"welcome to yoink.tools"},{text:"feelin' yoinky?"},{text:"im parched"},{text:"stay hydrated!"},{text:"computers are cool"},{text:"missing assignments?"},{text:"procrastinate with yoink"},{text:"newgrounds.com",link:"https://newgrounds.com",classes:["clickable"]},{text:"bring back flash!"},{text:"FUCK ICE"},{text:"post this one to twitter"},{text:"google i need yoinks! NOW!!!!!"},{text:"im feeling fancy today...",classes:["fancy"]},{text:"powered by yt-dlp"},{text:"hello world!"},{text:"1000+ sites!",link:"https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md",classes:["clickable"]},{text:"yes, that site works. even the one you're thinking of."}],Xo=["4tube","alphaporno","beeg","behindkink","bongacams","cam4","cammodels","camsoda","chaturbate","drtuber","empflix","eporner","erocast","eroprofile","fux","hellporno","hotmovs","iceporn","lovehomeporn","manyvids","motherless","moviefap","noodlemagazine","nuvid","peekvideos","peekvids","playvids","porn","pornbox","pornerbros","pornflip","pornhub","pornotube","pornovoisines","pornoxo","porntop","porntube","redtube","rule34video","slutload","spankbang","stripchat","sunporno","thisvid","tnaflix","tube8","txxx","xhamster","xnxx","xvideos","xxxymovies","youjizz","youporn","zenporn","xtube","erome","hentai","hclips","gotporn","fuq","ashemaletube"];function Zo(e){try{const t=new URL(e).hostname.toLowerCase().replace("www.","");return Xo.some(s=>t.includes(s))}catch{return!1}}const Xn={quality:"1080p",codec:"h264",container:"mp4",audioFormat:"mp3",audioBitrate:"320",filenameStyle:"basic",playlistPreference:null,twitterGifs:!0},ps=["starting","downloading","processing","remuxing","sending","zipping","playlist-info","reconnecting","uploading","converting","compressing","transcribing"];function el(){let e={...Xn};try{const a=localStorage.getItem("yoink_settings");a&&(e={...Xn,...JSON.parse(a)})}catch{}const{subscribe:t,set:s,update:r}=Xs(e);function i(a){localStorage.setItem("yoink_settings",JSON.stringify(a))}return{subscribe:t,set(a){i(a),s(a)},update(a){r(o=>{const c=a(o);return i(c),c})},setSetting(a,o){r(c=>{const u={...c,[a]:o};return i(u),u})},reset(){const a={...Xn};i(a),s(a)}}}const Ts=el();let ta=!1;async function ci(){if(!(ta||!("serviceWorker"in navigator)))try{await navigator.serviceWorker.register("/sw.js"),ta=!0}catch{}}async function tl(){return"Notification"in window?Notification.permission==="granted"?"granted":Notification.permission==="denied"?"denied":await Notification.requestPermission():"unsupported"}async function sl(e,t){if(!(!("Notification"in window)||Notification.permission!=="granted")){if(await ci(),"serviceWorker"in navigator)try{const s=await navigator.serviceWorker.ready;if(s.active){s.active.postMessage({type:"PLAYLIST_COMPLETE",message:`${e} is ready to download!`,jobId:t});return}}catch{}new Notification("yoink",{body:`${e} is ready to download!`,icon:"/icons/icon-192.png"})}}function nl(){let e=[];try{const l=localStorage.getItem("yoink_queue");l&&(e=JSON.parse(l).map(v=>v.isPlaylist&&v.serverJobId&&v.stage!=="ready"?{...v,stage:"reconnecting",progress:v.progress||0,status:"reconnecting..."}:ps.includes(v.stage)?{...v,stage:"queued",progress:0,status:"interrupted - tap to restart"}:v).filter(v=>v.stage!=="complete"&&v.stage!=="error"))}catch{e=[]}const{subscribe:t,set:s,update:r}=Xs(e),i=new Map,a=new Map,o=new Map;function c(l){localStorage.setItem("yoink_queue",JSON.stringify(l))}function u(){return Ft({subscribe:t})}function p(l){const v=o.get(l);v&&(clearInterval(v),o.delete(l))}function m(l){const v=i.get(l);v&&(v.close(),i.delete(l)),p(l);const g=a.get(l);g&&(Wn(g),a.delete(l))}const _={subscribe:t,add(l){r(v=>{if(v.some(S=>S.id===l.id))return v;const g=[...v,l];return c(g),g})},remove(l){const g=u().find(S=>S.id===l);if(m(l),g&&ps.includes(g.stage)){const S=g.serverJobId||l;fetch(`${Me()}/api/cancel/${S}`,{method:"POST"}).catch(()=>{})}r(S=>{const w=S.filter(k=>k.id!==l);return c(w),w}),g&&!g.isPlaylist&&ps.includes(g.stage)&&setTimeout(()=>this.processNext(),100)},updateItem(l,v){r(g=>{const S=g.map(w=>w.id===l?{...w,...v}:w);return c(S),S})},clear(){u().forEach(v=>{if(m(v.id),ps.includes(v.stage)){const g=v.serverJobId||v.id;fetch(`${Me()}/api/cancel/${g}`,{method:"POST"}).catch(()=>{})}}),i.clear(),a.clear(),o.clear(),s([]),c([])},startDownload(l){if(l.isPlaylist){this._startPlaylistDownload(l);return}this._startDirectDownload(l)},_startDirectDownload(l){const v=Ft(Ts),g=Jn();a.set(l.id,g),this.updateItem(l.id,{stage:"starting",status:"starting download...",startTime:Date.now()});const S=hr(l.id,{onMessage:$=>{const O={stage:$.stage,status:$.message};if($.progress!==void 0&&(O.progress=$.progress),$.speed!==void 0&&(O.speed=$.speed),$.eta!==void 0&&(O.eta=$.eta),$.totalVideos!==void 0&&(O.videoCount=$.totalVideos),$.currentVideo!==void 0&&(O.currentVideo=$.currentVideo),$.currentVideoTitle!==void 0&&(O.currentVideoTitle=$.currentVideoTitle),$.format!==void 0&&(O.formatDisplay=$.format),$.downloadedCount!==void 0&&(O.downloadedCount=$.downloadedCount),$.failedVideos&&(O.failedVideos=$.failedVideos),$.failedCount!==void 0&&(O.failedCount=$.failedCount),this.updateItem(l.id,O),$.stage==="complete"){O.endTime=Date.now(),this.updateItem(l.id,O),m(l.id);const ee=u().find(xe=>xe.id===l.id),ve=ee!=null&&ee.startTime?Math.floor((Date.now()-ee.startTime)/1e3):0,$e=ve>=60?`${Math.floor(ve/60)}m ${ve%60}s`:`${ve}s`,ze=l.format==="images"?"gallery download complete!":`download complete! (${$e})`;ce(ze,"success"),this.processNext(),setTimeout(()=>this.remove(l.id),5e3)}else $.stage==="error"?(m(l.id),ce($.message,"error"),this.processNext()):$.stage==="cancelled"&&(m(l.id),this.processNext())},onError:$=>{$.type==="reconnecting"?this.updateItem(l.id,{status:`reconnecting... (${$.attempt}/${$.max})`}):(this.updateItem(l.id,{stage:"error",status:$.message}),m(l.id),this.processNext())}});i.set(l.id,S);const w=new URLSearchParams({url:l.url,format:l.format,filename:l.title,quality:v.quality,container:v.container,audioFormat:v.audioFormat,audioBitrate:v.audioBitrate,progressId:l.id,twitterGifs:v.twitterGifs!==!1?"true":"false"});let k;l.format==="images"?k="/api/gallery/download":k="/api/download",Zr(`${Me()}${k}?${w.toString()}`)},async _startPlaylistDownload(l){const v=Ft(Ts),g=l.resumeFrom>1;this.updateItem(l.id,{stage:"starting",status:g?`resuming from video ${l.resumeFrom}...`:"starting playlist download...",startTime:Date.now()}),ci(),tl();try{const S=Ft(Ms),k=(await Jo("/api/playlist/start",{url:l.url,format:l.format,quality:v.quality,container:v.container,audioFormat:v.audioFormat,audioBitrate:v.audioBitrate,clientId:S||void 0,resumeFrom:l.resumeFrom||1})).jobId;this.updateItem(l.id,{serverJobId:k}),this._connectPlaylistSSE(l.id,k),this._startPlaylistPolling(l.id,k)}catch(S){this.updateItem(l.id,{stage:"error",status:S.message||"failed to start playlist"}),ce(S.message||"failed to start playlist","error")}},_connectPlaylistSSE(l,v){const g=hr(v,{onMessage:S=>{this._handlePlaylistUpdate(l,S)},onError:()=>{}});i.set(l,g)},_startPlaylistPolling(l,v){p(l);const g=setInterval(async()=>{try{const S=await fetch(`${Me()}/api/playlist/status/${v}`);if(!S.ok){S.status===404&&(this.updateItem(l,{stage:"error",status:"playlist expired â try again!"}),m(l),ce("playlist expired â try again!","error"));return}const w=await S.json();this._handlePlaylistUpdate(l,{stage:w.status==="complete"?"complete":w.status,message:w.message,progress:w.progress,totalVideos:w.totalVideos,currentVideo:w.currentVideo,currentVideoTitle:w.currentVideoTitle,failedVideos:w.failedVideos,failedCount:w.failedCount,downloadedCount:w.videosCompleted,downloadToken:w.downloadToken,fileName:w.fileName,fileSize:w.fileSize,speed:w.speed,eta:w.eta})}catch{}},3e3);o.set(l,g)},_handlePlaylistUpdate(l,v){const g={stage:v.stage,status:v.message};if(v.progress!==void 0&&(g.progress=v.progress),v.speed!==void 0&&(g.speed=v.speed),v.eta!==void 0&&(g.eta=v.eta),v.totalVideos!==void 0&&(g.videoCount=v.totalVideos),v.currentVideo!==void 0&&(g.currentVideo=v.currentVideo),v.currentVideoTitle!==void 0&&(g.currentVideoTitle=v.currentVideoTitle),v.downloadedCount!==void 0&&(g.downloadedCount=v.downloadedCount),v.failedVideos&&(g.failedVideos=v.failedVideos),v.failedCount!==void 0&&(g.failedCount=v.failedCount),v.stage==="complete"&&v.downloadToken){g.stage="ready",g.downloadToken=v.downloadToken,g.fileName=v.fileName,g.fileSize=v.fileSize,g.endTime=Date.now(),g.status="playlist ready â tap to download",this.updateItem(l,g),m(l);const w=u().find(k=>k.id===l);ce(`${(w==null?void 0:w.title)||"playlist"} is ready to download!`,"success",8e3),sl((w==null?void 0:w.title)||"playlist",w==null?void 0:w.serverJobId);return}if(v.stage==="error"){this.updateItem(l,g),m(l),ce(v.message,"error");return}if(v.stage==="cancelled"){this.updateItem(l,g),m(l);return}this.updateItem(l,g)},async downloadReady(l){const g=u().find(S=>S.id===l);if(!(!g||!g.downloadToken)){if(g.serverJobId)try{if(!(await fetch(`${Me()}/api/playlist/status/${g.serverJobId}`)).ok){this.updateItem(l,{stage:"error",status:"playlist expired â try again!"}),ce("playlist expired â try again!","error");return}}catch{this.updateItem(l,{stage:"error",status:"playlist expired â try again!"}),ce("playlist expired â try again!","error");return}Zr(`${Me()}/api/playlist/download/${g.downloadToken}`),ce("downloading playlist zip...","success"),setTimeout(()=>this.remove(l),1e4)}},processNext(){const l=u();if(l.some(S=>!S.isPlaylist&&ps.includes(S.stage)))return;const g=l.find(S=>S.stage==="queued");g&&this.startDownload(g)},startAllQueued(){this.processNext()},retryDownload(l){const g=u().find(w=>w.id===l);if(!g)return;m(l);const S=Date.now().toString()+Math.random().toString(36).substr(2,9);if(g.isPlaylist){const w=(g.downloadedCount||0)+1,k=w>1?`resuming from video ${w}...`:"queued for retry";this.updateItem(l,{id:S,stage:"queued",progress:g.progress||0,status:k,endTime:null,serverJobId:null,downloadToken:null,resumeFrom:w})}else this.updateItem(l,{id:S,stage:"queued",progress:0,status:"queued for retry",logs:[],endTime:null,serverJobId:null,downloadToken:null});this.processNext()},async finishPlaylistEarly(l){const g=u().find(w=>w.id===l),S=(g==null?void 0:g.serverJobId)||l;try{await fetch(`${Me()}/api/finish-early/${S}`,{method:"POST"})}catch{ce("failed to finish early","error")}},resumePlaylistJobs(){u().filter(v=>v.stage==="reconnecting"&&v.serverJobId).forEach(v=>{this._connectPlaylistSSE(v.id,v.serverJobId),this._startPlaylistPolling(v.id,v.serverJobId)})},reconnectOnResume(){u().filter(v=>v.isPlaylist&&v.serverJobId&&ps.includes(v.stage)).forEach(v=>{const g=i.get(v.id);g&&(g.close(),i.delete(v.id)),this._connectPlaylistSSE(v.id,v.serverJobId),p(v.id),this._startPlaylistPolling(v.id,v.serverJobId)})}};return typeof window<"u"&&setTimeout(()=>_.resumePlaylistJobs(),500),_}const ue=nl();var rl=Ne('<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',1),al=Ne('<polyline points="20 6 9 17 4 12"></polyline>'),il=Ne('<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',1),ol=Ne('<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',1),ll=Ne('<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',1),cl=Ne('<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',1),ul=Ne('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),vl=Ne('<path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path d="M9 12l2 2 4-4"></path>',1),dl=Ne('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),fl=z('<span class="queue-item-format svelte-151vo4w"> </span>'),pl=z('<span class="queue-item-timer svelte-151vo4w"> </span>'),hl=z('<span class="queue-item-timer svelte-151vo4w"> </span>'),gl=z('<button class="queue-item-download svelte-151vo4w" title="Download"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),ml=z('<button class="queue-item-retry svelte-151vo4w" title="Retry"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg></button>'),wl=z('<button class="queue-item-retry svelte-151vo4w" title="Start now"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button>'),_l=z('<button class="queue-item-retry svelte-151vo4w" title="Download now (skip remaining)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),yl=z('<div class="queue-item-progress svelte-151vo4w"><div class="queue-item-progress-fill svelte-151vo4w"></div></div>'),bl=z('<div class="queue-item-failed-item svelte-151vo4w"><span class="queue-item-failed-num svelte-151vo4w"> </span> <span> </span></div>'),kl=z('<div class="queue-item-failed svelte-151vo4w"><div class="queue-item-failed-header svelte-151vo4w"> </div> <!></div>'),xl=z('<div><div class="queue-item-header svelte-151vo4w"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-151vo4w"><!></svg></div> <div class="queue-item-info svelte-151vo4w"><div class="queue-item-title svelte-151vo4w"> <!> <!></div> <div> </div></div> <div class="queue-item-actions svelte-151vo4w"><!> <!> <!> <button class="queue-item-remove svelte-151vo4w" title="Remove"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div></div> <!> <!></div>');function Sl(e,t){mt(t,!0);let s=je(()=>ps.includes(t.item.stage)),r=je(()=>t.item.stage==="complete"),i=je(()=>t.item.stage==="error"),a=je(()=>t.item.stage==="queued"),o=je(()=>t.item.stage==="ready"),c=je(()=>n(s)&&t.item.progress!==void 0),u=je(()=>n(o)?"success":n(s)?"active":n(r)?"success":n(i)?"error":""),p=je(()=>{if(!t.item.fileSize)return"";const P=t.item.fileSize/(1024*1024);return P>=1024?`${(P/1024).toFixed(1)} GB`:`${P.toFixed(1)} MB`}),m=je(()=>{if(!t.item.startTime||!n(s)&&!n(r))return"";const P=n(r)&&t.item.endTime?t.item.endTime:Date.now(),F=Math.floor((P-t.item.startTime)/1e3),ne=Math.floor(F/60);return ne>0?`${ne}m ${F%60}s`:`${F}s`}),_=je(()=>{if(t.item.isPlaylist&&t.item.currentVideo&&t.item.videoCount)return`${t.item.currentVideo}/${t.item.videoCount} - ${t.item.currentVideoTitle||t.item.status}`;let P=t.item.status||"waiting...";if(n(s)&&(t.item.speed||t.item.eta)){const F=[];t.item.speed&&F.push(t.item.speed),t.item.eta&&F.push(`~${t.item.eta} left`),F.length&&(P+=` Â· ${F.join(" Â· ")}`)}return P});var l=xl();let v;l.__click=()=>{n(o)?ue.downloadReady(t.item.id):n(a)&&ue.startDownload(t.item)};var g=f(l),S=f(g);let w;var k=f(S),$=f(k);{var O=P=>{var F=rl();y(P,F)},ge=P=>{var F=Le(),ne=Ce(F);{var re=_e=>{var Ae=al();y(_e,Ae)},pe=_e=>{var Ae=Le(),He=Ce(Ae);{var Je=Xe=>{var it=il();y(Xe,it)},at=Xe=>{var it=Le(),Ht=Ce(it);{var R=L=>{var oe=ol();y(L,oe)},N=L=>{var oe=Le(),le=Ce(oe);{var Ee=x=>{var D=ll();y(x,D)},T=x=>{var D=Le(),U=Ce(D);{var j=C=>{var X=cl();y(C,X)},E=C=>{var X=Le(),V=Ce(X);{var ie=Z=>{var ye=ul();y(Z,ye)},H=Z=>{var ye=Le(),qe=Ce(ye);{var Be=Re=>{var Tt=vl();y(Re,Tt)},Fe=Re=>{var Tt=dl();y(Re,Tt)};A(qe,Re=>{n(s)?Re(Be):Re(Fe,!1)},!0)}y(Z,ye)};A(V,Z=>{t.item.format==="audio"?Z(ie):Z(H,!1)},!0)}y(C,X)};A(U,C=>{t.item.type==="compress"?C(j):C(E,!1)},!0)}y(x,D)};A(le,x=>{t.item.type==="convert"?x(Ee):x(T,!1)},!0)}y(L,oe)};A(Ht,L=>{t.item.isPlaylist?L(R):L(N,!1)},!0)}y(Xe,it)};A(He,Xe=>{n(i)?Xe(Je):Xe(at,!1)},!0)}y(_e,Ae)};A(ne,_e=>{n(r)?_e(re):_e(pe,!1)},!0)}y(P,F)};A($,P=>{n(o)?P(O):P(ge,!1)})}var ee=h(S,2),ve=f(ee),$e=f(ve),ze=h($e);{var xe=P=>{var F=fl(),ne=f(F);J(()=>B(ne,t.item.formatDisplay)),y(P,F)};A(ze,P=>{t.item.isPlaylist&&t.item.formatDisplay&&P(xe)})}var Oe=h(ze,2);{var Qe=P=>{var F=pl(),ne=f(F);J(()=>B(ne,n(p))),y(P,F)},Ke=P=>{var F=Le(),ne=Ce(F);{var re=pe=>{var _e=hl(),Ae=f(_e);J(()=>B(Ae,n(m))),y(pe,_e)};A(ne,pe=>{n(m)&&pe(re)},!0)}y(P,F)};A(Oe,P=>{n(o)&&n(p)?P(Qe):P(Ke,!1)})}var G=h(ve,2),Q=f(G),me=h(ee,2),M=f(me);{var q=P=>{var F=gl();F.__click=ne=>{ne.stopPropagation(),ue.downloadReady(t.item.id)},y(P,F)},W=P=>{var F=Le(),ne=Ce(F);{var re=pe=>{var _e=ml();_e.__click=Ae=>{Ae.stopPropagation(),ue.retryDownload(t.item.id)},y(pe,_e)};A(ne,pe=>{n(i)&&t.item.url&&pe(re)},!0)}y(P,F)};A(M,P=>{n(o)?P(q):P(W,!1)})}var Y=h(M,2);{var de=P=>{var F=wl();F.__click=ne=>{ne.stopPropagation(),ue.startDownload(t.item)},y(P,F)};A(Y,P=>{n(a)&&P(de)})}var Pe=h(Y,2);{var te=P=>{var F=_l();F.__click=ne=>{ne.stopPropagation(),ue.finishPlaylistEarly(t.item.id)},y(P,F)};A(Pe,P=>{t.item.isPlaylist&&n(s)&&t.item.currentVideo>0&&P(te)})}var Te=h(Pe,2);Te.__click=P=>{P.stopPropagation(),ue.remove(t.item.id)};var ae=h(g,2);{var K=P=>{var F=yl(),ne=f(F);J(()=>kn(ne,`width: ${(t.item.progress||0)??""}%`)),y(P,F)};A(ae,P=>{n(c)&&P(K)})}var se=h(ae,2);{var we=P=>{var F=kl(),ne=f(F),re=f(ne),pe=h(ne,2);We(pe,17,()=>t.item.failedVideos,rt,(_e,Ae)=>{var He=bl(),Je=f(He),at=f(Je),Xe=h(Je,2),it=f(Xe);J(()=>{B(at,`#${n(Ae).num??""}`),B(it,`${(n(Ae).title||"Video")??""} - ${(n(Ae).reason||"Download failed")??""}`)}),y(_e,He)}),J(()=>B(re,`failed videos (${(t.item.failedCount||t.item.failedVideos.length)??""})`)),y(P,F)};A(se,P=>{var F;t.item.isPlaylist&&((F=t.item.failedVideos)==null?void 0:F.length)>0&&P(we)})}J(()=>{v=he(l,1,"queue-item svelte-151vo4w",null,v,{clickable:n(o)||n(a)}),w=he(S,1,"queue-item-icon svelte-151vo4w",null,w,{spinning:n(s),ready:n(o)}),B($e,`${t.item.title??""} `),he(G,1,`queue-item-status ${n(u)??""}`,"svelte-151vo4w"),B(Q,n(_))}),y(e,l),wt()}Vt(["click"]);var jl=z('<button class="queue-clear svelte-i3r5ty">clear all</button>'),Tl=z('<div class="queue-empty svelte-i3r5ty">nothing here yet</div>'),Cl=z('<div class="queue-dropdown-header svelte-i3r5ty"><span class="queue-dropdown-title svelte-i3r5ty">queue</span> <div class="queue-header-actions svelte-i3r5ty"><button class="queue-start-all svelte-i3r5ty" title="Start all queued"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-i3r5ty"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button> <!></div></div> <div class="queue-list svelte-i3r5ty"><!></div>',1);function ui(e,t){mt(t,!0);const s=()=>Ot(ue,"$queue",r),[r,i]=ns();let a=je(s),o=je(()=>n(a).length>0);var c=Cl(),u=Ce(c),p=h(f(u),2),m=f(p);m.__click=()=>ue.startAllQueued();var _=h(m,2);{var l=k=>{var $=jl();$.__click=()=>{ue.clear(),ce("Queue cleared","info")},y(k,$)};A(_,k=>{n(o)&&k(l)})}var v=h(u,2),g=f(v);{var S=k=>{var $=Le(),O=Ce($);We(O,17,()=>n(a),ge=>ge.id,(ge,ee)=>{Sl(ge,{get item(){return n(ee)}})}),y(k,$)},w=k=>{var $=Tl();y(k,$)};A(g,k=>{n(o)?k(S):k(w,!1)})}y(e,c),wt(),i()}Vt(["click"]);var zl=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-1xkxv2n"></path><polyline points="7 10 12 15 17 10" class="svelte-1xkxv2n"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-1xkxv2n"></line></svg>'),El=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="17 1 21 5 17 9" class="svelte-1xkxv2n"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" class="svelte-1xkxv2n"></path><polyline points="7 23 3 19 7 15" class="svelte-1xkxv2n"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" class="svelte-1xkxv2n"></path></svg>'),Ml=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="4 14 10 14 10 20" class="svelte-1xkxv2n"></polyline><polyline points="20 10 14 10 14 4" class="svelte-1xkxv2n"></polyline><line x1="14" y1="10" x2="21" y2="3" class="svelte-1xkxv2n"></line><line x1="3" y1="21" x2="10" y2="14" class="svelte-1xkxv2n"></line></svg>'),$l=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" class="svelte-1xkxv2n"></path></svg>'),Pl=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><circle cx="12" cy="12" r="3" class="svelte-1xkxv2n"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" class="svelte-1xkxv2n"></path></svg>'),ql=z('<a><div class="nav-icon svelte-1xkxv2n"><!></div> <span class="nav-label svelte-1xkxv2n"> </span></a>'),Il=z('<span class="nav-badge svelte-1xkxv2n"> </span>'),Dl=z('<div class="queue-sheet-overlay svelte-1xkxv2n"></div> <div><div class="sheet-handle svelte-1xkxv2n"></div> <!></div>',1),Bl=z('<nav class="bottom-nav svelte-1xkxv2n"><!> <button><div class="nav-icon svelte-1xkxv2n"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><line x1="8" y1="6" x2="21" y2="6" class="svelte-1xkxv2n"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-1xkxv2n"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-1xkxv2n"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-1xkxv2n"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-1xkxv2n"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-1xkxv2n"></line></svg> <!></div> <span class="nav-label svelte-1xkxv2n">queue</span></button></nav> <!>',1);function Rl(e,t){mt(t,!0);const s=()=>Ot(ue,"$queue",i),r=()=>Ot(Mr,"$path",i),[i,a]=ns();let o=I(!1),c,u=I(0),p=I(!1),m=0,_=0,l=je(s),v=je(()=>n(l).length),g=je(r),S=je(()=>n(l).filter(M=>["starting","downloading","processing","zipping","sending","transcribing"].includes(M.stage)).length);function w(M){M.preventDefault(),M.stopPropagation(),d(o,!n(o)),d(u,0)}function k(){d(o,!1),d(u,0)}function $(M){const q=c;q&&(q.scrollTop>0&&M.target.closest(".queue-sheet")&&!M.target.closest(".sheet-handle")||(m=M.touches[0].clientY,_=Date.now(),d(p,!0)))}function O(M){if(!n(p))return;const q=M.touches[0].clientY-m;q>0?(d(u,q),M.preventDefault()):d(u,0)}function ge(){if(!n(p))return;d(p,!1);const M=n(u)/(Date.now()-_);n(u)>80||M>.5?k():d(u,0)}const ee=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/transcribe",label:"transcribe",icon:"transcribe"},{href:"/settings",label:"settings",icon:"settings"}];var ve=Bl();ut("keydown",On,M=>{M.key==="Escape"&&n(o)&&k()});var $e=Ce(ve),ze=f($e);We(ze,17,()=>ee,rt,(M,q)=>{var W=ql();let Y;var de=f(W),Pe=f(de);{var te=se=>{var we=zl();y(se,we)},Te=se=>{var we=Le(),P=Ce(we);{var F=re=>{var pe=El();y(re,pe)},ne=re=>{var pe=Le(),_e=Ce(pe);{var Ae=Je=>{var at=Ml();y(Je,at)},He=Je=>{var at=Le(),Xe=Ce(at);{var it=R=>{var N=$l();y(R,N)},Ht=R=>{var N=Le(),L=Ce(N);{var oe=le=>{var Ee=Pl();y(le,Ee)};A(L,le=>{n(q).icon==="settings"&&le(oe)},!0)}y(R,N)};A(Xe,R=>{n(q).icon==="transcribe"?R(it):R(Ht,!1)},!0)}y(Je,at)};A(_e,Je=>{n(q).icon==="compress"?Je(Ae):Je(He,!1)},!0)}y(re,pe)};A(P,re=>{n(q).icon==="convert"?re(F):re(ne,!1)},!0)}y(se,we)};A(Pe,se=>{n(q).icon==="download"?se(te):se(Te,!1)})}var ae=h(de,2),K=f(ae);J(()=>{Y=he(W,1,"bottom-nav-item svelte-1xkxv2n",null,Y,{active:n(g)===n(q).href}),ts(W,"href",n(q).href),B(K,n(q).label)}),y(M,W)});var xe=h(ze,2);let Oe;xe.__click=w;var Qe=f(xe),Ke=h(f(Qe),2);{var G=M=>{var q=Il(),W=f(q);J(()=>B(W,n(v))),y(M,q)};A(Ke,M=>{n(v)>0&&M(G)})}var Q=h($e,2);{var me=M=>{var q=Dl(),W=Ce(q);W.__click=k;var Y=h(W,2);let de;Y.__touchstart=$,Y.__touchmove=O,Y.__touchend=ge;var Pe=h(f(Y),2);ui(Pe,{}),Ks(Y,te=>c=te,()=>c),J(()=>{de=he(Y,1,"queue-sheet svelte-1xkxv2n",null,de,{swiping:n(p)}),kn(Y,n(u)>0?`transform: translateY(${n(u)}px)`:"")}),y(M,q)};A(Q,M=>{n(o)&&M(me)})}J(()=>Oe=he(xe,1,"bottom-nav-item queue-item svelte-1xkxv2n",null,Oe,{active:n(o),"has-active":n(S)>0})),y(e,ve),wt(),a()}Vt(["click","touchstart","touchmove","touchend"]);var Al=z("<a><!></a>");function Xt(e,t){const s=()=>Ot(Mr,"$path",r),[r,i]=ns();let a=je(()=>s()===t.href);var o=Al();let c;var u=f(o);Cr(u,()=>t.children),J(()=>{c=he(o,1,"nav-link svelte-5q5w88",null,c,{active:n(a)}),ts(o,"href",t.href)}),y(e,o),i()}var Fl=z('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> <span>download</span>',1),Nl=z('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> <span>convert</span>',1),Ol=z('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> <span>compress</span>',1),Ll=z('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span>settings</span>',1),Ul=z('<header class="svelte-4b3o1e"><div class="header-left svelte-4b3o1e"><a href="/" class="logo-link svelte-4b3o1e"><span class="logo-text svelte-4b3o1e">yoink</span> <span class="logo-tld svelte-4b3o1e">.tools</span></a></div> <div class="header-right svelte-4b3o1e"><!> <nav class="nav-links svelte-4b3o1e"><!> <!> <!> <!></nav></div></header>');function Vl(e,t){var s=Ul(),r=h(f(s),2),i=f(r);{var a=_=>{var l=Le(),v=Ce(l);Cr(v,()=>t.extraContent),y(_,l)};A(i,_=>{t.extraContent&&_(a)})}var o=h(i,2),c=f(o);Xt(c,{href:"/",children:(_,l)=>{var v=Fl();y(_,v)}});var u=h(c,2);Xt(u,{href:"/convert",children:(_,l)=>{var v=Nl();y(_,v)}});var p=h(u,2);Xt(p,{href:"/compress",children:(_,l)=>{var v=Ol();y(_,v)}});var m=h(p,2);Xt(m,{href:"/settings",children:(_,l)=>{var v=Ll();y(_,v)}}),y(e,s)}var Hl=z('<footer class="svelte-ww03jg"><div class="footer-left svelte-ww03jg"><div>this is a <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-ww03jg">yt-dlp</a> wrapper</div> <div>inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt</a>, love u wukko</div> <div>youtube powered by <a href="https://patriick.dev/" target="_blank" rel="noopener" class="svelte-ww03jg">patrick</a> at <a href="https://cobalt.meowing.de" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt.meowing.de</a></div> <div class="legal svelte-ww03jg">by using this site you agree to our <a href="/privacy" class="svelte-ww03jg">privacy policy</a></div></div> <div class="footer-right svelte-ww03jg"><a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-ww03jg">github</a> <span>Â·</span> <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-ww03jg">coah80.com</a> <span>Â·</span> <a href="/privacy" class="svelte-ww03jg">privacy</a></div></footer>');function Jl(e){var t=Hl();y(e,t)}var Wl=z('<span class="queue-badge svelte-1picwiz"> </span>'),Gl=z('<div class="queue-dropdown svelte-1picwiz"><!></div>'),Yl=z('<div class="queue-menu svelte-1picwiz"><button class="queue-toggle svelte-1picwiz"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1picwiz"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> queue <!></button> <!></div>');function xn(e,t){mt(t,!0);const s=()=>Ot(ue,"$queue",r),[r,i]=ns();let a=I(!1),o,c=je(s),u=je(()=>n(c).length);function p(k){k.stopPropagation(),d(a,!n(a))}function m(k){o&&!o.contains(k.target)&&d(a,!1)}In(()=>(document.addEventListener("click",m),()=>document.removeEventListener("click",m)));var _=Yl(),l=f(_);l.__click=p;var v=h(f(l),2);{var g=k=>{var $=Wl(),O=f($);J(()=>B(O,n(u))),y(k,$)};A(v,k=>{n(u)>0&&k(g)})}var S=h(l,2);{var w=k=>{var $=Gl(),O=f($);ui(O,{}),y(k,$)};A(S,k=>{n(a)&&k(w)})}Ks(_,k=>o=k,()=>o),y(e,_),wt(),i()}Vt(["click"]);var Ql=z('<div class="spinner svelte-1ea6fjo" role="status" aria-label="Loading"></div>');function vi(e){var t=Ql();y(e,t)}function Pr(e){if(e===0||!Number.isFinite(e)||e<0)return"0 B";const t=1024,s=["B","KB","MB","GB","TB"],r=Math.min(Math.max(Math.floor(Math.log(e)/Math.log(t)),0),s.length-1);return parseFloat((e/Math.pow(t,r)).toFixed(2))+" "+s[r]}function sa(e){try{const t=new URL(e);if(t.hostname==="youtu.be"){const s=t.pathname.slice(1).split("?")[0],r=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${s}${r?`&list=${r}`:""}`}if(t.hostname.includes("youtube.com")){if(t.pathname.startsWith("/shorts/"))return`https://www.youtube.com/watch?v=${t.pathname.replace("/shorts/","").split("?")[0]}`;if(t.searchParams.get("v")){const s=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${t.searchParams.get("v")}${s?`&list=${s}`:""}`}if(t.pathname==="/playlist"&&t.searchParams.get("list"))return`https://www.youtube.com/playlist?list=${t.searchParams.get("list")}`}return e}catch{return e}}function na(e){try{const t=new URL(e).hostname;return t==="youtu.be"||t.includes("youtube.com")}catch{return!1}}function ra(e){try{return new URL(e).searchParams.has("list")}catch{return!1}}function aa(){return Date.now().toString()+Math.random().toString(36).substr(2,9)}var Kl=z("<p> </p>"),Xl=z('<button class="clear-btn svelte-et6md" type="button" title="Clear"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button>'),Zl=z('<button class="paste-btn svelte-et6md" type="button" title="Paste from clipboard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" class="svelte-et6md"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" class="svelte-et6md"></path></svg></button>'),ec=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" class="svelte-et6md"></polygon></svg>'),tc=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" class="svelte-et6md"></rect><line x1="7" y1="2" x2="7" y2="22" class="svelte-et6md"></line><line x1="17" y1="2" x2="17" y2="22" class="svelte-et6md"></line><line x1="2" y1="12" x2="22" y2="12" class="svelte-et6md"></line><line x1="2" y1="7" x2="7" y2="7" class="svelte-et6md"></line><line x1="2" y1="17" x2="7" y2="17" class="svelte-et6md"></line><line x1="17" y1="17" x2="22" y2="17" class="svelte-et6md"></line><line x1="17" y1="7" x2="22" y2="7" class="svelte-et6md"></line></svg>'),sc=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M9 18V5l12-2v13" class="svelte-et6md"></path><circle cx="6" cy="18" r="3" class="svelte-et6md"></circle><circle cx="18" cy="16" r="3" class="svelte-et6md"></circle></svg>'),nc=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" class="svelte-et6md"></rect><circle cx="8.5" cy="8.5" r="1.5" class="svelte-et6md"></circle><polyline points="21 15 16 10 5 21" class="svelte-et6md"></polyline></svg>'),rc=z('<button><!> <span class="svelte-et6md"> </span></button>'),ac=z('<div class="yoink-dropdown svelte-et6md"><button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button> <button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> batch add urls</button></div>'),ic=z("<div><!> </div>"),oc=z('<div class="modal-overlay svelte-et6md"><div class="modal svelte-et6md"><div class="modal-title svelte-et6md">playlist detected!</div> <div class="modal-subtitle svelte-et6md">do you want to download just this video, or the whole playlist?</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="5 3 19 12 5 21 5 3" class="svelte-et6md"></polygon></svg> video</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> playlist</button></div> <label class="modal-toggle svelte-et6md"><input type="checkbox" class="svelte-et6md"/> <span class="modal-toggle-switch svelte-et6md"></span> <span class="modal-toggle-label svelte-et6md">remember this choice</span></label> <div class="modal-hint svelte-et6md">this can be changed in <a href="/settings" class="svelte-et6md">settings</a>!</div></div></div>'),lc=z('<div class="modal-overlay svelte-et6md"><div class="modal batch-modal svelte-et6md"><div class="modal-title svelte-et6md">batch add urls</div> <div class="modal-subtitle svelte-et6md">paste multiple URLs, one per line</div> <textarea class="batch-textarea svelte-et6md"></textarea> <div class="batch-count svelte-et6md"><span class="svelte-et6md"> </span> urls detected</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md">cancel</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button></div></div></div>'),cc=z('<!> <main class="svelte-et6md"><div class="branding svelte-et6md"><h1 class="svelte-et6md">yoink<span class="brand-tld svelte-et6md">.tools</span></h1> <!></div> <div class="input-container svelte-et6md"><div class="url-input-wrapper svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" class="svelte-et6md"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" class="svelte-et6md"></path></svg> <input type="text" class="url-input svelte-et6md" placeholder="paste the link here..." autocomplete="off" spellcheck="false"/> <!></div> <div class="format-section svelte-et6md"><div class="segmented-control svelte-et6md"></div> <div><button class="yoink-btn svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-et6md"></path><polyline points="7 10 12 15 17 10" class="svelte-et6md"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-et6md"></line></svg> </button> <button class="yoink-dropdown-toggle svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polyline points="6 9 12 15 18 9" class="svelte-et6md"></polyline></svg></button> <!></div></div> <!></div></main> <!> <!> <!>',1);function uc(e,t){mt(t,!0);const s=()=>Ot(Ts,"$settings",r),[r,i]=ns();let a=I(""),o=I("auto"),c=I(!1),u=I(null),p=I(""),m=I(!1),_=I(!1),l=I(!1),v=I(""),g=I(null),S=I(null),w,k=je(()=>n(v).split(`
`).filter(T=>{const x=T.trim();if(!x)return!1;try{return new URL(x),!0}catch{return!1}}).length);const $=[{id:"auto",label:"auto",icon:"bolt"},{id:"video",label:"video",icon:"video"},{id:"audio",label:"audio",icon:"audio"},{id:"images",label:"images",icon:"image"}];function O(){d(S,ea[Math.floor(Math.random()*ea.length)],!0)}function ge(){var T;(T=n(S))!=null&&T.link&&window.open(n(S).link,"_blank")}function ee(){let T=null;try{const x=localStorage.getItem("yoink_shared_url");if(x){const D=JSON.parse(x);Date.now()-D.timestamp<300*1e3&&(T=D.url),localStorage.removeItem("yoink_shared_url")}}catch{localStorage.removeItem("yoink_shared_url")}if(!T&&window.location.pathname==="/share"){const x=new URLSearchParams(window.location.search),U=(x.get("url")||x.get("text")||"").match(/https?:\/\/[^\s]+/);U&&(T=U[0].replace(/[.,!?;:)\]}>]+$/,"")),history.replaceState(null,"","/")}T&&(d(a,T,!0),setTimeout(()=>G(),150))}Vn(()=>{O(),ee()});async function ve(){try{const T=await navigator.clipboard.readText();T&&(d(a,T.trim(),!0),w==null||w.focus())}catch{ce("Could not read clipboard","error")}}function $e(T,x){d(u,T,!0),d(p,x,!0)}function ze(){d(u,null),d(p,"")}function xe(){return new Promise(T=>{d(g,T,!0),d(m,!0)})}function Oe(T,x){x&&Ts.setSetting("playlistPreference",T),n(g)&&n(g)(T),d(g,null),d(m,!1)}function Qe(){n(g)&&n(g)(null),d(g,null),d(m,!1)}async function Ke(T,x=!1){const D=sa(T),U=n(o)==="auto"?"video":n(o);let j=U;if(U==="images"&&na(D))return ce("YouTube doesn't support image downloads","error"),null;const E=aa(),C=s();let X=!1;if(U!=="images"&&ra(D))if(C.playlistPreference==="video")X=!1;else if(C.playlistPreference==="playlist")X=!0;else{const H=await xe();if(H===null)return null;X=H==="playlist"}let V="Loading...";try{if(U==="images"){const H=await fetch(`${Me()}/api/gallery/metadata?url=${encodeURIComponent(D)}`),Z=H.headers.get("content-type");H.ok&&(Z!=null&&Z.includes("application/json"))?V=(await H.json()).title||"Gallery":V=D.substring(0,50)}else{const H=await fetch(`${Me()}/api/metadata?url=${encodeURIComponent(D)}&playlist=${X}`),Z=H.headers.get("content-type");if(H.ok&&(Z!=null&&Z.includes("application/json"))){const ye=await H.json();if(V=ye.title||"Unknown",ye.isGallery===!0&&(j="images"),ye.usingCookies&&ce("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3),ye.clipNote){const qe=ye.clipNote.toLowerCase().includes("warning")||ye.originalDuration>600;ce(ye.clipNote,qe?"warning":"info",6e3)}}else if(!H.ok&&(Z!=null&&Z.includes("application/json"))){const ye=await H.json();if(ye.clipUnsupported)return ce("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),null;throw new Error(ye.error||"Metadata fetch failed")}else V=D.substring(0,50)}}catch{V=D.substring(0,50)}const ie={id:E,title:V,url:D,format:j,stage:x?"starting":"queued",status:x?"initializing...":"in queue",progress:0,isPlaylist:X,formatDisplay:j==="images"?"images":j==="audio"?C.audioFormat:`${C.quality} ${C.container}`,startTime:x?Date.now():null,failedVideos:[]};return ue.add(ie),x&&ue.startDownload(ie),ie}async function G(){const T=n(a).trim();if(!T){ce("Please enter a URL","error");return}const x=sa(T);try{new URL(x)}catch{ce("Please enter a valid URL","error");return}if(Zo(x)&&d(S,{text:"okay dude are you just gonna download porn"},!0),n(o)==="images"&&na(x)){ce("YouTube doesn't support image downloads â use video or audio","error");return}d(c,!0);const D=n(o)==="auto"?"video":n(o),U=s();let j=!1;if(D!=="images"&&ra(x))if(U.playlistPreference==="video")j=!1;else if(U.playlistPreference==="playlist")j=!0;else{const C=await xe();if(C===null){d(c,!1);return}j=C==="playlist"}const E=aa();try{$e("loading",D==="images"?"fetching gallery info...":"fetching video info...");let C;if(D==="images"){const qe=await fetch(`${Me()}/api/gallery/metadata?url=${encodeURIComponent(x)}`),Be=qe.headers.get("content-type");if(!qe.ok){let Fe="Failed to fetch gallery info";if(Be!=null&&Be.includes("application/json"))Fe=(await qe.json()).error||Fe;else{const Re=await qe.text();Fe=Re.includes("Cloudflare")||Re.includes("403")?"Access denied (VPN blocked?)":`Server error: ${qe.status}`}throw new Error(Fe)}C=await qe.json(),C.title=C.title||"Gallery"}else{const qe=await fetch(`${Me()}/api/metadata?url=${encodeURIComponent(x)}&playlist=${j}`),Be=qe.headers.get("content-type");if(!qe.ok){let Fe="Failed to fetch metadata";if(Be!=null&&Be.includes("application/json")){const Re=await qe.json();if(Re.clipUnsupported){$e("error","Could not parse YouTube clip"),ce("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),d(c,!1);return}Fe=Re.error||Fe}else{const Re=await qe.text();Fe=`Server error ${qe.status} (likely VPN blocked)`}throw new Error(Fe)}C=await qe.json()}const X=C.title,V=C.isPlaylist&&j,ie=D==="images"||C.isGallery===!0,H=C.isGallery===!0?"images":D,Z=C.videoCount||C.imageCount||0;C.usingCookies&&ce("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3);const ye={id:E,title:X,url:x,format:H,stage:"starting",status:"initializing...",progress:0,isPlaylist:V,isGallery:ie,videoCount:Z,currentVideo:0,currentVideoTitle:"",formatDisplay:ie?"images":H==="audio"?U.audioFormat:`${U.quality} ${U.container}`,failedVideos:[],startTime:Date.now()};ue.add(ye),ue.startDownload(ye),d(a,""),ze()}catch(C){$e("error",C.message||"Download failed"),ce(C.message||"Download failed","error")}finally{d(c,!1)}}function Q(T){T.key==="Enter"&&G()}async function me(){d(l,!1);const T=n(a).trim();if(!T){ce("Please enter a URL","error");return}try{new URL(T)}catch{ce("Please enter a valid URL","error");return}await Ke(T),d(a,"")}function M(){d(l,!1),d(v,""),d(_,!0)}async function q(){const T=n(v).split(`
`).map(x=>x.trim()).filter(x=>{try{return new URL(x),!0}catch{return!1}});if(T.length===0){ce("No valid URLs found","error");return}d(_,!1),ce(`Adding ${T.length} URLs to queue...`,"info");for(const x of T)await Ke(x,!1);ce(`${T.length} items added to queue`,"success")}let W=I(!1);var Y=cc();ut("click",On,T=>{T.target.closest(".yoink-btn-wrapper")||d(l,!1)});var de=Ce(Y);Vl(de,{extraContent:x=>{xn(x,{})}});var Pe=h(de,2),te=f(Pe),Te=h(f(te),2);{var ae=T=>{var x=Kl();let D;x.__click=ge;var U=f(x);J(j=>{D=he(x,1,"splash svelte-et6md",null,D,j),kn(x,n(S).link?"cursor: pointer;":""),B(U,n(S).text)},[()=>{var j,E,C;return{fancy:(j=n(S).classes)==null?void 0:j.includes("fancy"),clickable:(E=n(S).classes)==null?void 0:E.includes("clickable"),rainbow:(C=n(S).classes)==null?void 0:C.includes("rainbow")}}]),y(T,x)};A(Te,T=>{n(S)&&T(ae)})}var K=h(te,2),se=f(K),we=h(f(se),2);we.__keydown=Q,Ks(we,T=>w=T,()=>w);var P=h(we,2);{var F=T=>{var x=Xl();x.__click=()=>{d(a,""),w==null||w.focus()},y(T,x)},ne=T=>{var x=Zl();x.__click=ve,y(T,x)};A(P,T=>{n(a)?T(F):T(ne,!1)})}var re=h(se,2),pe=f(re);We(pe,21,()=>$,rt,(T,x)=>{var D=rc();let U;D.__click=()=>d(o,n(x).id,!0);var j=f(D);{var E=ie=>{var H=ec();y(ie,H)},C=ie=>{var H=Le(),Z=Ce(H);{var ye=Be=>{var Fe=tc();y(Be,Fe)},qe=Be=>{var Fe=Le(),Re=Ce(Fe);{var Tt=Jt=>{var qs=sc();y(Jt,qs)},De=Jt=>{var qs=Le(),en=Ce(qs);{var jn=Is=>{var Tn=nc();y(Is,Tn)};A(en,Is=>{n(x).icon==="image"&&Is(jn)},!0)}y(Jt,qs)};A(Re,Jt=>{n(x).icon==="audio"?Jt(Tt):Jt(De,!1)},!0)}y(Be,Fe)};A(Z,Be=>{n(x).icon==="video"?Be(ye):Be(qe,!1)},!0)}y(ie,H)};A(j,ie=>{n(x).icon==="bolt"?ie(E):ie(C,!1)})}var X=h(j,2),V=f(X);J(()=>{U=he(D,1,"segment svelte-et6md",null,U,{active:n(o)===n(x).id}),B(V,n(x).label)}),y(T,D)});var _e=h(pe,2);let Ae;var He=f(_e);He.__click=G;var Je=h(f(He)),at=h(He,2);at.__click=T=>{T.stopPropagation(),d(l,!n(l))};var Xe=h(at,2);{var it=T=>{var x=ac(),D=f(x);D.__click=me;var U=h(D,2);U.__click=M,y(T,x)};A(Xe,T=>{n(l)&&T(it)})}var Ht=h(re,2);{var R=T=>{var x=ic(),D=f(x);{var U=E=>{vi(E)};A(D,E=>{n(u)==="loading"&&E(U)})}var j=h(D);J(()=>{he(x,1,`status ${n(u)??""}`,"svelte-et6md"),B(j,` ${n(p)??""}`)}),y(T,x)};A(Ht,T=>{n(u)&&T(R)})}var N=h(Pe,2);Jl(N);var L=h(N,2);{var oe=T=>{var x=oc();x.__click=V=>{V.target===V.currentTarget&&Qe()};var D=f(x),U=h(f(D),4),j=f(U);j.__click=()=>Oe("video",n(W));var E=h(j,2);E.__click=()=>Oe("playlist",n(W));var C=h(U,2),X=f(C);ri(X,()=>n(W),V=>d(W,V)),y(T,x)};A(L,T=>{n(m)&&T(oe)})}var le=h(L,2);{var Ee=T=>{var x=lc();x.__click=H=>{H.target===H.currentTarget&&d(_,!1)};var D=f(x),U=h(f(D),4);ts(U,"placeholder",`https://youtube.com/watch?v=...
https://youtube.com/watch?v=...
https://youtube.com/watch?v=...`);var j=h(U,2),E=f(j),C=f(E),X=h(j,2),V=f(X);V.__click=()=>d(_,!1);var ie=h(V,2);ie.__click=q,J(()=>B(C,n(k))),Yr(U,()=>n(v),H=>d(v,H)),y(T,x)};A(le,T=>{n(_)&&T(Ee)})}J(()=>{Ae=he(_e,1,"yoink-btn-wrapper svelte-et6md",null,Ae,{open:n(l)}),He.disabled=n(c),B(Je,` ${n(c)?"loading...":"yoink"}`)}),ut("focus",we,ze),Yr(we,()=>n(a),T=>d(a,T)),y(e,Y),wt(),i()}Vt(["click","keydown"]);var vc=z('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> <span>download</span>',1),dc=z('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> <span>convert</span>',1),fc=z('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> <span>compress</span>',1),pc=z('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> <span>transcribe</span>',1),hc=z('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span>settings</span>',1),gc=z('<header class="svelte-67r2h0"><div class="header-center svelte-67r2h0"><a href="/" class="logo-link svelte-67r2h0"><span class="logo-text svelte-67r2h0">yoink</span> <span class="logo-tld svelte-67r2h0">.tools</span></a></div> <nav class="header-right svelte-67r2h0"><!> <!> <!> <!> <!> <!></nav></header>');function Zs(e,t){var s=gc(),r=h(f(s),2),i=f(r);{var a=_=>{var l=Le(),v=Ce(l);Cr(v,()=>t.extraContent),y(_,l)};A(i,_=>{t.extraContent&&_(a)})}var o=h(i,2);Xt(o,{href:"/",children:(_,l)=>{var v=vc();y(_,v)}});var c=h(o,2);Xt(c,{href:"/convert",children:(_,l)=>{var v=dc();y(_,v)}});var u=h(c,2);Xt(u,{href:"/compress",children:(_,l)=>{var v=fc();y(_,v)}});var p=h(u,2);Xt(p,{href:"/transcribe",children:(_,l)=>{var v=pc();y(_,v)}});var m=h(p,2);Xt(m,{href:"/settings",children:(_,l)=>{var v=hc();y(_,v)}}),y(e,s)}var mc=z('<footer class="svelte-1dij6pu"><a href="/" class="svelte-1dij6pu">yoink.tools</a> - powered by <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-1dij6pu">yt-dlp</a> Â· <a href="/privacy" class="svelte-1dij6pu">privacy</a></footer>');function Sn(e){var t=mc();y(e,t)}var wc=z("<button><span> </span></button>"),_c=z("<button> </button>"),yc=z("<button> </button>"),bc=z("<button> </button>"),kc=z(`<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">video</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">video quality</div> <div class="quality-grid svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">if preferred quality isn't available, the next best option will be used. 1080p is recommended for most uses.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">preferred codec</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">h264: best compatibility, max 1080p. av1: best quality & efficiency, supports 8k & HDR. vp9: same quality as av1 but ~2x larger.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">file container</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp4 has the best compatibility. webm is great for web. mkv supports more features but has limited playback support.</p></div></section>`),xc=z("<button> </button>"),Sc=z("<button> </button>"),jc=z('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">audio</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio format</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp3: universal compatibility. m4a: better quality at same size. opus: best compression. flac/wav: lossless quality.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio bitrate</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">higher bitrate = better quality but larger file size. 320kbps is CD-quality for most people.</p></div></section>'),Tc=z("<button> </button>"),Cc=z("<button> </button>"),zc=z('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">downloads</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">filename style</div> <div class="segmented-control svelte-1ozf5k3"></div> <div class="filename-preview svelte-1ozf5k3"><code class="svelte-1ozf5k3"> </code></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">twitter/x gifs as gif</div> <p class="setting-description svelte-1ozf5k3">automatically convert twitter/x "gifs" (which are actually videos) to real gif files. turn off to keep them as mp4.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">playlist behavior</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">when a link contains a playlist, should we download just the video or the entire playlist? "ask me" will show a popup each time.</p></div></section>'),Ec=z('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">advanced</h2> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">allow h265 codec</div> <p class="setting-description svelte-1ozf5k3">enables downloading h265/HEVC videos for platforms like TikTok. higher quality but may have compatibility issues with some players.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">embed metadata</div> <p class="setting-description svelte-1ozf5k3">include title, artist, and other metadata in downloaded files.</p></div> <button></button></div></div> <div class="divider svelte-1ozf5k3"></div> <button class="reset-btn svelte-1ozf5k3">reset all settings</button></section>'),Mc=z('<!> <main class="svelte-1ozf5k3"><div class="page-header svelte-1ozf5k3"><h1 class="svelte-1ozf5k3">settings</h1> <p class="svelte-1ozf5k3">customize your download experience</p></div> <nav class="settings-nav svelte-1ozf5k3"></nav> <!> <!> <!> <!></main> <!>',1);function $c(e,t){mt(t,!0);const s=()=>Ot(Ts,"$settings",r),[r,i]=ns();let a=I("video"),o=je(s);const c=[{id:"video",label:"video"},{id:"audio",label:"audio"},{id:"downloads",label:"downloads"},{id:"advanced",label:"advanced"}],u=["best","4k","1440p","1080p","720p","480p","360p"],p={best:"8k+","4k":"4k","1440p":"1440p","1080p":"1080p","720p":"720p","480p":"480p","360p":"360p"},m=[{value:"h264",label:"h264 + aac"},{value:"av1",label:"av1 + opus"},{value:"vp9",label:"vp9 + opus"}],_=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mkv",label:"mkv"}],l=[{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"opus",label:"opus"},{value:"flac",label:"flac"},{value:"wav",label:"wav"}],v=[{value:"320",label:"320 kbps"},{value:"256",label:"256 kbps"},{value:"192",label:"192 kbps"},{value:"128",label:"128 kbps"}],g=[{value:"classic",label:"classic"},{value:"basic",label:"basic"},{value:"pretty",label:"pretty"},{value:"nerdy",label:"nerdy"}],S=[{value:"ask",label:"ask me"},{value:"video",label:"just video"},{value:"playlist",label:"full playlist"}];let w=je(()=>{const M=n(o).container||"mp4",q={classic:`Video Title (${n(o).quality}).${M}`,basic:`Video Title.${M}`,pretty:`Video Title - Author (${n(o).quality}, ${n(o).codec}).${M}`,nerdy:`Video_Title_${n(o).quality}_${n(o).codec}_aac.${M}`};return q[n(o).filenameStyle]||q.basic});function k(M,q){Ts.setSetting(M,q)}function $(){confirm("Reset all settings to defaults?")&&(Ts.reset(),ce("Settings reset!","success"))}var O=Mc(),ge=Ce(O);Zs(ge,{extraContent:q=>{xn(q,{})}});var ee=h(ge,2),ve=h(f(ee),2);We(ve,21,()=>c,rt,(M,q)=>{var W=wc();let Y;W.__click=()=>d(a,n(q).id,!0);var de=f(W),Pe=f(de);J(()=>{Y=he(W,1,"settings-nav-item svelte-1ozf5k3",null,Y,{active:n(a)===n(q).id}),B(Pe,n(q).label)}),y(M,W)});var $e=h(ve,2);{var ze=M=>{var q=kc(),W=h(f(q),2),Y=h(f(W),2);We(Y,21,()=>u,rt,(ae,K)=>{var se=_c();let we;se.__click=()=>k("quality",n(K));var P=f(se);J(()=>{we=he(se,1,"quality-option svelte-1ozf5k3",null,we,{active:n(o).quality===n(K)}),B(P,p[n(K)])}),y(ae,se)});var de=h(W,2),Pe=h(f(de),2);We(Pe,21,()=>m,rt,(ae,K)=>{var se=yc();let we;se.__click=()=>k("codec",n(K).value);var P=f(se);J(()=>{we=he(se,1,"segment svelte-1ozf5k3",null,we,{active:n(o).codec===n(K).value}),B(P,n(K).label)}),y(ae,se)});var te=h(de,2),Te=h(f(te),2);We(Te,21,()=>_,rt,(ae,K)=>{var se=bc();let we;se.__click=()=>k("container",n(K).value);var P=f(se);J(()=>{we=he(se,1,"segment svelte-1ozf5k3",null,we,{active:n(o).container===n(K).value}),B(P,n(K).label)}),y(ae,se)}),y(M,q)};A($e,M=>{n(a)==="video"&&M(ze)})}var xe=h($e,2);{var Oe=M=>{var q=jc(),W=h(f(q),2),Y=h(f(W),2);We(Y,21,()=>l,rt,(te,Te)=>{var ae=xc();let K;ae.__click=()=>k("audioFormat",n(Te).value);var se=f(ae);J(()=>{K=he(ae,1,"segment svelte-1ozf5k3",null,K,{active:n(o).audioFormat===n(Te).value}),B(se,n(Te).label)}),y(te,ae)});var de=h(W,2),Pe=h(f(de),2);We(Pe,21,()=>v,rt,(te,Te)=>{var ae=Sc();let K;ae.__click=()=>k("audioBitrate",n(Te).value);var se=f(ae);J(()=>{K=he(ae,1,"segment svelte-1ozf5k3",null,K,{active:n(o).audioBitrate===n(Te).value}),B(se,n(Te).label)}),y(te,ae)}),y(M,q)};A(xe,M=>{n(a)==="audio"&&M(Oe)})}var Qe=h(xe,2);{var Ke=M=>{var q=zc(),W=h(f(q),2),Y=h(f(W),2);We(Y,21,()=>g,rt,(F,ne)=>{var re=Tc();let pe;re.__click=()=>k("filenameStyle",n(ne).value);var _e=f(re);J(()=>{pe=he(re,1,"segment svelte-1ozf5k3",null,pe,{active:n(o).filenameStyle===n(ne).value}),B(_e,n(ne).label)}),y(F,re)});var de=h(Y,2),Pe=f(de),te=f(Pe),Te=h(W,2),ae=f(Te),K=h(f(ae),2);let se;K.__click=()=>k("twitterGifs",!(!n(o).twitterGifs||n(o).twitterGifs===void 0));var we=h(Te,2),P=h(f(we),2);We(P,21,()=>S,rt,(F,ne)=>{var re=Cc();let pe;re.__click=()=>k("playlistPreference",n(ne).value==="ask"?null:n(ne).value);var _e=f(re);J(()=>{pe=he(re,1,"segment svelte-1ozf5k3",null,pe,{active:(n(o).playlistPreference===null?"ask":n(o).playlistPreference)===n(ne).value}),B(_e,n(ne).label)}),y(F,re)}),J(()=>{B(te,n(w)),se=he(K,1,"toggle svelte-1ozf5k3",null,se,{active:n(o).twitterGifs!==!1})}),y(M,q)};A(Qe,M=>{n(a)==="downloads"&&M(Ke)})}var G=h(Qe,2);{var Q=M=>{var q=Ec(),W=h(f(q),2),Y=f(W),de=h(f(Y),2);let Pe;de.__click=()=>k("h265",!n(o).h265);var te=h(W,2),Te=f(te),ae=h(f(Te),2);let K;ae.__click=()=>k("metadata",n(o).metadata===!1);var se=h(te,4);se.__click=$,J(()=>{Pe=he(de,1,"toggle svelte-1ozf5k3",null,Pe,{active:n(o).h265}),K=he(ae,1,"toggle svelte-1ozf5k3",null,K,{active:n(o).metadata!==!1})}),y(M,q)};A(G,M=>{n(a)==="advanced"&&M(Q)})}var me=h(ee,2);Sn(me),y(e,O),wt(),i()}Vt(["click"]);var Pc=z('<span class="progress-label svelte-1untuf7"> </span>'),qc=z('<div class="progress-wrapper svelte-1untuf7"><!> <div class="progress-track svelte-1untuf7" role="progressbar"><div class="progress-fill svelte-1untuf7"></div></div></div>');function qr(e,t){let s=pr(t,"percent",3,0),r=pr(t,"label",3,""),i=je(()=>Math.min(100,Math.max(0,s())));var a=qc(),o=f(a);{var c=m=>{var _=Pc(),l=f(_);J(()=>B(l,r())),y(m,_)};A(o,m=>{r()&&m(c)})}var u=h(o,2);ts(u,"aria-valuemin",0),ts(u,"aria-valuemax",100);var p=f(u);J(()=>{ts(u,"aria-valuenow",n(i)),kn(p,`width: ${n(i)??""}%`)}),y(e,a)}const Zn=50*1024*1024;async function Ir(e,t){const s=Me(),r=Math.ceil(e.size/Zn),i=await fetch(`${s}/api/upload/init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e.name,fileSize:e.size,totalChunks:r})});if(!i.ok){let c="Failed to initialize upload";try{c=(await i.json()).error||c}catch{c=await i.text().catch(()=>c)}throw new Error(c)}const{uploadId:a}=await i.json();for(let c=0;c<r;c++){const u=c*Zn,p=Math.min(u+Zn,e.size),m=e.slice(u,p),_=new FormData;_.append("chunk",m);const l=await fetch(`${s}/api/upload/chunk/${a}/${c}`,{method:"POST",body:_});if(!l.ok){let g=`Failed to upload chunk ${c+1}`;try{g=(await l.json()).error||g}catch{g=await l.text().catch(()=>g)}throw new Error(g)}const v=(c+1)/r*100;t(v)}const o=await fetch(`${s}/api/upload/complete/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!o.ok){let c="Failed to complete upload";try{c=(await o.json()).error||c}catch{c=await o.text().catch(()=>c)}throw new Error(c)}return await o.json()}var Ic=z('<button type="button"><svg class="drop-zone-icon svelte-17hyuhr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-17hyuhr">drop a file here or click to browse</p> <p class="drop-zone-hint svelte-17hyuhr">supports video and audio files (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>'),Dc=Ne('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Bc=Ne('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),Rc=z("<button> </button>"),Ac=z('<div class="file-info svelte-17hyuhr"><div class="file-header svelte-17hyuhr"><div class="file-icon svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><!></svg></div> <div class="file-details svelte-17hyuhr"><div class="file-name svelte-17hyuhr"> </div> <div class="file-size svelte-17hyuhr"> </div></div> <button class="file-remove svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="convert-options svelte-17hyuhr"><div class="option-label svelte-17hyuhr">convert to</div> <div class="segmented-control svelte-17hyuhr"></div></div> <button class="convert-btn svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> </button></div>'),Fc=z('<div class="progress-container svelte-17hyuhr"><!></div>'),Nc=z("<div> </div>"),Oc=z('<!> <main class="svelte-17hyuhr"><div class="page-header svelte-17hyuhr"><h1 class="svelte-17hyuhr">convert</h1> <p class="svelte-17hyuhr">change video and audio file formats</p></div> <div class="converter svelte-17hyuhr"><!> <!> <!></div></main> <!>',1);function Lc(e,t){mt(t,!0);let s=I(null),r=I("mp4"),i=I(!1),a=I(0),o=I(""),c=I(null),u=I(""),p=I(!1),m;const _=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"wav",label:"wav"}];function l(G){return G.type.startsWith("audio/")||["mp3","m4a","wav","flac","ogg","opus"].some(Q=>G.name.toLowerCase().endsWith("."+Q))}function v(G){if(!G)return;const Q=8*1024*1024*1024;if(G.size>Q){d(c,"error"),d(u,"File too large. Maximum size is 8GB.");return}d(s,G,!0),d(c,null),d(u,"")}function g(){d(s,null),d(a,0),d(o,""),d(c,null),d(u,""),m&&(m.value="")}async function S(G){let Q="";try{Q=await(await G.blob()).text()}catch{Q=await G.text().catch(()=>"")}try{return JSON.parse(Q).error||`Request failed with status ${G.status}`}catch{return Q||`Request failed with status ${G.status}`}}async function w(){if(!n(s)||n(i))return;d(i,!0),d(a,0),d(o,"Uploading..."),d(c,null),d(u,"");const G=n(s).size>90*1024*1024;let Q=null;const me=Date.now().toString()+Math.random().toString(36).substr(2,9);ue.add({id:me,title:`${n(s).name} â .${n(r)}`,type:"convert",stage:"uploading",status:"uploading...",progress:0,startTime:Date.now()});try{Q=Jn();let M;if(G){const{filePath:de,fileName:Pe}=await Ir(n(s),K=>{d(a,K,!0),d(o,"Uploading..."),ue.updateItem(me,{progress:K,status:"uploading..."})});d(a,0),d(o,"Converting..."),ue.updateItem(me,{stage:"converting",status:"converting...",progress:0});const te=await fetch(`${Me()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:de,fileName:Pe,format:n(r)})});if(!te.ok)throw new Error(await S(te));const{jobId:Te}=await te.json();let ae=0;for(;;){if(ae>=300)throw new Error("Conversion timed out after 10 minutes");ae++,await new Promise(F=>setTimeout(F,2e3));const K=new AbortController,se=setTimeout(()=>K.abort(),1e4);let we;try{we=await fetch(`${Me()}/api/job/${Te}/status`,{signal:K.signal})}finally{clearTimeout(se)}if(!we.ok)throw we.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const P=await we.json();if(P.status==="error")throw new Error(P.error||"Conversion failed");if(d(a,P.progress||0,!0),d(o,P.message||"processing...",!0),ue.updateItem(me,{progress:P.progress||0,status:P.message||"converting..."}),P.status==="complete")break}M=await fetch(`${Me()}/api/job/${Te}/download`)}else M=await new Promise((de,Pe)=>{const te=new XMLHttpRequest;te.open("POST",`${Me()}/api/convert`),te.upload.onprogress=ae=>{if(ae.lengthComputable){const K=Math.round(ae.loaded/ae.total*90);d(a,K,!0),d(o,`uploading... ${K}%`),ue.updateItem(me,{progress:K,status:`uploading... ${K}%`})}},te.onload=()=>{d(a,95),d(o,"processing..."),ue.updateItem(me,{stage:"converting",status:"converting...",progress:95}),de(new Response(te.response,{status:te.status,statusText:te.statusText,headers:{"Content-Disposition":te.getResponseHeader("Content-Disposition")||""}}))},te.onerror=()=>Pe(new Error("Network error during upload")),te.responseType="blob";const Te=new FormData;Te.append("file",n(s)),Te.append("format",n(r)),te.send(Te)});if(!M.ok)throw new Error(await S(M));d(a,100),d(o,"complete!");const q=M.headers.get("Content-Disposition");let W=n(s).name.replace(/\.[^.]+$/,"")+"."+n(r);if(q){const de=q.match(/filename="?([^"]+)"?/);de&&(W=de[1])}const Y=await M.blob();$r(Y,W),d(c,"success"),d(u,"conversion complete! download started."),ue.updateItem(me,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>ue.remove(me),5e3)}catch(M){d(c,"error"),d(u,M.message||"conversion failed",!0),d(a,0),d(o,""),ue.updateItem(me,{stage:"error",status:M.message||"conversion failed"})}finally{d(i,!1),Q&&Wn(Q)}}var k=Oc(),$=Ce(k);Zs($,{extraContent:Q=>{xn(Q,{})}});var O=h($,2),ge=h(f(O),2),ee=f(ge);{var ve=G=>{var Q=Ic();let me;Q.__click=()=>m==null?void 0:m.click();var M=h(f(Q),6);M.__change=q=>{var W;v((W=q.target.files)==null?void 0:W[0]),q.target.value=""},Ks(M,q=>m=q,()=>m),J(()=>me=he(Q,1,"drop-zone svelte-17hyuhr",null,me,{dragover:n(p)})),ut("dragover",Q,q=>{q.preventDefault(),d(p,!0)}),ut("dragleave",Q,q=>{q.preventDefault(),d(p,!1)}),ut("drop",Q,q=>{var W,Y;q.preventDefault(),d(p,!1),v((Y=(W=q.dataTransfer)==null?void 0:W.files)==null?void 0:Y[0])}),y(G,Q)},$e=G=>{var Q=Ac(),me=f(Q),M=f(me),q=f(M),W=f(q);{var Y=re=>{var pe=Dc();y(re,pe)},de=re=>{var pe=Bc();y(re,pe)};A(W,re=>{l(n(s))?re(Y):re(de,!1)})}var Pe=h(M,2),te=f(Pe),Te=f(te),ae=h(te,2),K=f(ae),se=h(Pe,2);se.__click=g;var we=h(me,2),P=h(f(we),2);We(P,21,()=>_,rt,(re,pe)=>{var _e=Rc();let Ae;_e.__click=()=>d(r,n(pe).value,!0);var He=f(_e);J(()=>{Ae=he(_e,1,"segment svelte-17hyuhr",null,Ae,{active:n(r)===n(pe).value}),B(He,n(pe).label)}),y(re,_e)});var F=h(we,2);F.__click=w;var ne=h(f(F));J(re=>{ts(te,"title",n(s).name),B(Te,n(s).name),B(K,re),F.disabled=n(i),B(ne,` ${n(i)?"converting...":"convert"}`)},[()=>Pr(n(s).size)]),y(G,Q)};A(ee,G=>{n(s)?G($e,!1):G(ve)})}var ze=h(ee,2);{var xe=G=>{var Q=Fc(),me=f(Q);qr(me,{get percent(){return n(a)},get label(){return n(o)}}),y(G,Q)};A(ze,G=>{n(i)&&G(xe)})}var Oe=h(ze,2);{var Qe=G=>{var Q=Nc(),me=f(Q);J(()=>{he(Q,1,`status ${n(c)??""}`,"svelte-17hyuhr"),B(me,n(u))}),y(G,Q)};A(Oe,G=>{n(c)&&G(Qe)})}var Ke=h(O,2);Sn(Ke),y(e,k),wt()}Vt(["click","change"]);Vt(["click","keydown"]);var Uc=z('<button type="button"><svg class="drop-zone-icon svelte-15o2uhu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-15o2uhu">drop a video here or click to browse</p> <p class="drop-zone-hint svelte-15o2uhu">supports mp4, webm, mov, mkv, avi (max 8GB)</p> <input type="file" accept="video/*" style="display: none;"/></button>'),Vc=z('<div class="file-info svelte-15o2uhu"><div class="file-header svelte-15o2uhu"><div class="file-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-15o2uhu"><div class="file-name svelte-15o2uhu"> </div> <div class="file-size svelte-15o2uhu"> </div></div> <button class="file-remove svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-15o2uhu"><span> </span> <span> </span></div></div>'),Hc=z('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),Jc=z('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),Wc=z('<div class="progress-container svelte-15o2uhu"><div class="progress-header svelte-15o2uhu"><span class="progress-status svelte-15o2uhu"> </span> <span class="progress-percent svelte-15o2uhu"> </span></div> <!> <div class="progress-details svelte-15o2uhu"> </div></div>'),Gc=z('<div class="result-container svelte-15o2uhu"><div class="result-header svelte-15o2uhu"><div class="result-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-15o2uhu">compression complete!</div></div> <div class="result-stats svelte-15o2uhu"><div class="result-stat svelte-15o2uhu"><div class="result-stat-value svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">original</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value arrow svelte-15o2uhu">-></div> <div class="result-stat-label svelte-15o2uhu"></div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">compressed</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">saved</div></div></div> <button class="result-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> compress another</button></div>'),Yc=z('<div class="quality-overlay svelte-15o2uhu"><div class="quality-modal svelte-15o2uhu"><div class="quality-modal-title svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg> quality warning</div> <div class="quality-gauge svelte-15o2uhu"><div class="quality-gauge-bg svelte-15o2uhu"></div> <div class="quality-gauge-mask svelte-15o2uhu"></div> <div class="quality-gauge-needle svelte-15o2uhu"></div> <div class="quality-gauge-center svelte-15o2uhu"></div> <div class="quality-gauge-value svelte-15o2uhu"><span> </span> <span class="quality-gauge-unit svelte-15o2uhu">kbps</span></div></div> <div class="quality-modal-message svelte-15o2uhu">Your video is <strong class="svelte-15o2uhu"> </strong> long. At this size, the estimated bitrate is very low and the output <strong class="svelte-15o2uhu">may look blocky or blurry</strong>. <br/><br/> For better results, try a <strong class="svelte-15o2uhu">shorter clip</strong> or a <strong class="svelte-15o2uhu">larger target size</strong>.</div> <div class="quality-modal-buttons svelte-15o2uhu"><button class="quality-modal-btn cancel svelte-15o2uhu">cancel</button> <button class="quality-modal-btn proceed svelte-15o2uhu">compress anyway</button></div></div></div>'),Qc=z('<!> <main class="svelte-15o2uhu"><div class="page-header svelte-15o2uhu"><h1 class="svelte-15o2uhu">compress</h1> <p class="svelte-15o2uhu">shrink videos for discord, email, or anywhere!</p></div> <div class="compress-container svelte-15o2uhu"><!> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">target size</div> <div class="size-description svelte-15o2uhu">choose a size limit or enter a custom size</div> <div class="size-grid svelte-15o2uhu"></div> <div class="custom-size-row svelte-15o2uhu"><input type="number" class="custom-size-input svelte-15o2uhu" placeholder="custom" min="1" max="4096"/> <span class="custom-size-suffix svelte-15o2uhu">MB</span></div> <div class="estimate svelte-15o2uhu"><span class="estimate-label svelte-15o2uhu">estimated quality</span> <span> </span></div></div> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">encoding preset</div> <div class="size-description svelte-15o2uhu">quality = better compression, slower | fast = quicker encoding</div> <div class="preset-grid svelte-15o2uhu"></div> <label class="checkbox-row svelte-15o2uhu"><input type="checkbox" class="svelte-15o2uhu"/> <span class="svelte-15o2uhu">downscale for better quality (reduces blockiness)</span></label></div> <button class="compress-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg> </button> <!> <!></div></main> <!> <!>',1);function Kc(e,t){mt(t,!0);let s=I(null),r=I(0),i=I(0),a=I(0),o=I(50),c=I(47),u=I(""),p=I(!1),m=I("balanced"),_=I(!1),l=I(!1),v=I(0),g=I(""),S=I(""),w=I(!1),k=I(""),$=I(""),O=I(""),ge=I(!1),ee=I(!1),ve;const $e=[{size:8,actual:7.5,label:"MB free"},{size:10,actual:9.5,label:"MB"},{size:50,actual:47,label:"MB basic"},{size:100,actual:95,label:"MB"},{size:500,actual:475,label:"MB nitro"}],ze=[{id:"fast",label:"fast",sublabel:"quick encode"},{id:"balanced",label:"balanced",sublabel:"recommended"},{id:"quality",label:"quality",sublabel:"best results"}];let xe=je(()=>{if(!n(s)||!n(r))return 0;const j=n(c)*1024*1024,E=128*1024,C=j-E/8*n(r);return Math.floor(C*8/n(r)/1024)}),Oe=je(()=>!n(s)||!n(r)?"select a file to see estimate":n(s).size/(1024*1024)<=n(c)?`already under ${n(o)}MB!`:n(xe)<500?`~${n(xe)} kbps video - very low quality (may be blocky)`:n(xe)<1e3?`~${n(xe)} kbps video - low quality`:n(xe)<2500?`~${n(xe)} kbps video - medium quality`:n(xe)<5e3?`~${n(xe)} kbps video - good quality`:`~${n(xe)} kbps video - excellent quality`),Qe=je(()=>n(s)&&n(r)&&n(xe)<500&&n(s).size/(1024*1024)>n(c)),Ke=je(()=>-90+Math.min(n(xe),2e3)/2e3*180),G=je(()=>{if(!n(r))return"--:--";const j=Math.floor(n(r)/60),E=Math.floor(n(r)%60);return`${j}:${E.toString().padStart(2,"0")}`}),Q=je(()=>!n(i)||!n(a)?"unknown":`${n(i)}x${n(a)}`);function me(j){return new Promise(E=>{const C=document.createElement("video");C.preload="metadata",C.onloadedmetadata=()=>{URL.revokeObjectURL(C.src),E({duration:C.duration,width:C.videoWidth,height:C.videoHeight})},C.onerror=()=>{E({duration:0,width:0,height:0})},C.src=URL.createObjectURL(j)})}async function M(j){if(!j)return;if(!j.type.startsWith("video/")){ce("Please select a video file","error");return}const E=8*1024*1024*1024;if(j.size>E){ce("File too large. Maximum size is 8GB.","error");return}d(s,j,!0),d(w,!1);const C=await me(j);d(r,C.duration,!0),d(i,C.width,!0),d(a,C.height,!0)}function q(){d(s,null),d(r,0),d(i,0),d(a,0),d(v,0),d(g,""),d(S,""),d(w,!1),d(u,""),d(p,!1),ve&&(ve.value="")}function W(j){d(o,j.size,!0),d(c,j.actual,!0),d(p,!1),d(u,"")}function Y(j){d(u,j,!0);const E=parseInt(j);E&&E>0&&(d(o,E,!0),d(c,E*.95),d(p,!0))}function de(){(!n(u)||parseInt(n(u))<=0)&&n(p)&&(d(o,50),d(c,47),d(p,!1))}function Pe(){if(!n(s))return;if(n(s).size/(1024*1024)<=n(c)){ce(`File is already under ${n(o)}MB!`,"success");return}n(xe)<500?d(ee,!0):te()}async function te(){if(!n(s)||n(l))return;if(d(ee,!1),n(s).size/(1024*1024)<=n(c)){ce(`File is already under ${n(o)}MB!`,"success");return}d(l,!0),d(v,0),d(g,"uploading..."),d(S,"sending file to server..."),d(w,!1);const E=Date.now().toString()+Math.random().toString(36).substr(2,9),C=E;ue.add({id:C,title:`${n(s).name} â ${n(o)}MB`,type:"compress",stage:"uploading",status:"uploading...",progress:0,startTime:Date.now()});const X=n(s).size>90*1024*1024;let V=null,ie=null;try{V=Jn(),ie=hr(E,{onMessage:De=>{De.stage==="compressing"&&(d(g,"compressing..."),De.progress!==void 0&&d(v,De.progress,!0),De.message&&d(S,De.message,!0),ue.updateItem(C,{stage:"compressing",progress:De.progress||0,status:De.message||"compressing..."}))},onError:()=>{}});let H;if(X){d(g,"uploading..."),d(S,"large file detected, uploading in chunks...");const De=await Ir(n(s),ft=>{d(v,ft,!0),d(S,"uploading chunks..."),ue.updateItem(C,{progress:ft,status:"uploading..."})}),{filePath:Jt,fileName:qs}=De;d(v,0),d(g,"compressing..."),d(S,"starting compression..."),ue.updateItem(C,{stage:"compressing",status:"compressing...",progress:0});const en=await fetch(`${Me()}/api/compress-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:Jt,fileName:qs,targetSize:n(c).toString(),duration:n(r).toString(),progressId:E,preset:n(m),downscale:n(_)})});if(!en.ok){let ft="Failed to start compression";try{ft=(await en.json()).error||ft}catch{}throw new Error(ft)}const{jobId:jn}=await en.json(),Is=Date.now(),Tn=1800*1e3;let Gn=0;for(;Date.now()-Is<=Tn;){await new Promise(ft=>setTimeout(ft,2e3));try{const ft=new AbortController,Br=setTimeout(()=>ft.abort(),1e4);let Cn;try{Cn=await fetch(`${Me()}/api/job/${jn}/status`,{signal:ft.signal})}finally{clearTimeout(Br)}if(!Cn.ok)throw new Error(`Server returned ${Cn.status}`);const Wt=await Cn.json();if(Gn=0,Wt.status==="error")throw new Error(Wt.error||"Compression failed");if(Wt.progress!==void 0&&d(v,Wt.progress,!0),Wt.message&&d(S,Wt.message,!0),ue.updateItem(C,{progress:Wt.progress||0,status:Wt.message||"compressing..."}),Wt.status==="complete")break}catch(ft){if(Gn++,Gn>=3)throw new Error(`Failed to check job status after 3 attempts: ${ft.message}`)}}if(Date.now()-Is>Tn)throw new Error("Job timed out after 30 minutes.");H=await fetch(`${Me()}/api/job/${jn}/download`)}else{const De=new FormData;De.append("file",n(s)),De.append("targetSize",n(c).toString()),De.append("duration",n(r).toString()),De.append("progressId",E),De.append("preset",n(m)),De.append("downscale",n(_)),H=await fetch(`${Me()}/api/compress`,{method:"POST",body:De})}if(ie&&ie.close(),!H.ok){let De="Compression failed";try{De=(await H.json()).error||De}catch{}throw new Error(De)}const Z=await H.blob(),ye=Z.size,qe=(n(s).size/(1024*1024)).toFixed(1),Be=(ye/(1024*1024)).toFixed(1),Fe=Math.round((1-ye/n(s).size)*100);d(k,`${qe} MB`),d($,`${Be} MB`),d(O,`${Fe}%`),d(w,!0);const Re=n(s).name.lastIndexOf("."),Tt=Re>0?n(s).name.slice(0,Re):n(s).name;$r(Z,`${Tt}_compressed.mp4`),ce("Compression complete!","success"),ue.updateItem(C,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>ue.remove(C),5e3)}catch(H){ce(H.message||"Compression failed","error"),ue.updateItem(C,{stage:"error",status:H.message||"compression failed"}),ie&&ie.close()}finally{d(l,!1),d(v,0),d(g,""),d(S,""),V&&Wn(V)}}var Te=Qc(),ae=Ce(Te);Zs(ae,{extraContent:E=>{xn(E,{})}});var K=h(ae,2),se=h(f(K),2),we=f(se);{var P=j=>{var E=Uc();let C;E.__click=()=>ve==null?void 0:ve.click();var X=h(f(E),6);X.__change=V=>{var ie;M((ie=V.target.files)==null?void 0:ie[0]),V.target.value=""},Ks(X,V=>ve=V,()=>ve),J(()=>C=he(E,1,"drop-zone svelte-15o2uhu",null,C,{dragover:n(ge)})),ut("dragover",E,V=>{V.preventDefault(),d(ge,!0)}),ut("dragleave",E,V=>{V.preventDefault(),d(ge,!1)}),ut("drop",E,V=>{var ie,H;V.preventDefault(),d(ge,!1),M((H=(ie=V.dataTransfer)==null?void 0:ie.files)==null?void 0:H[0])}),y(j,E)},F=j=>{var E=Vc(),C=f(E),X=h(f(C),2),V=f(X),ie=f(V),H=h(V,2),Z=f(H),ye=h(X,2);ye.__click=q;var qe=h(C,2),Be=f(qe),Fe=f(Be),Re=h(Be,2),Tt=f(Re);J(De=>{ts(V,"title",n(s).name),B(ie,n(s).name),B(Z,De),B(Fe,`duration: ${(n(r)?n(G):"unknown")??""}`),B(Tt,`resolution: ${n(Q)??""}`)},[()=>Pr(n(s).size)]),y(j,E)};A(we,j=>{n(s)?j(F,!1):j(P)})}var ne=h(we,2),re=h(f(ne),4);We(re,21,()=>$e,rt,(j,E)=>{var C=Hc();let X;C.__click=()=>W(n(E));var V=f(C),ie=f(V),H=h(V,2),Z=f(H);J(()=>{X=he(C,1,"size-option svelte-15o2uhu",null,X,{active:!n(p)&&n(o)===n(E).size}),B(ie,n(E).size),B(Z,n(E).label)}),y(j,C)});var pe=h(re,2),_e=f(pe);_e.__input=j=>Y(j.target.value);var Ae=h(pe,2),He=h(f(Ae),2);let Je;var at=f(He),Xe=h(ne,2),it=h(f(Xe),4);We(it,21,()=>ze,rt,(j,E)=>{var C=Jc();let X;C.__click=()=>d(m,n(E).id,!0);var V=f(C),ie=f(V),H=h(V,2),Z=f(H);J(()=>{X=he(C,1,"size-option svelte-15o2uhu",null,X,{active:n(m)===n(E).id}),B(ie,n(E).label),B(Z,n(E).sublabel)}),y(j,C)});var Ht=h(it,2),R=f(Ht),N=h(Xe,2);N.__click=Pe;var L=h(f(N)),oe=h(N,2);{var le=j=>{var E=Wc(),C=f(E),X=f(C),V=f(X),ie=h(X,2),H=f(ie),Z=h(C,2);qr(Z,{get percent(){return n(v)}});var ye=h(Z,2),qe=f(ye);J(Be=>{B(V,n(g)),B(H,`${Be??""}%`),B(qe,n(S))},[()=>Math.round(n(v))]),y(j,E)};A(oe,j=>{n(l)&&j(le)})}var Ee=h(oe,2);{var T=j=>{var E=Gc(),C=h(f(E),2),X=f(C),V=f(X),ie=f(V),H=h(X,4),Z=f(H),ye=f(Z),qe=h(H,2),Be=f(qe),Fe=f(Be),Re=h(C,2);Re.__click=q,J(()=>{B(ie,n(k)),B(ye,n($)),B(Fe,n(O))}),y(j,E)};A(Ee,j=>{n(w)&&j(T)})}var x=h(K,2);{var D=j=>{var E=Yc();E.__click=De=>{De.target===De.currentTarget&&d(ee,!1)};var C=f(E),X=h(f(C),2),V=h(f(X),4),ie=h(V,4),H=f(ie),Z=f(H),ye=h(X,2),qe=h(f(ye)),Be=f(qe),Fe=h(ye,2),Re=f(Fe);Re.__click=()=>d(ee,!1);var Tt=h(Re,2);Tt.__click=te,J(()=>{kn(V,`transform: translateX(-50%) rotate(${n(Ke)??""}deg);`),B(Z,n(xe)),B(Be,n(G))}),y(j,E)};A(x,j=>{n(ee)&&j(D)})}var U=h(x,2);Sn(U),J(()=>{si(_e,n(u)),Je=he(He,1,"estimate-value svelte-15o2uhu",null,Je,{"estimate-warning":n(Qe)}),B(at,n(Oe)),N.disabled=!n(s)||n(l),B(L,` ${n(l)?"compressing...":"compress video"}`)}),ut("blur",_e,de),ri(R,()=>n(_),j=>d(_,j)),y(e,Te),wt()}Vt(["click","change","input"]);var Xc=z('<button type="button"><svg class="drop-zone-icon svelte-am61ph" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-am61ph">drop a video or audio file here</p> <p class="drop-zone-hint svelte-am61ph">supports mp4, webm, mov, mkv, mp3, wav, flac, m4a (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>'),Zc=Ne('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),eu=Ne('<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line>',1),tu=z('<div class="file-info svelte-am61ph"><div class="file-header svelte-am61ph"><div class="file-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><!></svg></div> <div class="file-details svelte-am61ph"><div class="file-name svelte-am61ph"> </div> <div class="file-size svelte-am61ph"> </div></div> <button class="file-remove svelte-am61ph" aria-label="Remove file"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-am61ph"><span> </span></div></div>'),su=z('<button><div class="mode-option-value svelte-am61ph"> </div> <div class="mode-option-label svelte-am61ph"> </div></button>'),nu=z('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">subtitle format</div> <div class="format-row svelte-am61ph"><button>SRT</button> <button>ASS</button></div></div>'),ru=z('<button><div class="mode-option-value svelte-am61ph"> </div> <div class="mode-option-label svelte-am61ph"> </div></button>'),au=z('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">model</div> <div class="section-description svelte-am61ph">larger models are more accurate but slower</div> <div class="model-grid svelte-am61ph"></div></div> <div class="section svelte-am61ph"><div class="section-label svelte-am61ph">language hint</div> <div class="section-description svelte-am61ph">optional, auto-detected if empty (e.g. en, es, ja, fr)</div> <input type="text" class="language-input svelte-am61ph" placeholder="auto-detect" maxlength="5"/></div>',1),iu=z('<div class="progress-container svelte-am61ph"><div class="progress-header svelte-am61ph"><span class="progress-status svelte-am61ph"> </span> <span class="progress-percent svelte-am61ph"> </span></div> <!> <div class="progress-details svelte-am61ph"> </div></div>'),ou=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg> copied!',1),lu=Ne('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> copy text',1),cu=z('<div class="result-container svelte-am61ph"><div class="result-header svelte-am61ph"><div class="result-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-am61ph">transcription complete!</div></div> <div class="transcript-box svelte-am61ph"><pre class="transcript-text svelte-am61ph"> </pre></div> <div class="result-actions svelte-am61ph"><button class="result-btn copy-btn svelte-am61ph"><!></button> <button class="result-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> transcribe another</button></div></div>'),uu=z('<div class="result-container svelte-am61ph"><div class="result-header svelte-am61ph"><div class="result-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-am61ph"> </div></div> <button class="result-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> transcribe another</button></div>'),vu=z('<!> <main class="svelte-am61ph"><div class="page-header svelte-am61ph"><h1 class="svelte-am61ph">transcribe</h1> <p class="svelte-am61ph">get subtitles, captions, or a text transcript from any video or audio</p></div> <div class="transcribe-container svelte-am61ph"><!> <div class="section svelte-am61ph"><div class="section-label svelte-am61ph">output mode</div> <div class="section-description svelte-am61ph">choose what you want back</div> <div class="mode-grid svelte-am61ph"></div></div> <!> <button class="advanced-toggle svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg> advanced options</button> <!> <div class="estimate-row svelte-am61ph"><span class="estimate-label svelte-am61ph">estimated time</span> <span> </span></div> <button class="transcribe-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </button> <!> <!></div></main> <!>',1);function du(e,t){mt(t,!0);let s=I(null),r=I(0),i=I("text"),a=I("base"),o=I("srt"),c=I(""),u=I(!1),p=I(!1),m=I(0),_=I(""),l=I(""),v=I(!1),g=I(""),S=I(!1),w=I(!1),k;const $=[{id:"text",label:"text",sublabel:"plain transcript"},{id:"subtitles",label:"subtitles",sublabel:"SRT / ASS file"},{id:"captions",label:"captions",sublabel:"burned into video"}],O=[{id:"tiny",label:"tiny",sublabel:"fastest, less accurate"},{id:"base",label:"base",sublabel:"recommended"},{id:"small",label:"small",sublabel:"slower, more accurate"},{id:"medium",label:"medium",sublabel:"slowest, best quality"}],ge={tiny:.17,base:.33,small:1,medium:3.3};let ee=je(()=>{if(!n(s)||!n(r))return"select a file to see estimate";const R=n(r)/60,N=ge[n(a)],L=Math.ceil(R*N);return L<1?"less than a minute":L===1?"~1 minute":`~${L} minutes`}),ve=je(()=>n(s)&&n(r)&&Math.ceil(n(r)/60*ge[n(a)])>30),$e=je(()=>{if(!n(r))return"--:--";const R=Math.floor(n(r)/60),N=Math.floor(n(r)%60);return`${R}:${N.toString().padStart(2,"0")}`});function ze(R){return new Promise(N=>{const L=R.type.startsWith("video/")?document.createElement("video"):document.createElement("audio");L.preload="metadata",L.onloadedmetadata=()=>{URL.revokeObjectURL(L.src),N(L.duration||0)},L.onerror=()=>{URL.revokeObjectURL(L.src),N(0)},L.src=URL.createObjectURL(R)})}async function xe(R){if(!R)return;if(!(R.type.startsWith("video/")||R.type.startsWith("audio/"))){ce("Please select a video or audio file","error");return}const L=8*1024*1024*1024;if(R.size>L){ce("File too large. Maximum size is 8GB.","error");return}d(s,R,!0),d(v,!1),d(g,""),d(r,await ze(R),!0)}function Oe(){d(s,null),d(r,0),d(m,0),d(_,""),d(l,""),d(v,!1),d(g,""),d(S,!1),k&&(k.value="")}async function Qe(){try{await navigator.clipboard.writeText(n(g)),d(S,!0),ce("Copied to clipboard!","success"),setTimeout(()=>{d(S,!1)},2e3)}catch{ce("Failed to copy","error")}}async function Ke(){if(!n(s)||n(p))return;n(ve)&&ce("This may take over 30 minutes. Consider using a faster model.","warning"),d(p,!0),d(m,0),d(_,"uploading..."),d(l,"sending file to server..."),d(v,!1),d(g,"");const R=Date.now().toString()+Math.random().toString(36).slice(2,11);ue.add({id:R,title:`${n(s).name} â ${n(i)}`,type:"transcribe",stage:"uploading",status:"uploading...",progress:0,startTime:Date.now()});const N=n(s).size>90*1024*1024;let L=null;try{L=Jn();let oe;if(N){d(_,"uploading..."),d(l,"large file detected, uploading in chunks...");const x=await Ir(n(s),C=>{d(m,C,!0),d(l,"uploading chunks..."),ue.updateItem(R,{progress:C,status:"uploading..."})}),{filePath:D,fileName:U}=x;d(m,0),d(_,"transcribing..."),d(l,"starting transcription..."),ue.updateItem(R,{stage:"transcribing",status:"transcribing...",progress:0});const j=await fetch(`${Me()}/api/transcribe-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:D,fileName:U,outputMode:n(i),model:n(a),subtitleFormat:n(o),language:n(c)||void 0})});if(!j.ok){let C="Failed to start transcription";try{C=(await j.json()).error||C}catch{}throw new Error(C)}oe=(await j.json()).jobId}else{const x=new FormData;x.append("file",n(s)),x.append("outputMode",n(i)),x.append("model",n(a)),x.append("subtitleFormat",n(o)),n(c)&&x.append("language",n(c));const D=await fetch(`${Me()}/api/transcribe`,{method:"POST",body:x});if(!D.ok){let j="Failed to start transcription";try{j=(await D.json()).error||j}catch{}throw new Error(j)}oe=(await D.json()).jobId}d(_,"transcribing..."),d(l,"starting transcription..."),ue.updateItem(R,{stage:"transcribing",status:"transcribing...",progress:0});const le=Date.now(),Ee=3600*1e3;let T=0;for(;Date.now()-le<=Ee;){await new Promise(x=>setTimeout(x,2e3));try{const x=new AbortController,D=setTimeout(()=>x.abort(),1e4);let U;try{U=await fetch(`${Me()}/api/job/${oe}/status`,{signal:x.signal})}finally{clearTimeout(D)}if(!U.ok)throw new Error(`Server returned ${U.status}`);const j=await U.json();if(T=0,j.status==="error")throw new Error(j.error||"Transcription failed");if(j.progress!==void 0&&d(m,j.progress,!0),j.message&&(d(l,j.message,!0),d(_,"transcribing...")),ue.updateItem(R,{progress:j.progress||0,status:j.message||"transcribing..."}),j.status==="complete"){j.textContent&&d(g,j.textContent,!0);break}}catch(x){if(T++,T>=5)throw new Error(`Failed to check job status after 5 attempts: ${x.message}`)}}if(Date.now()-le>Ee)throw new Error("Job timed out after 60 minutes.");if(n(i)==="text"){if(!n(g)){const x=await fetch(`${Me()}/api/job/${oe}/download`);if(!x.ok)throw new Error("Failed to download transcript");d(g,await x.text(),!0)}d(v,!0),ce("Transcription complete!","success")}else{const x=await fetch(`${Me()}/api/job/${oe}/download`);if(!x.ok)throw new Error("Failed to download result");const D=await x.blob(),j=(x.headers.get("content-disposition")||"").match(/filename="([^"]+)"/),E=j?j[1]:n(i)==="captions"?"captioned.mp4":`subtitles.${n(o)}`;$r(D,E),d(v,!0),ce("Transcription complete!","success")}ue.updateItem(R,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>ue.remove(R),5e3)}catch(oe){ce(oe.message||"Transcription failed","error"),ue.updateItem(R,{stage:"error",status:oe.message||"transcription failed"})}finally{d(p,!1),d(m,0),d(_,""),d(l,""),L&&Wn(L)}}var G=vu(),Q=Ce(G);Zs(Q,{extraContent:N=>{xn(N,{})}});var me=h(Q,2),M=h(f(me),2),q=f(M);{var W=R=>{var N=Xc();let L;N.__click=()=>k==null?void 0:k.click();var oe=h(f(N),6);oe.__change=le=>{var Ee;xe((Ee=le.target.files)==null?void 0:Ee[0]),le.target.value=""},Ks(oe,le=>k=le,()=>k),J(()=>L=he(N,1,"drop-zone svelte-am61ph",null,L,{dragover:n(w)})),ut("dragover",N,le=>{le.preventDefault(),d(w,!0)}),ut("dragleave",N,le=>{le.preventDefault(),d(w,!1)}),ut("drop",N,le=>{var Ee,T;le.preventDefault(),d(w,!1),xe((T=(Ee=le.dataTransfer)==null?void 0:Ee.files)==null?void 0:T[0])}),y(R,N)},Y=R=>{var N=tu(),L=f(N),oe=f(L),le=f(oe),Ee=f(le);{var T=Z=>{var ye=Zc();y(Z,ye)},x=Z=>{var ye=eu();y(Z,ye)};A(Ee,Z=>{n(s).type.startsWith("audio/")?Z(T):Z(x,!1)})}var D=h(oe,2),U=f(D),j=f(U),E=h(U,2),C=f(E),X=h(D,2);X.__click=Oe;var V=h(L,2),ie=f(V),H=f(ie);J(Z=>{ts(U,"title",n(s).name),B(j,n(s).name),B(C,Z),B(H,`duration: ${(n(r)?n($e):"unknown")??""}`)},[()=>Pr(n(s).size)]),y(R,N)};A(q,R=>{n(s)?R(Y,!1):R(W)})}var de=h(q,2),Pe=h(f(de),4);We(Pe,21,()=>$,rt,(R,N)=>{var L=su();let oe;L.__click=()=>d(i,n(N).id,!0);var le=f(L),Ee=f(le),T=h(le,2),x=f(T);J(()=>{oe=he(L,1,"mode-option svelte-am61ph",null,oe,{active:n(i)===n(N).id}),B(Ee,n(N).label),B(x,n(N).sublabel)}),y(R,L)});var te=h(de,2);{var Te=R=>{var N=nu(),L=h(f(N),2),oe=f(L);let le;oe.__click=()=>d(o,"srt");var Ee=h(oe,2);let T;Ee.__click=()=>d(o,"ass"),J(()=>{le=he(oe,1,"format-btn svelte-am61ph",null,le,{active:n(o)==="srt"}),T=he(Ee,1,"format-btn svelte-am61ph",null,T,{active:n(o)==="ass"})}),y(R,N)};A(te,R=>{n(i)==="subtitles"&&R(Te)})}var ae=h(te,2);ae.__click=()=>d(u,!n(u));var K=f(ae);let se;var we=h(ae,2);{var P=R=>{var N=au(),L=Ce(N),oe=h(f(L),4);We(oe,21,()=>O,rt,(T,x)=>{var D=ru();let U;D.__click=()=>d(a,n(x).id,!0);var j=f(D),E=f(j),C=h(j,2),X=f(C);J(()=>{U=he(D,1,"mode-option svelte-am61ph",null,U,{active:n(a)===n(x).id}),B(E,n(x).label),B(X,n(x).sublabel)}),y(T,D)});var le=h(L,2),Ee=h(f(le),4);Ee.__input=T=>d(c,T.target.value.trim(),!0),J(()=>si(Ee,n(c))),y(R,N)};A(we,R=>{n(u)&&R(P)})}var F=h(we,2),ne=h(f(F),2);let re;var pe=f(ne),_e=h(F,2);_e.__click=Ke;var Ae=h(f(_e)),He=h(_e,2);{var Je=R=>{var N=iu(),L=f(N),oe=f(L),le=f(oe),Ee=h(oe,2),T=f(Ee),x=h(L,2);qr(x,{get percent(){return n(m)}});var D=h(x,2),U=f(D);J(j=>{B(le,n(_)),B(T,`${j??""}%`),B(U,n(l))},[()=>Math.round(n(m))]),y(R,N)};A(He,R=>{n(p)&&R(Je)})}var at=h(He,2);{var Xe=R=>{var N=cu(),L=h(f(N),2),oe=f(L),le=f(oe),Ee=h(L,2),T=f(Ee);T.__click=Qe;var x=f(T);{var D=E=>{var C=ou();y(E,C)},U=E=>{var C=lu();y(E,C)};A(x,E=>{n(S)?E(D):E(U,!1)})}var j=h(T,2);j.__click=Oe,J(()=>B(le,n(g))),y(R,N)},it=R=>{var N=Le(),L=Ce(N);{var oe=le=>{var Ee=uu(),T=f(Ee),x=h(f(T),2),D=f(x),U=h(T,2);U.__click=Oe,J(()=>B(D,n(i)==="captions"?"captions burned in!":"subtitles ready!")),y(le,Ee)};A(L,le=>{n(v)&&le(oe)},!0)}y(R,N)};A(at,R=>{n(v)&&n(i)==="text"?R(Xe):R(it,!1)})}var Ht=h(me,2);Sn(Ht),J(()=>{se=he(K,0,"svelte-am61ph",null,se,{rotated:n(u)}),re=he(ne,1,"estimate-value svelte-am61ph",null,re,{"estimate-warning":n(ve)}),B(pe,n(ee)),_e.disabled=!n(s)||n(p),B(Ae,` ${n(p)?"transcribing...":"transcribe"}`)}),y(e,G),wt()}Vt(["click","change","input"]);var fu=z(`<!> <main class="svelte-13tj7i"><div class="page-header svelte-13tj7i"><h1 class="svelte-13tj7i">privacy policy</h1> <p class="svelte-13tj7i">no legal jargon, just the truth</p></div> <div class="tldr-box svelte-13tj7i"><h3 class="svelte-13tj7i">tl;dr</h3> <p class="svelte-13tj7i">yoink doesn't collect anything. no tracking, no cookies, no analytics. your files are stored on an encrypted volume with a key that only exists in RAM, and get wiped automatically.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">who runs this</h2> <p class="svelte-13tj7i">just me, one person. i made yoink because i wanted a simple tool that does what it says without being weird about your data. i was inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-13tj7i">cobalt.tools</a> and <a href="https://vert.sh" target="_blank" rel="noopener" class="svelte-13tj7i">vert.sh</a>, and wanted to combine the best parts into one site.</p> <p class="svelte-13tj7i">im not a company, i have no investors, and i have no reason to collect your data.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">your files</h2> <p class="svelte-13tj7i">files are stored on a LUKS2 encrypted volume on the server. the encryption key is randomly generated at every boot, stored only in RAM, never written to disk, so if the server ever powers off the key is gone and the data is just unrecoverable.</p> <p class="svelte-13tj7i">once your download or conversion is done, the file gets deleted immediately from that encrypted volume. there's also a cleanup job that runs every 5 minutes and wipes anything older than 20 minutes no matter what, just in case something slips through.</p> <p class="svelte-13tj7i">we don't log what you download, what you convert, what you compress, or any filenames or URLs. none of that gets saved anywhere.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">what we collect</h2> <p class="svelte-13tj7i">nothing. literally zero.</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">no analytics</strong> - no tracking scripts, no usage stats, nothing</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no cookies</strong> - we don't set a single cookie</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no IP logging</strong> - your IP isn't stored or logged</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no content logging</strong> - URLs, filenames, and what you do here are not recorded</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no accounts</strong> - there's nothing to sign up for, no emails collected</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no third party stuff</strong> - no google analytics, no facebook pixel, no ad networks</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">encryption</h2> <p class="svelte-13tj7i">two layers:</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">in transit</strong>: everything goes through HTTPS, so your connection to yoink is encrypted end to end, nobody between you and the server can see what you're doing.</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">at rest</strong>: all temporary files go on a LUKS2 encrypted volume (AES-256). the decryption key is generated fresh at every server boot using /dev/urandom, kept only in RAM, never written anywhere. no way to recover files after a reboot, and no way to read them without the key that only exists in memory.</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">open source</h2> <p class="svelte-13tj7i">the whole thing is on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>. you can read every line of code yourself if you want to verify any of this. if you find something off, please tell me.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">contact</h2> <p class="svelte-13tj7i">questions, concerns, or just want to say hi, reach me at <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-13tj7i">coah80.com</a> or open an issue on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">changes</h2> <p class="svelte-13tj7i">if this policy changes, it gets updated here. no sneaky edits. last updated: <strong class="svelte-13tj7i">february 23, 2026</strong>.</p></div></main> <!>`,1);function pu(e){var t=fu(),s=Ce(t);Zs(s,{});var r=h(s,4);Sn(r),y(e,t)}var hu=z('<div class="spinner-wrap svelte-121vd2i"><!></div> <h1 class="svelte-121vd2i">downloading...</h1> <p class="svelte-121vd2i">your download should start automatically</p>',1),gu=z('<h1 class="success svelte-121vd2i">done</h1> <p class="svelte-121vd2i">download started successfully</p>',1),mu=z('<h1 class="error svelte-121vd2i">download failed</h1> <p class="svelte-121vd2i">this file is no longer available</p>',1),wu=z('<main class="svelte-121vd2i"><div class="download-container svelte-121vd2i"><!> <div> </div></div></main>');function _u(e,t){mt(t,!0);const s=()=>Ot(Ao,"$query",r),[r,i]=ns();let a=I("loading"),o=I("preparing download..."),c=je(()=>s().token||"");Vn(()=>{const w=window.location.pathname.replace("/download","").replace(/^\//,""),k=n(c)||w;if(!k){d(a,"error"),d(o,"no download token provided");return}const $=`${Me()}/api/bot/download/${k}`;d(o,"starting download..."),fetch($,{method:"HEAD"}).then(O=>{if(O.ok)d(o,"download started"),window.location.href=$,setTimeout(()=>{d(a,"success"),d(o,"you can close this page now")},2e3);else throw new Error("Download not available")}).catch(()=>{d(a,"error"),d(o,"the download link has expired (5 minute limit)")})});var u=wu(),p=f(u),m=f(p);{var _=w=>{var k=hu(),$=Ce(k),O=f($);vi(O),y(w,k)},l=w=>{var k=Le(),$=Ce(k);{var O=ee=>{var ve=gu();y(ee,ve)},ge=ee=>{var ve=mu();y(ee,ve)};A($,ee=>{n(a)==="success"?ee(O):ee(ge,!1)},!0)}y(w,k)};A(m,w=>{n(a)==="loading"?w(_):w(l,!1)})}var v=h(m,2);let g;var S=f(v);J(()=>{g=he(v,1,"status svelte-121vd2i",null,g,{error:n(a)==="error",success:n(a)==="success"}),B(S,n(o))}),y(e,u),wt(),i()}var yu=z('<main class="svelte-zxc657"><p>Redirecting...</p></main>');function bu(e,t){mt(t,!1),Vn(()=>{const r=new URLSearchParams(window.location.search),a=(r.get("url")||r.get("text")||"").match(/https?:\/\/[^\s]+/);let o=a?a[0]:"";if(o=o.replace(/[.,!?;:)\]}>]+$/,""),o)try{const c=new URL(o);(c.protocol==="http:"||c.protocol==="https:")&&localStorage.setItem("yoink_shared_url",JSON.stringify({url:o,timestamp:Date.now()}))}catch{}ii("/")}),$o();var s=yu();y(e,s),wt()}var ku=z(`<!> <main class="svelte-kbj945"><div class="not-found svelte-kbj945"><h1 class="svelte-kbj945">404</h1> <p class="svelte-kbj945">this page doesn't exist</p> <a href="/" class="back-link svelte-kbj945">go back home</a></div></main>`,1);function xu(e){var t=ku(),s=Ce(t);Zs(s,{}),y(e,t)}var Su=z("<!> <!> <!>",1);function ju(e,t){mt(t,!0);const s=()=>Ot(Mr,"$path",r),[r,i]=ns(),a={"/":uc,"/settings":$c,"/convert":Lc,"/compress":Kc,"/transcribe":du,"/privacy":pu,"/download":_u,"/share":bu};let o=je(s),c=je(()=>a[n(o)]||xu);function u(v){const g=v.target.closest("a");if(!g)return;const S=g.getAttribute("href");!S||!S.startsWith("/")||g.target==="_blank"||(v.preventDefault(),ii(S))}Vn(()=>{Qo(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(ue.reconnectOnResume(),Ko())})});var p=Su();ut("click",On.body,u);var m=Ce(p);jo(m,()=>n(c),(v,g)=>{g(v,{})});var _=h(m,2);Rl(_,{});var l=h(_,2);Vo(l),y(e,p),wt(),i()}_o(ju,{target:document.getElementById("app")});
