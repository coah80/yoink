var Ii=Object.defineProperty;var Xn=e=>{throw TypeError(e)};var Bi=(e,t,s)=>t in e?Ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Wt=(e,t,s)=>Bi(e,typeof t!="symbol"?t+"":t,s),cn=(e,t,s)=>t.has(e)||Xn("Cannot "+s);var x=(e,t,s)=>(cn(e,t,"read from private field"),s?s.call(e):t.get(e)),Me=(e,t,s)=>t.has(e)?Xn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),ze=(e,t,s,n)=>(cn(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),dt=(e,t,s)=>(cn(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();const hn=!1;var ba=Array.isArray,Ri=Array.prototype.indexOf,er=Array.prototype.includes,Gr=Array.from,ka=Object.defineProperty,_r=Object.getOwnPropertyDescriptor,xa=Object.getOwnPropertyDescriptors,Di=Object.prototype,Ai=Array.prototype,qn=Object.getPrototypeOf,Zn=Object.isExtensible;const ps=()=>{};function Fi(e){return e()}function Ur(e){for(var t=0;t<e.length;t++)e[t]()}function Sa(){var e,t,s=new Promise((n,i)=>{e=n,t=i});return{promise:s,resolve:e,reject:t}}const lt=2,Vr=4,Er=8,ja=1<<24,vs=16,Jt=32,As=64,$n=128,Bt=512,st=1024,ct=2048,Ht=4096,zt=8192,hs=16384,In=32768,ys=65536,ea=1<<17,Ca=1<<18,nr=1<<19,Ta=1<<20,ls=1<<25,Is=32768,gn=1<<21,Bn=1<<22,gs=1<<23,Js=Symbol("$state"),Ni=Symbol(""),Vs=new class extends Error{constructor(){super(...arguments);Wt(this,"name","StaleReactionError");Wt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Oi(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Li(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ui(e,t,s){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Vi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Hi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ji(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Wi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Gi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Yi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ki(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Xi=1,Zi=2,za=4,eo=8,to=16,Ea=1,so=2,it=Symbol(),ro="http://www.w3.org/1999/xhtml";function no(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ma(e){return e===this.v}function Pa(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function qa(e){return!Pa(e,this.v)}let Mr=!1,ao=!1;function io(){Mr=!0}let Ze=null;function tr(e){Ze=e}function gt(e,t=!1,s){Ze={p:Ze,i:!1,c:null,e:null,s:e,x:null,l:Mr&&!t?{s:null,u:null,$:[]}:null}}function mt(e){var t=Ze,s=t.e;if(s!==null){t.e=null;for(var n of s)ei(n)}return t.i=!0,Ze=t.p,{}}function Pr(){return!Mr||Ze!==null&&Ze.l===null}let ks=[];function $a(){var e=ks;ks=[],Ur(e)}function cs(e){if(ks.length===0&&!wr){var t=ks;queueMicrotask(()=>{t===ks&&$a()})}ks.push(e)}function oo(){for(;ks.length>0;)$a()}function Ia(e){var t=Ne;if(t===null)return Ie.f|=gs,e;if((t.f&In)===0){if((t.f&$n)===0)throw e;t.b.error(e)}else sr(e,t)}function sr(e,t){for(;t!==null;){if((t.f&$n)!==0)try{t.b.error(e);return}catch(s){e=s}t=t.parent}throw e}const lo=-7169;function Xe(e,t){e.f=e.f&lo|t}function Rn(e){(e.f&Bt)!==0||e.deps===null?Xe(e,st):Xe(e,Ht)}function Ba(e){if(e!==null)for(const t of e)(t.f&lt)===0||(t.f&Is)===0||(t.f^=Is,Ba(t.deps))}function Ra(e,t,s){(e.f&ct)!==0?t.add(e):(e.f&Ht)!==0&&s.add(e),Ba(e.deps),Xe(e,st)}const Fr=new Set;let Pe=null,mn=null,ot=null,wt=[],Yr=null,_n=!1,wr=!1;var Ws,Gs,Ss,Ys,jr,Cr,js,ns,Qs,ts,wn,yn,Da;const Gn=class Gn{constructor(){Me(this,ts);Wt(this,"committed",!1);Wt(this,"current",new Map);Wt(this,"previous",new Map);Me(this,Ws,new Set);Me(this,Gs,new Set);Me(this,Ss,0);Me(this,Ys,0);Me(this,jr,null);Me(this,Cr,new Set);Me(this,js,new Set);Me(this,ns,new Map);Wt(this,"is_fork",!1);Me(this,Qs,!1)}is_deferred(){return this.is_fork||x(this,Ys)>0}skip_effect(t){x(this,ns).has(t)||x(this,ns).set(t,{d:[],m:[]})}unskip_effect(t){var s=x(this,ns).get(t);if(s){x(this,ns).delete(t);for(var n of s.d)Xe(n,ct),Ut(n);for(n of s.m)Xe(n,Ht),Ut(n)}}process(t){var i;wt=[],this.apply();var s=[],n=[];for(const a of t)dt(this,ts,wn).call(this,a,s,n);if(this.is_deferred()){dt(this,ts,yn).call(this,n),dt(this,ts,yn).call(this,s);for(const[a,o]of x(this,ns))Oa(a,o)}else{for(const a of x(this,Ws))a();x(this,Ws).clear(),x(this,Ss)===0&&dt(this,ts,Da).call(this),mn=this,Pe=null,ta(n),ta(s),mn=null,(i=x(this,jr))==null||i.resolve()}ot=null}capture(t,s){s!==it&&!this.previous.has(t)&&this.previous.set(t,s),(t.f&gs)===0&&(this.current.set(t,t.v),ot==null||ot.set(t,t.v))}activate(){Pe=this,this.apply()}deactivate(){Pe===this&&(Pe=null,ot=null)}flush(){if(this.activate(),wt.length>0){if(Aa(),Pe!==null&&Pe!==this)return}else x(this,Ss)===0&&this.process([]);this.deactivate()}discard(){for(const t of x(this,Gs))t(this);x(this,Gs).clear()}increment(t){ze(this,Ss,x(this,Ss)+1),t&&ze(this,Ys,x(this,Ys)+1)}decrement(t){ze(this,Ss,x(this,Ss)-1),t&&ze(this,Ys,x(this,Ys)-1),!x(this,Qs)&&(ze(this,Qs,!0),cs(()=>{ze(this,Qs,!1),this.is_deferred()?wt.length>0&&this.flush():this.revive()}))}revive(){for(const t of x(this,Cr))x(this,js).delete(t),Xe(t,ct),Ut(t);for(const t of x(this,js))Xe(t,Ht),Ut(t);this.flush()}oncommit(t){x(this,Ws).add(t)}ondiscard(t){x(this,Gs).add(t)}settled(){return(x(this,jr)??ze(this,jr,Sa())).promise}static ensure(){if(Pe===null){const t=Pe=new Gn;Fr.add(Pe),wr||cs(()=>{Pe===t&&t.flush()})}return Pe}apply(){}};Ws=new WeakMap,Gs=new WeakMap,Ss=new WeakMap,Ys=new WeakMap,jr=new WeakMap,Cr=new WeakMap,js=new WeakMap,ns=new WeakMap,Qs=new WeakMap,ts=new WeakSet,wn=function(t,s,n){t.f^=st;for(var i=t.first,a=null;i!==null;){var o=i.f,l=(o&(Jt|As))!==0,c=l&&(o&st)!==0,h=c||(o&zt)!==0||x(this,ns).has(i);if(!h&&i.fn!==null){l?i.f^=st:a!==null&&(o&(Vr|Er|ja))!==0?a.b.defer_effect(i):(o&Vr)!==0?s.push(i):Ir(i)&&((o&vs)!==0&&x(this,js).add(i),kr(i));var _=i.first;if(_!==null){i=_;continue}}var j=i.parent;for(i=i.next;i===null&&j!==null;)j===a&&(a=null),i=j.next,j=j.parent}},yn=function(t){for(var s=0;s<t.length;s+=1)Ra(t[s],x(this,Cr),x(this,js))},Da=function(){var i;if(Fr.size>1){this.previous.clear();var t=ot,s=!0;for(const a of Fr){if(a===this){s=!1;continue}const o=[];for(const[c,h]of this.current){if(a.current.has(c))if(s&&h!==a.current.get(c))a.current.set(c,h);else continue;o.push(c)}if(o.length===0)continue;const l=[...a.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){var n=wt;wt=[];const c=new Set,h=new Map;for(const _ of o)Fa(_,l,c,h);if(wt.length>0){Pe=a,a.apply();for(const _ of wt)dt(i=a,ts,wn).call(i,_,[],[]);a.deactivate()}wt=n}}Pe=null,ot=t}this.committed=!0,Fr.delete(this)};let ms=Gn;function co(e){var t=wr;wr=!0;try{for(var s;;){if(oo(),wt.length===0&&(Pe==null||Pe.flush(),wt.length===0))return Yr=null,s;Aa()}}finally{wr=t}}function Aa(){_n=!0;var e=null;try{for(var t=0;wt.length>0;){var s=ms.ensure();if(t++>1e3){var n,i;vo()}s.process(wt),_s.clear()}}finally{wt=[],_n=!1,Yr=null}}function vo(){try{Wi()}catch(e){sr(e,Yr)}}let Ot=null;function ta(e){var t=e.length;if(t!==0){for(var s=0;s<t;){var n=e[s++];if((n.f&(hs|zt))===0&&Ir(n)&&(Ot=new Set,kr(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?ri(n):n.fn=null),(Ot==null?void 0:Ot.size)>0)){_s.clear();for(const i of Ot){if((i.f&(hs|zt))!==0)continue;const a=[i];let o=i.parent;for(;o!==null;)Ot.has(o)&&(Ot.delete(o),a.push(o)),o=o.parent;for(let l=a.length-1;l>=0;l--){const c=a[l];(c.f&(hs|zt))===0&&kr(c)}}Ot.clear()}}Ot=null}}function Fa(e,t,s,n){if(!s.has(e)&&(s.add(e),e.reactions!==null))for(const i of e.reactions){const a=i.f;(a&lt)!==0?Fa(i,t,s,n):(a&(Bn|vs))!==0&&(a&ct)===0&&Na(i,t,n)&&(Xe(i,ct),Ut(i))}}function Na(e,t,s){const n=s.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const i of e.deps){if(er.call(t,i))return!0;if((i.f&lt)!==0&&Na(i,t,s))return s.set(i,!0),!0}return s.set(e,!1),!1}function Ut(e){for(var t=Yr=e;t.parent!==null;){t=t.parent;var s=t.f;if(_n&&t===Ne&&(s&vs)!==0&&(s&Ca)===0)return;if((s&(As|Jt))!==0){if((s&st)===0)return;t.f^=st}}wt.push(t)}function Oa(e,t){if(!((e.f&Jt)!==0&&(e.f&st)!==0)){(e.f&ct)!==0?t.d.push(e):(e.f&Ht)!==0&&t.m.push(e),Xe(e,st);for(var s=e.first;s!==null;)Oa(s,t),s=s.next}}function uo(e){let t=0,s=Bs(0),n;return()=>{An()&&(r(s),Xr(()=>(t===0&&(n=Fs(()=>e(()=>yr(s)))),t+=1,()=>{cs(()=>{t-=1,t===0&&(n==null||n(),n=void 0,yr(s))})})))}}var fo=ys|nr|$n;function po(e,t,s){new ho(e,t,s)}var qt,Pn,Gt,Cs,Yt,$t,_t,Qt,as,ds,Ts,fs,Ks,zs,Xs,Zs,is,Jr,rt,go,mo,bn,Nr,Or,kn;class ho{constructor(t,s,n){Me(this,rt);Wt(this,"parent");Wt(this,"is_pending",!1);Me(this,qt);Me(this,Pn,null);Me(this,Gt);Me(this,Cs);Me(this,Yt);Me(this,$t,null);Me(this,_t,null);Me(this,Qt,null);Me(this,as,null);Me(this,ds,null);Me(this,Ts,0);Me(this,fs,0);Me(this,Ks,!1);Me(this,zs,!1);Me(this,Xs,new Set);Me(this,Zs,new Set);Me(this,is,null);Me(this,Jr,uo(()=>(ze(this,is,Bs(x(this,Ts))),()=>{ze(this,is,null)})));ze(this,qt,t),ze(this,Gt,s),ze(this,Cs,n),this.parent=Ne.b,this.is_pending=!!x(this,Gt).pending,ze(this,Yt,$r(()=>{Ne.b=this;{var i=dt(this,rt,bn).call(this);try{ze(this,$t,It(()=>n(i)))}catch(a){this.error(a)}x(this,fs)>0?dt(this,rt,Or).call(this):this.is_pending=!1}return()=>{var a;(a=x(this,ds))==null||a.remove()}},fo))}defer_effect(t){Ra(t,x(this,Xs),x(this,Zs))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!x(this,Gt).pending}update_pending_count(t){dt(this,rt,kn).call(this,t),ze(this,Ts,x(this,Ts)+t),!(!x(this,is)||x(this,Ks))&&(ze(this,Ks,!0),cs(()=>{ze(this,Ks,!1),x(this,is)&&rr(x(this,is),x(this,Ts))}))}get_effect_pending(){return x(this,Jr).call(this),r(x(this,is))}error(t){var s=x(this,Gt).onerror;let n=x(this,Gt).failed;if(x(this,zs)||!s&&!n)throw t;x(this,$t)&&(kt(x(this,$t)),ze(this,$t,null)),x(this,_t)&&(kt(x(this,_t)),ze(this,_t,null)),x(this,Qt)&&(kt(x(this,Qt)),ze(this,Qt,null));var i=!1,a=!1;const o=()=>{if(i){no();return}i=!0,a&&Ki(),ms.ensure(),ze(this,Ts,0),x(this,Qt)!==null&&Ms(x(this,Qt),()=>{ze(this,Qt,null)}),this.is_pending=this.has_pending_snippet(),ze(this,$t,dt(this,rt,Nr).call(this,()=>(ze(this,zs,!1),It(()=>x(this,Cs).call(this,x(this,qt)))))),x(this,fs)>0?dt(this,rt,Or).call(this):this.is_pending=!1};cs(()=>{try{a=!0,s==null||s(t,o),a=!1}catch(l){sr(l,x(this,Yt)&&x(this,Yt).parent)}n&&ze(this,Qt,dt(this,rt,Nr).call(this,()=>{ms.ensure(),ze(this,zs,!0);try{return It(()=>{n(x(this,qt),()=>t,()=>o)})}catch(l){return sr(l,x(this,Yt).parent),null}finally{ze(this,zs,!1)}}))})}}qt=new WeakMap,Pn=new WeakMap,Gt=new WeakMap,Cs=new WeakMap,Yt=new WeakMap,$t=new WeakMap,_t=new WeakMap,Qt=new WeakMap,as=new WeakMap,ds=new WeakMap,Ts=new WeakMap,fs=new WeakMap,Ks=new WeakMap,zs=new WeakMap,Xs=new WeakMap,Zs=new WeakMap,is=new WeakMap,Jr=new WeakMap,rt=new WeakSet,go=function(){try{ze(this,$t,It(()=>x(this,Cs).call(this,x(this,qt))))}catch(t){this.error(t)}},mo=function(){const t=x(this,Gt).pending;t&&(ze(this,_t,It(()=>t(x(this,qt)))),cs(()=>{var s=dt(this,rt,bn).call(this);ze(this,$t,dt(this,rt,Nr).call(this,()=>(ms.ensure(),It(()=>x(this,Cs).call(this,s))))),x(this,fs)>0?dt(this,rt,Or).call(this):(Ms(x(this,_t),()=>{ze(this,_t,null)}),this.is_pending=!1)}))},bn=function(){var t=x(this,qt);return this.is_pending&&(ze(this,ds,ws()),x(this,qt).before(x(this,ds)),t=x(this,ds)),t},Nr=function(t){var s=Ne,n=Ie,i=Ze;es(x(this,Yt)),Dt(x(this,Yt)),tr(x(this,Yt).ctx);try{return t()}catch(a){return Ia(a),null}finally{es(s),Dt(n),tr(i)}},Or=function(){const t=x(this,Gt).pending;x(this,$t)!==null&&(ze(this,as,document.createDocumentFragment()),x(this,as).append(x(this,ds)),ii(x(this,$t),x(this,as))),x(this,_t)===null&&ze(this,_t,It(()=>t(x(this,qt))))},kn=function(t){var s;if(!this.has_pending_snippet()){this.parent&&dt(s=this.parent,rt,kn).call(s,t);return}if(ze(this,fs,x(this,fs)+t),x(this,fs)===0){this.is_pending=!1;for(const n of x(this,Xs))Xe(n,ct),Ut(n);for(const n of x(this,Zs))Xe(n,Ht),Ut(n);x(this,Xs).clear(),x(this,Zs).clear(),x(this,_t)&&Ms(x(this,_t),()=>{ze(this,_t,null)}),x(this,as)&&(x(this,qt).before(x(this,as)),ze(this,as,null))}};function _o(e,t,s,n){const i=Pr()?Qr:La;var a=e.filter(u=>!u.settled);if(s.length===0&&a.length===0){n(t.map(i));return}var o=Pe,l=Ne,c=wo(),h=a.length===1?a[0].promise:a.length>1?Promise.all(a.map(u=>u.promise)):null;function _(u){c();try{n(u)}catch(f){(l.f&hs)===0&&sr(f,l)}o==null||o.deactivate(),xn()}if(s.length===0){h.then(()=>_(t.map(i)));return}function j(){c(),Promise.all(s.map(u=>yo(u))).then(u=>_([...t.map(i),...u])).catch(u=>sr(u,l))}h?h.then(j):j()}function wo(){var e=Ne,t=Ie,s=Ze,n=Pe;return function(a=!0){es(e),Dt(t),tr(s),a&&(n==null||n.activate())}}function xn(){es(null),Dt(null),tr(null)}function Qr(e){var t=lt|ct,s=Ie!==null&&(Ie.f&lt)!==0?Ie:null;return Ne!==null&&(Ne.f|=nr),{ctx:Ze,deps:null,effects:null,equals:Ma,f:t,fn:e,reactions:null,rv:0,v:it,wv:0,parent:s??Ne,ac:null}}function yo(e,t,s){let n=Ne;n===null&&Li();var i=n.b,a=void 0,o=Bs(it),l=!Ie,c=new Map;return Mo(()=>{var f;var h=Sa();a=h.promise;try{Promise.resolve(e()).then(h.resolve,h.reject).then(()=>{_===Pe&&_.committed&&_.deactivate(),xn()})}catch(m){h.reject(m),xn()}var _=Pe;if(l){var j=i.is_rendered();i.update_pending_count(1),_.increment(j),(f=c.get(_))==null||f.reject(Vs),c.delete(_),c.set(_,h)}const u=(m,S=void 0)=>{if(_.activate(),S)S!==Vs&&(o.f|=gs,rr(o,S));else{(o.f&gs)!==0&&(o.f^=gs),rr(o,m);for(const[w,k]of c){if(c.delete(w),w===_)break;k.reject(Vs)}}l&&(i.update_pending_count(-1),_.decrement(j))};h.promise.then(u,m=>u(null,m||"unknown"))}),Fn(()=>{for(const h of c.values())h.reject(Vs)}),new Promise(h=>{function _(j){function u(){j===a?h(o):_(a)}j.then(u,u)}_(a)})}function Ee(e){const t=Qr(e);return oi(t),t}function La(e){const t=Qr(e);return t.equals=qa,t}function Ua(e){var t=e.effects;if(t!==null){e.effects=null;for(var s=0;s<t.length;s+=1)kt(t[s])}}function bo(e){for(var t=e.parent;t!==null;){if((t.f&lt)===0)return(t.f&hs)===0?t:null;t=t.parent}return null}function Dn(e){var t,s=Ne;es(bo(e));try{e.f&=~Is,Ua(e),t=ui(e)}finally{es(s)}return t}function Va(e){var t=Dn(e);if(!e.equals(t)&&(e.wv=ci(),(!(Pe!=null&&Pe.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){Xe(e,st);return}Rs||(ot!==null?(An()||Pe!=null&&Pe.is_fork)&&ot.set(e,t):Rn(e))}let Sn=new Set;const _s=new Map;let Ha=!1;function Bs(e,t){var s={f:0,v:e,reactions:null,equals:Ma,rv:0,wv:0};return s}function D(e,t){const s=Bs(e);return oi(s),s}function Ja(e,t=!1,s=!0){var i;const n=Bs(e);return t||(n.equals=qa),Mr&&s&&Ze!==null&&Ze.l!==null&&((i=Ze.l).s??(i.s=[])).push(n),n}function d(e,t,s=!1){Ie!==null&&(!Vt||(Ie.f&ea)!==0)&&Pr()&&(Ie.f&(lt|vs|Bn|ea))!==0&&(Rt===null||!er.call(Rt,e))&&Qi();let n=s?hr(t):t;return rr(e,n)}function rr(e,t){if(!e.equals(t)){var s=e.v;Rs?_s.set(e,t):_s.set(e,s),e.v=t;var n=ms.ensure();if(n.capture(e,s),(e.f&lt)!==0){const i=e;(e.f&ct)!==0&&Dn(i),Rn(i)}e.wv=ci(),Wa(e,ct),Pr()&&Ne!==null&&(Ne.f&st)!==0&&(Ne.f&(Jt|As))===0&&(Pt===null?$o([e]):Pt.push(e)),!n.is_fork&&Sn.size>0&&!Ha&&ko()}return t}function ko(){Ha=!1;for(const e of Sn)(e.f&st)!==0&&Xe(e,Ht),Ir(e)&&kr(e);Sn.clear()}function yr(e){d(e,e.v+1)}function Wa(e,t){var s=e.reactions;if(s!==null)for(var n=Pr(),i=s.length,a=0;a<i;a++){var o=s[a],l=o.f;if(!(!n&&o===Ne)){var c=(l&ct)===0;if(c&&Xe(o,t),(l&lt)!==0){var h=o;ot==null||ot.delete(h),(l&Is)===0&&(l&Bt&&(o.f|=Is),Wa(h,Ht))}else c&&((l&vs)!==0&&Ot!==null&&Ot.add(o),Ut(o))}}}function hr(e){if(typeof e!="object"||e===null||Js in e)return e;const t=qn(e);if(t!==Di&&t!==Ai)return e;var s=new Map,n=ba(e),i=D(0),a=Ps,o=l=>{if(Ps===a)return l();var c=Ie,h=Ps;Dt(null),aa(a);var _=l();return Dt(c),aa(h),_};return n&&s.set("length",D(e.length)),new Proxy(e,{defineProperty(l,c,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&Gi();var _=s.get(c);return _===void 0?_=o(()=>{var j=D(h.value);return s.set(c,j),j}):d(_,h.value,!0),!0},deleteProperty(l,c){var h=s.get(c);if(h===void 0){if(c in l){const _=o(()=>D(it));s.set(c,_),yr(i)}}else d(h,it),yr(i);return!0},get(l,c,h){var f;if(c===Js)return e;var _=s.get(c),j=c in l;if(_===void 0&&(!j||(f=_r(l,c))!=null&&f.writable)&&(_=o(()=>{var m=hr(j?l[c]:it),S=D(m);return S}),s.set(c,_)),_!==void 0){var u=r(_);return u===it?void 0:u}return Reflect.get(l,c,h)},getOwnPropertyDescriptor(l,c){var h=Reflect.getOwnPropertyDescriptor(l,c);if(h&&"value"in h){var _=s.get(c);_&&(h.value=r(_))}else if(h===void 0){var j=s.get(c),u=j==null?void 0:j.v;if(j!==void 0&&u!==it)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return h},has(l,c){var u;if(c===Js)return!0;var h=s.get(c),_=h!==void 0&&h.v!==it||Reflect.has(l,c);if(h!==void 0||Ne!==null&&(!_||(u=_r(l,c))!=null&&u.writable)){h===void 0&&(h=o(()=>{var f=_?hr(l[c]):it,m=D(f);return m}),s.set(c,h));var j=r(h);if(j===it)return!1}return _},set(l,c,h,_){var L;var j=s.get(c),u=c in l;if(n&&c==="length")for(var f=h;f<j.v;f+=1){var m=s.get(f+"");m!==void 0?d(m,it):f in l&&(m=o(()=>D(it)),s.set(f+"",m))}if(j===void 0)(!u||(L=_r(l,c))!=null&&L.writable)&&(j=o(()=>D(void 0)),d(j,hr(h)),s.set(c,j));else{u=j.v!==it;var S=o(()=>hr(h));d(j,S)}var w=Reflect.getOwnPropertyDescriptor(l,c);if(w!=null&&w.set&&w.set.call(_,h),!u){if(n&&typeof c=="string"){var k=s.get("length"),z=Number(c);Number.isInteger(z)&&z>=k.v&&d(k,z+1)}yr(i)}return!0},ownKeys(l){r(i);var c=Reflect.ownKeys(l).filter(j=>{var u=s.get(j);return u===void 0||u.v!==it});for(var[h,_]of s)_.v!==it&&!(h in l)&&c.push(h);return c},setPrototypeOf(){Yi()}})}var sa,ar,Ga,Ya,Qa;function xo(){if(sa===void 0){sa=window,ar=document,Ga=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,s=Text.prototype;Ya=_r(t,"firstChild").get,Qa=_r(t,"nextSibling").get,Zn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Zn(s)&&(s.__t=void 0)}}function ws(e=""){return document.createTextNode(e)}function os(e){return Ya.call(e)}function qr(e){return Qa.call(e)}function v(e,t){return os(e)}function ae(e,t=!1){{var s=os(e);return s instanceof Comment&&s.data===""?qr(s):s}}function p(e,t=1,s=!1){let n=e;for(;t--;)n=qr(n);return n}function So(e){e.textContent=""}function Ka(){return!1}let ra=!1;function jo(){ra||(ra=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const s of e.target.elements)(t=s.__on_r)==null||t.call(s)})},{capture:!0}))}function Kr(e){var t=Ie,s=Ne;Dt(null),es(null);try{return e()}finally{Dt(t),es(s)}}function Xa(e,t,s,n=s){e.addEventListener(t,()=>Kr(s));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),jo()}function Za(e){Ne===null&&(Ie===null&&Ji(),Hi()),Rs&&Vi()}function Co(e,t){var s=t.last;s===null?t.last=t.first=e:(s.next=e,e.prev=s,t.last=e)}function ss(e,t,s){var n=Ne;n!==null&&(n.f&zt)!==0&&(e|=zt);var i={ctx:Ze,deps:null,nodes:null,f:e|ct|Bt,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(s)try{kr(i),i.f|=In}catch(l){throw kt(i),l}else t!==null&&Ut(i);var a=i;if(s&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&nr)===0&&(a=a.first,(e&vs)!==0&&(e&ys)!==0&&a!==null&&(a.f|=ys)),a!==null&&(a.parent=n,n!==null&&Co(a,n),Ie!==null&&(Ie.f&lt)!==0&&(e&As)===0)){var o=Ie;(o.effects??(o.effects=[])).push(a)}return i}function An(){return Ie!==null&&!Vt}function Fn(e){const t=ss(Er,null,!1);return Xe(t,st),t.teardown=e,t}function br(e){Za();var t=Ne.f,s=!Ie&&(t&Jt)!==0&&(t&In)===0;if(s){var n=Ze;(n.e??(n.e=[])).push(e)}else return ei(e)}function ei(e){return ss(Vr|Ta,e,!1)}function To(e){return Za(),ss(Er|Ta,e,!0)}function zo(e){ms.ensure();const t=ss(As|nr,e,!0);return(s={})=>new Promise(n=>{s.outro?Ms(t,()=>{kt(t),n(void 0)}):(kt(t),n(void 0))})}function Eo(e){return ss(Vr,e,!1)}function Mo(e){return ss(Bn|nr,e,!0)}function Xr(e,t=0){return ss(Er|t,e,!0)}function H(e,t=[],s=[],n=[]){_o(n,t,s,i=>{ss(Er,()=>e(...i.map(r)),!0)})}function $r(e,t=0){var s=ss(vs|t,e,!0);return s}function It(e){return ss(Jt|nr,e,!0)}function ti(e){var t=e.teardown;if(t!==null){const s=Rs,n=Ie;na(!0),Dt(null);try{t.call(null)}finally{na(s),Dt(n)}}}function si(e,t=!1){var s=e.first;for(e.first=e.last=null;s!==null;){const i=s.ac;i!==null&&Kr(()=>{i.abort(Vs)});var n=s.next;(s.f&As)!==0?s.parent=null:kt(s,t),s=n}}function Po(e){for(var t=e.first;t!==null;){var s=t.next;(t.f&Jt)===0&&kt(t),t=s}}function kt(e,t=!0){var s=!1;(t||(e.f&Ca)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(qo(e.nodes.start,e.nodes.end),s=!0),si(e,t&&!s),Hr(e,0),Xe(e,hs);var n=e.nodes&&e.nodes.t;if(n!==null)for(const a of n)a.stop();ti(e);var i=e.parent;i!==null&&i.first!==null&&ri(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function qo(e,t){for(;e!==null;){var s=e===t?null:qr(e);e.remove(),e=s}}function ri(e){var t=e.parent,s=e.prev,n=e.next;s!==null&&(s.next=n),n!==null&&(n.prev=s),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=s))}function Ms(e,t,s=!0){var n=[];ni(e,n,!0);var i=()=>{s&&kt(e),t&&t()},a=n.length;if(a>0){var o=()=>--a||i();for(var l of n)l.out(o)}else i()}function ni(e,t,s){if((e.f&zt)===0){e.f^=zt;var n=e.nodes&&e.nodes.t;if(n!==null)for(const l of n)(l.is_global||s)&&t.push(l);for(var i=e.first;i!==null;){var a=i.next,o=(i.f&ys)!==0||(i.f&Jt)!==0&&(e.f&vs)!==0;ni(i,t,o?s:!1),i=a}}}function Nn(e){ai(e,!0)}function ai(e,t){if((e.f&zt)!==0){e.f^=zt,(e.f&st)===0&&(Xe(e,ct),Ut(e));for(var s=e.first;s!==null;){var n=s.next,i=(s.f&ys)!==0||(s.f&Jt)!==0;ai(s,i?t:!1),s=n}var a=e.nodes&&e.nodes.t;if(a!==null)for(const o of a)(o.is_global||t)&&o.in()}}function ii(e,t){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end;s!==null;){var i=s===n?null:qr(s);t.append(s),s=i}}let Lr=!1,Rs=!1;function na(e){Rs=e}let Ie=null,Vt=!1;function Dt(e){Ie=e}let Ne=null;function es(e){Ne=e}let Rt=null;function oi(e){Ie!==null&&(Rt===null?Rt=[e]:Rt.push(e))}let yt=null,Ct=0,Pt=null;function $o(e){Pt=e}let li=1,xs=0,Ps=xs;function aa(e){Ps=e}function ci(){return++li}function Ir(e){var t=e.f;if((t&ct)!==0)return!0;if(t&lt&&(e.f&=~Is),(t&Ht)!==0){for(var s=e.deps,n=s.length,i=0;i<n;i++){var a=s[i];if(Ir(a)&&Va(a),a.wv>e.wv)return!0}(t&Bt)!==0&&ot===null&&Xe(e,st)}return!1}function vi(e,t,s=!0){var n=e.reactions;if(n!==null&&!(Rt!==null&&er.call(Rt,e)))for(var i=0;i<n.length;i++){var a=n[i];(a.f&lt)!==0?vi(a,t,!1):t===a&&(s?Xe(a,ct):(a.f&st)!==0&&Xe(a,Ht),Ut(a))}}function ui(e){var S;var t=yt,s=Ct,n=Pt,i=Ie,a=Rt,o=Ze,l=Vt,c=Ps,h=e.f;yt=null,Ct=0,Pt=null,Ie=(h&(Jt|As))===0?e:null,Rt=null,tr(e.ctx),Vt=!1,Ps=++xs,e.ac!==null&&(Kr(()=>{e.ac.abort(Vs)}),e.ac=null);try{e.f|=gn;var _=e.fn,j=_(),u=e.deps,f=Pe==null?void 0:Pe.is_fork;if(yt!==null){var m;if(f||Hr(e,Ct),u!==null&&Ct>0)for(u.length=Ct+yt.length,m=0;m<yt.length;m++)u[Ct+m]=yt[m];else e.deps=u=yt;if(An()&&(e.f&Bt)!==0)for(m=Ct;m<u.length;m++)((S=u[m]).reactions??(S.reactions=[])).push(e)}else!f&&u!==null&&Ct<u.length&&(Hr(e,Ct),u.length=Ct);if(Pr()&&Pt!==null&&!Vt&&u!==null&&(e.f&(lt|Ht|ct))===0)for(m=0;m<Pt.length;m++)vi(Pt[m],e);if(i!==null&&i!==e){if(xs++,i.deps!==null)for(let w=0;w<s;w+=1)i.deps[w].rv=xs;if(t!==null)for(const w of t)w.rv=xs;Pt!==null&&(n===null?n=Pt:n.push(...Pt))}return(e.f&gs)!==0&&(e.f^=gs),j}catch(w){return Ia(w)}finally{e.f^=gn,yt=t,Ct=s,Pt=n,Ie=i,Rt=a,tr(o),Vt=l,Ps=c}}function Io(e,t){let s=t.reactions;if(s!==null){var n=Ri.call(s,e);if(n!==-1){var i=s.length-1;i===0?s=t.reactions=null:(s[n]=s[i],s.pop())}}if(s===null&&(t.f&lt)!==0&&(yt===null||!er.call(yt,t))){var a=t;(a.f&Bt)!==0&&(a.f^=Bt,a.f&=~Is),Rn(a),Ua(a),Hr(a,0)}}function Hr(e,t){var s=e.deps;if(s!==null)for(var n=t;n<s.length;n++)Io(e,s[n])}function kr(e){var t=e.f;if((t&hs)===0){Xe(e,st);var s=Ne,n=Lr;Ne=e,Lr=!0;try{(t&(vs|ja))!==0?Po(e):si(e),ti(e);var i=ui(e);e.teardown=typeof i=="function"?i:null,e.wv=li;var a;hn&&ao&&(e.f&ct)!==0&&e.deps}finally{Lr=n,Ne=s}}}async function Bo(){await Promise.resolve(),co()}function r(e){var t=e.f,s=(t&lt)!==0;if(Ie!==null&&!Vt){var n=Ne!==null&&(Ne.f&hs)!==0;if(!n&&(Rt===null||!er.call(Rt,e))){var i=Ie.deps;if((Ie.f&gn)!==0)e.rv<xs&&(e.rv=xs,yt===null&&i!==null&&i[Ct]===e?Ct++:yt===null?yt=[e]:yt.push(e));else{(Ie.deps??(Ie.deps=[])).push(e);var a=e.reactions;a===null?e.reactions=[Ie]:er.call(a,Ie)||a.push(Ie)}}}if(Rs&&_s.has(e))return _s.get(e);if(s){var o=e;if(Rs){var l=o.v;return((o.f&st)===0&&o.reactions!==null||fi(o))&&(l=Dn(o)),_s.set(o,l),l}var c=(o.f&Bt)===0&&!Vt&&Ie!==null&&(Lr||(Ie.f&Bt)!==0),h=o.deps===null;Ir(o)&&(c&&(o.f|=Bt),Va(o)),c&&!h&&di(o)}if(ot!=null&&ot.has(e))return ot.get(e);if((e.f&gs)!==0)throw e.v;return e.v}function di(e){if(e.deps!==null){e.f|=Bt;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&lt)!==0&&(t.f&Bt)===0&&di(t)}}function fi(e){if(e.v===it)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(_s.has(t)||(t.f&lt)!==0&&fi(t))return!0;return!1}function Fs(e){var t=Vt;try{return Vt=!0,e()}finally{Vt=t}}function Ro(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Js in e)jn(e);else if(!Array.isArray(e))for(let t in e){const s=e[t];typeof s=="object"&&s&&Js in s&&jn(s)}}}function jn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{jn(e[n],t)}catch{}const s=qn(e);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const n=xa(s);for(let i in n){const a=n[i].get;if(a)try{a.call(e)}catch{}}}}}const Do=["touchstart","touchmove"];function Ao(e){return Do.includes(e)}const pi=new Set,Cn=new Set;function Fo(e,t,s,n={}){function i(a){if(n.capture||gr.call(t,a),!a.cancelBubble)return Kr(()=>s==null?void 0:s.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?cs(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function ft(e,t,s,n,i){var a={capture:n,passive:i},o=Fo(e,t,s,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Fn(()=>{t.removeEventListener(e,o,a)})}function Et(e){for(var t=0;t<e.length;t++)pi.add(e[t]);for(var s of Cn)s(e)}let ia=null;function gr(e){var w;var t=this,s=t.ownerDocument,n=e.type,i=((w=e.composedPath)==null?void 0:w.call(e))||[],a=i[0]||e.target;ia=e;var o=0,l=ia===e&&e.__root;if(l){var c=i.indexOf(l);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var h=i.indexOf(t);if(h===-1)return;c<=h&&(o=c)}if(a=i[o]||e.target,a!==t){ka(e,"currentTarget",{configurable:!0,get(){return a||s}});var _=Ie,j=Ne;Dt(null),es(null);try{for(var u,f=[];a!==null;){var m=a.assignedSlot||a.parentNode||a.host||null;try{var S=a["__"+n];S!=null&&(!a.disabled||e.target===a)&&S.call(a,e)}catch(k){u?f.push(k):u=k}if(e.cancelBubble||m===t||m===null)break;a=m}if(u){for(let k of f)queueMicrotask(()=>{throw k});throw u}}finally{e.__root=t,delete e.currentTarget,Dt(_),es(j)}}}function hi(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function xr(e,t){var s=Ne;s.nodes===null&&(s.nodes={start:e,end:t,a:null,t:null})}function T(e,t){var s=(t&Ea)!==0,n=(t&so)!==0,i,a=!e.startsWith("<!>");return()=>{i===void 0&&(i=hi(a?e:"<!>"+e),s||(i=os(i)));var o=n||Ga?document.importNode(i,!0):i.cloneNode(!0);if(s){var l=os(o),c=o.lastChild;xr(l,c)}else xr(o,o);return o}}function No(e,t,s="svg"){var n=!e.startsWith("<!>"),i=(t&Ea)!==0,a=`<${s}>${n?e:"<!>"+e}</${s}>`,o;return()=>{if(!o){var l=hi(a),c=os(l);if(i)for(o=document.createDocumentFragment();os(c);)o.appendChild(os(c));else o=os(c)}var h=o.cloneNode(!0);if(i){var _=os(h),j=h.lastChild;xr(_,j)}else xr(h,h);return h}}function me(e,t){return No(e,t,"svg")}function Se(){var e=document.createDocumentFragment(),t=document.createComment(""),s=ws();return e.append(t,s),xr(t,s),e}function g(e,t){e!==null&&e.before(t)}function I(e,t){var s=t==null?"":typeof t=="object"?t+"":t;s!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=s,e.nodeValue=s+"")}function Oo(e,t){return Lo(e,t)}const Ls=new Map;function Lo(e,{target:t,anchor:s,props:n={},events:i,context:a,intro:o=!0}){xo();var l=new Set,c=j=>{for(var u=0;u<j.length;u++){var f=j[u];if(!l.has(f)){l.add(f);var m=Ao(f);t.addEventListener(f,gr,{passive:m});var S=Ls.get(f);S===void 0?(document.addEventListener(f,gr,{passive:m}),Ls.set(f,1)):Ls.set(f,S+1)}}};c(Gr(pi)),Cn.add(c);var h=void 0,_=zo(()=>{var j=s??t.appendChild(ws());return po(j,{pending:()=>{}},u=>{gt({});var f=Ze;a&&(f.c=a),i&&(n.$$events=i),h=e(u,n)||{},mt()}),()=>{var m;for(var u of l){t.removeEventListener(u,gr);var f=Ls.get(u);--f===0?(document.removeEventListener(u,gr),Ls.delete(u)):Ls.set(u,f)}Cn.delete(c),j!==s&&((m=j.parentNode)==null||m.removeChild(j))}});return Uo.set(h,_),h}let Uo=new WeakMap;var Lt,Kt,Tt,Es,Tr,zr,Wr;class On{constructor(t,s=!0){Wt(this,"anchor");Me(this,Lt,new Map);Me(this,Kt,new Map);Me(this,Tt,new Map);Me(this,Es,new Set);Me(this,Tr,!0);Me(this,zr,()=>{var t=Pe;if(x(this,Lt).has(t)){var s=x(this,Lt).get(t),n=x(this,Kt).get(s);if(n)Nn(n),x(this,Es).delete(s);else{var i=x(this,Tt).get(s);i&&(x(this,Kt).set(s,i.effect),x(this,Tt).delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[a,o]of x(this,Lt)){if(x(this,Lt).delete(a),a===t)break;const l=x(this,Tt).get(o);l&&(kt(l.effect),x(this,Tt).delete(o))}for(const[a,o]of x(this,Kt)){if(a===s||x(this,Es).has(a))continue;const l=()=>{if(Array.from(x(this,Lt).values()).includes(a)){var h=document.createDocumentFragment();ii(o,h),h.append(ws()),x(this,Tt).set(a,{effect:o,fragment:h})}else kt(o);x(this,Es).delete(a),x(this,Kt).delete(a)};x(this,Tr)||!n?(x(this,Es).add(a),Ms(o,l,!1)):l()}}});Me(this,Wr,t=>{x(this,Lt).delete(t);const s=Array.from(x(this,Lt).values());for(const[n,i]of x(this,Tt))s.includes(n)||(kt(i.effect),x(this,Tt).delete(n))});this.anchor=t,ze(this,Tr,s)}ensure(t,s){var n=Pe,i=Ka();if(s&&!x(this,Kt).has(t)&&!x(this,Tt).has(t))if(i){var a=document.createDocumentFragment(),o=ws();a.append(o),x(this,Tt).set(t,{effect:It(()=>s(o)),fragment:a})}else x(this,Kt).set(t,It(()=>s(this.anchor)));if(x(this,Lt).set(n,t),i){for(const[l,c]of x(this,Kt))l===t?n.unskip_effect(c):n.skip_effect(c);for(const[l,c]of x(this,Tt))l===t?n.unskip_effect(c.effect):n.skip_effect(c.effect);n.oncommit(x(this,zr)),n.ondiscard(x(this,Wr))}else x(this,zr).call(this)}}Lt=new WeakMap,Kt=new WeakMap,Tt=new WeakMap,Es=new WeakMap,Tr=new WeakMap,zr=new WeakMap,Wr=new WeakMap;function M(e,t,s=!1){var n=new On(e),i=s?ys:0;function a(o,l){n.ensure(o,l)}$r(()=>{var o=!1;t((l,c=!0)=>{o=!0,a(c,l)}),o||a(!1,null)},i)}function Ke(e,t){return t}function Vo(e,t,s){for(var n=[],i=t.length,a,o=t.length,l=0;l<i;l++){let j=t[l];Ms(j,()=>{if(a){if(a.pending.delete(j),a.done.add(j),a.pending.size===0){var u=e.outrogroups;Tn(Gr(a.done)),u.delete(a),u.size===0&&(e.outrogroups=null)}}else o-=1},!1)}if(o===0){var c=n.length===0&&s!==null;if(c){var h=s,_=h.parentNode;So(_),_.append(h),e.items.clear()}Tn(t,!c)}else a={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(a)}function Tn(e,t=!0){for(var s=0;s<e.length;s++)kt(e[s],t)}var oa;function Ge(e,t,s,n,i,a=null){var o=e,l=new Map,c=(t&za)!==0;if(c){var h=e;o=h.appendChild(ws())}var _=null,j=La(()=>{var k=s();return ba(k)?k:k==null?[]:Gr(k)}),u,f=!0;function m(){w.fallback=_,Ho(w,u,o,t,n),_!==null&&(u.length===0?(_.f&ls)===0?Nn(_):(_.f^=ls,mr(_,null,o)):Ms(_,()=>{_=null}))}var S=$r(()=>{u=r(j);for(var k=u.length,z=new Set,L=Pe,ve=Ka(),ee=0;ee<k;ee+=1){var ge=u[ee],O=n(ge,ee),Y=f?null:l.get(O);Y?(Y.v&&rr(Y.v,ge),Y.i&&rr(Y.i,ee),ve&&L.unskip_effect(Y.e)):(Y=Jo(l,f?o:oa??(oa=ws()),ge,O,ee,i,t,s),f||(Y.e.f|=ls),l.set(O,Y)),z.add(O)}if(k===0&&a&&!_&&(f?_=It(()=>a(o)):(_=It(()=>a(oa??(oa=ws()))),_.f|=ls)),k>z.size&&Ui(),!f)if(ve){for(const[ie,we]of l)z.has(ie)||L.skip_effect(we.e);L.oncommit(m),L.ondiscard(()=>{})}else m();r(j)}),w={effect:S,items:l,outrogroups:null,fallback:_};f=!1}function pr(e){for(;e!==null&&(e.f&Jt)===0;)e=e.next;return e}function Ho(e,t,s,n,i){var we,Be,qe,J,Q,pe,q,P,A;var a=(n&eo)!==0,o=t.length,l=e.items,c=pr(e.effect.first),h,_=null,j,u=[],f=[],m,S,w,k;if(a)for(k=0;k<o;k+=1)m=t[k],S=i(m,k),w=l.get(S).e,(w.f&ls)===0&&((Be=(we=w.nodes)==null?void 0:we.a)==null||Be.measure(),(j??(j=new Set)).add(w));for(k=0;k<o;k+=1){if(m=t[k],S=i(m,k),w=l.get(S).e,e.outrogroups!==null)for(const U of e.outrogroups)U.pending.delete(w),U.done.delete(w);if((w.f&ls)!==0)if(w.f^=ls,w===c)mr(w,null,s);else{var z=_?_.next:c;w===e.effect.last&&(e.effect.last=w.prev),w.prev&&(w.prev.next=w.next),w.next&&(w.next.prev=w.prev),us(e,_,w),us(e,w,z),mr(w,z,s),_=w,u=[],f=[],c=pr(_.next);continue}if((w.f&zt)!==0&&(Nn(w),a&&((J=(qe=w.nodes)==null?void 0:qe.a)==null||J.unfix(),(j??(j=new Set)).delete(w))),w!==c){if(h!==void 0&&h.has(w)){if(u.length<f.length){var L=f[0],ve;_=L.prev;var ee=u[0],ge=u[u.length-1];for(ve=0;ve<u.length;ve+=1)mr(u[ve],L,s);for(ve=0;ve<f.length;ve+=1)h.delete(f[ve]);us(e,ee.prev,ge.next),us(e,_,ee),us(e,ge,L),c=L,_=ge,k-=1,u=[],f=[]}else h.delete(w),mr(w,c,s),us(e,w.prev,w.next),us(e,w,_===null?e.effect.first:_.next),us(e,_,w),_=w;continue}for(u=[],f=[];c!==null&&c!==w;)(h??(h=new Set)).add(c),f.push(c),c=pr(c.next);if(c===null)continue}(w.f&ls)===0&&u.push(w),_=w,c=pr(w.next)}if(e.outrogroups!==null){for(const U of e.outrogroups)U.pending.size===0&&(Tn(Gr(U.done)),(Q=e.outrogroups)==null||Q.delete(U));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||h!==void 0){var O=[];if(h!==void 0)for(w of h)(w.f&zt)===0&&O.push(w);for(;c!==null;)(c.f&zt)===0&&c!==e.fallback&&O.push(c),c=pr(c.next);var Y=O.length;if(Y>0){var ie=(n&za)!==0&&o===0?s:null;if(a){for(k=0;k<Y;k+=1)(q=(pe=O[k].nodes)==null?void 0:pe.a)==null||q.measure();for(k=0;k<Y;k+=1)(A=(P=O[k].nodes)==null?void 0:P.a)==null||A.fix()}Vo(e,O,ie)}}a&&cs(()=>{var U,he;if(j!==void 0)for(w of j)(he=(U=w.nodes)==null?void 0:U.a)==null||he.apply()})}function Jo(e,t,s,n,i,a,o,l){var c=(o&Xi)!==0?(o&to)===0?Ja(s,!1,!1):Bs(s):null,h=(o&Zi)!==0?Bs(i):null;return{v:c,i:h,e:It(()=>(a(t,c??s,h??i,l),()=>{e.delete(n)}))}}function mr(e,t,s){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,a=t&&(t.f&ls)===0?t.nodes.start:s;n!==null;){var o=qr(n);if(a.before(n),n===i)return;n=o}}function us(e,t,s){t===null?e.effect.first=s:t.next=s,s===null?e.effect.last=t:s.prev=t}function gi(e,t,...s){var n=new On(e);$r(()=>{const i=t()??null;n.ensure(i,i&&(a=>i(a,...s)))},ys)}function Wo(e,t,s){var n=new On(e);$r(()=>{var i=t()??null;n.ensure(i,i&&(a=>s(a,i)))},ys)}const la=[...` 	
\r\fÂ \v\uFEFF`];function Go(e,t,s){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),s){for(var i in s)if(s[i])n=n?n+" "+i:i;else if(n.length)for(var a=i.length,o=0;(o=n.indexOf(i,o))>=0;){var l=o+a;(o===0||la.includes(n[o-1]))&&(l===n.length||la.includes(n[l]))?n=(o===0?"":n.substring(0,o))+n.substring(l+1):o=l}}return n===""?null:n}function Yo(e,t){return e==null?null:String(e)}function ke(e,t,s,n,i,a){var o=e.__className;if(o!==s||o===void 0){var l=Go(s,n,a);l==null?e.removeAttribute("class"):t?e.className=l:e.setAttribute("class",l),e.__className=s}else if(a&&i!==a)for(var c in a){var h=!!a[c];(i==null||h!==!!i[c])&&e.classList.toggle(c,h)}return a}function Br(e,t,s,n){var i=e.__style;if(i!==t){var a=Yo(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return n}const Qo=Symbol("is custom element"),Ko=Symbol("is html");function mi(e,t){var s=_i(e);s.value===(s.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function xt(e,t,s,n){var i=_i(e);i[t]!==(i[t]=s)&&(t==="loading"&&(e[Ni]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Xo(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function _i(e){return e.__attributes??(e.__attributes={[Qo]:e.nodeName.includes("-"),[Ko]:e.namespaceURI===ro})}var ca=new Map;function Xo(e){var t=e.getAttribute("is")||e.nodeName,s=ca.get(t);if(s)return s;ca.set(t,s=[]);for(var n,i=e,a=Element.prototype;a!==i;){n=xa(i);for(var o in n)n[o].set&&s.push(o);i=qn(i)}return s}function Hs(e,t,s=t){var n=new WeakSet;Xa(e,"input",async i=>{var a=i?e.defaultValue:e.value;if(a=vn(e)?un(a):a,s(a),Pe!==null&&n.add(Pe),await Bo(),a!==(a=t())){var o=e.selectionStart,l=e.selectionEnd,c=e.value.length;if(e.value=a??"",l!==null){var h=e.value.length;o===l&&l===c&&h>c?(e.selectionStart=h,e.selectionEnd=h):(e.selectionStart=o,e.selectionEnd=Math.min(l,h))}}}),Fs(t)==null&&e.value&&(s(vn(e)?un(e.value):e.value),Pe!==null&&n.add(Pe)),Xr(()=>{var i=t();if(e===document.activeElement){var a=mn??Pe;if(n.has(a))return}vn(e)&&i===un(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function wi(e,t,s=t){Xa(e,"change",n=>{var i=n?e.defaultChecked:e.checked;s(i)}),Fs(t)==null&&s(e.checked),Xr(()=>{var n=t();e.checked=!!n})}function vn(e){var t=e.type;return t==="number"||t==="range"}function un(e){return e===""?null:+e}function va(e,t){return e===t||(e==null?void 0:e[Js])===t}function ir(e={},t,s,n){return Eo(()=>{var i,a;return Xr(()=>{i=a,a=[],Fs(()=>{e!==s(...a)&&(t(e,...a),i&&va(s(...i),e)&&t(null,...i))})}),()=>{cs(()=>{a&&va(s(...a),e)&&t(null,...a)})}}),e}function yi(e=!1){const t=Ze,s=t.l.u;if(!s)return;let n=()=>Ro(t.s);if(e){let i=0,a={};const o=Qr(()=>{let l=!1;const c=t.s;for(const h in c)c[h]!==a[h]&&(a[h]=c[h],l=!0);return l&&i++,i});n=()=>r(o)}s.b.length&&To(()=>{ua(t,n),Ur(s.b)}),br(()=>{const i=Fs(()=>s.m.map(Fi));return()=>{for(const a of i)typeof a=="function"&&a()}}),s.a.length&&br(()=>{ua(t,n),Ur(s.a)})}function ua(e,t){if(e.l.s)for(const s of e.l.s)r(s);t()}function Ln(e,t,s){if(e==null)return t(void 0),s&&s(void 0),ps;const n=Fs(()=>e.subscribe(t,s));return n.unsubscribe?()=>n.unsubscribe():n}const Us=[];function Zo(e,t){return{subscribe:or(e,t).subscribe}}function or(e,t=ps){let s=null;const n=new Set;function i(l){if(Pa(e,l)&&(e=l,s)){const c=!Us.length;for(const h of n)h[1](),Us.push(h,e);if(c){for(let h=0;h<Us.length;h+=2)Us[h][0](Us[h+1]);Us.length=0}}}function a(l){i(l(e))}function o(l,c=ps){const h=[l,c];return n.add(h),n.size===1&&(s=t(i,a)||ps),l(e),()=>{n.delete(h),n.size===0&&s&&(s(),s=null)}}return{set:i,update:a,subscribe:o}}function Un(e,t,s){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return Zo(s,(o,l)=>{let c=!1;const h=[];let _=0,j=ps;const u=()=>{if(_)return;j();const m=t(n?h[0]:h,o,l);a?o(m):j=typeof m=="function"?m:ps},f=i.map((m,S)=>Ln(m,w=>{h[S]=w,_&=~(1<<S),c&&u()},()=>{_|=1<<S}));return c=!0,u(),function(){Ur(f),j(),c=!1}})}function Zt(e){let t;return Ln(e,s=>t=s)(),t}let zn=Symbol();function At(e,t,s){const n=s[t]??(s[t]={store:null,source:Ja(void 0),unsubscribe:ps});if(n.store!==e&&!(zn in s))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=ps;else{var i=!0;n.unsubscribe=Ln(e,a=>{i?n.source.v=a:d(n.source,a)}),i=!1}return e&&zn in s?Zt(e):r(n.source)}function rs(){const e={};function t(){Fn(()=>{for(var s in e)e[s].unsubscribe();ka(e,zn,{enumerable:!1,value:!0})})}return[e,t]}function En(e,t,s,n){var i=n,a=!0,o=()=>(a&&(a=!1,i=n),i),l;l=e[t],l===void 0&&n!==void 0&&(l=o());var c;return c=()=>{var h=e[t];return h===void 0?o():(a=!0,h)},c}function lr(e){Ze===null&&Oi(),Mr&&Ze.l!==null?el(Ze).m.push(e):br(()=>{const t=Fs(e);if(typeof t=="function")return t})}function el(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const tl="5";var ya;typeof window<"u"&&((ya=window.__svelte??(window.__svelte={})).v??(ya.v=new Set)).add(tl);function bi(){return window.location.pathname||"/"}function sl(){return window.location.search?window.location.search.slice(1):""}function rl(){const e=window.location.hash;if(e&&e.startsWith("#/")){const t=e.slice(1);history.replaceState(null,"",t)}}rl();const Zr=or(bi());window.addEventListener("popstate",()=>{Zr.set(bi())});const en=Un(Zr,e=>e.split("?")[0]||"/"),nl=Un(Zr,()=>sl()),ki=Un(nl,e=>Object.fromEntries(new URLSearchParams(e)));function Rr(e){history.pushState(null,"",e),Zr.set(e)}io();let al=0;function il(){const{subscribe:e,update:t}=or([]);return{subscribe:e,add(s,n="info",i=3e3){const a={id:al++,message:s,type:n};t(o=>[...o,a]),setTimeout(()=>{t(o=>o.filter(l=>l.id!==a.id))},i)},remove(s){t(n=>n.filter(i=>i.id!==s))}}}const xi=il();function be(e,t,s){xi.add(e,t,s)}var ol=T('<div role="alert"> </div>');function ll(e,t){let s=En(t,"type",3,"info");var n=ol(),i=v(n);H(()=>{ke(n,1,`toast ${s()??""}`,"svelte-1i7wnxu"),I(i,t.message)}),g(e,n)}var cl=T('<div class="toast-container svelte-3knp8x"></div>');function vl(e){const t=()=>At(xi,"$toasts",s),[s,n]=rs();var i=cl();Ge(i,5,t,a=>a.id,(a,o)=>{ll(a,{get message(){return r(o).message},get type(){return r(o).type}})}),g(e,i),n()}function Fe(){const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"http://localhost:3001":"https://yoink.coah80.com"}async function ul(e,t={}){const s=await fetch(e,t),n=s.headers.get("content-type");if(!s.ok){let i=`Request failed (${s.status})`;if(n&&n.includes("application/json"))i=(await s.json()).error||i;else{const a=await s.text();console.error("Non-JSON error response:",a.substring(0,500)),i=`Server error ${s.status} (likely VPN blocked)`}throw new Error(i)}return s.json()}async function dl(e,t={}){return ul(`${Fe()}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function Mn(e,{onMessage:t,onError:s,maxReconnectAttempts:n=10}){let i=0,a=null,o=!1;function l(){o||(a=new EventSource(`${Fe()}/api/progress/${e}`),a.onmessage=h=>{try{const _=JSON.parse(h.data);i=0,t(_),(_.stage==="complete"||_.stage==="error"||_.stage==="cancelled")&&c()}catch(_){console.error("SSE parse error:",_)}},a.onerror=()=>{if(a.close(),!o)if(i<n){i++;const h=Math.min(1e3*i,5e3);s&&s({type:"reconnecting",attempt:i,max:n}),setTimeout(l,h)}else s&&s({type:"failed",message:"Connection lost - refresh page to retry"})})}function c(){o=!0,a&&(a.close(),a=null)}return l(),{close:c}}const Sr=[],fl=5;function da(e){e.parentNode&&e.parentNode.removeChild(e);const t=Sr.indexOf(e);t>-1&&Sr.splice(t,1)}function pl(){for(;Sr.length>fl;){const e=Sr.shift();e&&e.parentNode&&e.parentNode.removeChild(e)}}function fa(e){const t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t),Sr.push(t),pl(),t.onload=()=>setTimeout(()=>da(t),5e3),setTimeout(()=>da(t),120*1e3)}function Vn(e,t){const s=URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}const Ds=or(sessionStorage.getItem("yoink_clientId")||null),qs=new Set;let hl=0,bt=null,Xt=0;const Si=3;async function gl(){let e=Zt(Ds);if(!e){try{e=(await(await fetch(`${Fe()}/api/connect`,{method:"POST"})).json()).clientId}catch{e="local-"+Date.now()+"-"+Math.random().toString(36).slice(2,11)}sessionStorage.setItem("yoink_clientId",e),Ds.set(e)}return e}function tn(){const e=`job-${++hl}-${Date.now()}`,t=qs.size===0;if(qs.add(e),t&&!bt){Xt=0;const s=Zt(Ds);s&&!s.startsWith("local-")&&fetch(`${Fe()}/api/heartbeat/${s}`,{method:"POST"}).catch(()=>{}),bt=setInterval(async()=>{const n=Zt(Ds);if(!(!n||n.startsWith("local-")))try{await fetch(`${Fe()}/api/heartbeat/${n}`,{method:"POST"}),Xt=0}catch{Xt++,Xt>=Si&&(clearInterval(bt),bt=null,Xt=0)}},15e3)}return e}function ml(){if(qs.size>0&&!bt){Xt=0;const e=Zt(Ds);e&&!e.startsWith("local-")&&fetch(`${Fe()}/api/heartbeat/${e}`,{method:"POST"}).catch(()=>{}),bt=setInterval(async()=>{const t=Zt(Ds);if(!(!t||t.startsWith("local-")))try{await fetch(`${Fe()}/api/heartbeat/${t}`,{method:"POST"}),Xt=0}catch{Xt++,Xt>=Si&&(clearInterval(bt),bt=null,Xt=0)}},15e3)}}function sn(e){e?qs.delete(e):qs.clear(),qs.size===0&&bt&&(clearInterval(bt),bt=null)}typeof window<"u"&&window.addEventListener("beforeunload",()=>{bt&&(clearInterval(bt),bt=null),qs.clear()});const pa=[{text:"yoink it, go on..."},{text:"not cobalt"},{text:"im bored"},{text:"have you yoinked it today?"},{text:"download helium browser",link:"https://helium.computer/",classes:["clickable"]},{text:"dont like it? use cliply (dont)"},{text:"the biggest yt-dlp wrapper of them all"},{text:"awesome name, right?"},{text:"get yoinked!"},{text:"funny message here"},{text:"SHOUTOUT TO COAH"},{text:"new feature: yoink!"},{text:"new feature: ai download"},{text:"welcome to yoink.tools"},{text:"feelin' yoinky?"},{text:"im parched"},{text:"stay hydrated!"},{text:"computers are cool"},{text:"missing assignments?"},{text:"procrastinate with yoink"},{text:"newgrounds.com",link:"https://newgrounds.com",classes:["clickable"]},{text:"bring back flash!"},{text:"FUCK ICE"},{text:"post this one to twitter"},{text:"google i need yoinks! NOW!!!!!"},{text:"im feeling fancy today...",classes:["fancy"]},{text:"powered by yt-dlp"},{text:"hello world!"},{text:"1000+ sites!",link:"https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md",classes:["clickable"]},{text:"yes, that site works. even the one you're thinking of."}],_l=["4tube","alphaporno","beeg","behindkink","bongacams","cam4","cammodels","camsoda","chaturbate","drtuber","empflix","eporner","erocast","eroprofile","fux","hellporno","hotmovs","iceporn","lovehomeporn","manyvids","motherless","moviefap","noodlemagazine","nuvid","peekvideos","peekvids","playvids","porn","pornbox","pornerbros","pornflip","pornhub","pornotube","pornovoisines","pornoxo","porntop","porntube","redtube","rule34video","slutload","spankbang","stripchat","sunporno","thisvid","tnaflix","tube8","txxx","xhamster","xnxx","xvideos","xxxymovies","youjizz","youporn","zenporn","xtube","erome","hentai","hclips","gotporn","fuq","ashemaletube"];function wl(e){try{const t=new URL(e).hostname.toLowerCase().replace("www.","");return _l.some(s=>t.includes(s))}catch{return!1}}const dn={quality:"1080p",codec:"h264",container:"mp4",audioFormat:"mp3",audioBitrate:"320",filenameStyle:"basic",playlistPreference:null,twitterGifs:!0},bs=["starting","downloading","processing","remuxing","sending","zipping","playlist-info","reconnecting","uploading","converting","compressing","transcribing"];function yl(){let e={...dn};try{const a=localStorage.getItem("yoink_settings");a&&(e={...dn,...JSON.parse(a)})}catch{}const{subscribe:t,set:s,update:n}=or(e);function i(a){localStorage.setItem("yoink_settings",JSON.stringify(a))}return{subscribe:t,set(a){i(a),s(a)},update(a){n(o=>{const l=a(o);return i(l),l})},setSetting(a,o){n(l=>{const c={...l,[a]:o};return i(c),c})},reset(){const a={...dn};i(a),s(a)}}}const $s=yl();let ha=!1;async function ji(){if(!(ha||!("serviceWorker"in navigator)))try{await navigator.serviceWorker.register("/sw.js"),ha=!0}catch{}}async function bl(){return"Notification"in window?Notification.permission==="granted"?"granted":Notification.permission==="denied"?"denied":await Notification.requestPermission():"unsupported"}async function kl(e,t){if(!(!("Notification"in window)||Notification.permission!=="granted")){if(await ji(),"serviceWorker"in navigator)try{const s=await navigator.serviceWorker.ready;if(s.active){s.active.postMessage({type:"PLAYLIST_COMPLETE",message:`${e} is ready to download!`,jobId:t});return}}catch{}new Notification("yoink",{body:`${e} is ready to download!`,icon:"/icons/icon-192.png"})}}function xl(){let e=[];try{const u=localStorage.getItem("yoink_queue");u&&(e=JSON.parse(u).map(f=>f.isPlaylist&&f.serverJobId&&f.stage!=="ready"?{...f,stage:"reconnecting",progress:f.progress||0,status:"reconnecting..."}:bs.includes(f.stage)?{...f,stage:"queued",progress:0,status:"interrupted - tap to restart"}:f).filter(f=>f.stage!=="complete"&&f.stage!=="error"))}catch{e=[]}const{subscribe:t,set:s,update:n}=or(e),i=new Map,a=new Map,o=new Map;function l(u){localStorage.setItem("yoink_queue",JSON.stringify(u))}function c(){return Zt({subscribe:t})}function h(u){const f=o.get(u);f&&(clearInterval(f),o.delete(u))}function _(u){const f=i.get(u);f&&(f.close(),i.delete(u)),h(u);const m=a.get(u);m&&(sn(m),a.delete(u))}const j={subscribe:t,add(u){n(f=>{if(f.some(S=>S.id===u.id))return f;const m=[...f,u];return l(m),m})},remove(u){const m=c().find(S=>S.id===u);if(_(u),m&&bs.includes(m.stage)){const S=m.serverJobId||u;fetch(`${Fe()}/api/cancel/${S}`,{method:"POST"}).catch(()=>{})}n(S=>{const w=S.filter(k=>k.id!==u);return l(w),w}),m&&!m.isPlaylist&&bs.includes(m.stage)&&setTimeout(()=>this.processNext(),100)},updateItem(u,f){n(m=>{const S=m.map(w=>w.id===u?{...w,...f}:w);return l(S),S})},clear(){c().forEach(f=>{if(_(f.id),bs.includes(f.stage)){const m=f.serverJobId||f.id;fetch(`${Fe()}/api/cancel/${m}`,{method:"POST"}).catch(()=>{})}}),i.clear(),a.clear(),o.clear(),s([]),l([])},startDownload(u){if(u.isPlaylist){this._startPlaylistDownload(u);return}this._startDirectDownload(u)},_startDirectDownload(u){const f=Zt($s),m=tn();a.set(u.id,m),this.updateItem(u.id,{stage:"starting",status:"starting download...",startTime:Date.now()});const S=Mn(u.id,{onMessage:z=>{const L={stage:z.stage,status:z.message};if(z.progress!==void 0&&(L.progress=z.progress),z.speed!==void 0&&(L.speed=z.speed),z.eta!==void 0&&(L.eta=z.eta),z.totalVideos!==void 0&&(L.videoCount=z.totalVideos),z.currentVideo!==void 0&&(L.currentVideo=z.currentVideo),z.currentVideoTitle!==void 0&&(L.currentVideoTitle=z.currentVideoTitle),z.format!==void 0&&(L.formatDisplay=z.format),z.downloadedCount!==void 0&&(L.downloadedCount=z.downloadedCount),z.failedVideos&&(L.failedVideos=z.failedVideos),z.failedCount!==void 0&&(L.failedCount=z.failedCount),this.updateItem(u.id,L),z.stage==="complete"){L.endTime=Date.now(),this.updateItem(u.id,L),_(u.id);const ee=c().find(ie=>ie.id===u.id),ge=ee!=null&&ee.startTime?Math.floor((Date.now()-ee.startTime)/1e3):0,O=ge>=60?`${Math.floor(ge/60)}m ${ge%60}s`:`${ge}s`,Y=u.format==="images"?"gallery download complete!":`download complete! (${O})`;be(Y,"success"),this.processNext(),setTimeout(()=>this.remove(u.id),5e3)}else z.stage==="error"?(_(u.id),be(z.message,"error"),this.processNext()):z.stage==="cancelled"&&(_(u.id),this.processNext())},onError:z=>{z.type==="reconnecting"?this.updateItem(u.id,{status:`reconnecting... (${z.attempt}/${z.max})`}):(this.updateItem(u.id,{stage:"error",status:z.message}),_(u.id),this.processNext())}});i.set(u.id,S);const w=new URLSearchParams({url:u.url,format:u.format,filename:u.title,quality:f.quality,container:f.container,audioFormat:f.audioFormat,audioBitrate:f.audioBitrate,progressId:u.id,twitterGifs:f.twitterGifs!==!1?"true":"false"});let k;u.format==="images"?k="/api/gallery/download":k="/api/download",fa(`${Fe()}${k}?${w.toString()}`)},async _startPlaylistDownload(u){const f=Zt($s),m=u.resumeFrom>1;this.updateItem(u.id,{stage:"starting",status:m?`resuming from video ${u.resumeFrom}...`:"starting playlist download...",startTime:Date.now()}),ji(),bl();try{const S=Zt(Ds),k=(await dl("/api/playlist/start",{url:u.url,format:u.format,quality:f.quality,container:f.container,audioFormat:f.audioFormat,audioBitrate:f.audioBitrate,clientId:S||void 0,resumeFrom:u.resumeFrom||1})).jobId;this.updateItem(u.id,{serverJobId:k}),this._connectPlaylistSSE(u.id,k),this._startPlaylistPolling(u.id,k)}catch(S){this.updateItem(u.id,{stage:"error",status:S.message||"failed to start playlist"}),be(S.message||"failed to start playlist","error")}},_connectPlaylistSSE(u,f){const m=Mn(f,{onMessage:S=>{this._handlePlaylistUpdate(u,S)},onError:()=>{}});i.set(u,m)},_startPlaylistPolling(u,f){h(u);const m=setInterval(async()=>{try{const S=await fetch(`${Fe()}/api/playlist/status/${f}`);if(!S.ok){S.status===404&&(this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),_(u),be("playlist expired â try again!","error"));return}const w=await S.json();this._handlePlaylistUpdate(u,{stage:w.status==="complete"?"complete":w.status,message:w.message,progress:w.progress,totalVideos:w.totalVideos,currentVideo:w.currentVideo,currentVideoTitle:w.currentVideoTitle,failedVideos:w.failedVideos,failedCount:w.failedCount,downloadedCount:w.videosCompleted,downloadToken:w.downloadToken,fileName:w.fileName,fileSize:w.fileSize,speed:w.speed,eta:w.eta})}catch{}},3e3);o.set(u,m)},_handlePlaylistUpdate(u,f){const m={stage:f.stage,status:f.message};if(f.progress!==void 0&&(m.progress=f.progress),f.speed!==void 0&&(m.speed=f.speed),f.eta!==void 0&&(m.eta=f.eta),f.totalVideos!==void 0&&(m.videoCount=f.totalVideos),f.currentVideo!==void 0&&(m.currentVideo=f.currentVideo),f.currentVideoTitle!==void 0&&(m.currentVideoTitle=f.currentVideoTitle),f.downloadedCount!==void 0&&(m.downloadedCount=f.downloadedCount),f.failedVideos&&(m.failedVideos=f.failedVideos),f.failedCount!==void 0&&(m.failedCount=f.failedCount),f.stage==="complete"&&f.downloadToken){m.stage="ready",m.downloadToken=f.downloadToken,m.fileName=f.fileName,m.fileSize=f.fileSize,m.endTime=Date.now(),m.status="playlist ready â tap to download",this.updateItem(u,m),_(u);const w=c().find(k=>k.id===u);be(`${(w==null?void 0:w.title)||"playlist"} is ready to download!`,"success",8e3),kl((w==null?void 0:w.title)||"playlist",w==null?void 0:w.serverJobId);return}if(f.stage==="error"){this.updateItem(u,m),_(u),be(f.message,"error");return}if(f.stage==="cancelled"){this.updateItem(u,m),_(u);return}this.updateItem(u,m)},async downloadReady(u){const m=c().find(S=>S.id===u);if(!(!m||!m.downloadToken)){if(m.serverJobId)try{if(!(await fetch(`${Fe()}/api/playlist/status/${m.serverJobId}`)).ok){this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),be("playlist expired â try again!","error");return}}catch{this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),be("playlist expired â try again!","error");return}fa(`${Fe()}/api/playlist/download/${m.downloadToken}`),be("downloading playlist zip...","success"),setTimeout(()=>this.remove(u),1e4)}},processNext(){const u=c();if(u.some(S=>!S.isPlaylist&&bs.includes(S.stage)))return;const m=u.find(S=>S.stage==="queued");m&&this.startDownload(m)},startAllQueued(){this.processNext()},retryDownload(u){const m=c().find(w=>w.id===u);if(!m)return;_(u);const S=Date.now().toString()+Math.random().toString(36).substr(2,9);if(m.isPlaylist){const w=(m.downloadedCount||0)+1,k=w>1?`resuming from video ${w}...`:"queued for retry";this.updateItem(u,{id:S,stage:"queued",progress:m.progress||0,status:k,endTime:null,serverJobId:null,downloadToken:null,resumeFrom:w})}else this.updateItem(u,{id:S,stage:"queued",progress:0,status:"queued for retry",logs:[],endTime:null,serverJobId:null,downloadToken:null});this.processNext()},async finishPlaylistEarly(u){const m=c().find(w=>w.id===u),S=(m==null?void 0:m.serverJobId)||u;try{await fetch(`${Fe()}/api/finish-early/${S}`,{method:"POST"})}catch{be("failed to finish early","error")}},resumePlaylistJobs(){c().filter(f=>f.stage==="reconnecting"&&f.serverJobId).forEach(f=>{this._connectPlaylistSSE(f.id,f.serverJobId),this._startPlaylistPolling(f.id,f.serverJobId)})},reconnectOnResume(){c().filter(f=>f.isPlaylist&&f.serverJobId&&bs.includes(f.stage)).forEach(f=>{const m=i.get(f.id);m&&(m.close(),i.delete(f.id)),this._connectPlaylistSSE(f.id,f.serverJobId),h(f.id),this._startPlaylistPolling(f.id,f.serverJobId)})}};return typeof window<"u"&&setTimeout(()=>j.resumePlaylistJobs(),500),j}const xe=xl();var Sl=me('<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',1),jl=me('<polyline points="20 6 9 17 4 12"></polyline>'),Cl=me('<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',1),Tl=me('<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',1),zl=me('<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',1),El=me('<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',1),Ml=me('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Pl=me('<path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path d="M9 12l2 2 4-4"></path>',1),ql=me('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),$l=T('<span class="queue-item-format svelte-151vo4w"> </span>'),Il=T('<span class="queue-item-timer svelte-151vo4w"> </span>'),Bl=T('<span class="queue-item-timer svelte-151vo4w"> </span>'),Rl=T('<button class="queue-item-download svelte-151vo4w" title="Download"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),Dl=T('<button class="queue-item-retry svelte-151vo4w" title="Retry"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg></button>'),Al=T('<button class="queue-item-retry svelte-151vo4w" title="Start now"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button>'),Fl=T('<button class="queue-item-retry svelte-151vo4w" title="Download now (skip remaining)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),Nl=T('<div class="queue-item-progress svelte-151vo4w"><div class="queue-item-progress-fill svelte-151vo4w"></div></div>'),Ol=T('<div class="queue-item-failed-item svelte-151vo4w"><span class="queue-item-failed-num svelte-151vo4w"> </span> <span> </span></div>'),Ll=T('<div class="queue-item-failed svelte-151vo4w"><div class="queue-item-failed-header svelte-151vo4w"> </div> <!></div>'),Ul=T('<div><div class="queue-item-header svelte-151vo4w"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-151vo4w"><!></svg></div> <div class="queue-item-info svelte-151vo4w"><div class="queue-item-title svelte-151vo4w"> <!> <!></div> <div> </div></div> <div class="queue-item-actions svelte-151vo4w"><!> <!> <!> <button class="queue-item-remove svelte-151vo4w" title="Remove"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div></div> <!> <!></div>');function Vl(e,t){gt(t,!0);let s=Ee(()=>bs.includes(t.item.stage)),n=Ee(()=>t.item.stage==="complete"),i=Ee(()=>t.item.stage==="error"),a=Ee(()=>t.item.stage==="queued"),o=Ee(()=>t.item.stage==="ready"),l=Ee(()=>r(s)&&t.item.progress!==void 0),c=Ee(()=>r(o)?"success":r(s)?"active":r(n)?"success":r(i)?"error":""),h=Ee(()=>{if(!t.item.fileSize)return"";const E=t.item.fileSize/(1024*1024);return E>=1024?`${(E/1024).toFixed(1)} GB`:`${E.toFixed(1)} MB`}),_=Ee(()=>{if(!t.item.startTime||!r(s)&&!r(n))return"";const E=r(n)&&t.item.endTime?t.item.endTime:Date.now(),F=Math.floor((E-t.item.startTime)/1e3),de=Math.floor(F/60);return de>0?`${de}m ${F%60}s`:`${F}s`}),j=Ee(()=>{if(t.item.isPlaylist&&t.item.currentVideo&&t.item.videoCount)return`${t.item.currentVideo}/${t.item.videoCount} - ${t.item.currentVideoTitle||t.item.status}`;let E=t.item.status||"waiting...";if(r(s)&&(t.item.speed||t.item.eta)){const F=[];t.item.speed&&F.push(t.item.speed),t.item.eta&&F.push(`~${t.item.eta} left`),F.length&&(E+=` Â· ${F.join(" Â· ")}`)}return E});var u=Ul();let f;u.__click=()=>{r(o)?xe.downloadReady(t.item.id):r(a)&&xe.startDownload(t.item)};var m=v(u),S=v(m);let w;var k=v(S),z=v(k);{var L=E=>{var F=Sl();g(E,F)},ve=E=>{var F=Se(),de=ae(F);{var fe=ce=>{var De=jl();g(ce,De)},_e=ce=>{var De=Se(),et=ae(De);{var Ve=Oe=>{var vt=Cl();g(Oe,vt)},He=Oe=>{var vt=Se(),Ft=ae(vt);{var nt=ht=>{var St=Tl();g(ht,St)},pt=ht=>{var St=Se(),Nt=ae(St);{var G=re=>{var Ce=zl();g(re,Ce)},ue=re=>{var Ce=Se(),Te=ae(Ce);{var R=C=>{var te=El();g(C,te)},B=C=>{var te=Se(),y=ae(te);{var b=N=>{var oe=Ml();g(N,oe)},$=N=>{var oe=Se(),$e=ae(oe);{var ne=le=>{var Ae=Pl();g(le,Ae)},Re=le=>{var Ae=ql();g(le,Ae)};M($e,le=>{r(s)?le(ne):le(Re,!1)},!0)}g(N,oe)};M(y,N=>{t.item.format==="audio"?N(b):N($,!1)},!0)}g(C,te)};M(Te,C=>{t.item.type==="compress"?C(R):C(B,!1)},!0)}g(re,Ce)};M(Nt,re=>{t.item.type==="convert"?re(G):re(ue,!1)},!0)}g(ht,St)};M(Ft,ht=>{t.item.isPlaylist?ht(nt):ht(pt,!1)},!0)}g(Oe,vt)};M(et,Oe=>{r(i)?Oe(Ve):Oe(He,!1)},!0)}g(ce,De)};M(de,ce=>{r(n)?ce(fe):ce(_e,!1)},!0)}g(E,F)};M(z,E=>{r(o)?E(L):E(ve,!1)})}var ee=p(S,2),ge=v(ee),O=v(ge),Y=p(O);{var ie=E=>{var F=$l(),de=v(F);H(()=>I(de,t.item.formatDisplay)),g(E,F)};M(Y,E=>{t.item.isPlaylist&&t.item.formatDisplay&&E(ie)})}var we=p(Y,2);{var Be=E=>{var F=Il(),de=v(F);H(()=>I(de,r(h))),g(E,F)},qe=E=>{var F=Se(),de=ae(F);{var fe=_e=>{var ce=Bl(),De=v(ce);H(()=>I(De,r(_))),g(_e,ce)};M(de,_e=>{r(_)&&_e(fe)},!0)}g(E,F)};M(we,E=>{r(o)&&r(h)?E(Be):E(qe,!1)})}var J=p(ge,2),Q=v(J),pe=p(ee,2),q=v(pe);{var P=E=>{var F=Rl();F.__click=de=>{de.stopPropagation(),xe.downloadReady(t.item.id)},g(E,F)},A=E=>{var F=Se(),de=ae(F);{var fe=_e=>{var ce=Dl();ce.__click=De=>{De.stopPropagation(),xe.retryDownload(t.item.id)},g(_e,ce)};M(de,_e=>{r(i)&&t.item.url&&_e(fe)},!0)}g(E,F)};M(q,E=>{r(o)?E(P):E(A,!1)})}var U=p(q,2);{var he=E=>{var F=Al();F.__click=de=>{de.stopPropagation(),xe.startDownload(t.item)},g(E,F)};M(U,E=>{r(a)&&E(he)})}var je=p(U,2);{var V=E=>{var F=Fl();F.__click=de=>{de.stopPropagation(),xe.finishPlaylistEarly(t.item.id)},g(E,F)};M(je,E=>{t.item.isPlaylist&&r(s)&&t.item.currentVideo>0&&E(V)})}var W=p(je,2);W.__click=E=>{E.stopPropagation(),xe.remove(t.item.id)};var X=p(m,2);{var Z=E=>{var F=Nl(),de=v(F);H(()=>Br(de,`width: ${(t.item.progress||0)??""}%`)),g(E,F)};M(X,E=>{r(l)&&E(Z)})}var se=p(X,2);{var ye=E=>{var F=Ll(),de=v(F),fe=v(de),_e=p(de,2);Ge(_e,17,()=>t.item.failedVideos,Ke,(ce,De)=>{var et=Ol(),Ve=v(et),He=v(Ve),Oe=p(Ve,2),vt=v(Oe);H(()=>{I(He,`#${r(De).num??""}`),I(vt,`${(r(De).title||"Video")??""} - ${(r(De).reason||"Download failed")??""}`)}),g(ce,et)}),H(()=>I(fe,`failed videos (${(t.item.failedCount||t.item.failedVideos.length)??""})`)),g(E,F)};M(se,E=>{var F;t.item.isPlaylist&&((F=t.item.failedVideos)==null?void 0:F.length)>0&&E(ye)})}H(()=>{f=ke(u,1,"queue-item svelte-151vo4w",null,f,{clickable:r(o)||r(a)}),w=ke(S,1,"queue-item-icon svelte-151vo4w",null,w,{spinning:r(s),ready:r(o)}),I(O,`${t.item.title??""} `),ke(J,1,`queue-item-status ${r(c)??""}`,"svelte-151vo4w"),I(Q,r(j))}),g(e,u),mt()}Et(["click"]);var Hl=T('<button class="queue-clear svelte-i3r5ty">clear all</button>'),Jl=T('<div class="queue-empty svelte-i3r5ty">nothing here yet</div>'),Wl=T('<div class="queue-dropdown-header svelte-i3r5ty"><span class="queue-dropdown-title svelte-i3r5ty">queue</span> <div class="queue-header-actions svelte-i3r5ty"><button class="queue-start-all svelte-i3r5ty" title="Start all queued"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-i3r5ty"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button> <!></div></div> <div class="queue-list svelte-i3r5ty"><!></div>',1);function Ci(e,t){gt(t,!0);const s=()=>At(xe,"$queue",n),[n,i]=rs();let a=Ee(s),o=Ee(()=>r(a).length>0);var l=Wl(),c=ae(l),h=p(v(c),2),_=v(h);_.__click=()=>xe.startAllQueued();var j=p(_,2);{var u=k=>{var z=Hl();z.__click=()=>{xe.clear(),be("Queue cleared","info")},g(k,z)};M(j,k=>{r(o)&&k(u)})}var f=p(c,2),m=v(f);{var S=k=>{var z=Se(),L=ae(z);Ge(L,17,()=>r(a),ve=>ve.id,(ve,ee)=>{Vl(ve,{get item(){return r(ee)}})}),g(k,z)},w=k=>{var z=Jl();g(k,z)};M(m,k=>{r(o)?k(S):k(w,!1)})}g(e,l),mt(),i()}Et(["click"]);var Gl=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-1xkxv2n"></path><polyline points="7 10 12 15 17 10" class="svelte-1xkxv2n"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-1xkxv2n"></line></svg>'),Yl=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="17 1 21 5 17 9" class="svelte-1xkxv2n"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" class="svelte-1xkxv2n"></path><polyline points="7 23 3 19 7 15" class="svelte-1xkxv2n"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" class="svelte-1xkxv2n"></path></svg>'),Ql=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="4 14 10 14 10 20" class="svelte-1xkxv2n"></polyline><polyline points="20 10 14 10 14 4" class="svelte-1xkxv2n"></polyline><line x1="14" y1="10" x2="21" y2="3" class="svelte-1xkxv2n"></line><line x1="3" y1="21" x2="10" y2="14" class="svelte-1xkxv2n"></line></svg>'),Kl=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" class="svelte-1xkxv2n"></path></svg>'),Xl=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><circle cx="12" cy="12" r="3" class="svelte-1xkxv2n"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" class="svelte-1xkxv2n"></path></svg>'),Zl=T('<a><div class="nav-icon svelte-1xkxv2n"><!></div> <span class="nav-label svelte-1xkxv2n"> </span></a>'),ec=T('<span class="nav-badge svelte-1xkxv2n"> </span>'),tc=T('<div class="queue-sheet-overlay svelte-1xkxv2n"></div> <div><div class="sheet-handle svelte-1xkxv2n"></div> <!></div>',1),sc=T('<nav class="bottom-nav svelte-1xkxv2n"><!> <button><div class="nav-icon svelte-1xkxv2n"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><line x1="8" y1="6" x2="21" y2="6" class="svelte-1xkxv2n"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-1xkxv2n"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-1xkxv2n"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-1xkxv2n"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-1xkxv2n"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-1xkxv2n"></line></svg> <!></div> <span class="nav-label svelte-1xkxv2n">queue</span></button></nav> <!>',1);function rc(e,t){gt(t,!0);const s=()=>At(xe,"$queue",i),n=()=>At(en,"$path",i),[i,a]=rs();let o=D(!1),l,c=D(0),h=D(!1),_=0,j=0,u=Ee(s),f=Ee(()=>r(u).length),m=Ee(n),S=Ee(()=>r(u).filter(q=>["starting","downloading","processing","zipping","sending","transcribing"].includes(q.stage)).length);function w(q){q.preventDefault(),q.stopPropagation(),d(o,!r(o)),d(c,0)}function k(){d(o,!1),d(c,0)}function z(q){const P=l;P&&(P.scrollTop>0&&q.target.closest(".queue-sheet")&&!q.target.closest(".sheet-handle")||(_=q.touches[0].clientY,j=Date.now(),d(h,!0)))}function L(q){if(!r(h))return;const P=q.touches[0].clientY-_;P>0?(d(c,P),q.preventDefault()):d(c,0)}function ve(){if(!r(h))return;d(h,!1);const q=r(c)/(Date.now()-j);r(c)>80||q>.5?k():d(c,0)}const ee=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/transcribe",label:"transcribe",icon:"transcribe"},{href:"/settings",label:"settings",icon:"settings"}];var ge=sc();ft("keydown",ar,q=>{q.key==="Escape"&&r(o)&&k()});var O=ae(ge),Y=v(O);Ge(Y,17,()=>ee,Ke,(q,P)=>{var A=Zl();let U;var he=v(A),je=v(he);{var V=se=>{var ye=Gl();g(se,ye)},W=se=>{var ye=Se(),E=ae(ye);{var F=fe=>{var _e=Yl();g(fe,_e)},de=fe=>{var _e=Se(),ce=ae(_e);{var De=Ve=>{var He=Ql();g(Ve,He)},et=Ve=>{var He=Se(),Oe=ae(He);{var vt=nt=>{var pt=Kl();g(nt,pt)},Ft=nt=>{var pt=Se(),ht=ae(pt);{var St=Nt=>{var G=Xl();g(Nt,G)};M(ht,Nt=>{r(P).icon==="settings"&&Nt(St)},!0)}g(nt,pt)};M(Oe,nt=>{r(P).icon==="transcribe"?nt(vt):nt(Ft,!1)},!0)}g(Ve,He)};M(ce,Ve=>{r(P).icon==="compress"?Ve(De):Ve(et,!1)},!0)}g(fe,_e)};M(E,fe=>{r(P).icon==="convert"?fe(F):fe(de,!1)},!0)}g(se,ye)};M(je,se=>{r(P).icon==="download"?se(V):se(W,!1)})}var X=p(he,2),Z=v(X);H(()=>{U=ke(A,1,"bottom-nav-item svelte-1xkxv2n",null,U,{active:r(m)===r(P).href}),xt(A,"href",r(P).href),I(Z,r(P).label)}),g(q,A)});var ie=p(Y,2);let we;ie.__click=w;var Be=v(ie),qe=p(v(Be),2);{var J=q=>{var P=ec(),A=v(P);H(()=>I(A,r(f))),g(q,P)};M(qe,q=>{r(f)>0&&q(J)})}var Q=p(O,2);{var pe=q=>{var P=tc(),A=ae(P);A.__click=k;var U=p(A,2);let he;U.__touchstart=z,U.__touchmove=L,U.__touchend=ve;var je=p(v(U),2);Ci(je,{}),ir(U,V=>l=V,()=>l),H(()=>{he=ke(U,1,"queue-sheet svelte-1xkxv2n",null,he,{swiping:r(h)}),Br(U,r(c)>0?`transform: translateY(${r(c)}px)`:"")}),g(q,P)};M(Q,q=>{r(o)&&q(pe)})}H(()=>we=ke(ie,1,"bottom-nav-item queue-item svelte-1xkxv2n",null,we,{active:r(o),"has-active":r(S)>0})),g(e,ge),mt(),a()}Et(["click","touchstart","touchmove","touchend"]);var nc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),ac=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),ic=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),oc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),lc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>'),cc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),vc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),uc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),dc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),fc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>'),pc=T("<a><!> <span> </span></a>"),hc=T('<div class="nav-dropdown svelte-4b3o1e"></div>'),gc=T('<header class="svelte-4b3o1e"><div class="header-left svelte-4b3o1e"><a href="/" class="logo-link svelte-4b3o1e"><span class="logo-text svelte-4b3o1e">yoink</span> <span class="logo-tld svelte-4b3o1e">.tools</span></a></div> <div class="header-right svelte-4b3o1e"><!> <div class="nav-dropdown-wrapper svelte-4b3o1e"><button class="nav-trigger svelte-4b3o1e"><!> <span> </span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div></div></header>');function mc(e,t){const s=()=>At(en,"$path",n),[n,i]=rs();let a=D(!1);const o=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/transcribe",label:"transcribe",icon:"transcribe"},{href:"/settings",label:"settings",icon:"settings"}];let l=Ee(()=>o.find(O=>O.href===s())||o[0]);var c=gc();ft("click",ar,O=>{O.target.closest(".nav-dropdown-wrapper")||d(a,!1)});var h=p(v(c),2),_=v(h);{var j=O=>{var Y=Se(),ie=ae(Y);gi(ie,()=>t.extraContent),g(O,Y)};M(_,O=>{t.extraContent&&O(j)})}var u=p(_,2),f=v(u);f.__click=()=>d(a,!r(a));var m=v(f);{var S=O=>{var Y=nc();g(O,Y)},w=O=>{var Y=Se(),ie=ae(Y);{var we=qe=>{var J=ac();g(qe,J)},Be=qe=>{var J=Se(),Q=ae(J);{var pe=P=>{var A=ic();g(P,A)},q=P=>{var A=Se(),U=ae(A);{var he=V=>{var W=oc();g(V,W)},je=V=>{var W=Se(),X=ae(W);{var Z=se=>{var ye=lc();g(se,ye)};M(X,se=>{r(l).icon==="settings"&&se(Z)},!0)}g(V,W)};M(U,V=>{r(l).icon==="transcribe"?V(he):V(je,!1)},!0)}g(P,A)};M(Q,P=>{r(l).icon==="compress"?P(pe):P(q,!1)},!0)}g(qe,J)};M(ie,qe=>{r(l).icon==="convert"?qe(we):qe(Be,!1)},!0)}g(O,Y)};M(m,O=>{r(l).icon==="download"?O(S):O(w,!1)})}var k=p(m,2),z=v(k),L=p(k,2);let ve;var ee=p(f,2);{var ge=O=>{var Y=hc();Ge(Y,21,()=>o,Ke,(ie,we)=>{var Be=pc();let qe;Be.__click=()=>d(a,!1);var J=v(Be);{var Q=A=>{var U=cc();g(A,U)},pe=A=>{var U=Se(),he=ae(U);{var je=W=>{var X=vc();g(W,X)},V=W=>{var X=Se(),Z=ae(X);{var se=E=>{var F=uc();g(E,F)},ye=E=>{var F=Se(),de=ae(F);{var fe=ce=>{var De=dc();g(ce,De)},_e=ce=>{var De=Se(),et=ae(De);{var Ve=He=>{var Oe=fc();g(He,Oe)};M(et,He=>{r(we).icon==="settings"&&He(Ve)},!0)}g(ce,De)};M(de,ce=>{r(we).icon==="transcribe"?ce(fe):ce(_e,!1)},!0)}g(E,F)};M(Z,E=>{r(we).icon==="compress"?E(se):E(ye,!1)},!0)}g(W,X)};M(he,W=>{r(we).icon==="convert"?W(je):W(V,!1)},!0)}g(A,U)};M(J,A=>{r(we).icon==="download"?A(Q):A(pe,!1)})}var q=p(J,2),P=v(q);H(()=>{qe=ke(Be,1,"nav-dropdown-item svelte-4b3o1e",null,qe,{active:r(we).href===r(l).href}),xt(Be,"href",r(we).href),I(P,r(we).label)}),g(ie,Be)}),g(O,Y)};M(ee,O=>{r(a)&&O(ge)})}H(()=>{I(z,r(l).label),ve=ke(L,0,"chevron svelte-4b3o1e",null,ve,{open:r(a)})}),g(e,c),i()}Et(["click"]);var _c=T('<footer class="svelte-ww03jg"><div class="footer-left svelte-ww03jg"><div>this is a <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-ww03jg">yt-dlp</a> wrapper</div> <div>inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt</a>, love u wukko</div> <div>youtube powered by <a href="https://patriick.dev/" target="_blank" rel="noopener" class="svelte-ww03jg">patrick</a> at <a href="https://cobalt.meowing.de" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt.meowing.de</a></div> <div class="legal svelte-ww03jg">by using this site you agree to our <a href="/privacy" class="svelte-ww03jg">privacy policy</a></div></div> <div class="footer-right svelte-ww03jg"><a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-ww03jg">github</a> <span>Â·</span> <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-ww03jg">coah80.com</a> <span>Â·</span> <a href="/privacy" class="svelte-ww03jg">privacy</a> <span>Â·</span> <a href="/?updates" class="svelte-ww03jg">updates</a></div></footer>');function wc(e){var t=_c();g(e,t)}var yc=T('<span class="queue-badge svelte-1picwiz"> </span>'),bc=T('<div class="queue-dropdown svelte-1picwiz"><!></div>'),kc=T('<div class="queue-menu svelte-1picwiz"><button class="queue-toggle svelte-1picwiz"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1picwiz"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> queue <!></button> <!></div>');function Dr(e,t){gt(t,!0);const s=()=>At(xe,"$queue",n),[n,i]=rs();let a=D(!1),o,l=Ee(s),c=Ee(()=>r(l).length);function h(k){k.stopPropagation(),d(a,!r(a))}function _(k){o&&!o.contains(k.target)&&d(a,!1)}br(()=>(document.addEventListener("click",_),()=>document.removeEventListener("click",_)));var j=kc(),u=v(j);u.__click=h;var f=p(v(u),2);{var m=k=>{var z=yc(),L=v(z);H(()=>I(L,r(c))),g(k,z)};M(f,k=>{r(c)>0&&k(m)})}var S=p(u,2);{var w=k=>{var z=bc(),L=v(z);Ci(L,{}),g(k,z)};M(S,k=>{r(a)&&k(w)})}ir(j,k=>o=k,()=>o),g(e,j),mt(),i()}Et(["click"]);var xc=T('<div class="spinner svelte-1ea6fjo" role="status" aria-label="Loading"></div>');function Ti(e){var t=xc();g(e,t)}function Hn(e){if(e===0||!Number.isFinite(e)||e<0)return"0 B";const t=1024,s=["B","KB","MB","GB","TB"],n=Math.min(Math.max(Math.floor(Math.log(e)/Math.log(t)),0),s.length-1);return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+s[n]}function ga(e){try{const t=new URL(e);if(t.hostname==="youtu.be"){const s=t.pathname.slice(1).split("?")[0],n=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${s}${n?`&list=${n}`:""}`}if(t.hostname.includes("youtube.com")){if(t.pathname.startsWith("/shorts/"))return`https://www.youtube.com/watch?v=${t.pathname.replace("/shorts/","").split("?")[0]}`;if(t.searchParams.get("v")){const s=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${t.searchParams.get("v")}${s?`&list=${s}`:""}`}if(t.pathname==="/playlist"&&t.searchParams.get("list"))return`https://www.youtube.com/playlist?list=${t.searchParams.get("list")}`}return e}catch{return e}}function ma(e){try{const t=new URL(e).hostname;return t==="youtu.be"||t.includes("youtube.com")}catch{return!1}}function _a(e){try{return new URL(e).searchParams.has("list")}catch{return!1}}function wa(){return Date.now().toString()+Math.random().toString(36).substr(2,9)}const fn="2.0",zi=[{version:"2.0",date:"february 23, 2026",title:"transcription, encryption, and fixes",image:"/updates/v2.png",summary:"yoink can now transcribe your videos and audio files into text, subtitles, or burned-in captions. all files on the server are encrypted at rest, gallery-dl auto-fallback for stuff yt-dlp can't handle, and a ton of fixes across the board.",content:`big update. yoink can now transcribe your videos and audio files, everything on the server is encrypted, and a bunch of stuff got cleaned up.

## transcribe

the biggest new thing. drop a video or audio file and get back a plain text transcript, subtitle file (SRT or ASS), or a version with captions burned right into the video. four model sizes from tiny to medium, auto language detection, and new caption formatting controls so you can set max words per caption, line wrapping, minimum duration, and gaps between captions. works with anything ffmpeg can read.

## encryption

all files on the server are now encrypted at rest using LUKS. the encryption key only lives in RAM, so if the server reboots, everything is gone. temp files are processed in encrypted storage and cleaned up after. the server also sanitizes all logs now, no URLs, filenames, or IPs are stored anywhere.

## gallery-dl fallback

when yt-dlp can't handle something (like image-only tweets), yoink now automatically falls back to gallery-dl. you don't have to do anything different, it just works.

## queue improvements

downloads now process one at a time instead of all at once, which is way more reliable. convert and compress jobs show up in the queue now too. playlists resume from where they left off if you retry after an error instead of starting over from scratch.

## other stuff

- switched from hash routing to clean URLs (/convert instead of #/convert)
- disk space checks before starting any job
- job limits so the server doesn't get overwhelmed
- rewrote the privacy page in plain english
- a bunch of bug fixes and cleanup`}];var Sc=T("<p> </p>"),jc=T('<button class="clear-btn svelte-et6md" type="button" title="Clear"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button>'),Cc=T('<button class="paste-btn svelte-et6md" type="button" title="Paste from clipboard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" class="svelte-et6md"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" class="svelte-et6md"></path></svg></button>'),Tc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" class="svelte-et6md"></polygon></svg>'),zc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" class="svelte-et6md"></rect><line x1="7" y1="2" x2="7" y2="22" class="svelte-et6md"></line><line x1="17" y1="2" x2="17" y2="22" class="svelte-et6md"></line><line x1="2" y1="12" x2="22" y2="12" class="svelte-et6md"></line><line x1="2" y1="7" x2="7" y2="7" class="svelte-et6md"></line><line x1="2" y1="17" x2="7" y2="17" class="svelte-et6md"></line><line x1="17" y1="17" x2="22" y2="17" class="svelte-et6md"></line><line x1="17" y1="7" x2="22" y2="7" class="svelte-et6md"></line></svg>'),Ec=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M9 18V5l12-2v13" class="svelte-et6md"></path><circle cx="6" cy="18" r="3" class="svelte-et6md"></circle><circle cx="18" cy="16" r="3" class="svelte-et6md"></circle></svg>'),Mc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" class="svelte-et6md"></rect><circle cx="8.5" cy="8.5" r="1.5" class="svelte-et6md"></circle><polyline points="21 15 16 10 5 21" class="svelte-et6md"></polyline></svg>'),Pc=T('<button><!> <span class="svelte-et6md"> </span></button>'),qc=T('<div class="yoink-dropdown svelte-et6md"><button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button> <button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> batch add urls</button></div>'),$c=T("<div><!> </div>"),Ic=T('<div class="modal-overlay svelte-et6md"><div class="modal svelte-et6md"><div class="modal-title svelte-et6md">playlist detected!</div> <div class="modal-subtitle svelte-et6md">do you want to download just this video, or the whole playlist?</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="5 3 19 12 5 21 5 3" class="svelte-et6md"></polygon></svg> video</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> playlist</button></div> <label class="modal-toggle svelte-et6md"><input type="checkbox" class="svelte-et6md"/> <span class="modal-toggle-switch svelte-et6md"></span> <span class="modal-toggle-label svelte-et6md">remember this choice</span></label> <div class="modal-hint svelte-et6md">this can be changed in <a href="/settings" class="svelte-et6md">settings</a>!</div></div></div>'),Bc=T('<div class="modal-overlay svelte-et6md"><div class="modal batch-modal svelte-et6md"><div class="modal-title svelte-et6md">batch add urls</div> <div class="modal-subtitle svelte-et6md">paste multiple URLs, one per line</div> <textarea class="batch-textarea svelte-et6md"></textarea> <div class="batch-count svelte-et6md"><span class="svelte-et6md"> </span> urls detected</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md">cancel</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button></div></div></div>'),Rc=T('<h3 class="svelte-et6md"> </h3>'),Dc=T('<li class="svelte-et6md"> </li>'),Ac=T('<ul class="svelte-et6md"></ul>'),Fc=T('<p class="svelte-et6md"> </p>'),Nc=T('<article class="update-card svelte-et6md"><div class="update-meta svelte-et6md"><span class="update-version svelte-et6md"> </span> <span class="update-date svelte-et6md"> </span></div> <h2 class="update-title svelte-et6md"> </h2> <img class="update-image svelte-et6md"/> <div class="update-content svelte-et6md"></div></article>'),Oc=T('<div role="dialog" aria-modal="true" aria-label="Updates"><div class="updates-scroll svelte-et6md"><div class="updates-header svelte-et6md"><span class="updates-pill svelte-et6md">updates</span> <button class="updates-close svelte-et6md" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button></div> <!></div></div>'),Lc=T('<!> <main class="svelte-et6md"><div class="branding svelte-et6md"><h1 class="svelte-et6md">yoink<span class="brand-tld svelte-et6md">.tools</span></h1> <!></div> <div class="input-container svelte-et6md"><div class="url-input-wrapper svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" class="svelte-et6md"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" class="svelte-et6md"></path></svg> <input type="text" class="url-input svelte-et6md" placeholder="paste the link here..." autocomplete="off" spellcheck="false"/> <!></div> <div class="format-section svelte-et6md"><div class="segmented-control svelte-et6md"></div> <div><button class="yoink-btn svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-et6md"></path><polyline points="7 10 12 15 17 10" class="svelte-et6md"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-et6md"></line></svg> </button> <button class="yoink-dropdown-toggle svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polyline points="6 9 12 15 18 9" class="svelte-et6md"></polyline></svg></button> <!></div></div> <!></div></main> <!> <!> <!> <!>',1);function Uc(e,t){gt(t,!0);const s=()=>At($s,"$settings",i),n=()=>At(ki,"$query",i),[i,a]=rs();let o=D(""),l=D("auto"),c=D(!1),h=D(null),_=D(""),j=D(!1),u=D(!1),f=D(!1),m=D(""),S=D(null),w=D(null),k,z=Ee(()=>r(m).split(`
`).filter(y=>{const b=y.trim();if(!b)return!1;try{return new URL(b),!0}catch{return!1}}).length);const L=[{id:"auto",label:"auto",icon:"bolt"},{id:"video",label:"video",icon:"video"},{id:"audio",label:"audio",icon:"audio"},{id:"images",label:"images",icon:"image"}];function ve(){d(w,pa[Math.floor(Math.random()*pa.length)],!0)}function ee(){var y;(y=r(w))!=null&&y.link&&window.open(r(w).link,"_blank")}function ge(){let y=null;try{const b=localStorage.getItem("yoink_shared_url");if(b){const $=JSON.parse(b);Date.now()-$.timestamp<300*1e3&&(y=$.url),localStorage.removeItem("yoink_shared_url")}}catch{localStorage.removeItem("yoink_shared_url")}if(!y&&window.location.pathname==="/share"){const b=new URLSearchParams(window.location.search),N=(b.get("url")||b.get("text")||"").match(/https?:\/\/[^\s]+/);N&&(y=N[0].replace(/[.,!?;:)\]}>]+$/,"")),history.replaceState(null,"","/")}y&&(d(o,y,!0),setTimeout(()=>Q(),150))}lr(()=>{ve(),ge()});async function O(){try{const y=await navigator.clipboard.readText();y&&(d(o,y.trim(),!0),k==null||k.focus())}catch{be("Could not read clipboard","error")}}function Y(y,b){d(h,y,!0),d(_,b,!0)}function ie(){d(h,null),d(_,"")}function we(){return new Promise(y=>{d(S,y,!0),d(j,!0)})}function Be(y,b){b&&$s.setSetting("playlistPreference",y),r(S)&&r(S)(y),d(S,null),d(j,!1)}function qe(){r(S)&&r(S)(null),d(S,null),d(j,!1)}async function J(y,b=!1){const $=ga(y),N=r(l)==="auto"?"video":r(l);let oe=N;if(N==="images"&&ma($))return be("YouTube doesn't support image downloads","error"),null;const $e=wa(),ne=s();let Re=!1;if(N!=="images"&&_a($))if(ne.playlistPreference==="video")Re=!1;else if(ne.playlistPreference==="playlist")Re=!0;else{const K=await we();if(K===null)return null;Re=K==="playlist"}let le="Loading...";try{if(N==="images"){const K=await fetch(`${Fe()}/api/gallery/metadata?url=${encodeURIComponent($)}`),Je=K.headers.get("content-type");K.ok&&(Je!=null&&Je.includes("application/json"))?le=(await K.json()).title||"Gallery":le=$.substring(0,50)}else{const K=await fetch(`${Fe()}/api/metadata?url=${encodeURIComponent($)}&playlist=${Re}`),Je=K.headers.get("content-type");if(K.ok&&(Je!=null&&Je.includes("application/json"))){const We=await K.json();if(le=We.title||"Unknown",We.isGallery===!0&&(oe="images"),We.usingCookies&&be("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3),We.clipNote){const Le=We.clipNote.toLowerCase().includes("warning")||We.originalDuration>600;be(We.clipNote,Le?"warning":"info",6e3)}}else if(!K.ok&&(Je!=null&&Je.includes("application/json"))){const We=await K.json();if(We.clipUnsupported)return be("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),null;throw new Error(We.error||"Metadata fetch failed")}else le=$.substring(0,50)}}catch{le=$.substring(0,50)}const Ae={id:$e,title:le,url:$,format:oe,stage:b?"starting":"queued",status:b?"initializing...":"in queue",progress:0,isPlaylist:Re,formatDisplay:oe==="images"?"images":oe==="audio"?ne.audioFormat:`${ne.quality} ${ne.container}`,startTime:b?Date.now():null,failedVideos:[]};return xe.add(Ae),b&&xe.startDownload(Ae),Ae}async function Q(){const y=r(o).trim();if(!y){be("Please enter a URL","error");return}const b=ga(y);try{new URL(b)}catch{be("Please enter a valid URL","error");return}if(wl(b)&&d(w,{text:"okay dude are you just gonna download porn"},!0),r(l)==="images"&&ma(b)){be("YouTube doesn't support image downloads â use video or audio","error");return}d(c,!0);const $=r(l)==="auto"?"video":r(l),N=s();let oe=!1;if($!=="images"&&_a(b))if(N.playlistPreference==="video")oe=!1;else if(N.playlistPreference==="playlist")oe=!0;else{const ne=await we();if(ne===null){d(c,!1);return}oe=ne==="playlist"}const $e=wa();try{Y("loading",$==="images"?"fetching gallery info...":"fetching video info...");let ne;if($==="images"){const Le=await fetch(`${Fe()}/api/gallery/metadata?url=${encodeURIComponent(b)}`),Qe=Le.headers.get("content-type");if(!Le.ok){let Ye="Failed to fetch gallery info";if(Qe!=null&&Qe.includes("application/json"))Ye=(await Le.json()).error||Ye;else{const ut=await Le.text();Ye=ut.includes("Cloudflare")||ut.includes("403")?"Access denied (VPN blocked?)":`Server error: ${Le.status}`}throw new Error(Ye)}ne=await Le.json(),ne.title=ne.title||"Gallery"}else{const Le=await fetch(`${Fe()}/api/metadata?url=${encodeURIComponent(b)}&playlist=${oe}`),Qe=Le.headers.get("content-type");if(!Le.ok){let Ye="Failed to fetch metadata";if(Qe!=null&&Qe.includes("application/json")){const ut=await Le.json();if(ut.clipUnsupported){Y("error","Could not parse YouTube clip"),be("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),d(c,!1);return}Ye=ut.error||Ye}else{const ut=await Le.text();Ye=`Server error ${Le.status} (likely VPN blocked)`}throw new Error(Ye)}ne=await Le.json()}const Re=ne.title,le=ne.isPlaylist&&oe,Ae=$==="images"||ne.isGallery===!0,K=ne.isGallery===!0?"images":$,Je=ne.videoCount||ne.imageCount||0;ne.usingCookies&&be("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3);const We={id:$e,title:Re,url:b,format:K,stage:"starting",status:"initializing...",progress:0,isPlaylist:le,isGallery:Ae,videoCount:Je,currentVideo:0,currentVideoTitle:"",formatDisplay:Ae?"images":K==="audio"?N.audioFormat:`${N.quality} ${N.container}`,failedVideos:[],startTime:Date.now()};xe.add(We),xe.startDownload(We),d(o,""),ie()}catch(ne){Y("error",ne.message||"Download failed"),be(ne.message||"Download failed","error")}finally{d(c,!1)}}function pe(y){y.key==="Enter"&&Q()}async function q(){d(f,!1);const y=r(o).trim();if(!y){be("Please enter a URL","error");return}try{new URL(y)}catch{be("Please enter a valid URL","error");return}await J(y),d(o,"")}function P(){d(f,!1),d(m,""),d(u,!0)}async function A(){const y=r(m).split(`
`).map(b=>b.trim()).filter(b=>{try{return new URL(b),!0}catch{return!1}});if(y.length===0){be("No valid URLs found","error");return}d(u,!1),be(`Adding ${y.length} URLs to queue...`,"info");for(const b of y)await J(b,!1);be(`${y.length} items added to queue`,"success")}let U=D(!1),he=Ee(()=>"updates"in n()),je=D(!1),V=D(!1),W=null;br(()=>{r(he)&&(d(je,!0),d(V,!1),W&&(clearTimeout(W),W=null))});function X(){r(V)||(d(V,!0),Rr("/"),W=setTimeout(()=>{d(je,!1),d(V,!1),W=null},350))}var Z=Lc();ft("click",ar,y=>{y.target.closest(".yoink-btn-wrapper")||d(f,!1)});var se=ae(Z);mc(se,{extraContent:b=>{Dr(b,{})}});var ye=p(se,2),E=v(ye),F=p(v(E),2);{var de=y=>{var b=Sc();let $;b.__click=ee;var N=v(b);H(oe=>{$=ke(b,1,"splash svelte-et6md",null,$,oe),Br(b,r(w).link?"cursor: pointer;":""),I(N,r(w).text)},[()=>{var oe,$e,ne;return{fancy:(oe=r(w).classes)==null?void 0:oe.includes("fancy"),clickable:($e=r(w).classes)==null?void 0:$e.includes("clickable"),rainbow:(ne=r(w).classes)==null?void 0:ne.includes("rainbow")}}]),g(y,b)};M(F,y=>{r(w)&&y(de)})}var fe=p(E,2),_e=v(fe),ce=p(v(_e),2);ce.__keydown=pe,ir(ce,y=>k=y,()=>k);var De=p(ce,2);{var et=y=>{var b=jc();b.__click=()=>{d(o,""),k==null||k.focus()},g(y,b)},Ve=y=>{var b=Cc();b.__click=O,g(y,b)};M(De,y=>{r(o)?y(et):y(Ve,!1)})}var He=p(_e,2),Oe=v(He);Ge(Oe,21,()=>L,Ke,(y,b)=>{var $=Pc();let N;$.__click=()=>d(l,r(b).id,!0);var oe=v($);{var $e=Ae=>{var K=Tc();g(Ae,K)},ne=Ae=>{var K=Se(),Je=ae(K);{var We=Qe=>{var Ye=zc();g(Qe,Ye)},Le=Qe=>{var Ye=Se(),ut=ae(Ye);{var Mt=jt=>{var at=Ec();g(jt,at)},tt=jt=>{var at=Se(),Ue=ae(at);{var vr=ur=>{var rn=Mc();g(ur,rn)};M(Ue,ur=>{r(b).icon==="image"&&ur(vr)},!0)}g(jt,at)};M(ut,jt=>{r(b).icon==="audio"?jt(Mt):jt(tt,!1)},!0)}g(Qe,Ye)};M(Je,Qe=>{r(b).icon==="video"?Qe(We):Qe(Le,!1)},!0)}g(Ae,K)};M(oe,Ae=>{r(b).icon==="bolt"?Ae($e):Ae(ne,!1)})}var Re=p(oe,2),le=v(Re);H(()=>{N=ke($,1,"segment svelte-et6md",null,N,{active:r(l)===r(b).id}),I(le,r(b).label)}),g(y,$)});var vt=p(Oe,2);let Ft;var nt=v(vt);nt.__click=Q;var pt=p(v(nt)),ht=p(nt,2);ht.__click=y=>{y.stopPropagation(),d(f,!r(f))};var St=p(ht,2);{var Nt=y=>{var b=qc(),$=v(b);$.__click=q;var N=p($,2);N.__click=P,g(y,b)};M(St,y=>{r(f)&&y(Nt)})}var G=p(He,2);{var ue=y=>{var b=$c(),$=v(b);{var N=$e=>{Ti($e)};M($,$e=>{r(h)==="loading"&&$e(N)})}var oe=p($);H(()=>{ke(b,1,`status ${r(h)??""}`,"svelte-et6md"),I(oe,` ${r(_)??""}`)}),g(y,b)};M(G,y=>{r(h)&&y(ue)})}var re=p(ye,2);wc(re);var Ce=p(re,2);{var Te=y=>{var b=Ic();b.__click=le=>{le.target===le.currentTarget&&qe()};var $=v(b),N=p(v($),4),oe=v(N);oe.__click=()=>Be("video",r(U));var $e=p(oe,2);$e.__click=()=>Be("playlist",r(U));var ne=p(N,2),Re=v(ne);wi(Re,()=>r(U),le=>d(U,le)),g(y,b)};M(Ce,y=>{r(j)&&y(Te)})}var R=p(Ce,2);{var B=y=>{var b=Bc();b.__click=K=>{K.target===K.currentTarget&&d(u,!1)};var $=v(b),N=p(v($),4);xt(N,"placeholder",`https://youtube.com/watch?v=...
https://youtube.com/watch?v=...
https://youtube.com/watch?v=...`);var oe=p(N,2),$e=v(oe),ne=v($e),Re=p(oe,2),le=v(Re);le.__click=()=>d(u,!1);var Ae=p(le,2);Ae.__click=A,H(()=>I(ne,r(z))),Hs(N,()=>r(m),K=>d(m,K)),g(y,b)};M(R,y=>{r(u)&&y(B)})}var C=p(R,2);{var te=y=>{var b=Oc();let $;b.__click=Re=>{Re.target===Re.currentTarget&&X()},b.__keydown=Re=>{Re.key==="Escape"&&X()};var N=v(b),oe=v(N),$e=p(v(oe),2);$e.__click=X;var ne=p(oe,2);Ge(ne,17,()=>zi,Ke,(Re,le)=>{var Ae=Nc(),K=v(Ae),Je=v(K),We=v(Je),Le=p(Je,2),Qe=v(Le),Ye=p(K,2),ut=v(Ye),Mt=p(Ye,2),tt=p(Mt,2);Ge(tt,21,()=>r(le).content.split(`

`),Ke,(jt,at)=>{var Ue=Se(),vr=ae(Ue);{var ur=Ns=>{var dr=Rc(),nn=v(dr);H(an=>I(nn,an),[()=>r(at).replace("## ","")]),g(Ns,dr)},rn=Ns=>{var dr=Se(),nn=ae(dr);{var an=Os=>{var fr=Ac();Ge(fr,21,()=>r(at).split(`
`),Ke,(on,Yn)=>{var Qn=Se(),Mi=ae(Qn);{var Pi=ln=>{var Kn=Dc(),qi=v(Kn);H($i=>I(qi,$i),[()=>r(Yn).replace("- ","")]),g(ln,Kn)};M(Mi,ln=>{r(Yn).startsWith("- ")&&ln(Pi)})}g(on,Qn)}),g(Os,fr)},Ei=Os=>{var fr=Fc(),on=v(fr);H(()=>I(on,r(at))),g(Os,fr)};M(nn,Os=>{r(at).startsWith("- ")?Os(an):Os(Ei,!1)},!0)}g(Ns,dr)};M(vr,Ns=>{r(at).startsWith("## ")?Ns(ur):Ns(rn,!1)})}g(jt,Ue)}),H(()=>{I(We,r(le).version),I(Qe,r(le).date),I(ut,r(le).title),xt(Mt,"src",r(le).image),xt(Mt,"alt",r(le).title)}),g(Re,Ae)}),H(()=>$=ke(b,1,"updates-overlay svelte-et6md",null,$,{closing:r(V)})),g(y,b)};M(C,y=>{r(je)&&y(te)})}H(()=>{Ft=ke(vt,1,"yoink-btn-wrapper svelte-et6md",null,Ft,{open:r(f)}),nt.disabled=r(c),I(pt,` ${r(c)?"loading...":"yoink"}`)}),ft("focus",ce,ie),Hs(ce,()=>r(o),y=>d(o,y)),g(e,Z),mt(),a()}Et(["click","keydown"]);var Vc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),Hc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),Jc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),Wc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),Gc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>'),Yc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),Qc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),Kc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),Xc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),Zc=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>'),ev=T("<a><!> <span> </span></a>"),tv=T('<div class="nav-dropdown svelte-67r2h0"></div>'),sv=T('<header class="svelte-67r2h0"><div class="header-center svelte-67r2h0"><a href="/" class="logo-link svelte-67r2h0"><span class="logo-text svelte-67r2h0">yoink</span> <span class="logo-tld svelte-67r2h0">.tools</span></a></div> <div class="header-right svelte-67r2h0"><!> <div class="nav-dropdown-wrapper svelte-67r2h0"><button class="nav-trigger svelte-67r2h0"><!> <span> </span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div></div></header>');function cr(e,t){const s=()=>At(en,"$path",n),[n,i]=rs();let a=D(!1);const o=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/transcribe",label:"transcribe",icon:"transcribe"},{href:"/settings",label:"settings",icon:"settings"}];let l=Ee(()=>o.find(O=>O.href===s())||o[0]);var c=sv();ft("click",ar,O=>{O.target.closest(".nav-dropdown-wrapper")||d(a,!1)});var h=p(v(c),2),_=v(h);{var j=O=>{var Y=Se(),ie=ae(Y);gi(ie,()=>t.extraContent),g(O,Y)};M(_,O=>{t.extraContent&&O(j)})}var u=p(_,2),f=v(u);f.__click=()=>d(a,!r(a));var m=v(f);{var S=O=>{var Y=Vc();g(O,Y)},w=O=>{var Y=Se(),ie=ae(Y);{var we=qe=>{var J=Hc();g(qe,J)},Be=qe=>{var J=Se(),Q=ae(J);{var pe=P=>{var A=Jc();g(P,A)},q=P=>{var A=Se(),U=ae(A);{var he=V=>{var W=Wc();g(V,W)},je=V=>{var W=Se(),X=ae(W);{var Z=se=>{var ye=Gc();g(se,ye)};M(X,se=>{r(l).icon==="settings"&&se(Z)},!0)}g(V,W)};M(U,V=>{r(l).icon==="transcribe"?V(he):V(je,!1)},!0)}g(P,A)};M(Q,P=>{r(l).icon==="compress"?P(pe):P(q,!1)},!0)}g(qe,J)};M(ie,qe=>{r(l).icon==="convert"?qe(we):qe(Be,!1)},!0)}g(O,Y)};M(m,O=>{r(l).icon==="download"?O(S):O(w,!1)})}var k=p(m,2),z=v(k),L=p(k,2);let ve;var ee=p(f,2);{var ge=O=>{var Y=tv();Ge(Y,21,()=>o,Ke,(ie,we)=>{var Be=ev();let qe;Be.__click=()=>d(a,!1);var J=v(Be);{var Q=A=>{var U=Yc();g(A,U)},pe=A=>{var U=Se(),he=ae(U);{var je=W=>{var X=Qc();g(W,X)},V=W=>{var X=Se(),Z=ae(X);{var se=E=>{var F=Kc();g(E,F)},ye=E=>{var F=Se(),de=ae(F);{var fe=ce=>{var De=Xc();g(ce,De)},_e=ce=>{var De=Se(),et=ae(De);{var Ve=He=>{var Oe=Zc();g(He,Oe)};M(et,He=>{r(we).icon==="settings"&&He(Ve)},!0)}g(ce,De)};M(de,ce=>{r(we).icon==="transcribe"?ce(fe):ce(_e,!1)},!0)}g(E,F)};M(Z,E=>{r(we).icon==="compress"?E(se):E(ye,!1)},!0)}g(W,X)};M(he,W=>{r(we).icon==="convert"?W(je):W(V,!1)},!0)}g(A,U)};M(J,A=>{r(we).icon==="download"?A(Q):A(pe,!1)})}var q=p(J,2),P=v(q);H(()=>{qe=ke(Be,1,"nav-dropdown-item svelte-67r2h0",null,qe,{active:r(we).href===r(l).href}),xt(Be,"href",r(we).href),I(P,r(we).label)}),g(ie,Be)}),g(O,Y)};M(ee,O=>{r(a)&&O(ge)})}H(()=>{I(z,r(l).label),ve=ke(L,0,"chevron svelte-67r2h0",null,ve,{open:r(a)})}),g(e,c),i()}Et(["click"]);var rv=T('<footer class="svelte-1dij6pu"><a href="/" class="svelte-1dij6pu">yoink.tools</a> - powered by <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-1dij6pu">yt-dlp</a> Â· <a href="/privacy" class="svelte-1dij6pu">privacy</a></footer>');function Ar(e){var t=rv();g(e,t)}var nv=T("<button><span> </span></button>"),av=T("<button> </button>"),iv=T("<button> </button>"),ov=T("<button> </button>"),lv=T(`<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">video</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">video quality</div> <div class="quality-grid svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">if preferred quality isn't available, the next best option will be used. 1080p is recommended for most uses.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">preferred codec</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">h264: best compatibility, max 1080p. av1: best quality & efficiency, supports 8k & HDR. vp9: same quality as av1 but ~2x larger.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">file container</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp4 has the best compatibility. webm is great for web. mkv supports more features but has limited playback support.</p></div></section>`),cv=T("<button> </button>"),vv=T("<button> </button>"),uv=T('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">audio</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio format</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp3: universal compatibility. m4a: better quality at same size. opus: best compression. flac/wav: lossless quality.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio bitrate</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">higher bitrate = better quality but larger file size. 320kbps is CD-quality for most people.</p></div></section>'),dv=T("<button> </button>"),fv=T("<button> </button>"),pv=T('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">downloads</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">filename style</div> <div class="segmented-control svelte-1ozf5k3"></div> <div class="filename-preview svelte-1ozf5k3"><code class="svelte-1ozf5k3"> </code></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">twitter/x gifs as gif</div> <p class="setting-description svelte-1ozf5k3">automatically convert twitter/x "gifs" (which are actually videos) to real gif files. turn off to keep them as mp4.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">playlist behavior</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">when a link contains a playlist, should we download just the video or the entire playlist? "ask me" will show a popup each time.</p></div></section>'),hv=T('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">advanced</h2> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">allow h265 codec</div> <p class="setting-description svelte-1ozf5k3">enables downloading h265/HEVC videos for platforms like TikTok. higher quality but may have compatibility issues with some players.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">embed metadata</div> <p class="setting-description svelte-1ozf5k3">include title, artist, and other metadata in downloaded files.</p></div> <button></button></div></div> <div class="divider svelte-1ozf5k3"></div> <button class="reset-btn svelte-1ozf5k3">reset all settings</button></section>'),gv=T('<!> <main class="svelte-1ozf5k3"><div class="page-header svelte-1ozf5k3"><h1 class="svelte-1ozf5k3">settings</h1> <p class="svelte-1ozf5k3">customize your download experience</p></div> <nav class="settings-nav svelte-1ozf5k3"></nav> <!> <!> <!> <!></main> <!>',1);function mv(e,t){gt(t,!0);const s=()=>At($s,"$settings",n),[n,i]=rs();let a=D("video"),o=Ee(s);const l=[{id:"video",label:"video"},{id:"audio",label:"audio"},{id:"downloads",label:"downloads"},{id:"advanced",label:"advanced"}],c=["best","4k","1440p","1080p","720p","480p","360p"],h={best:"8k+","4k":"4k","1440p":"1440p","1080p":"1080p","720p":"720p","480p":"480p","360p":"360p"},_=[{value:"h264",label:"h264 + aac"},{value:"av1",label:"av1 + opus"},{value:"vp9",label:"vp9 + opus"}],j=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mkv",label:"mkv"}],u=[{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"opus",label:"opus"},{value:"flac",label:"flac"},{value:"wav",label:"wav"}],f=[{value:"320",label:"320 kbps"},{value:"256",label:"256 kbps"},{value:"192",label:"192 kbps"},{value:"128",label:"128 kbps"}],m=[{value:"classic",label:"classic"},{value:"basic",label:"basic"},{value:"pretty",label:"pretty"},{value:"nerdy",label:"nerdy"}],S=[{value:"ask",label:"ask me"},{value:"video",label:"just video"},{value:"playlist",label:"full playlist"}];let w=Ee(()=>{const q=r(o).container||"mp4",P={classic:`Video Title (${r(o).quality}).${q}`,basic:`Video Title.${q}`,pretty:`Video Title - Author (${r(o).quality}, ${r(o).codec}).${q}`,nerdy:`Video_Title_${r(o).quality}_${r(o).codec}_aac.${q}`};return P[r(o).filenameStyle]||P.basic});function k(q,P){$s.setSetting(q,P)}function z(){confirm("Reset all settings to defaults?")&&($s.reset(),be("Settings reset!","success"))}var L=gv(),ve=ae(L);cr(ve,{extraContent:P=>{Dr(P,{})}});var ee=p(ve,2),ge=p(v(ee),2);Ge(ge,21,()=>l,Ke,(q,P)=>{var A=nv();let U;A.__click=()=>d(a,r(P).id,!0);var he=v(A),je=v(he);H(()=>{U=ke(A,1,"settings-nav-item svelte-1ozf5k3",null,U,{active:r(a)===r(P).id}),I(je,r(P).label)}),g(q,A)});var O=p(ge,2);{var Y=q=>{var P=lv(),A=p(v(P),2),U=p(v(A),2);Ge(U,21,()=>c,Ke,(X,Z)=>{var se=av();let ye;se.__click=()=>k("quality",r(Z));var E=v(se);H(()=>{ye=ke(se,1,"quality-option svelte-1ozf5k3",null,ye,{active:r(o).quality===r(Z)}),I(E,h[r(Z)])}),g(X,se)});var he=p(A,2),je=p(v(he),2);Ge(je,21,()=>_,Ke,(X,Z)=>{var se=iv();let ye;se.__click=()=>k("codec",r(Z).value);var E=v(se);H(()=>{ye=ke(se,1,"segment svelte-1ozf5k3",null,ye,{active:r(o).codec===r(Z).value}),I(E,r(Z).label)}),g(X,se)});var V=p(he,2),W=p(v(V),2);Ge(W,21,()=>j,Ke,(X,Z)=>{var se=ov();let ye;se.__click=()=>k("container",r(Z).value);var E=v(se);H(()=>{ye=ke(se,1,"segment svelte-1ozf5k3",null,ye,{active:r(o).container===r(Z).value}),I(E,r(Z).label)}),g(X,se)}),g(q,P)};M(O,q=>{r(a)==="video"&&q(Y)})}var ie=p(O,2);{var we=q=>{var P=uv(),A=p(v(P),2),U=p(v(A),2);Ge(U,21,()=>u,Ke,(V,W)=>{var X=cv();let Z;X.__click=()=>k("audioFormat",r(W).value);var se=v(X);H(()=>{Z=ke(X,1,"segment svelte-1ozf5k3",null,Z,{active:r(o).audioFormat===r(W).value}),I(se,r(W).label)}),g(V,X)});var he=p(A,2),je=p(v(he),2);Ge(je,21,()=>f,Ke,(V,W)=>{var X=vv();let Z;X.__click=()=>k("audioBitrate",r(W).value);var se=v(X);H(()=>{Z=ke(X,1,"segment svelte-1ozf5k3",null,Z,{active:r(o).audioBitrate===r(W).value}),I(se,r(W).label)}),g(V,X)}),g(q,P)};M(ie,q=>{r(a)==="audio"&&q(we)})}var Be=p(ie,2);{var qe=q=>{var P=pv(),A=p(v(P),2),U=p(v(A),2);Ge(U,21,()=>m,Ke,(F,de)=>{var fe=dv();let _e;fe.__click=()=>k("filenameStyle",r(de).value);var ce=v(fe);H(()=>{_e=ke(fe,1,"segment svelte-1ozf5k3",null,_e,{active:r(o).filenameStyle===r(de).value}),I(ce,r(de).label)}),g(F,fe)});var he=p(U,2),je=v(he),V=v(je),W=p(A,2),X=v(W),Z=p(v(X),2);let se;Z.__click=()=>k("twitterGifs",!(!r(o).twitterGifs||r(o).twitterGifs===void 0));var ye=p(W,2),E=p(v(ye),2);Ge(E,21,()=>S,Ke,(F,de)=>{var fe=fv();let _e;fe.__click=()=>k("playlistPreference",r(de).value==="ask"?null:r(de).value);var ce=v(fe);H(()=>{_e=ke(fe,1,"segment svelte-1ozf5k3",null,_e,{active:(r(o).playlistPreference===null?"ask":r(o).playlistPreference)===r(de).value}),I(ce,r(de).label)}),g(F,fe)}),H(()=>{I(V,r(w)),se=ke(Z,1,"toggle svelte-1ozf5k3",null,se,{active:r(o).twitterGifs!==!1})}),g(q,P)};M(Be,q=>{r(a)==="downloads"&&q(qe)})}var J=p(Be,2);{var Q=q=>{var P=hv(),A=p(v(P),2),U=v(A),he=p(v(U),2);let je;he.__click=()=>k("h265",!r(o).h265);var V=p(A,2),W=v(V),X=p(v(W),2);let Z;X.__click=()=>k("metadata",r(o).metadata===!1);var se=p(V,4);se.__click=z,H(()=>{je=ke(he,1,"toggle svelte-1ozf5k3",null,je,{active:r(o).h265}),Z=ke(X,1,"toggle svelte-1ozf5k3",null,Z,{active:r(o).metadata!==!1})}),g(q,P)};M(J,q=>{r(a)==="advanced"&&q(Q)})}var pe=p(ee,2);Ar(pe),g(e,L),mt(),i()}Et(["click"]);var _v=T('<span class="progress-label svelte-1untuf7"> </span>'),wv=T('<div class="progress-wrapper svelte-1untuf7"><!> <div class="progress-track svelte-1untuf7" role="progressbar"><div class="progress-fill svelte-1untuf7"></div></div></div>');function Jn(e,t){let s=En(t,"percent",3,0),n=En(t,"label",3,""),i=Ee(()=>Math.min(100,Math.max(0,s())));var a=wv(),o=v(a);{var l=_=>{var j=_v(),u=v(j);H(()=>I(u,n())),g(_,j)};M(o,_=>{n()&&_(l)})}var c=p(o,2);xt(c,"aria-valuemin",0),xt(c,"aria-valuemax",100);var h=v(c);H(()=>{xt(c,"aria-valuenow",r(i)),Br(h,`width: ${r(i)??""}%`)}),g(e,a)}const pn=50*1024*1024;async function Wn(e,t){const s=Fe(),n=Math.ceil(e.size/pn),i=await fetch(`${s}/api/upload/init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e.name,fileSize:e.size,totalChunks:n})});if(!i.ok){let l="Failed to initialize upload";try{l=(await i.json()).error||l}catch{l=await i.text().catch(()=>l)}throw new Error(l)}const{uploadId:a}=await i.json();for(let l=0;l<n;l++){const c=l*pn,h=Math.min(c+pn,e.size),_=e.slice(c,h),j=new FormData;j.append("chunk",_);const u=await fetch(`${s}/api/upload/chunk/${a}/${l}`,{method:"POST",body:j});if(!u.ok){let m=`Failed to upload chunk ${l+1}`;try{m=(await u.json()).error||m}catch{m=await u.text().catch(()=>m)}throw new Error(m)}const f=(l+1)/n*100;t(f)}const o=await fetch(`${s}/api/upload/complete/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!o.ok){let l="Failed to complete upload";try{l=(await o.json()).error||l}catch{l=await o.text().catch(()=>l)}throw new Error(l)}return await o.json()}var yv=T('<button type="button"><svg class="drop-zone-icon svelte-17hyuhr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-17hyuhr">drop a file here or click to browse</p> <p class="drop-zone-hint svelte-17hyuhr">supports video and audio files (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>'),bv=me('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),kv=me('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),xv=T("<button> </button>"),Sv=T('<div class="file-info svelte-17hyuhr"><div class="file-header svelte-17hyuhr"><div class="file-icon svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><!></svg></div> <div class="file-details svelte-17hyuhr"><div class="file-name svelte-17hyuhr"> </div> <div class="file-size svelte-17hyuhr"> </div></div> <button class="file-remove svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="convert-options svelte-17hyuhr"><div class="option-label svelte-17hyuhr">convert to</div> <div class="segmented-control svelte-17hyuhr"></div></div> <button class="convert-btn svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> </button></div>'),jv=T('<div class="progress-container svelte-17hyuhr"><!></div>'),Cv=T("<div> </div>"),Tv=T('<!> <main class="svelte-17hyuhr"><div class="page-header svelte-17hyuhr"><h1 class="svelte-17hyuhr">convert</h1> <p class="svelte-17hyuhr">change video and audio file formats</p></div> <div class="converter svelte-17hyuhr"><!> <!> <!></div></main> <!>',1);function zv(e,t){gt(t,!0);let s=D(null),n=D("mp4"),i=D(!1),a=D(0),o=D(""),l=D(null),c=D(""),h=D(!1),_;const j=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"wav",label:"wav"}];function u(J){return J.type.startsWith("audio/")||["mp3","m4a","wav","flac","ogg","opus"].some(Q=>J.name.toLowerCase().endsWith("."+Q))}function f(J){if(!J)return;const Q=8*1024*1024*1024;if(J.size>Q){d(l,"error"),d(c,"File too large. Maximum size is 8GB.");return}d(s,J,!0),d(l,null),d(c,"")}function m(){d(s,null),d(a,0),d(o,""),d(l,null),d(c,""),_&&(_.value="")}async function S(J){let Q="";try{Q=await(await J.blob()).text()}catch{Q=await J.text().catch(()=>"")}try{return JSON.parse(Q).error||`Request failed with status ${J.status}`}catch{return Q||`Request failed with status ${J.status}`}}async function w(){if(!r(s)||r(i))return;d(i,!0),d(a,0),d(o,"Uploading..."),d(l,null),d(c,"");const J=r(s).size>90*1024*1024;let Q=null;const pe=Date.now().toString()+Math.random().toString(36).substr(2,9);xe.add({id:pe,title:`${r(s).name} â .${r(n)}`,type:"convert",stage:"uploading",status:"uploading...",progress:0,startTime:Date.now()});try{Q=tn();let q;if(J){const{filePath:he,fileName:je}=await Wn(r(s),Z=>{d(a,Z,!0),d(o,"Uploading..."),xe.updateItem(pe,{progress:Z,status:"uploading..."})});d(a,0),d(o,"Converting..."),xe.updateItem(pe,{stage:"converting",status:"converting...",progress:0});const V=await fetch(`${Fe()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:he,fileName:je,format:r(n)})});if(!V.ok)throw new Error(await S(V));const{jobId:W}=await V.json();let X=0;for(;;){if(X>=300)throw new Error("Conversion timed out after 10 minutes");X++,await new Promise(F=>setTimeout(F,2e3));const Z=new AbortController,se=setTimeout(()=>Z.abort(),1e4);let ye;try{ye=await fetch(`${Fe()}/api/job/${W}/status`,{signal:Z.signal})}finally{clearTimeout(se)}if(!ye.ok)throw ye.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const E=await ye.json();if(E.status==="error")throw new Error(E.error||"Conversion failed");if(d(a,E.progress||0,!0),d(o,E.message||"processing...",!0),xe.updateItem(pe,{progress:E.progress||0,status:E.message||"converting..."}),E.status==="complete")break}q=await fetch(`${Fe()}/api/job/${W}/download`)}else q=await new Promise((he,je)=>{const V=new XMLHttpRequest;V.open("POST",`${Fe()}/api/convert`),V.upload.onprogress=X=>{if(X.lengthComputable){const Z=Math.round(X.loaded/X.total*90);d(a,Z,!0),d(o,`uploading... ${Z}%`),xe.updateItem(pe,{progress:Z,status:`uploading... ${Z}%`})}},V.onload=()=>{d(a,95),d(o,"processing..."),xe.updateItem(pe,{stage:"converting",status:"converting...",progress:95}),he(new Response(V.response,{status:V.status,statusText:V.statusText,headers:{"Content-Disposition":V.getResponseHeader("Content-Disposition")||""}}))},V.onerror=()=>je(new Error("Network error during upload")),V.responseType="blob";const W=new FormData;W.append("file",r(s)),W.append("format",r(n)),V.send(W)});if(!q.ok)throw new Error(await S(q));d(a,100),d(o,"complete!");const P=q.headers.get("Content-Disposition");let A=r(s).name.replace(/\.[^.]+$/,"")+"."+r(n);if(P){const he=P.match(/filename="?([^"]+)"?/);he&&(A=he[1])}const U=await q.blob();Vn(U,A),d(l,"success"),d(c,"conversion complete! download started."),xe.updateItem(pe,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>xe.remove(pe),5e3)}catch(q){d(l,"error"),d(c,q.message||"conversion failed",!0),d(a,0),d(o,""),xe.updateItem(pe,{stage:"error",status:q.message||"conversion failed"})}finally{d(i,!1),Q&&sn(Q)}}var k=Tv(),z=ae(k);cr(z,{extraContent:Q=>{Dr(Q,{})}});var L=p(z,2),ve=p(v(L),2),ee=v(ve);{var ge=J=>{var Q=yv();let pe;Q.__click=()=>_==null?void 0:_.click();var q=p(v(Q),6);q.__change=P=>{var A;f((A=P.target.files)==null?void 0:A[0]),P.target.value=""},ir(q,P=>_=P,()=>_),H(()=>pe=ke(Q,1,"drop-zone svelte-17hyuhr",null,pe,{dragover:r(h)})),ft("dragover",Q,P=>{P.preventDefault(),d(h,!0)}),ft("dragleave",Q,P=>{P.preventDefault(),d(h,!1)}),ft("drop",Q,P=>{var A,U;P.preventDefault(),d(h,!1),f((U=(A=P.dataTransfer)==null?void 0:A.files)==null?void 0:U[0])}),g(J,Q)},O=J=>{var Q=Sv(),pe=v(Q),q=v(pe),P=v(q),A=v(P);{var U=fe=>{var _e=bv();g(fe,_e)},he=fe=>{var _e=kv();g(fe,_e)};M(A,fe=>{u(r(s))?fe(U):fe(he,!1)})}var je=p(q,2),V=v(je),W=v(V),X=p(V,2),Z=v(X),se=p(je,2);se.__click=m;var ye=p(pe,2),E=p(v(ye),2);Ge(E,21,()=>j,Ke,(fe,_e)=>{var ce=xv();let De;ce.__click=()=>d(n,r(_e).value,!0);var et=v(ce);H(()=>{De=ke(ce,1,"segment svelte-17hyuhr",null,De,{active:r(n)===r(_e).value}),I(et,r(_e).label)}),g(fe,ce)});var F=p(ye,2);F.__click=w;var de=p(v(F));H(fe=>{xt(V,"title",r(s).name),I(W,r(s).name),I(Z,fe),F.disabled=r(i),I(de,` ${r(i)?"converting...":"convert"}`)},[()=>Hn(r(s).size)]),g(J,Q)};M(ee,J=>{r(s)?J(O,!1):J(ge)})}var Y=p(ee,2);{var ie=J=>{var Q=jv(),pe=v(Q);Jn(pe,{get percent(){return r(a)},get label(){return r(o)}}),g(J,Q)};M(Y,J=>{r(i)&&J(ie)})}var we=p(Y,2);{var Be=J=>{var Q=Cv(),pe=v(Q);H(()=>{ke(Q,1,`status ${r(l)??""}`,"svelte-17hyuhr"),I(pe,r(c))}),g(J,Q)};M(we,J=>{r(l)&&J(Be)})}var qe=p(L,2);Ar(qe),g(e,k),mt()}Et(["click","change"]);Et(["click","keydown"]);var Ev=T('<button type="button"><svg class="drop-zone-icon svelte-15o2uhu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-15o2uhu">drop a video here or click to browse</p> <p class="drop-zone-hint svelte-15o2uhu">supports mp4, webm, mov, mkv, avi (max 8GB)</p> <input type="file" accept="video/*" style="display: none;"/></button>'),Mv=T('<div class="file-info svelte-15o2uhu"><div class="file-header svelte-15o2uhu"><div class="file-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-15o2uhu"><div class="file-name svelte-15o2uhu"> </div> <div class="file-size svelte-15o2uhu"> </div></div> <button class="file-remove svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-15o2uhu"><span> </span> <span> </span></div></div>'),Pv=T('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),qv=T('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),$v=T('<div class="progress-container svelte-15o2uhu"><div class="progress-header svelte-15o2uhu"><span class="progress-status svelte-15o2uhu"> </span> <span class="progress-percent svelte-15o2uhu"> </span></div> <!> <div class="progress-details svelte-15o2uhu"> </div></div>'),Iv=T('<div class="result-container svelte-15o2uhu"><div class="result-header svelte-15o2uhu"><div class="result-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-15o2uhu">compression complete!</div></div> <div class="result-stats svelte-15o2uhu"><div class="result-stat svelte-15o2uhu"><div class="result-stat-value svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">original</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value arrow svelte-15o2uhu">-></div> <div class="result-stat-label svelte-15o2uhu"></div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">compressed</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">saved</div></div></div> <button class="result-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> compress another</button></div>'),Bv=T('<div class="quality-overlay svelte-15o2uhu"><div class="quality-modal svelte-15o2uhu"><div class="quality-modal-title svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg> quality warning</div> <div class="quality-gauge svelte-15o2uhu"><div class="quality-gauge-bg svelte-15o2uhu"></div> <div class="quality-gauge-mask svelte-15o2uhu"></div> <div class="quality-gauge-needle svelte-15o2uhu"></div> <div class="quality-gauge-center svelte-15o2uhu"></div> <div class="quality-gauge-value svelte-15o2uhu"><span> </span> <span class="quality-gauge-unit svelte-15o2uhu">kbps</span></div></div> <div class="quality-modal-message svelte-15o2uhu">Your video is <strong class="svelte-15o2uhu"> </strong> long. At this size, the estimated bitrate is very low and the output <strong class="svelte-15o2uhu">may look blocky or blurry</strong>. <br/><br/> For better results, try a <strong class="svelte-15o2uhu">shorter clip</strong> or a <strong class="svelte-15o2uhu">larger target size</strong>.</div> <div class="quality-modal-buttons svelte-15o2uhu"><button class="quality-modal-btn cancel svelte-15o2uhu">cancel</button> <button class="quality-modal-btn proceed svelte-15o2uhu">compress anyway</button></div></div></div>'),Rv=T('<!> <main class="svelte-15o2uhu"><div class="page-header svelte-15o2uhu"><h1 class="svelte-15o2uhu">compress</h1> <p class="svelte-15o2uhu">shrink videos for discord, email, or anywhere!</p></div> <div class="compress-container svelte-15o2uhu"><!> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">target size</div> <div class="size-description svelte-15o2uhu">choose a size limit or enter a custom size</div> <div class="size-grid svelte-15o2uhu"></div> <div class="custom-size-row svelte-15o2uhu"><input type="number" class="custom-size-input svelte-15o2uhu" placeholder="custom" min="1" max="4096"/> <span class="custom-size-suffix svelte-15o2uhu">MB</span></div> <div class="estimate svelte-15o2uhu"><span class="estimate-label svelte-15o2uhu">estimated quality</span> <span> </span></div></div> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">encoding preset</div> <div class="size-description svelte-15o2uhu">quality = better compression, slower | fast = quicker encoding</div> <div class="preset-grid svelte-15o2uhu"></div> <label class="checkbox-row svelte-15o2uhu"><input type="checkbox" class="svelte-15o2uhu"/> <span class="svelte-15o2uhu">downscale for better quality (reduces blockiness)</span></label></div> <button class="compress-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg> </button> <!> <!></div></main> <!> <!>',1);function Dv(e,t){gt(t,!0);let s=D(null),n=D(0),i=D(0),a=D(0),o=D(50),l=D(47),c=D(""),h=D(!1),_=D("balanced"),j=D(!1),u=D(!1),f=D(0),m=D(""),S=D(""),w=D(!1),k=D(""),z=D(""),L=D(""),ve=D(!1),ee=D(!1),ge;const O=[{size:8,actual:7.5,label:"MB free"},{size:10,actual:9.5,label:"MB"},{size:50,actual:47,label:"MB basic"},{size:100,actual:95,label:"MB"},{size:500,actual:475,label:"MB nitro"}],Y=[{id:"fast",label:"fast",sublabel:"quick encode"},{id:"balanced",label:"balanced",sublabel:"recommended"},{id:"quality",label:"quality",sublabel:"best results"}];let ie=Ee(()=>{if(!r(s)||!r(n))return 0;const R=r(l)*1024*1024,B=128*1024,C=R-B/8*r(n);return Math.floor(C*8/r(n)/1024)}),we=Ee(()=>!r(s)||!r(n)?"select a file to see estimate":r(s).size/(1024*1024)<=r(l)?`already under ${r(o)}MB!`:r(ie)<500?`~${r(ie)} kbps video - very low quality (may be blocky)`:r(ie)<1e3?`~${r(ie)} kbps video - low quality`:r(ie)<2500?`~${r(ie)} kbps video - medium quality`:r(ie)<5e3?`~${r(ie)} kbps video - good quality`:`~${r(ie)} kbps video - excellent quality`),Be=Ee(()=>r(s)&&r(n)&&r(ie)<500&&r(s).size/(1024*1024)>r(l)),qe=Ee(()=>-90+Math.min(r(ie),2e3)/2e3*180),J=Ee(()=>{if(!r(n))return"--:--";const R=Math.floor(r(n)/60),B=Math.floor(r(n)%60);return`${R}:${B.toString().padStart(2,"0")}`}),Q=Ee(()=>!r(i)||!r(a)?"unknown":`${r(i)}x${r(a)}`);function pe(R){return new Promise(B=>{const C=document.createElement("video");C.preload="metadata",C.onloadedmetadata=()=>{URL.revokeObjectURL(C.src),B({duration:C.duration,width:C.videoWidth,height:C.videoHeight})},C.onerror=()=>{B({duration:0,width:0,height:0})},C.src=URL.createObjectURL(R)})}async function q(R){if(!R)return;if(!R.type.startsWith("video/")){be("Please select a video file","error");return}const B=8*1024*1024*1024;if(R.size>B){be("File too large. Maximum size is 8GB.","error");return}d(s,R,!0),d(w,!1);const C=await pe(R);d(n,C.duration,!0),d(i,C.width,!0),d(a,C.height,!0)}function P(){d(s,null),d(n,0),d(i,0),d(a,0),d(f,0),d(m,""),d(S,""),d(w,!1),d(c,""),d(h,!1),ge&&(ge.value="")}function A(R){d(o,R.size,!0),d(l,R.actual,!0),d(h,!1),d(c,"")}function U(R){d(c,R,!0);const B=parseInt(R);B&&B>0&&(d(o,B,!0),d(l,B*.95),d(h,!0))}function he(){(!r(c)||parseInt(r(c))<=0)&&r(h)&&(d(o,50),d(l,47),d(h,!1))}function je(){if(!r(s))return;if(r(s).size/(1024*1024)<=r(l)){be(`File is already under ${r(o)}MB!`,"success");return}r(ie)<500?d(ee,!0):V()}async function V(){if(!r(s)||r(u))return;if(d(ee,!1),r(s).size/(1024*1024)<=r(l)){be(`File is already under ${r(o)}MB!`,"success");return}d(u,!0),d(f,0),d(m,"uploading..."),d(S,"sending file to server..."),d(w,!1);const B=Date.now().toString()+Math.random().toString(36).substr(2,9),C=B;xe.add({id:C,title:`${r(s).name} â ${r(o)}MB`,type:"compress",stage:"uploading",status:"uploading...",progress:0,startTime:Date.now()});const te=r(s).size>90*1024*1024;let y=null,b=null;try{y=tn(),b=Mn(B,{onMessage:K=>{K.stage==="compressing"&&(d(m,"compressing..."),K.progress!==void 0&&d(f,K.progress,!0),K.message&&d(S,K.message,!0),xe.updateItem(C,{stage:"compressing",progress:K.progress||0,status:K.message||"compressing..."}))},onError:()=>{}});let $;if(te){d(m,"uploading..."),d(S,"large file detected, uploading in chunks...");const K=await Wn(r(s),tt=>{d(f,tt,!0),d(S,"uploading chunks..."),xe.updateItem(C,{progress:tt,status:"uploading..."})}),{filePath:Je,fileName:We}=K;d(f,0),d(m,"compressing..."),d(S,"starting compression..."),xe.updateItem(C,{stage:"compressing",status:"compressing...",progress:0});const Le=await fetch(`${Fe()}/api/compress-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:Je,fileName:We,targetSize:r(l).toString(),duration:r(n).toString(),progressId:B,preset:r(_),downscale:r(j)})});if(!Le.ok){let tt="Failed to start compression";try{tt=(await Le.json()).error||tt}catch{}throw new Error(tt)}const{jobId:Qe}=await Le.json(),Ye=Date.now(),ut=1800*1e3;let Mt=0;for(;Date.now()-Ye<=ut;){await new Promise(tt=>setTimeout(tt,2e3));try{const tt=new AbortController,jt=setTimeout(()=>tt.abort(),1e4);let at;try{at=await fetch(`${Fe()}/api/job/${Qe}/status`,{signal:tt.signal})}finally{clearTimeout(jt)}if(!at.ok)throw new Error(`Server returned ${at.status}`);const Ue=await at.json();if(Mt=0,Ue.status==="error")throw new Error(Ue.error||"Compression failed");if(Ue.progress!==void 0&&d(f,Ue.progress,!0),Ue.message&&d(S,Ue.message,!0),xe.updateItem(C,{progress:Ue.progress||0,status:Ue.message||"compressing..."}),Ue.status==="complete")break}catch(tt){if(Mt++,Mt>=3)throw new Error(`Failed to check job status after 3 attempts: ${tt.message}`)}}if(Date.now()-Ye>ut)throw new Error("Job timed out after 30 minutes.");$=await fetch(`${Fe()}/api/job/${Qe}/download`)}else{const K=new FormData;K.append("file",r(s)),K.append("targetSize",r(l).toString()),K.append("duration",r(n).toString()),K.append("progressId",B),K.append("preset",r(_)),K.append("downscale",r(j)),$=await fetch(`${Fe()}/api/compress`,{method:"POST",body:K})}if(b&&b.close(),!$.ok){let K="Compression failed";try{K=(await $.json()).error||K}catch{}throw new Error(K)}const N=await $.blob(),oe=N.size,$e=(r(s).size/(1024*1024)).toFixed(1),ne=(oe/(1024*1024)).toFixed(1),Re=Math.round((1-oe/r(s).size)*100);d(k,`${$e} MB`),d(z,`${ne} MB`),d(L,`${Re}%`),d(w,!0);const le=r(s).name.lastIndexOf("."),Ae=le>0?r(s).name.slice(0,le):r(s).name;Vn(N,`${Ae}_compressed.mp4`),be("Compression complete!","success"),xe.updateItem(C,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>xe.remove(C),5e3)}catch($){be($.message||"Compression failed","error"),xe.updateItem(C,{stage:"error",status:$.message||"compression failed"}),b&&b.close()}finally{d(u,!1),d(f,0),d(m,""),d(S,""),y&&sn(y)}}var W=Rv(),X=ae(W);cr(X,{extraContent:B=>{Dr(B,{})}});var Z=p(X,2),se=p(v(Z),2),ye=v(se);{var E=R=>{var B=Ev();let C;B.__click=()=>ge==null?void 0:ge.click();var te=p(v(B),6);te.__change=y=>{var b;q((b=y.target.files)==null?void 0:b[0]),y.target.value=""},ir(te,y=>ge=y,()=>ge),H(()=>C=ke(B,1,"drop-zone svelte-15o2uhu",null,C,{dragover:r(ve)})),ft("dragover",B,y=>{y.preventDefault(),d(ve,!0)}),ft("dragleave",B,y=>{y.preventDefault(),d(ve,!1)}),ft("drop",B,y=>{var b,$;y.preventDefault(),d(ve,!1),q(($=(b=y.dataTransfer)==null?void 0:b.files)==null?void 0:$[0])}),g(R,B)},F=R=>{var B=Mv(),C=v(B),te=p(v(C),2),y=v(te),b=v(y),$=p(y,2),N=v($),oe=p(te,2);oe.__click=P;var $e=p(C,2),ne=v($e),Re=v(ne),le=p(ne,2),Ae=v(le);H(K=>{xt(y,"title",r(s).name),I(b,r(s).name),I(N,K),I(Re,`duration: ${(r(n)?r(J):"unknown")??""}`),I(Ae,`resolution: ${r(Q)??""}`)},[()=>Hn(r(s).size)]),g(R,B)};M(ye,R=>{r(s)?R(F,!1):R(E)})}var de=p(ye,2),fe=p(v(de),4);Ge(fe,21,()=>O,Ke,(R,B)=>{var C=Pv();let te;C.__click=()=>A(r(B));var y=v(C),b=v(y),$=p(y,2),N=v($);H(()=>{te=ke(C,1,"size-option svelte-15o2uhu",null,te,{active:!r(h)&&r(o)===r(B).size}),I(b,r(B).size),I(N,r(B).label)}),g(R,C)});var _e=p(fe,2),ce=v(_e);ce.__input=R=>U(R.target.value);var De=p(_e,2),et=p(v(De),2);let Ve;var He=v(et),Oe=p(de,2),vt=p(v(Oe),4);Ge(vt,21,()=>Y,Ke,(R,B)=>{var C=qv();let te;C.__click=()=>d(_,r(B).id,!0);var y=v(C),b=v(y),$=p(y,2),N=v($);H(()=>{te=ke(C,1,"size-option svelte-15o2uhu",null,te,{active:r(_)===r(B).id}),I(b,r(B).label),I(N,r(B).sublabel)}),g(R,C)});var Ft=p(vt,2),nt=v(Ft),pt=p(Oe,2);pt.__click=je;var ht=p(v(pt)),St=p(pt,2);{var Nt=R=>{var B=$v(),C=v(B),te=v(C),y=v(te),b=p(te,2),$=v(b),N=p(C,2);Jn(N,{get percent(){return r(f)}});var oe=p(N,2),$e=v(oe);H(ne=>{I(y,r(m)),I($,`${ne??""}%`),I($e,r(S))},[()=>Math.round(r(f))]),g(R,B)};M(St,R=>{r(u)&&R(Nt)})}var G=p(St,2);{var ue=R=>{var B=Iv(),C=p(v(B),2),te=v(C),y=v(te),b=v(y),$=p(te,4),N=v($),oe=v(N),$e=p($,2),ne=v($e),Re=v(ne),le=p(C,2);le.__click=P,H(()=>{I(b,r(k)),I(oe,r(z)),I(Re,r(L))}),g(R,B)};M(G,R=>{r(w)&&R(ue)})}var re=p(Z,2);{var Ce=R=>{var B=Bv();B.__click=K=>{K.target===K.currentTarget&&d(ee,!1)};var C=v(B),te=p(v(C),2),y=p(v(te),4),b=p(y,4),$=v(b),N=v($),oe=p(te,2),$e=p(v(oe)),ne=v($e),Re=p(oe,2),le=v(Re);le.__click=()=>d(ee,!1);var Ae=p(le,2);Ae.__click=V,H(()=>{Br(y,`transform: translateX(-50%) rotate(${r(qe)??""}deg);`),I(N,r(ie)),I(ne,r(J))}),g(R,B)};M(re,R=>{r(ee)&&R(Ce)})}var Te=p(re,2);Ar(Te),H(()=>{mi(ce,r(c)),Ve=ke(et,1,"estimate-value svelte-15o2uhu",null,Ve,{"estimate-warning":r(Be)}),I(He,r(we)),pt.disabled=!r(s)||r(u),I(ht,` ${r(u)?"compressing...":"compress video"}`)}),ft("blur",ce,he),wi(nt,()=>r(j),R=>d(j,R)),g(e,W),mt()}Et(["click","change","input"]);var Av=T('<button type="button"><svg class="drop-zone-icon svelte-am61ph" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-am61ph">drop a video or audio file here</p> <p class="drop-zone-hint svelte-am61ph">supports mp4, webm, mov, mkv, mp3, wav, flac, m4a (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>'),Fv=me('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Nv=me('<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line>',1),Ov=T('<div class="file-info svelte-am61ph"><div class="file-header svelte-am61ph"><div class="file-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><!></svg></div> <div class="file-details svelte-am61ph"><div class="file-name svelte-am61ph"> </div> <div class="file-size svelte-am61ph"> </div></div> <button class="file-remove svelte-am61ph" aria-label="Remove file"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-am61ph"><span> </span></div></div>'),Lv=T('<button><div class="mode-option-value svelte-am61ph"> </div> <div class="mode-option-label svelte-am61ph"> </div></button>'),Uv=T('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">subtitle format</div> <div class="format-row svelte-am61ph"><button>SRT</button> <button>ASS</button></div></div>'),Vv=T('<button><div class="mode-option-value svelte-am61ph"> </div> <div class="mode-option-label svelte-am61ph"> </div></button>'),Hv=T('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">caption formatting</div> <div class="section-description svelte-am61ph">control how captions are split and timed</div> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">max words per caption</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="20" step="1"/> <div class="slider-hint svelte-am61ph">split long captions into smaller chunks</div></div> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">max characters per line</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="80" step="1"/> <div class="slider-hint svelte-am61ph">wrap long lines to fit on screen</div></div> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">minimum duration</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="5" step="0.1"/> <div class="slider-hint svelte-am61ph">keep captions on screen longer</div></div> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">gap between captions</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="1" step="0.05"/> <div class="slider-hint svelte-am61ph">add breathing room between captions</div></div></div>'),Jv=T('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">model</div> <div class="section-description svelte-am61ph">larger models are more accurate but slower</div> <div class="model-grid svelte-am61ph"></div></div> <div class="section svelte-am61ph"><div class="section-label svelte-am61ph">language hint</div> <div class="section-description svelte-am61ph">optional, auto-detected if empty (e.g. en, es, ja, fr)</div> <input type="text" class="language-input svelte-am61ph" placeholder="auto-detect" maxlength="5"/></div> <!>',1),Wv=T('<div class="progress-container svelte-am61ph"><div class="progress-header svelte-am61ph"><span class="progress-status svelte-am61ph"> </span> <span class="progress-percent svelte-am61ph"> </span></div> <!> <div class="progress-details svelte-am61ph"> </div></div>'),Gv=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg> copied!',1),Yv=me('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> copy text',1),Qv=T('<div class="result-container svelte-am61ph"><div class="result-header svelte-am61ph"><div class="result-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-am61ph">transcription complete!</div></div> <div class="transcript-box svelte-am61ph"><pre class="transcript-text svelte-am61ph"> </pre></div> <div class="result-actions svelte-am61ph"><button class="result-btn copy-btn svelte-am61ph"><!></button> <button class="result-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> transcribe another</button></div></div>'),Kv=T('<div class="result-container svelte-am61ph"><div class="result-header svelte-am61ph"><div class="result-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-am61ph"> </div></div> <button class="result-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> transcribe another</button></div>'),Xv=T('<!> <main class="svelte-am61ph"><div class="page-header svelte-am61ph"><h1 class="svelte-am61ph">transcribe</h1> <p class="svelte-am61ph">get subtitles, captions, or a text transcript from any video or audio</p></div> <div class="transcribe-container svelte-am61ph"><!> <div class="section svelte-am61ph"><div class="section-label svelte-am61ph">output mode</div> <div class="section-description svelte-am61ph">choose what you want back</div> <div class="mode-grid svelte-am61ph"></div></div> <!> <button class="advanced-toggle svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg> advanced options</button> <!> <div class="estimate-row svelte-am61ph"><span class="estimate-label svelte-am61ph">estimated time</span> <span> </span></div> <button class="transcribe-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </button> <!> <!></div></main> <!>',1);function Zv(e,t){gt(t,!0);let s=D(null),n=D(0),i=D("text"),a=D("base"),o=D("srt"),l=D(""),c=D(0),h=D(0),_=D(0),j=D(0),u=D(!1),f=D(!1),m=D(0),S=D(""),w=D(""),k=D(!1),z=D(""),L=D(!1),ve=D(!1),ee;const ge=[{id:"text",label:"text",sublabel:"plain transcript"},{id:"subtitles",label:"subtitles",sublabel:"SRT / ASS file"},{id:"captions",label:"captions",sublabel:"burned into video"}],O=[{id:"tiny",label:"tiny",sublabel:"fastest, less accurate"},{id:"base",label:"base",sublabel:"recommended"},{id:"small",label:"small",sublabel:"slower, more accurate"},{id:"medium",label:"medium",sublabel:"slowest, best quality"}];let Y=Ee(()=>r(i)==="subtitles"||r(i)==="captions");const ie={tiny:.17,base:.33,small:1,medium:3.3};let we=Ee(()=>{if(!r(s)||!r(n))return"select a file to see estimate";const G=r(n)/60,ue=ie[r(a)],re=Math.ceil(G*ue);return re<1?"less than a minute":re===1?"~1 minute":`~${re} minutes`}),Be=Ee(()=>r(s)&&r(n)&&Math.ceil(r(n)/60*ie[r(a)])>30),qe=Ee(()=>{if(!r(n))return"--:--";const G=Math.floor(r(n)/60),ue=Math.floor(r(n)%60);return`${G}:${ue.toString().padStart(2,"0")}`});function J(G){return new Promise(ue=>{const re=G.type.startsWith("video/")?document.createElement("video"):document.createElement("audio");re.preload="metadata",re.onloadedmetadata=()=>{URL.revokeObjectURL(re.src),ue(re.duration||0)},re.onerror=()=>{URL.revokeObjectURL(re.src),ue(0)},re.src=URL.createObjectURL(G)})}async function Q(G){if(!G)return;if(!(G.type.startsWith("video/")||G.type.startsWith("audio/"))){be("Please select a video or audio file","error");return}const re=8*1024*1024*1024;if(G.size>re){be("File too large. Maximum size is 8GB.","error");return}d(s,G,!0),d(k,!1),d(z,""),d(n,await J(G),!0)}function pe(){d(s,null),d(n,0),d(m,0),d(S,""),d(w,""),d(k,!1),d(z,""),d(L,!1),ee&&(ee.value="")}async function q(){try{await navigator.clipboard.writeText(r(z)),d(L,!0),be("Copied to clipboard!","success"),setTimeout(()=>{d(L,!1)},2e3)}catch{be("Failed to copy","error")}}async function P(){if(!r(s)||r(f))return;r(Be)&&be("This may take over 30 minutes. Consider using a faster model.","warning"),d(f,!0),d(m,0),d(S,"uploading..."),d(w,"sending file to server..."),d(k,!1),d(z,"");const G=Date.now().toString()+Math.random().toString(36).slice(2,11);xe.add({id:G,title:`${r(s).name} â ${r(i)}`,type:"transcribe",stage:"uploading",status:"uploading...",progress:0,startTime:Date.now()});const ue=r(s).size>90*1024*1024;let re=null;try{re=tn();let Ce;if(ue){d(S,"uploading..."),d(w,"large file detected, uploading in chunks...");const C=await Wn(r(s),N=>{d(m,N,!0),d(w,"uploading chunks..."),xe.updateItem(G,{progress:N,status:"uploading..."})}),{filePath:te,fileName:y}=C;d(m,0),d(S,"transcribing..."),d(w,"starting transcription..."),xe.updateItem(G,{stage:"transcribing",status:"transcribing...",progress:0});const b=await fetch(`${Fe()}/api/transcribe-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:te,fileName:y,outputMode:r(i),model:r(a),subtitleFormat:r(o),language:r(l)||void 0,...r(c)>0&&{maxWordsPerCaption:r(c)},...r(h)>0&&{maxCharsPerLine:r(h)},...r(_)>0&&{minDuration:r(_)},...r(j)>0&&{captionGap:r(j)}})});if(!b.ok){let N="Failed to start transcription";try{N=(await b.json()).error||N}catch{}throw new Error(N)}Ce=(await b.json()).jobId}else{const C=new FormData;C.append("file",r(s)),C.append("outputMode",r(i)),C.append("model",r(a)),C.append("subtitleFormat",r(o)),r(l)&&C.append("language",r(l)),r(c)>0&&C.append("maxWordsPerCaption",r(c)),r(h)>0&&C.append("maxCharsPerLine",r(h)),r(_)>0&&C.append("minDuration",r(_)),r(j)>0&&C.append("captionGap",r(j));const te=await fetch(`${Fe()}/api/transcribe`,{method:"POST",body:C});if(!te.ok){let b="Failed to start transcription";try{b=(await te.json()).error||b}catch{}throw new Error(b)}Ce=(await te.json()).jobId}d(S,"transcribing..."),d(w,"starting transcription..."),xe.updateItem(G,{stage:"transcribing",status:"transcribing...",progress:0});const Te=Date.now(),R=3600*1e3;let B=0;for(;Date.now()-Te<=R;){await new Promise(C=>setTimeout(C,2e3));try{const C=new AbortController,te=setTimeout(()=>C.abort(),1e4);let y;try{y=await fetch(`${Fe()}/api/job/${Ce}/status`,{signal:C.signal})}finally{clearTimeout(te)}if(!y.ok)throw new Error(`Server returned ${y.status}`);const b=await y.json();if(B=0,b.status==="error")throw new Error(b.error||"Transcription failed");if(b.progress!==void 0&&d(m,b.progress,!0),b.message&&(d(w,b.message,!0),d(S,"transcribing...")),xe.updateItem(G,{progress:b.progress||0,status:b.message||"transcribing..."}),b.status==="complete"){b.textContent&&d(z,b.textContent,!0);break}}catch(C){if(B++,B>=5)throw new Error(`Failed to check job status after 5 attempts: ${C.message}`)}}if(Date.now()-Te>R)throw new Error("Job timed out after 60 minutes.");if(r(i)==="text"){if(!r(z)){const C=await fetch(`${Fe()}/api/job/${Ce}/download`);if(!C.ok)throw new Error("Failed to download transcript");d(z,await C.text(),!0)}d(k,!0),be("Transcription complete!","success")}else{const C=await fetch(`${Fe()}/api/job/${Ce}/download`);if(!C.ok)throw new Error("Failed to download result");const te=await C.blob(),b=(C.headers.get("content-disposition")||"").match(/filename="([^"]+)"/),$=b?b[1]:r(i)==="captions"?"captioned.mp4":`subtitles.${r(o)}`;Vn(te,$),d(k,!0),be("Transcription complete!","success")}xe.updateItem(G,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>xe.remove(G),5e3)}catch(Ce){be(Ce.message||"Transcription failed","error"),xe.updateItem(G,{stage:"error",status:Ce.message||"transcription failed"})}finally{d(f,!1),d(m,0),d(S,""),d(w,""),re&&sn(re)}}var A=Xv(),U=ae(A);cr(U,{extraContent:ue=>{Dr(ue,{})}});var he=p(U,2),je=p(v(he),2),V=v(je);{var W=G=>{var ue=Av();let re;ue.__click=()=>ee==null?void 0:ee.click();var Ce=p(v(ue),6);Ce.__change=Te=>{var R;Q((R=Te.target.files)==null?void 0:R[0]),Te.target.value=""},ir(Ce,Te=>ee=Te,()=>ee),H(()=>re=ke(ue,1,"drop-zone svelte-am61ph",null,re,{dragover:r(ve)})),ft("dragover",ue,Te=>{Te.preventDefault(),d(ve,!0)}),ft("dragleave",ue,Te=>{Te.preventDefault(),d(ve,!1)}),ft("drop",ue,Te=>{var R,B;Te.preventDefault(),d(ve,!1),Q((B=(R=Te.dataTransfer)==null?void 0:R.files)==null?void 0:B[0])}),g(G,ue)},X=G=>{var ue=Ov(),re=v(ue),Ce=v(re),Te=v(Ce),R=v(Te);{var B=le=>{var Ae=Fv();g(le,Ae)},C=le=>{var Ae=Nv();g(le,Ae)};M(R,le=>{r(s).type.startsWith("audio/")?le(B):le(C,!1)})}var te=p(Ce,2),y=v(te),b=v(y),$=p(y,2),N=v($),oe=p(te,2);oe.__click=pe;var $e=p(re,2),ne=v($e),Re=v(ne);H(le=>{xt(y,"title",r(s).name),I(b,r(s).name),I(N,le),I(Re,`duration: ${(r(n)?r(qe):"unknown")??""}`)},[()=>Hn(r(s).size)]),g(G,ue)};M(V,G=>{r(s)?G(X,!1):G(W)})}var Z=p(V,2),se=p(v(Z),4);Ge(se,21,()=>ge,Ke,(G,ue)=>{var re=Lv();let Ce;re.__click=()=>d(i,r(ue).id,!0);var Te=v(re),R=v(Te),B=p(Te,2),C=v(B);H(()=>{Ce=ke(re,1,"mode-option svelte-am61ph",null,Ce,{active:r(i)===r(ue).id}),I(R,r(ue).label),I(C,r(ue).sublabel)}),g(G,re)});var ye=p(Z,2);{var E=G=>{var ue=Uv(),re=p(v(ue),2),Ce=v(re);let Te;Ce.__click=()=>d(o,"srt");var R=p(Ce,2);let B;R.__click=()=>d(o,"ass"),H(()=>{Te=ke(Ce,1,"format-btn svelte-am61ph",null,Te,{active:r(o)==="srt"}),B=ke(R,1,"format-btn svelte-am61ph",null,B,{active:r(o)==="ass"})}),g(G,ue)};M(ye,G=>{r(i)==="subtitles"&&G(E)})}var F=p(ye,2);F.__click=()=>d(u,!r(u));var de=v(F);let fe;var _e=p(F,2);{var ce=G=>{var ue=Jv(),re=ae(ue),Ce=p(v(re),4);Ge(Ce,21,()=>O,Ke,(te,y)=>{var b=Vv();let $;b.__click=()=>d(a,r(y).id,!0);var N=v(b),oe=v(N),$e=p(N,2),ne=v($e);H(()=>{$=ke(b,1,"mode-option svelte-am61ph",null,$,{active:r(a)===r(y).id}),I(oe,r(y).label),I(ne,r(y).sublabel)}),g(te,b)});var Te=p(re,2),R=p(v(Te),4);R.__input=te=>d(l,te.target.value.trim(),!0);var B=p(Te,2);{var C=te=>{var y=Hv(),b=p(v(y),4),$=v(b),N=p(v($),2),oe=v(N),$e=p($,2),ne=p(b,2),Re=v(ne),le=p(v(Re),2),Ae=v(le),K=p(Re,2),Je=p(ne,2),We=v(Je),Le=p(v(We),2),Qe=v(Le),Ye=p(We,2),ut=p(Je,2),Mt=v(ut),tt=p(v(Mt),2),jt=v(tt),at=p(Mt,2);H((Ue,vr)=>{I(oe,r(c)===0?"off":r(c)),I(Ae,r(h)===0?"off":r(h)),I(Qe,Ue),I(jt,vr)},[()=>r(_)===0?"off":r(_).toFixed(1)+"s",()=>r(j)===0?"off":r(j).toFixed(2)+"s"]),Hs($e,()=>r(c),Ue=>d(c,Ue)),Hs(K,()=>r(h),Ue=>d(h,Ue)),Hs(Ye,()=>r(_),Ue=>d(_,Ue)),Hs(at,()=>r(j),Ue=>d(j,Ue)),g(te,y)};M(B,te=>{r(Y)&&te(C)})}H(()=>mi(R,r(l))),g(G,ue)};M(_e,G=>{r(u)&&G(ce)})}var De=p(_e,2),et=p(v(De),2);let Ve;var He=v(et),Oe=p(De,2);Oe.__click=P;var vt=p(v(Oe)),Ft=p(Oe,2);{var nt=G=>{var ue=Wv(),re=v(ue),Ce=v(re),Te=v(Ce),R=p(Ce,2),B=v(R),C=p(re,2);Jn(C,{get percent(){return r(m)}});var te=p(C,2),y=v(te);H(b=>{I(Te,r(S)),I(B,`${b??""}%`),I(y,r(w))},[()=>Math.round(r(m))]),g(G,ue)};M(Ft,G=>{r(f)&&G(nt)})}var pt=p(Ft,2);{var ht=G=>{var ue=Qv(),re=p(v(ue),2),Ce=v(re),Te=v(Ce),R=p(re,2),B=v(R);B.__click=q;var C=v(B);{var te=$=>{var N=Gv();g($,N)},y=$=>{var N=Yv();g($,N)};M(C,$=>{r(L)?$(te):$(y,!1)})}var b=p(B,2);b.__click=pe,H(()=>I(Te,r(z))),g(G,ue)},St=G=>{var ue=Se(),re=ae(ue);{var Ce=Te=>{var R=Kv(),B=v(R),C=p(v(B),2),te=v(C),y=p(B,2);y.__click=pe,H(()=>I(te,r(i)==="captions"?"captions burned in!":"subtitles ready!")),g(Te,R)};M(re,Te=>{r(k)&&Te(Ce)},!0)}g(G,ue)};M(pt,G=>{r(k)&&r(i)==="text"?G(ht):G(St,!1)})}var Nt=p(he,2);Ar(Nt),H(()=>{fe=ke(de,0,"svelte-am61ph",null,fe,{rotated:r(u)}),Ve=ke(et,1,"estimate-value svelte-am61ph",null,Ve,{"estimate-warning":r(Be)}),I(He,r(we)),Oe.disabled=!r(s)||r(f),I(vt,` ${r(f)?"transcribing...":"transcribe"}`)}),g(e,A),mt()}Et(["click","change","input"]);var eu=T(`<!> <main class="svelte-13tj7i"><div class="page-header svelte-13tj7i"><h1 class="svelte-13tj7i">privacy policy</h1> <p class="svelte-13tj7i">no legal jargon, just the truth</p></div> <div class="tldr-box svelte-13tj7i"><h3 class="svelte-13tj7i">tl;dr</h3> <p class="svelte-13tj7i">yoink doesn't collect anything. no tracking, no cookies, no analytics. your files are stored on an encrypted volume with a key that only exists in RAM, and get wiped automatically.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">who runs this</h2> <p class="svelte-13tj7i">just me, one person. i made yoink because i wanted a simple tool that does what it says without being weird about your data. i was inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-13tj7i">cobalt.tools</a> and <a href="https://vert.sh" target="_blank" rel="noopener" class="svelte-13tj7i">vert.sh</a>, and wanted to combine the best parts into one site.</p> <p class="svelte-13tj7i">im not a company, i have no investors, and i have no reason to collect your data.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">your files</h2> <p class="svelte-13tj7i">files are stored on a LUKS2 encrypted volume on the server. the encryption key is randomly generated at every boot, stored only in RAM, never written to disk, so if the server ever powers off the key is gone and the data is just unrecoverable.</p> <p class="svelte-13tj7i">once your download or conversion is done, the file gets deleted immediately from that encrypted volume. there's also a cleanup job that runs every 5 minutes and wipes anything older than 20 minutes no matter what, just in case something slips through.</p> <p class="svelte-13tj7i">we don't log what you download, what you convert, what you compress, or any filenames or URLs. none of that gets saved anywhere.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">what we collect</h2> <p class="svelte-13tj7i">nothing. literally zero.</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">no analytics</strong> - no tracking scripts, no usage stats, nothing</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no cookies</strong> - we don't set a single cookie</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no IP logging</strong> - your IP isn't stored or logged</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no content logging</strong> - URLs, filenames, and what you do here are not recorded</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no accounts</strong> - there's nothing to sign up for, no emails collected</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no third party stuff</strong> - no google analytics, no facebook pixel, no ad networks</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">encryption</h2> <p class="svelte-13tj7i">two layers:</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">in transit</strong>: everything goes through HTTPS, so your connection to yoink is encrypted end to end, nobody between you and the server can see what you're doing.</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">at rest</strong>: all temporary files go on a LUKS2 encrypted volume (AES-256). the decryption key is generated fresh at every server boot using /dev/urandom, kept only in RAM, never written anywhere. no way to recover files after a reboot, and no way to read them without the key that only exists in memory.</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">open source</h2> <p class="svelte-13tj7i">the whole thing is on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>. you can read every line of code yourself if you want to verify any of this. if you find something off, please tell me.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">contact</h2> <p class="svelte-13tj7i">questions, concerns, or just want to say hi, reach me at <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-13tj7i">coah80.com</a> or open an issue on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">changes</h2> <p class="svelte-13tj7i">if this policy changes, it gets updated here. no sneaky edits. last updated: <strong class="svelte-13tj7i">february 23, 2026</strong>.</p></div></main> <!>`,1);function tu(e){var t=eu(),s=ae(t);cr(s,{});var n=p(s,4);Ar(n),g(e,t)}var su=T('<div class="spinner-wrap svelte-121vd2i"><!></div> <h1 class="svelte-121vd2i">downloading...</h1> <p class="svelte-121vd2i">your download should start automatically</p>',1),ru=T('<h1 class="success svelte-121vd2i">done</h1> <p class="svelte-121vd2i">download started successfully</p>',1),nu=T('<h1 class="error svelte-121vd2i">download failed</h1> <p class="svelte-121vd2i">this file is no longer available</p>',1),au=T('<main class="svelte-121vd2i"><div class="download-container svelte-121vd2i"><!> <div> </div></div></main>');function iu(e,t){gt(t,!0);const s=()=>At(ki,"$query",n),[n,i]=rs();let a=D("loading"),o=D("preparing download..."),l=Ee(()=>s().token||"");lr(()=>{const w=window.location.pathname.replace("/download","").replace(/^\//,""),k=r(l)||w;if(!k){d(a,"error"),d(o,"no download token provided");return}const z=`${Fe()}/api/bot/download/${k}`;d(o,"starting download..."),fetch(z,{method:"HEAD"}).then(L=>{if(L.ok)d(o,"download started"),window.location.href=z,setTimeout(()=>{d(a,"success"),d(o,"you can close this page now")},2e3);else throw new Error("Download not available")}).catch(()=>{d(a,"error"),d(o,"the download link has expired (5 minute limit)")})});var c=au(),h=v(c),_=v(h);{var j=w=>{var k=su(),z=ae(k),L=v(z);Ti(L),g(w,k)},u=w=>{var k=Se(),z=ae(k);{var L=ee=>{var ge=ru();g(ee,ge)},ve=ee=>{var ge=nu();g(ee,ge)};M(z,ee=>{r(a)==="success"?ee(L):ee(ve,!1)},!0)}g(w,k)};M(_,w=>{r(a)==="loading"?w(j):w(u,!1)})}var f=p(_,2);let m;var S=v(f);H(()=>{m=ke(f,1,"status svelte-121vd2i",null,m,{error:r(a)==="error",success:r(a)==="success"}),I(S,r(o))}),g(e,c),mt(),i()}var ou=T('<main class="svelte-zxc657"><p>Redirecting...</p></main>');function lu(e,t){gt(t,!1),lr(()=>{const n=new URLSearchParams(window.location.search),a=(n.get("url")||n.get("text")||"").match(/https?:\/\/[^\s]+/);let o=a?a[0]:"";if(o=o.replace(/[.,!?;:)\]}>]+$/,""),o)try{const l=new URL(o);(l.protocol==="http:"||l.protocol==="https:")&&localStorage.setItem("yoink_shared_url",JSON.stringify({url:o,timestamp:Date.now()}))}catch{}Rr("/")}),yi();var s=ou();g(e,s),mt()}function cu(e,t){gt(t,!1),lr(()=>{Rr("/?updates")}),yi(),mt()}var vu=T(`<!> <main class="svelte-kbj945"><div class="not-found svelte-kbj945"><h1 class="svelte-kbj945">404</h1> <p class="svelte-kbj945">this page doesn't exist</p> <a href="/" class="back-link svelte-kbj945">go back home</a></div></main>`,1);function uu(e){var t=vu(),s=ae(t);cr(s,{}),g(e,t)}var du=T(`<div class="banner-overlay svelte-v9gb2s" role="dialog" aria-modal="true" aria-label="What's new"><div class="banner-card svelte-v9gb2s"><div class="banner-meta svelte-v9gb2s"><span class="banner-version svelte-v9gb2s"> </span> <span class="banner-date svelte-v9gb2s"> </span></div> <h2 class="banner-title svelte-v9gb2s"> </h2> <img class="banner-image svelte-v9gb2s"/> <p class="banner-summary svelte-v9gb2s"> </p> <div class="banner-actions svelte-v9gb2s"><button class="banner-btn primary svelte-v9gb2s">go to post</button> <button class="banner-btn svelte-v9gb2s">dismiss</button></div></div></div>`);function fu(e,t){gt(t,!0);let s=D(!1),n=zi[0];lr(()=>{localStorage.getItem("yoink-update-dismissed")!==fn&&d(s,!0)});function i(){localStorage.setItem("yoink-update-dismissed",fn),d(s,!1)}function a(){localStorage.setItem("yoink-update-dismissed",fn),d(s,!1),Rr("/?updates")}var o=Se(),l=ae(o);{var c=h=>{var _=du();_.__click=ie=>{ie.target===ie.currentTarget&&i()},_.__keydown=ie=>{ie.key==="Escape"&&i()};var j=v(_),u=v(j),f=v(u),m=v(f),S=p(f,2),w=v(S),k=p(u,2),z=v(k),L=p(k,2),ve=p(L,2),ee=v(ve),ge=p(ve,2),O=v(ge);O.__click=a;var Y=p(O,2);Y.__click=i,H(()=>{I(m,n.version),I(w,n.date),I(z,n.title),xt(L,"src",n.image),xt(L,"alt",n.title),I(ee,n.summary)}),g(h,_)};M(l,h=>{r(s)&&h(c)})}g(e,o),mt()}Et(["click","keydown"]);var pu=T("<!> <!> <!> <!>",1);function hu(e,t){gt(t,!0);const s=()=>At(en,"$path",n),[n,i]=rs(),a={"/":Uc,"/settings":mv,"/convert":zv,"/compress":Dv,"/transcribe":Zv,"/privacy":tu,"/download":iu,"/share":lu,"/updates":cu};let o=Ee(s),l=Ee(()=>a[r(o)]||uu);function c(m){const S=m.target.closest("a");if(!S)return;const w=S.getAttribute("href");!w||!w.startsWith("/")||S.target==="_blank"||(m.preventDefault(),Rr(w))}lr(()=>{gl(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(xe.reconnectOnResume(),ml())})});var h=pu();ft("click",ar.body,c);var _=ae(h);Wo(_,()=>r(l),(m,S)=>{S(m,{})});var j=p(_,2);rc(j,{});var u=p(j,2);vl(u);var f=p(u,2);fu(f,{}),g(e,h),mt(),i()}Oo(hu,{target:document.getElementById("app")});
