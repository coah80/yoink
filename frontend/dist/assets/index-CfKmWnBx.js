var lo=Object.defineProperty;var Er=e=>{throw TypeError(e)};var co=(e,t,s)=>t in e?lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Ct=(e,t,s)=>co(e,typeof t!="symbol"?t+"":t,s),Vn=(e,t,s)=>t.has(e)||Er("Cannot "+s);var _=(e,t,s)=>(Vn(e,t,"read from private field"),s?s.call(e):t.get(e)),ne=(e,t,s)=>t.has(e)?Er("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),te=(e,t,s,n)=>(Vn(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),Ve=(e,t,s)=>(Vn(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const Yn=!1;var Zr=Array.isArray,uo=Array.prototype.indexOf,Fs=Array.prototype.includes,An=Array.from,ei=Object.defineProperty,tn=Object.getOwnPropertyDescriptor,ti=Object.getOwnPropertyDescriptors,vo=Object.prototype,fo=Array.prototype,dr=Object.getPrototypeOf,Pr=Object.isExtensible;const ss=()=>{};function ho(e){return e()}function $n(e){for(var t=0;t<e.length;t++)e[t]()}function si(){var e,t,s=new Promise((n,i)=>{e=n,t=i});return{promise:s,resolve:e,reject:t}}const Ne=2,qn=4,pn=8,ni=1<<24,Jt=16,kt=32,js=64,fr=128,vt=512,Ie=1024,Oe=2048,bt=4096,ot=8192,ns=16384,hr=32768,cs=65536,Mr=1<<17,ri=1<<18,Hs=1<<19,ii=1<<20,Vt=1<<25,xs=32768,Qn=1<<21,pr=1<<22,rs=1<<23,$s=Symbol("$state"),po=Symbol(""),Ms=new class extends Error{constructor(){super(...arguments);Ct(this,"name","StaleReactionError");Ct(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function go(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function mo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function wo(e,t,s){throw new Error("https://svelte.dev/e/each_key_duplicate")}function _o(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function yo(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function bo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ko(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xo(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function So(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Co(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function jo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const To=1,zo=2,oi=4,Eo=8,Po=16,ai=1,Mo=2,Ae=Symbol(),$o="http://www.w3.org/1999/xhtml";function qo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function li(e){return e===this.v}function ci(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ui(e){return!ci(e,this.v)}let gn=!1,Bo=!1;function Io(){gn=!0}let $e=null;function Ls(e){$e=e}function ht(e,t=!1,s){$e={p:$e,i:!1,c:null,e:null,s:e,x:null,l:gn&&!t?{s:null,u:null,$:[]}:null}}function pt(e){var t=$e,s=t.e;if(s!==null){t.e=null;for(var n of s)$i(n)}return t.i=!0,$e=t.p,{}}function mn(){return!gn||$e!==null&&$e.l===null}let ds=[];function vi(){var e=ds;ds=[],$n(e)}function Ht(e){if(ds.length===0&&!sn){var t=ds;queueMicrotask(()=>{t===ds&&vi()})}ds.push(e)}function Ro(){for(;ds.length>0;)vi()}function di(e){var t=xe;if(t===null)return ae.f|=rs,e;if((t.f&hr)===0){if((t.f&fr)===0)throw e;t.b.error(e)}else Us(e,t)}function Us(e,t){for(;t!==null;){if((t.f&fr)!==0)try{t.b.error(e);return}catch(s){e=s}t=t.parent}throw e}const Ao=-7169;function Me(e,t){e.f=e.f&Ao|t}function gr(e){(e.f&vt)!==0||e.deps===null?Me(e,Ie):Me(e,bt)}function fi(e){if(e!==null)for(const t of e)(t.f&Ne)===0||(t.f&xs)===0||(t.f^=xs,fi(t.deps))}function hi(e,t,s){(e.f&Oe)!==0?t.add(e):(e.f&bt)!==0&&s.add(e),fi(e.deps),Me(e,Ie)}const Tn=new Set;let re=null,Kn=null,De=null,Xe=[],Dn=null,Xn=!1,sn=!1;var Bs,Is,hs,Rs,vn,dn,ps,Ot,As,Bt,Zn,er,pi;const zr=class zr{constructor(){ne(this,Bt);Ct(this,"committed",!1);Ct(this,"current",new Map);Ct(this,"previous",new Map);ne(this,Bs,new Set);ne(this,Is,new Set);ne(this,hs,0);ne(this,Rs,0);ne(this,vn,null);ne(this,dn,new Set);ne(this,ps,new Set);ne(this,Ot,new Map);Ct(this,"is_fork",!1);ne(this,As,!1)}is_deferred(){return this.is_fork||_(this,Rs)>0}skip_effect(t){_(this,Ot).has(t)||_(this,Ot).set(t,{d:[],m:[]})}unskip_effect(t){var s=_(this,Ot).get(t);if(s){_(this,Ot).delete(t);for(var n of s.d)Me(n,Oe),_t(n);for(n of s.m)Me(n,bt),_t(n)}}process(t){var i;Xe=[],this.apply();var s=[],n=[];for(const r of t)Ve(this,Bt,Zn).call(this,r,s,n);if(this.is_deferred()){Ve(this,Bt,er).call(this,n),Ve(this,Bt,er).call(this,s);for(const[r,a]of _(this,Ot))_i(r,a)}else{for(const r of _(this,Bs))r();_(this,Bs).clear(),_(this,hs)===0&&Ve(this,Bt,pi).call(this),Kn=this,re=null,$r(n),$r(s),Kn=null,(i=_(this,vn))==null||i.resolve()}De=null}capture(t,s){s!==Ae&&!this.previous.has(t)&&this.previous.set(t,s),(t.f&rs)===0&&(this.current.set(t,t.v),De==null||De.set(t,t.v))}activate(){re=this,this.apply()}deactivate(){re===this&&(re=null,De=null)}flush(){if(this.activate(),Xe.length>0){if(gi(),re!==null&&re!==this)return}else _(this,hs)===0&&this.process([]);this.deactivate()}discard(){for(const t of _(this,Is))t(this);_(this,Is).clear()}increment(t){te(this,hs,_(this,hs)+1),t&&te(this,Rs,_(this,Rs)+1)}decrement(t){te(this,hs,_(this,hs)-1),t&&te(this,Rs,_(this,Rs)-1),!_(this,As)&&(te(this,As,!0),Ht(()=>{te(this,As,!1),this.is_deferred()?Xe.length>0&&this.flush():this.revive()}))}revive(){for(const t of _(this,dn))_(this,ps).delete(t),Me(t,Oe),_t(t);for(const t of _(this,ps))Me(t,bt),_t(t);this.flush()}oncommit(t){_(this,Bs).add(t)}ondiscard(t){_(this,Is).add(t)}settled(){return(_(this,vn)??te(this,vn,si())).promise}static ensure(){if(re===null){const t=re=new zr;Tn.add(re),sn||Ht(()=>{re===t&&t.flush()})}return re}apply(){}};Bs=new WeakMap,Is=new WeakMap,hs=new WeakMap,Rs=new WeakMap,vn=new WeakMap,dn=new WeakMap,ps=new WeakMap,Ot=new WeakMap,As=new WeakMap,Bt=new WeakSet,Zn=function(t,s,n){t.f^=Ie;for(var i=t.first,r=null;i!==null;){var a=i.f,l=(a&(kt|js))!==0,c=l&&(a&Ie)!==0,d=c||(a&ot)!==0||_(this,Ot).has(i);if(!d&&i.fn!==null){l?i.f^=Ie:r!==null&&(a&(qn|pn|ni))!==0?r.b.defer_effect(i):(a&qn)!==0?s.push(i):yn(i)&&((a&Jt)!==0&&_(this,ps).add(i),on(i));var g=i.first;if(g!==null){i=g;continue}}var y=i.parent;for(i=i.next;i===null&&y!==null;)y===r&&(r=null),i=y.next,y=y.parent}},er=function(t){for(var s=0;s<t.length;s+=1)hi(t[s],_(this,dn),_(this,ps))},pi=function(){var i;if(Tn.size>1){this.previous.clear();var t=De,s=!0;for(const r of Tn){if(r===this){s=!1;continue}const a=[];for(const[c,d]of this.current){if(r.current.has(c))if(s&&d!==r.current.get(c))r.current.set(c,d);else continue;a.push(c)}if(a.length===0)continue;const l=[...r.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){var n=Xe;Xe=[];const c=new Set,d=new Map;for(const g of a)mi(g,l,c,d);if(Xe.length>0){re=r,r.apply();for(const g of Xe)Ve(i=r,Bt,Zn).call(i,g,[],[]);r.deactivate()}Xe=n}}re=null,De=t}this.committed=!0,Tn.delete(this)};let is=zr;function Do(e){var t=sn;sn=!0;try{for(var s;;){if(Ro(),Xe.length===0&&(re==null||re.flush(),Xe.length===0))return Dn=null,s;gi()}}finally{sn=t}}function gi(){Xn=!0;var e=null;try{for(var t=0;Xe.length>0;){var s=is.ensure();if(t++>1e3){var n,i;No()}s.process(Xe),os.clear()}}finally{Xe=[],Xn=!1,Dn=null}}function No(){try{ko()}catch(e){Us(e,Dn)}}let mt=null;function $r(e){var t=e.length;if(t!==0){for(var s=0;s<t;){var n=e[s++];if((n.f&(ns|ot))===0&&yn(n)&&(mt=new Set,on(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?Ii(n):n.fn=null),(mt==null?void 0:mt.size)>0)){os.clear();for(const i of mt){if((i.f&(ns|ot))!==0)continue;const r=[i];let a=i.parent;for(;a!==null;)mt.has(a)&&(mt.delete(a),r.push(a)),a=a.parent;for(let l=r.length-1;l>=0;l--){const c=r[l];(c.f&(ns|ot))===0&&on(c)}}mt.clear()}}mt=null}}function mi(e,t,s,n){if(!s.has(e)&&(s.add(e),e.reactions!==null))for(const i of e.reactions){const r=i.f;(r&Ne)!==0?mi(i,t,s,n):(r&(pr|Jt))!==0&&(r&Oe)===0&&wi(i,t,n)&&(Me(i,Oe),_t(i))}}function wi(e,t,s){const n=s.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const i of e.deps){if(Fs.call(t,i))return!0;if((i.f&Ne)!==0&&wi(i,t,s))return s.set(i,!0),!0}return s.set(e,!1),!1}function _t(e){for(var t=Dn=e;t.parent!==null;){t=t.parent;var s=t.f;if(Xn&&t===xe&&(s&Jt)!==0&&(s&ri)===0)return;if((s&(js|kt))!==0){if((s&Ie)===0)return;t.f^=Ie}}Xe.push(t)}function _i(e,t){if(!((e.f&kt)!==0&&(e.f&Ie)!==0)){(e.f&Oe)!==0?t.d.push(e):(e.f&bt)!==0&&t.m.push(e),Me(e,Ie);for(var s=e.first;s!==null;)_i(s,t),s=s.next}}function Oo(e){let t=0,s=Ss(0),n;return()=>{_r()&&(o(s),Fn(()=>(t===0&&(n=Ts(()=>e(()=>nn(s)))),t+=1,()=>{Ht(()=>{t-=1,t===0&&(n==null||n(),n=void 0,nn(s))})})))}}var Fo=cs|Hs|fr;function Lo(e,t,s){new Uo(e,t,s)}var lt,vr,jt,gs,Tt,ct,Ke,zt,Ft,Xt,ms,Zt,Ds,ws,Ns,Os,Lt,In,Re,Vo,Ho,tr,zn,En,sr;class Uo{constructor(t,s,n){ne(this,Re);Ct(this,"parent");Ct(this,"is_pending",!1);ne(this,lt);ne(this,vr,null);ne(this,jt);ne(this,gs);ne(this,Tt);ne(this,ct,null);ne(this,Ke,null);ne(this,zt,null);ne(this,Ft,null);ne(this,Xt,null);ne(this,ms,0);ne(this,Zt,0);ne(this,Ds,!1);ne(this,ws,!1);ne(this,Ns,new Set);ne(this,Os,new Set);ne(this,Lt,null);ne(this,In,Oo(()=>(te(this,Lt,Ss(_(this,ms))),()=>{te(this,Lt,null)})));te(this,lt,t),te(this,jt,s),te(this,gs,n),this.parent=xe.b,this.is_pending=!!_(this,jt).pending,te(this,Tt,_n(()=>{xe.b=this;{var i=Ve(this,Re,tr).call(this);try{te(this,ct,ut(()=>n(i)))}catch(r){this.error(r)}_(this,Zt)>0?Ve(this,Re,En).call(this):this.is_pending=!1}return()=>{var r;(r=_(this,Xt))==null||r.remove()}},Fo))}defer_effect(t){hi(t,_(this,Ns),_(this,Os))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!_(this,jt).pending}update_pending_count(t){Ve(this,Re,sr).call(this,t),te(this,ms,_(this,ms)+t),!(!_(this,Lt)||_(this,Ds))&&(te(this,Ds,!0),Ht(()=>{te(this,Ds,!1),_(this,Lt)&&Vs(_(this,Lt),_(this,ms))}))}get_effect_pending(){return _(this,In).call(this),o(_(this,Lt))}error(t){var s=_(this,jt).onerror;let n=_(this,jt).failed;if(_(this,ws)||!s&&!n)throw t;_(this,ct)&&(tt(_(this,ct)),te(this,ct,null)),_(this,Ke)&&(tt(_(this,Ke)),te(this,Ke,null)),_(this,zt)&&(tt(_(this,zt)),te(this,zt,null));var i=!1,r=!1;const a=()=>{if(i){qo();return}i=!0,r&&jo(),is.ensure(),te(this,ms,0),_(this,zt)!==null&&ys(_(this,zt),()=>{te(this,zt,null)}),this.is_pending=this.has_pending_snippet(),te(this,ct,Ve(this,Re,zn).call(this,()=>(te(this,ws,!1),ut(()=>_(this,gs).call(this,_(this,lt)))))),_(this,Zt)>0?Ve(this,Re,En).call(this):this.is_pending=!1};Ht(()=>{try{r=!0,s==null||s(t,a),r=!1}catch(l){Us(l,_(this,Tt)&&_(this,Tt).parent)}n&&te(this,zt,Ve(this,Re,zn).call(this,()=>{is.ensure(),te(this,ws,!0);try{return ut(()=>{n(_(this,lt),()=>t,()=>a)})}catch(l){return Us(l,_(this,Tt).parent),null}finally{te(this,ws,!1)}}))})}}lt=new WeakMap,vr=new WeakMap,jt=new WeakMap,gs=new WeakMap,Tt=new WeakMap,ct=new WeakMap,Ke=new WeakMap,zt=new WeakMap,Ft=new WeakMap,Xt=new WeakMap,ms=new WeakMap,Zt=new WeakMap,Ds=new WeakMap,ws=new WeakMap,Ns=new WeakMap,Os=new WeakMap,Lt=new WeakMap,In=new WeakMap,Re=new WeakSet,Vo=function(){try{te(this,ct,ut(()=>_(this,gs).call(this,_(this,lt))))}catch(t){this.error(t)}},Ho=function(){const t=_(this,jt).pending;t&&(te(this,Ke,ut(()=>t(_(this,lt)))),Ht(()=>{var s=Ve(this,Re,tr).call(this);te(this,ct,Ve(this,Re,zn).call(this,()=>(is.ensure(),ut(()=>_(this,gs).call(this,s))))),_(this,Zt)>0?Ve(this,Re,En).call(this):(ys(_(this,Ke),()=>{te(this,Ke,null)}),this.is_pending=!1)}))},tr=function(){var t=_(this,lt);return this.is_pending&&(te(this,Xt,as()),_(this,lt).before(_(this,Xt)),t=_(this,Xt)),t},zn=function(t){var s=xe,n=ae,i=$e;$t(_(this,Tt)),ft(_(this,Tt)),Ls(_(this,Tt).ctx);try{return t()}catch(r){return di(r),null}finally{$t(s),ft(n),Ls(i)}},En=function(){const t=_(this,jt).pending;_(this,ct)!==null&&(te(this,Ft,document.createDocumentFragment()),_(this,Ft).append(_(this,Xt)),Di(_(this,ct),_(this,Ft))),_(this,Ke)===null&&te(this,Ke,ut(()=>t(_(this,lt))))},sr=function(t){var s;if(!this.has_pending_snippet()){this.parent&&Ve(s=this.parent,Re,sr).call(s,t);return}if(te(this,Zt,_(this,Zt)+t),_(this,Zt)===0){this.is_pending=!1;for(const n of _(this,Ns))Me(n,Oe),_t(n);for(const n of _(this,Os))Me(n,bt),_t(n);_(this,Ns).clear(),_(this,Os).clear(),_(this,Ke)&&ys(_(this,Ke),()=>{te(this,Ke,null)}),_(this,Ft)&&(_(this,lt).before(_(this,Ft)),te(this,Ft,null))}};function Jo(e,t,s,n){const i=mn()?Nn:yi;var r=e.filter(u=>!u.settled);if(s.length===0&&r.length===0){n(t.map(i));return}var a=re,l=xe,c=Wo(),d=r.length===1?r[0].promise:r.length>1?Promise.all(r.map(u=>u.promise)):null;function g(u){c();try{n(u)}catch(v){(l.f&ns)===0&&Us(v,l)}a==null||a.deactivate(),nr()}if(s.length===0){d.then(()=>g(t.map(i)));return}function y(){c(),Promise.all(s.map(u=>Go(u))).then(u=>g([...t.map(i),...u])).catch(u=>Us(u,l))}d?d.then(y):y()}function Wo(){var e=xe,t=ae,s=$e,n=re;return function(r=!0){$t(e),ft(t),Ls(s),r&&(n==null||n.activate())}}function nr(){$t(null),ft(null),Ls(null)}function Nn(e){var t=Ne|Oe,s=ae!==null&&(ae.f&Ne)!==0?ae:null;return xe!==null&&(xe.f|=Hs),{ctx:$e,deps:null,effects:null,equals:li,f:t,fn:e,reactions:null,rv:0,v:Ae,wv:0,parent:s??xe,ac:null}}function Go(e,t,s){let n=xe;n===null&&mo();var i=n.b,r=void 0,a=Ss(Ae),l=!ae,c=new Map;return ra(()=>{var v;var d=si();r=d.promise;try{Promise.resolve(e()).then(d.resolve,d.reject).then(()=>{g===re&&g.committed&&g.deactivate(),nr()})}catch(h){d.reject(h),nr()}var g=re;if(l){var y=i.is_rendered();i.update_pending_count(1),g.increment(y),(v=c.get(g))==null||v.reject(Ms),c.delete(g),c.set(g,d)}const u=(h,x=void 0)=>{if(g.activate(),x)x!==Ms&&(a.f|=rs,Vs(a,x));else{(a.f&rs)!==0&&(a.f^=rs),Vs(a,h);for(const[m,k]of c){if(c.delete(m),m===g)break;k.reject(Ms)}}l&&(i.update_pending_count(-1),g.decrement(y))};d.promise.then(u,h=>u(null,h||"unknown"))}),yr(()=>{for(const d of c.values())d.reject(Ms)}),new Promise(d=>{function g(y){function u(){y===r?d(a):g(r)}y.then(u,u)}g(r)})}function we(e){const t=Nn(e);return Ni(t),t}function yi(e){const t=Nn(e);return t.equals=ui,t}function bi(e){var t=e.effects;if(t!==null){e.effects=null;for(var s=0;s<t.length;s+=1)tt(t[s])}}function Yo(e){for(var t=e.parent;t!==null;){if((t.f&Ne)===0)return(t.f&ns)===0?t:null;t=t.parent}return null}function mr(e){var t,s=xe;$t(Yo(e));try{e.f&=~xs,bi(e),t=Ui(e)}finally{$t(s)}return t}function ki(e){var t=mr(e);if(!e.equals(t)&&(e.wv=Fi(),(!(re!=null&&re.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){Me(e,Ie);return}Cs||(De!==null?(_r()||re!=null&&re.is_fork)&&De.set(e,t):gr(e))}let rr=new Set;const os=new Map;let xi=!1;function Ss(e,t){var s={f:0,v:e,reactions:null,equals:li,rv:0,wv:0};return s}function I(e,t){const s=Ss(e);return Ni(s),s}function Si(e,t=!1,s=!0){var i;const n=Ss(e);return t||(n.equals=ui),gn&&s&&$e!==null&&$e.l!==null&&((i=$e.l).s??(i.s=[])).push(n),n}function f(e,t,s=!1){ae!==null&&(!yt||(ae.f&Mr)!==0)&&mn()&&(ae.f&(Ne|Jt|pr|Mr))!==0&&(dt===null||!Fs.call(dt,e))&&Co();let n=s?Xs(t):t;return Vs(e,n)}function Vs(e,t){if(!e.equals(t)){var s=e.v;Cs?os.set(e,t):os.set(e,s),e.v=t;var n=is.ensure();if(n.capture(e,s),(e.f&Ne)!==0){const i=e;(e.f&Oe)!==0&&mr(i),gr(i)}e.wv=Fi(),Ci(e,Oe),mn()&&xe!==null&&(xe.f&Ie)!==0&&(xe.f&(kt|js))===0&&(at===null?aa([e]):at.push(e)),!n.is_fork&&rr.size>0&&!xi&&Qo()}return t}function Qo(){xi=!1;for(const e of rr)(e.f&Ie)!==0&&Me(e,bt),yn(e)&&on(e);rr.clear()}function nn(e){f(e,e.v+1)}function Ci(e,t){var s=e.reactions;if(s!==null)for(var n=mn(),i=s.length,r=0;r<i;r++){var a=s[r],l=a.f;if(!(!n&&a===xe)){var c=(l&Oe)===0;if(c&&Me(a,t),(l&Ne)!==0){var d=a;De==null||De.delete(d),(l&xs)===0&&(l&vt&&(a.f|=xs),Ci(d,bt))}else c&&((l&Jt)!==0&&mt!==null&&mt.add(a),_t(a))}}}function Xs(e){if(typeof e!="object"||e===null||$s in e)return e;const t=dr(e);if(t!==vo&&t!==fo)return e;var s=new Map,n=Zr(e),i=I(0),r=bs,a=l=>{if(bs===r)return l();var c=ae,d=bs;ft(null),Rr(r);var g=l();return ft(c),Rr(d),g};return n&&s.set("length",I(e.length)),new Proxy(e,{defineProperty(l,c,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&xo();var g=s.get(c);return g===void 0?g=a(()=>{var y=I(d.value);return s.set(c,y),y}):f(g,d.value,!0),!0},deleteProperty(l,c){var d=s.get(c);if(d===void 0){if(c in l){const g=a(()=>I(Ae));s.set(c,g),nn(i)}}else f(d,Ae),nn(i);return!0},get(l,c,d){var v;if(c===$s)return e;var g=s.get(c),y=c in l;if(g===void 0&&(!y||(v=tn(l,c))!=null&&v.writable)&&(g=a(()=>{var h=Xs(y?l[c]:Ae),x=I(h);return x}),s.set(c,g)),g!==void 0){var u=o(g);return u===Ae?void 0:u}return Reflect.get(l,c,d)},getOwnPropertyDescriptor(l,c){var d=Reflect.getOwnPropertyDescriptor(l,c);if(d&&"value"in d){var g=s.get(c);g&&(d.value=o(g))}else if(d===void 0){var y=s.get(c),u=y==null?void 0:y.v;if(y!==void 0&&u!==Ae)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return d},has(l,c){var u;if(c===$s)return!0;var d=s.get(c),g=d!==void 0&&d.v!==Ae||Reflect.has(l,c);if(d!==void 0||xe!==null&&(!g||(u=tn(l,c))!=null&&u.writable)){d===void 0&&(d=a(()=>{var v=g?Xs(l[c]):Ae,h=I(v);return h}),s.set(c,d));var y=o(d);if(y===Ae)return!1}return g},set(l,c,d,g){var R;var y=s.get(c),u=c in l;if(n&&c==="length")for(var v=d;v<y.v;v+=1){var h=s.get(v+"");h!==void 0?f(h,Ae):v in l&&(h=a(()=>I(Ae)),s.set(v+"",h))}if(y===void 0)(!u||(R=tn(l,c))!=null&&R.writable)&&(y=a(()=>I(void 0)),f(y,Xs(d)),s.set(c,y));else{u=y.v!==Ae;var x=a(()=>Xs(d));f(y,x)}var m=Reflect.getOwnPropertyDescriptor(l,c);if(m!=null&&m.set&&m.set.call(g,d),!u){if(n&&typeof c=="string"){var k=s.get("length"),C=Number(c);Number.isInteger(C)&&C>=k.v&&f(k,C+1)}nn(i)}return!0},ownKeys(l){o(i);var c=Reflect.ownKeys(l).filter(y=>{var u=s.get(y);return u===void 0||u.v!==Ae});for(var[d,g]of s)g.v!==Ae&&!(d in l)&&c.push(d);return c},setPrototypeOf(){So()}})}var qr,wr,ji,Ti,zi;function Ko(){if(qr===void 0){qr=window,wr=document,ji=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,s=Text.prototype;Ti=tn(t,"firstChild").get,zi=tn(t,"nextSibling").get,Pr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Pr(s)&&(s.__t=void 0)}}function as(e=""){return document.createTextNode(e)}function Ut(e){return Ti.call(e)}function wn(e){return zi.call(e)}function p(e,t){return Ut(e)}function je(e,t=!1){{var s=Ut(e);return s instanceof Comment&&s.data===""?wn(s):s}}function w(e,t=1,s=!1){let n=e;for(;t--;)n=wn(n);return n}function Xo(e){e.textContent=""}function Ei(){return!1}let Br=!1;function Zo(){Br||(Br=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const s of e.target.elements)(t=s.__on_r)==null||t.call(s)})},{capture:!0}))}function On(e){var t=ae,s=xe;ft(null),$t(null);try{return e()}finally{ft(t),$t(s)}}function Pi(e,t,s,n=s){e.addEventListener(t,()=>On(s));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),Zo()}function Mi(e){xe===null&&(ae===null&&bo(),yo()),Cs&&_o()}function ea(e,t){var s=t.last;s===null?t.last=t.first=e:(s.next=e,e.prev=s,t.last=e)}function It(e,t,s){var n=xe;n!==null&&(n.f&ot)!==0&&(e|=ot);var i={ctx:$e,deps:null,nodes:null,f:e|Oe|vt,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(s)try{on(i),i.f|=hr}catch(l){throw tt(i),l}else t!==null&&_t(i);var r=i;if(s&&r.deps===null&&r.teardown===null&&r.nodes===null&&r.first===r.last&&(r.f&Hs)===0&&(r=r.first,(e&Jt)!==0&&(e&cs)!==0&&r!==null&&(r.f|=cs)),r!==null&&(r.parent=n,n!==null&&ea(r,n),ae!==null&&(ae.f&Ne)!==0&&(e&js)===0)){var a=ae;(a.effects??(a.effects=[])).push(r)}return i}function _r(){return ae!==null&&!yt}function yr(e){const t=It(pn,null,!1);return Me(t,Ie),t.teardown=e,t}function rn(e){Mi();var t=xe.f,s=!ae&&(t&kt)!==0&&(t&hr)===0;if(s){var n=$e;(n.e??(n.e=[])).push(e)}else return $i(e)}function $i(e){return It(qn|ii,e,!1)}function ta(e){return Mi(),It(pn|ii,e,!0)}function sa(e){is.ensure();const t=It(js|Hs,e,!0);return(s={})=>new Promise(n=>{s.outro?ys(t,()=>{tt(t),n(void 0)}):(tt(t),n(void 0))})}function na(e){return It(qn,e,!1)}function ra(e){return It(pr|Hs,e,!0)}function Fn(e,t=0){return It(pn|t,e,!0)}function W(e,t=[],s=[],n=[]){Jo(n,t,s,i=>{It(pn,()=>e(...i.map(o)),!0)})}function _n(e,t=0){var s=It(Jt|t,e,!0);return s}function ut(e){return It(kt|Hs,e,!0)}function qi(e){var t=e.teardown;if(t!==null){const s=Cs,n=ae;Ir(!0),ft(null);try{t.call(null)}finally{Ir(s),ft(n)}}}function Bi(e,t=!1){var s=e.first;for(e.first=e.last=null;s!==null;){const i=s.ac;i!==null&&On(()=>{i.abort(Ms)});var n=s.next;(s.f&js)!==0?s.parent=null:tt(s,t),s=n}}function ia(e){for(var t=e.first;t!==null;){var s=t.next;(t.f&kt)===0&&tt(t),t=s}}function tt(e,t=!0){var s=!1;(t||(e.f&ri)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(oa(e.nodes.start,e.nodes.end),s=!0),Bi(e,t&&!s),Bn(e,0),Me(e,ns);var n=e.nodes&&e.nodes.t;if(n!==null)for(const r of n)r.stop();qi(e);var i=e.parent;i!==null&&i.first!==null&&Ii(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function oa(e,t){for(;e!==null;){var s=e===t?null:wn(e);e.remove(),e=s}}function Ii(e){var t=e.parent,s=e.prev,n=e.next;s!==null&&(s.next=n),n!==null&&(n.prev=s),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=s))}function ys(e,t,s=!0){var n=[];Ri(e,n,!0);var i=()=>{s&&tt(e),t&&t()},r=n.length;if(r>0){var a=()=>--r||i();for(var l of n)l.out(a)}else i()}function Ri(e,t,s){if((e.f&ot)===0){e.f^=ot;var n=e.nodes&&e.nodes.t;if(n!==null)for(const l of n)(l.is_global||s)&&t.push(l);for(var i=e.first;i!==null;){var r=i.next,a=(i.f&cs)!==0||(i.f&kt)!==0&&(e.f&Jt)!==0;Ri(i,t,a?s:!1),i=r}}}function br(e){Ai(e,!0)}function Ai(e,t){if((e.f&ot)!==0){e.f^=ot,(e.f&Ie)===0&&(Me(e,Oe),_t(e));for(var s=e.first;s!==null;){var n=s.next,i=(s.f&cs)!==0||(s.f&kt)!==0;Ai(s,i?t:!1),s=n}var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)(a.is_global||t)&&a.in()}}function Di(e,t){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end;s!==null;){var i=s===n?null:wn(s);t.append(s),s=i}}let Pn=!1,Cs=!1;function Ir(e){Cs=e}let ae=null,yt=!1;function ft(e){ae=e}let xe=null;function $t(e){xe=e}let dt=null;function Ni(e){ae!==null&&(dt===null?dt=[e]:dt.push(e))}let Ze=null,rt=0,at=null;function aa(e){at=e}let Oi=1,fs=0,bs=fs;function Rr(e){bs=e}function Fi(){return++Oi}function yn(e){var t=e.f;if((t&Oe)!==0)return!0;if(t&Ne&&(e.f&=~xs),(t&bt)!==0){for(var s=e.deps,n=s.length,i=0;i<n;i++){var r=s[i];if(yn(r)&&ki(r),r.wv>e.wv)return!0}(t&vt)!==0&&De===null&&Me(e,Ie)}return!1}function Li(e,t,s=!0){var n=e.reactions;if(n!==null&&!(dt!==null&&Fs.call(dt,e)))for(var i=0;i<n.length;i++){var r=n[i];(r.f&Ne)!==0?Li(r,t,!1):t===r&&(s?Me(r,Oe):(r.f&Ie)!==0&&Me(r,bt),_t(r))}}function Ui(e){var x;var t=Ze,s=rt,n=at,i=ae,r=dt,a=$e,l=yt,c=bs,d=e.f;Ze=null,rt=0,at=null,ae=(d&(kt|js))===0?e:null,dt=null,Ls(e.ctx),yt=!1,bs=++fs,e.ac!==null&&(On(()=>{e.ac.abort(Ms)}),e.ac=null);try{e.f|=Qn;var g=e.fn,y=g(),u=e.deps,v=re==null?void 0:re.is_fork;if(Ze!==null){var h;if(v||Bn(e,rt),u!==null&&rt>0)for(u.length=rt+Ze.length,h=0;h<Ze.length;h++)u[rt+h]=Ze[h];else e.deps=u=Ze;if(_r()&&(e.f&vt)!==0)for(h=rt;h<u.length;h++)((x=u[h]).reactions??(x.reactions=[])).push(e)}else!v&&u!==null&&rt<u.length&&(Bn(e,rt),u.length=rt);if(mn()&&at!==null&&!yt&&u!==null&&(e.f&(Ne|bt|Oe))===0)for(h=0;h<at.length;h++)Li(at[h],e);if(i!==null&&i!==e){if(fs++,i.deps!==null)for(let m=0;m<s;m+=1)i.deps[m].rv=fs;if(t!==null)for(const m of t)m.rv=fs;at!==null&&(n===null?n=at:n.push(...at))}return(e.f&rs)!==0&&(e.f^=rs),y}catch(m){return di(m)}finally{e.f^=Qn,Ze=t,rt=s,at=n,ae=i,dt=r,Ls(a),yt=l,bs=c}}function la(e,t){let s=t.reactions;if(s!==null){var n=uo.call(s,e);if(n!==-1){var i=s.length-1;i===0?s=t.reactions=null:(s[n]=s[i],s.pop())}}if(s===null&&(t.f&Ne)!==0&&(Ze===null||!Fs.call(Ze,t))){var r=t;(r.f&vt)!==0&&(r.f^=vt,r.f&=~xs),gr(r),bi(r),Bn(r,0)}}function Bn(e,t){var s=e.deps;if(s!==null)for(var n=t;n<s.length;n++)la(e,s[n])}function on(e){var t=e.f;if((t&ns)===0){Me(e,Ie);var s=xe,n=Pn;xe=e,Pn=!0;try{(t&(Jt|ni))!==0?ia(e):Bi(e),qi(e);var i=Ui(e);e.teardown=typeof i=="function"?i:null,e.wv=Oi;var r;Yn&&Bo&&(e.f&Oe)!==0&&e.deps}finally{Pn=n,xe=s}}}async function ca(){await Promise.resolve(),Do()}function o(e){var t=e.f,s=(t&Ne)!==0;if(ae!==null&&!yt){var n=xe!==null&&(xe.f&ns)!==0;if(!n&&(dt===null||!Fs.call(dt,e))){var i=ae.deps;if((ae.f&Qn)!==0)e.rv<fs&&(e.rv=fs,Ze===null&&i!==null&&i[rt]===e?rt++:Ze===null?Ze=[e]:Ze.push(e));else{(ae.deps??(ae.deps=[])).push(e);var r=e.reactions;r===null?e.reactions=[ae]:Fs.call(r,ae)||r.push(ae)}}}if(Cs&&os.has(e))return os.get(e);if(s){var a=e;if(Cs){var l=a.v;return((a.f&Ie)===0&&a.reactions!==null||Hi(a))&&(l=mr(a)),os.set(a,l),l}var c=(a.f&vt)===0&&!yt&&ae!==null&&(Pn||(ae.f&vt)!==0),d=a.deps===null;yn(a)&&(c&&(a.f|=vt),ki(a)),c&&!d&&Vi(a)}if(De!=null&&De.has(e))return De.get(e);if((e.f&rs)!==0)throw e.v;return e.v}function Vi(e){if(e.deps!==null){e.f|=vt;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&Ne)!==0&&(t.f&vt)===0&&Vi(t)}}function Hi(e){if(e.v===Ae)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(os.has(t)||(t.f&Ne)!==0&&Hi(t))return!0;return!1}function Ts(e){var t=yt;try{return yt=!0,e()}finally{yt=t}}function ua(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if($s in e)ir(e);else if(!Array.isArray(e))for(let t in e){const s=e[t];typeof s=="object"&&s&&$s in s&&ir(s)}}}function ir(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{ir(e[n],t)}catch{}const s=dr(e);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const n=ti(s);for(let i in n){const r=n[i].get;if(r)try{r.call(e)}catch{}}}}}const va=["touchstart","touchmove"];function da(e){return va.includes(e)}const Ji=new Set,or=new Set;function fa(e,t,s,n={}){function i(r){if(n.capture||Zs.call(t,r),!r.cancelBubble)return On(()=>s==null?void 0:s.call(this,r))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ht(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function Pt(e,t,s,n,i){var r={capture:n,passive:i},a=fa(e,t,s,r);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&yr(()=>{t.removeEventListener(e,a,r)})}function Rt(e){for(var t=0;t<e.length;t++)Ji.add(e[t]);for(var s of or)s(e)}let Ar=null;function Zs(e){var m;var t=this,s=t.ownerDocument,n=e.type,i=((m=e.composedPath)==null?void 0:m.call(e))||[],r=i[0]||e.target;Ar=e;var a=0,l=Ar===e&&e.__root;if(l){var c=i.indexOf(l);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var d=i.indexOf(t);if(d===-1)return;c<=d&&(a=c)}if(r=i[a]||e.target,r!==t){ei(e,"currentTarget",{configurable:!0,get(){return r||s}});var g=ae,y=xe;ft(null),$t(null);try{for(var u,v=[];r!==null;){var h=r.assignedSlot||r.parentNode||r.host||null;try{var x=r["__"+n];x!=null&&(!r.disabled||e.target===r)&&x.call(r,e)}catch(k){u?v.push(k):u=k}if(e.cancelBubble||h===t||h===null)break;r=h}if(u){for(let k of v)queueMicrotask(()=>{throw k});throw u}}finally{e.__root=t,delete e.currentTarget,ft(g),$t(y)}}}function Wi(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function an(e,t){var s=xe;s.nodes===null&&(s.nodes={start:e,end:t,a:null,t:null})}function S(e,t){var s=(t&ai)!==0,n=(t&Mo)!==0,i,r=!e.startsWith("<!>");return()=>{i===void 0&&(i=Wi(r?e:"<!>"+e),s||(i=Ut(i)));var a=n||ji?document.importNode(i,!0):i.cloneNode(!0);if(s){var l=Ut(a),c=a.lastChild;an(l,c)}else an(a,a);return a}}function ha(e,t,s="svg"){var n=!e.startsWith("<!>"),i=(t&ai)!==0,r=`<${s}>${n?e:"<!>"+e}</${s}>`,a;return()=>{if(!a){var l=Wi(r),c=Ut(l);if(i)for(a=document.createDocumentFragment();Ut(c);)a.appendChild(Ut(c));else a=Ut(c)}var d=a.cloneNode(!0);if(i){var g=Ut(d),y=d.lastChild;an(g,y)}else an(d,d);return d}}function Fe(e,t){return ha(e,t,"svg")}function Je(){var e=document.createDocumentFragment(),t=document.createComment(""),s=as();return e.append(t,s),an(t,s),e}function b(e,t){e!==null&&e.before(t)}function N(e,t){var s=t==null?"":typeof t=="object"?t+"":t;s!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=s,e.nodeValue=s+"")}function pa(e,t){return ga(e,t)}const Es=new Map;function ga(e,{target:t,anchor:s,props:n={},events:i,context:r,intro:a=!0}){Ko();var l=new Set,c=y=>{for(var u=0;u<y.length;u++){var v=y[u];if(!l.has(v)){l.add(v);var h=da(v);t.addEventListener(v,Zs,{passive:h});var x=Es.get(v);x===void 0?(document.addEventListener(v,Zs,{passive:h}),Es.set(v,1)):Es.set(v,x+1)}}};c(An(Ji)),or.add(c);var d=void 0,g=sa(()=>{var y=s??t.appendChild(as());return Lo(y,{pending:()=>{}},u=>{ht({});var v=$e;r&&(v.c=r),i&&(n.$$events=i),d=e(u,n)||{},pt()}),()=>{var h;for(var u of l){t.removeEventListener(u,Zs);var v=Es.get(u);--v===0?(document.removeEventListener(u,Zs),Es.delete(u)):Es.set(u,v)}or.delete(c),y!==s&&((h=y.parentNode)==null||h.removeChild(y))}});return ma.set(d,g),d}let ma=new WeakMap;var wt,Et,it,_s,fn,hn,Rn;class kr{constructor(t,s=!0){Ct(this,"anchor");ne(this,wt,new Map);ne(this,Et,new Map);ne(this,it,new Map);ne(this,_s,new Set);ne(this,fn,!0);ne(this,hn,()=>{var t=re;if(_(this,wt).has(t)){var s=_(this,wt).get(t),n=_(this,Et).get(s);if(n)br(n),_(this,_s).delete(s);else{var i=_(this,it).get(s);i&&(_(this,Et).set(s,i.effect),_(this,it).delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[r,a]of _(this,wt)){if(_(this,wt).delete(r),r===t)break;const l=_(this,it).get(a);l&&(tt(l.effect),_(this,it).delete(a))}for(const[r,a]of _(this,Et)){if(r===s||_(this,_s).has(r))continue;const l=()=>{if(Array.from(_(this,wt).values()).includes(r)){var d=document.createDocumentFragment();Di(a,d),d.append(as()),_(this,it).set(r,{effect:a,fragment:d})}else tt(a);_(this,_s).delete(r),_(this,Et).delete(r)};_(this,fn)||!n?(_(this,_s).add(r),ys(a,l,!1)):l()}}});ne(this,Rn,t=>{_(this,wt).delete(t);const s=Array.from(_(this,wt).values());for(const[n,i]of _(this,it))s.includes(n)||(tt(i.effect),_(this,it).delete(n))});this.anchor=t,te(this,fn,s)}ensure(t,s){var n=re,i=Ei();if(s&&!_(this,Et).has(t)&&!_(this,it).has(t))if(i){var r=document.createDocumentFragment(),a=as();r.append(a),_(this,it).set(t,{effect:ut(()=>s(a)),fragment:r})}else _(this,Et).set(t,ut(()=>s(this.anchor)));if(_(this,wt).set(n,t),i){for(const[l,c]of _(this,Et))l===t?n.unskip_effect(c):n.skip_effect(c);for(const[l,c]of _(this,it))l===t?n.unskip_effect(c.effect):n.skip_effect(c.effect);n.oncommit(_(this,hn)),n.ondiscard(_(this,Rn))}else _(this,hn).call(this)}}wt=new WeakMap,Et=new WeakMap,it=new WeakMap,_s=new WeakMap,fn=new WeakMap,hn=new WeakMap,Rn=new WeakMap;function D(e,t,s=!1){var n=new kr(e),i=s?cs:0;function r(a,l){n.ensure(a,l)}_n(()=>{var a=!1;t((l,c=!0)=>{a=!0,r(c,l)}),a||r(!1,null)},i)}function et(e,t){return t}function wa(e,t,s){for(var n=[],i=t.length,r,a=t.length,l=0;l<i;l++){let y=t[l];ys(y,()=>{if(r){if(r.pending.delete(y),r.done.add(y),r.pending.size===0){var u=e.outrogroups;ar(An(r.done)),u.delete(r),u.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var c=n.length===0&&s!==null;if(c){var d=s,g=d.parentNode;Xo(g),g.append(d),e.items.clear()}ar(t,!c)}else r={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(r)}function ar(e,t=!0){for(var s=0;s<e.length;s++)tt(e[s],t)}var Dr;function He(e,t,s,n,i,r=null){var a=e,l=new Map,c=(t&oi)!==0;if(c){var d=e;a=d.appendChild(as())}var g=null,y=yi(()=>{var k=s();return Zr(k)?k:k==null?[]:An(k)}),u,v=!0;function h(){m.fallback=g,_a(m,u,a,t,n),g!==null&&(u.length===0?(g.f&Vt)===0?br(g):(g.f^=Vt,en(g,null,a)):ys(g,()=>{g=null}))}var x=_n(()=>{u=o(y);for(var k=u.length,C=new Set,R=re,ue=Ei(),G=0;G<k;G+=1){var se=u[G],ke=n(se,G),_e=v?null:l.get(ke);_e?(_e.v&&Vs(_e.v,se),_e.i&&Vs(_e.i,G),ue&&R.unskip_effect(_e.e)):(_e=ya(l,v?a:Dr??(Dr=as()),se,ke,G,i,t,s),v||(_e.e.f|=Vt),l.set(ke,_e)),C.add(ke)}if(k===0&&r&&!g&&(v?g=ut(()=>r(a)):(g=ut(()=>r(Dr??(Dr=as()))),g.f|=Vt)),k>C.size&&wo(),!v)if(ue){for(const[de,Be]of l)C.has(de)||R.skip_effect(Be.e);R.oncommit(h),R.ondiscard(()=>{})}else h();o(y)}),m={effect:x,items:l,outrogroups:null,fallback:g};v=!1}function Qs(e){for(;e!==null&&(e.f&kt)===0;)e=e.next;return e}function _a(e,t,s,n,i){var Be,Ge,Ye,U,V,fe,M,q,L;var r=(n&Eo)!==0,a=t.length,l=e.items,c=Qs(e.effect.first),d,g=null,y,u=[],v=[],h,x,m,k;if(r)for(k=0;k<a;k+=1)h=t[k],x=i(h,k),m=l.get(x).e,(m.f&Vt)===0&&((Ge=(Be=m.nodes)==null?void 0:Be.a)==null||Ge.measure(),(y??(y=new Set)).add(m));for(k=0;k<a;k+=1){if(h=t[k],x=i(h,k),m=l.get(x).e,e.outrogroups!==null)for(const A of e.outrogroups)A.pending.delete(m),A.done.delete(m);if((m.f&Vt)!==0)if(m.f^=Vt,m===c)en(m,null,s);else{var C=g?g.next:c;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Kt(e,g,m),Kt(e,m,C),en(m,C,s),g=m,u=[],v=[],c=Qs(g.next);continue}if((m.f&ot)!==0&&(br(m),r&&((U=(Ye=m.nodes)==null?void 0:Ye.a)==null||U.unfix(),(y??(y=new Set)).delete(m))),m!==c){if(d!==void 0&&d.has(m)){if(u.length<v.length){var R=v[0],ue;g=R.prev;var G=u[0],se=u[u.length-1];for(ue=0;ue<u.length;ue+=1)en(u[ue],R,s);for(ue=0;ue<v.length;ue+=1)d.delete(v[ue]);Kt(e,G.prev,se.next),Kt(e,g,G),Kt(e,se,R),c=R,g=se,k-=1,u=[],v=[]}else d.delete(m),en(m,c,s),Kt(e,m.prev,m.next),Kt(e,m,g===null?e.effect.first:g.next),Kt(e,g,m),g=m;continue}for(u=[],v=[];c!==null&&c!==m;)(d??(d=new Set)).add(c),v.push(c),c=Qs(c.next);if(c===null)continue}(m.f&Vt)===0&&u.push(m),g=m,c=Qs(m.next)}if(e.outrogroups!==null){for(const A of e.outrogroups)A.pending.size===0&&(ar(An(A.done)),(V=e.outrogroups)==null||V.delete(A));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||d!==void 0){var ke=[];if(d!==void 0)for(m of d)(m.f&ot)===0&&ke.push(m);for(;c!==null;)(c.f&ot)===0&&c!==e.fallback&&ke.push(c),c=Qs(c.next);var _e=ke.length;if(_e>0){var de=(n&oi)!==0&&a===0?s:null;if(r){for(k=0;k<_e;k+=1)(M=(fe=ke[k].nodes)==null?void 0:fe.a)==null||M.measure();for(k=0;k<_e;k+=1)(L=(q=ke[k].nodes)==null?void 0:q.a)==null||L.fix()}wa(e,ke,de)}}r&&Ht(()=>{var A,he;if(y!==void 0)for(m of y)(he=(A=m.nodes)==null?void 0:A.a)==null||he.apply()})}function ya(e,t,s,n,i,r,a,l){var c=(a&To)!==0?(a&Po)===0?Si(s,!1,!1):Ss(s):null,d=(a&zo)!==0?Ss(i):null;return{v:c,i:d,e:ut(()=>(r(t,c??s,d??i,l),()=>{e.delete(n)}))}}function en(e,t,s){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,r=t&&(t.f&Vt)===0?t.nodes.start:s;n!==null;){var a=wn(n);if(r.before(n),n===i)return;n=a}}function Kt(e,t,s){t===null?e.effect.first=s:t.next=s,s===null?e.effect.last=t:s.prev=t}function Gi(e,t,...s){var n=new kr(e);_n(()=>{const i=t()??null;n.ensure(i,i&&(r=>i(r,...s)))},cs)}function ba(e,t,s){var n=new kr(e);_n(()=>{var i=t()??null;n.ensure(i,i&&(r=>s(r,i)))},cs)}const Nr=[...` 	
\r\fÂ \v\uFEFF`];function ka(e,t,s){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),s){for(var i in s)if(s[i])n=n?n+" "+i:i;else if(n.length)for(var r=i.length,a=0;(a=n.indexOf(i,a))>=0;){var l=a+r;(a===0||Nr.includes(n[a-1]))&&(l===n.length||Nr.includes(n[l]))?n=(a===0?"":n.substring(0,a))+n.substring(l+1):a=l}}return n===""?null:n}function xa(e,t){return e==null?null:String(e)}function be(e,t,s,n,i,r){var a=e.__className;if(a!==s||a===void 0){var l=ka(s,n,r);l==null?e.removeAttribute("class"):e.className=l,e.__className=s}else if(r&&i!==r)for(var c in r){var d=!!r[c];(i==null||d!==!!i[c])&&e.classList.toggle(c,d)}return r}function bn(e,t,s,n){var i=e.__style;if(i!==t){var r=xa(t);r==null?e.removeAttribute("style"):e.style.cssText=r,e.__style=t}return n}const Sa=Symbol("is custom element"),Ca=Symbol("is html");function ja(e,t){var s=Yi(e);s.value===(s.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function ls(e,t,s,n){var i=Yi(e);i[t]!==(i[t]=s)&&(t==="loading"&&(e[po]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Ta(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function Yi(e){return e.__attributes??(e.__attributes={[Sa]:e.nodeName.includes("-"),[Ca]:e.namespaceURI===$o})}var Or=new Map;function Ta(e){var t=e.getAttribute("is")||e.nodeName,s=Or.get(t);if(s)return s;Or.set(t,s=[]);for(var n,i=e,r=Element.prototype;r!==i;){n=ti(i);for(var a in n)n[a].set&&s.push(a);i=dr(i)}return s}function Fr(e,t,s=t){var n=new WeakSet;Pi(e,"input",async i=>{var r=i?e.defaultValue:e.value;if(r=Hn(e)?Jn(r):r,s(r),re!==null&&n.add(re),await ca(),r!==(r=t())){var a=e.selectionStart,l=e.selectionEnd,c=e.value.length;if(e.value=r??"",l!==null){var d=e.value.length;a===l&&l===c&&d>c?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=a,e.selectionEnd=Math.min(l,d))}}}),Ts(t)==null&&e.value&&(s(Hn(e)?Jn(e.value):e.value),re!==null&&n.add(re)),Fn(()=>{var i=t();if(e===document.activeElement){var r=Kn??re;if(n.has(r))return}Hn(e)&&i===Jn(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Qi(e,t,s=t){Pi(e,"change",n=>{var i=n?e.defaultChecked:e.checked;s(i)}),Ts(t)==null&&s(e.checked),Fn(()=>{var n=t();e.checked=!!n})}function Hn(e){var t=e.type;return t==="number"||t==="range"}function Jn(e){return e===""?null:+e}function Lr(e,t){return e===t||(e==null?void 0:e[$s])===t}function kn(e={},t,s,n){return na(()=>{var i,r;return Fn(()=>{i=r,r=[],Ts(()=>{e!==s(...r)&&(t(e,...r),i&&Lr(s(...i),e)&&t(null,...i))})}),()=>{Ht(()=>{r&&Lr(s(...r),e)&&t(null,...r)})}}),e}function za(e=!1){const t=$e,s=t.l.u;if(!s)return;let n=()=>ua(t.s);if(e){let i=0,r={};const a=Nn(()=>{let l=!1;const c=t.s;for(const d in c)c[d]!==r[d]&&(r[d]=c[d],l=!0);return l&&i++,i});n=()=>o(a)}s.b.length&&ta(()=>{Ur(t,n),$n(s.b)}),rn(()=>{const i=Ts(()=>s.m.map(ho));return()=>{for(const r of i)typeof r=="function"&&r()}}),s.a.length&&rn(()=>{Ur(t,n),$n(s.a)})}function Ur(e,t){if(e.l.s)for(const s of e.l.s)o(s);t()}function xr(e,t,s){if(e==null)return t(void 0),s&&s(void 0),ss;const n=Ts(()=>e.subscribe(t,s));return n.unsubscribe?()=>n.unsubscribe():n}const Ps=[];function Ea(e,t){return{subscribe:Js(e,t).subscribe}}function Js(e,t=ss){let s=null;const n=new Set;function i(l){if(ci(e,l)&&(e=l,s)){const c=!Ps.length;for(const d of n)d[1](),Ps.push(d,e);if(c){for(let d=0;d<Ps.length;d+=2)Ps[d][0](Ps[d+1]);Ps.length=0}}}function r(l){i(l(e))}function a(l,c=ss){const d=[l,c];return n.add(d),n.size===1&&(s=t(i,r)||ss),l(e),()=>{n.delete(d),n.size===0&&s&&(s(),s=null)}}return{set:i,update:r,subscribe:a}}function Sr(e,t,s){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return Ea(s,(a,l)=>{let c=!1;const d=[];let g=0,y=ss;const u=()=>{if(g)return;y();const h=t(n?d[0]:d,a,l);r?a(h):y=typeof h=="function"?h:ss},v=i.map((h,x)=>xr(h,m=>{d[x]=m,g&=~(1<<x),c&&u()},()=>{g|=1<<x}));return c=!0,u(),function(){$n(v),y(),c=!1}})}function es(e){let t;return xr(e,s=>t=s)(),t}let lr=Symbol();function qt(e,t,s){const n=s[t]??(s[t]={store:null,source:Si(void 0),unsubscribe:ss});if(n.store!==e&&!(lr in s))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=ss;else{var i=!0;n.unsubscribe=xr(e,r=>{i?n.source.v=r:f(n.source,r)}),i=!1}return e&&lr in s?es(e):o(n.source)}function Wt(){const e={};function t(){yr(()=>{for(var s in e)e[s].unsubscribe();ei(e,lr,{enumerable:!1,value:!0})})}return[e,t]}function cr(e,t,s,n){var i=n,r=!0,a=()=>(r&&(r=!1,i=n),i),l;l=e[t],l===void 0&&n!==void 0&&(l=a());var c;return c=()=>{var d=e[t];return d===void 0?a():(r=!0,d)},c}function Cr(e){$e===null&&go(),gn&&$e.l!==null?Pa($e).m.push(e):rn(()=>{const t=Ts(e);if(typeof t=="function")return t})}function Pa(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Ma="5";var Xr;typeof window<"u"&&((Xr=window.__svelte??(window.__svelte={})).v??(Xr.v=new Set)).add(Ma);function Ki(){return window.location.pathname||"/"}function $a(){return window.location.search?window.location.search.slice(1):""}function qa(){const e=window.location.hash;if(e&&e.startsWith("#/")){const t=e.slice(1);history.replaceState(null,"",t)}}qa();const Ln=Js(Ki());window.addEventListener("popstate",()=>{Ln.set(Ki())});const jr=Sr(Ln,e=>e.split("?")[0]||"/"),Ba=Sr(Ln,()=>$a()),Ia=Sr(Ba,e=>Object.fromEntries(new URLSearchParams(e)));function Xi(e){history.pushState(null,"",e),Ln.set(e)}Io();let Ra=0;function Aa(){const{subscribe:e,update:t}=Js([]);return{subscribe:e,add(s,n="info",i=3e3){const r={id:Ra++,message:s,type:n};t(a=>[...a,r]),setTimeout(()=>{t(a=>a.filter(l=>l.id!==r.id))},i)},remove(s){t(n=>n.filter(i=>i.id!==s))}}}const Zi=Aa();function ve(e,t,s){Zi.add(e,t,s)}var Da=S('<div role="alert"> </div>');function Na(e,t){let s=cr(t,"type",3,"info");var n=Da(),i=p(n);W(()=>{be(n,1,`toast ${s()??""}`,"svelte-1i7wnxu"),N(i,t.message)}),b(e,n)}var Oa=S('<div class="toast-container svelte-3knp8x"></div>');function Fa(e){const t=()=>qt(Zi,"$toasts",s),[s,n]=Wt();var i=Oa();He(i,5,t,r=>r.id,(r,a)=>{Na(r,{get message(){return o(a).message},get type(){return o(a).type}})}),b(e,i),n()}function Te(){const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"http://localhost:3001":"https://yoink.coah80.com"}async function La(e,t={}){const s=await fetch(e,t),n=s.headers.get("content-type");if(!s.ok){let i=`Request failed (${s.status})`;if(n&&n.includes("application/json"))i=(await s.json()).error||i;else{const r=await s.text();console.error("Non-JSON error response:",r.substring(0,500)),i=`Server error ${s.status} (likely VPN blocked)`}throw new Error(i)}return s.json()}async function Ua(e,t={}){return La(`${Te()}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function ur(e,{onMessage:t,onError:s,maxReconnectAttempts:n=10}){let i=0,r=null,a=!1;function l(){a||(r=new EventSource(`${Te()}/api/progress/${e}`),r.onmessage=d=>{try{const g=JSON.parse(d.data);i=0,t(g),(g.stage==="complete"||g.stage==="error"||g.stage==="cancelled")&&c()}catch(g){console.error("SSE parse error:",g)}},r.onerror=()=>{if(r.close(),!a)if(i<n){i++;const d=Math.min(1e3*i,5e3);s&&s({type:"reconnecting",attempt:i,max:n}),setTimeout(l,d)}else s&&s({type:"failed",message:"Connection lost - refresh page to retry"})})}function c(){a=!0,r&&(r.close(),r=null)}return l(),{close:c}}const ln=[],Va=5;function Vr(e){e.parentNode&&e.parentNode.removeChild(e);const t=ln.indexOf(e);t>-1&&ln.splice(t,1)}function Ha(){for(;ln.length>Va;){const e=ln.shift();e&&e.parentNode&&e.parentNode.removeChild(e)}}function Hr(e){const t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t),ln.push(t),Ha(),t.onload=()=>setTimeout(()=>Vr(t),5e3),setTimeout(()=>Vr(t),120*1e3)}function eo(e,t){const s=URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}const cn=Js(sessionStorage.getItem("yoink_clientId")||null),qs=new Set;let Ja=0,Mt=null,Ks=0;const Wa=3;async function Ga(){let e=es(cn);if(!e){try{e=(await(await fetch(`${Te()}/api/connect`,{method:"POST"})).json()).clientId}catch{e="local-"+Date.now()+"-"+Math.random().toString(36).slice(2,11)}sessionStorage.setItem("yoink_clientId",e),cn.set(e)}return e}function Tr(){const e=`job-${++Ja}-${Date.now()}`,t=qs.size===0;if(qs.add(e),t&&!Mt){Ks=0;const s=es(cn);s&&!s.startsWith("local-")&&fetch(`${Te()}/api/heartbeat/${s}`,{method:"POST"}).catch(()=>{}),Mt=setInterval(async()=>{const n=es(cn);if(!(!n||n.startsWith("local-")))try{await fetch(`${Te()}/api/heartbeat/${n}`,{method:"POST"}),Ks=0}catch{Ks++,Ks>=Wa&&(clearInterval(Mt),Mt=null,Ks=0)}},15e3)}return e}function un(e){e?qs.delete(e):qs.clear(),qs.size===0&&Mt&&(clearInterval(Mt),Mt=null)}typeof window<"u"&&window.addEventListener("beforeunload",()=>{Mt&&(clearInterval(Mt),Mt=null),qs.clear()});const Jr=[{text:"yoink it, go on..."},{text:"not cobalt"},{text:"im bored"},{text:"have you yoinked it today?"},{text:"download helium browser",link:"https://helium.computer/",classes:["clickable"]},{text:"dont like it? use cliply (dont)"},{text:"the biggest yt-dlp wrapper of them all"},{text:"awesome name, right?"},{text:"get yoinked!"},{text:"funny message here"},{text:"SHOUTOUT TO COAH"},{text:"new feature: yoink!"},{text:"new feature: ai download"},{text:"welcome to yoink.tools"},{text:"feelin' yoinky?"},{text:"im parched"},{text:"stay hydrated!"},{text:"computers are cool"},{text:"missing assignments?"},{text:"procrastinate with yoink"},{text:"newgrounds.com",link:"https://newgrounds.com",classes:["clickable"]},{text:"bring back flash!"},{text:"FUCK ICE"},{text:"post this one to twitter"},{text:"google i need yoinks! NOW!!!!!"},{text:"im feeling fancy today...",classes:["fancy"]},{text:"powered by yt-dlp"},{text:"hello world!"},{text:"1000+ sites!",link:"https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md",classes:["clickable"]},{text:"yes, that site works. even the one you're thinking of."}],Ya=["4tube","alphaporno","beeg","behindkink","bongacams","cam4","cammodels","camsoda","chaturbate","drtuber","empflix","eporner","erocast","eroprofile","fux","hellporno","hotmovs","iceporn","lovehomeporn","manyvids","motherless","moviefap","noodlemagazine","nuvid","peekvideos","peekvids","playvids","porn","pornbox","pornerbros","pornflip","pornhub","pornotube","pornovoisines","pornoxo","porntop","porntube","redtube","rule34video","slutload","spankbang","stripchat","sunporno","thisvid","tnaflix","tube8","txxx","xhamster","xnxx","xvideos","xxxymovies","youjizz","youporn","zenporn","xtube","erome","hentai","hclips","gotporn","fuq","ashemaletube"];function Qa(e){try{const t=new URL(e).hostname.toLowerCase().replace("www.","");return Ya.some(s=>t.includes(s))}catch{return!1}}const Wn={quality:"1080p",codec:"h264",container:"mp4",audioFormat:"mp3",audioBitrate:"320",filenameStyle:"basic",playlistPreference:null,twitterGifs:!0},Mn=["starting","downloading","processing","remuxing","sending","zipping","playlist-info","reconnecting"];function Ka(){let e={...Wn};try{const r=localStorage.getItem("yoink_settings");r&&(e={...Wn,...JSON.parse(r)})}catch{}const{subscribe:t,set:s,update:n}=Js(e);function i(r){localStorage.setItem("yoink_settings",JSON.stringify(r))}return{subscribe:t,set(r){i(r),s(r)},update(r){n(a=>{const l=r(a);return i(l),l})},setSetting(r,a){n(l=>{const c={...l,[r]:a};return i(c),c})},reset(){const r={...Wn};i(r),s(r)}}}const ks=Ka();let Wr=!1;async function to(){if(!(Wr||!("serviceWorker"in navigator)))try{await navigator.serviceWorker.register("/sw.js"),Wr=!0}catch{}}async function Xa(){return"Notification"in window?Notification.permission==="granted"?"granted":Notification.permission==="denied"?"denied":await Notification.requestPermission():"unsupported"}async function Za(e,t){if(!(!("Notification"in window)||Notification.permission!=="granted")){if(await to(),"serviceWorker"in navigator)try{const s=await navigator.serviceWorker.ready;if(s.active){s.active.postMessage({type:"PLAYLIST_COMPLETE",message:`${e} is ready to download!`,jobId:t});return}}catch{}new Notification("yoink",{body:`${e} is ready to download!`,icon:"/icons/icon-192.png"})}}function el(){let e=[];try{const u=localStorage.getItem("yoink_queue");u&&(e=JSON.parse(u).map(v=>v.isPlaylist&&v.serverJobId&&v.stage!=="ready"?{...v,stage:"reconnecting",progress:v.progress||0,status:"reconnecting..."}:Mn.includes(v.stage)?{...v,stage:"queued",progress:0,status:"interrupted - tap to restart"}:v).filter(v=>v.stage!=="complete"&&v.stage!=="error"))}catch{e=[]}const{subscribe:t,set:s,update:n}=Js(e),i=new Map,r=new Map,a=new Map;function l(u){localStorage.setItem("yoink_queue",JSON.stringify(u))}function c(){return es({subscribe:t})}function d(u){const v=a.get(u);v&&(clearInterval(v),a.delete(u))}function g(u){const v=i.get(u);v&&(v.close(),i.delete(u)),d(u);const h=r.get(u);h&&(un(h),r.delete(u))}const y={subscribe:t,add(u){n(v=>{if(v.some(x=>x.id===u.id))return v;const h=[...v,u];return l(h),h})},remove(u){const h=c().find(x=>x.id===u);if(g(u),h&&Mn.includes(h.stage)){const x=h.serverJobId||u;fetch(`${Te()}/api/cancel/${x}`,{method:"POST"}).catch(()=>{})}n(x=>{const m=x.filter(k=>k.id!==u);return l(m),m})},updateItem(u,v){n(h=>{const x=h.map(m=>m.id===u?{...m,...v}:m);return l(x),x})},clear(){c().forEach(v=>{if(g(v.id),Mn.includes(v.stage)){const h=v.serverJobId||v.id;fetch(`${Te()}/api/cancel/${h}`,{method:"POST"}).catch(()=>{})}}),i.clear(),r.clear(),a.clear(),s([]),l([])},startDownload(u){if(u.isPlaylist){this._startPlaylistDownload(u);return}this._startDirectDownload(u)},_startDirectDownload(u){const v=es(ks),h=Tr();r.set(u.id,h),this.updateItem(u.id,{stage:"starting",status:"starting download...",startTime:Date.now()});const x=ur(u.id,{onMessage:C=>{const R={stage:C.stage,status:C.message};if(C.progress!==void 0&&(R.progress=C.progress),C.speed!==void 0&&(R.speed=C.speed),C.eta!==void 0&&(R.eta=C.eta),C.totalVideos!==void 0&&(R.videoCount=C.totalVideos),C.currentVideo!==void 0&&(R.currentVideo=C.currentVideo),C.currentVideoTitle!==void 0&&(R.currentVideoTitle=C.currentVideoTitle),C.format!==void 0&&(R.formatDisplay=C.format),C.downloadedCount!==void 0&&(R.downloadedCount=C.downloadedCount),C.failedVideos&&(R.failedVideos=C.failedVideos),C.failedCount!==void 0&&(R.failedCount=C.failedCount),this.updateItem(u.id,R),C.stage==="complete"){R.endTime=Date.now(),this.updateItem(u.id,R),g(u.id);const G=c().find(de=>de.id===u.id),se=G!=null&&G.startTime?Math.floor((Date.now()-G.startTime)/1e3):0,ke=se>=60?`${Math.floor(se/60)}m ${se%60}s`:`${se}s`,_e=u.format==="images"?"gallery download complete!":`download complete! (${ke})`;ve(_e,"success"),setTimeout(()=>this.remove(u.id),5e3)}else C.stage==="error"?(g(u.id),ve(C.message,"error")):C.stage==="cancelled"&&g(u.id)},onError:C=>{C.type==="reconnecting"?this.updateItem(u.id,{status:`reconnecting... (${C.attempt}/${C.max})`}):(this.updateItem(u.id,{stage:"error",status:C.message}),g(u.id))}});i.set(u.id,x);const m=new URLSearchParams({url:u.url,format:u.format,filename:u.title,quality:v.quality,container:v.container,audioFormat:v.audioFormat,audioBitrate:v.audioBitrate,progressId:u.id,twitterGifs:v.twitterGifs!==!1?"true":"false"});let k;u.format==="images"?k="/api/gallery/download":k="/api/download",Hr(`${Te()}${k}?${m.toString()}`)},async _startPlaylistDownload(u){const v=es(ks);this.updateItem(u.id,{stage:"starting",status:"starting playlist download...",startTime:Date.now()}),to(),Xa();try{const h=es(cn),m=(await Ua("/api/playlist/start",{url:u.url,format:u.format,quality:v.quality,container:v.container,audioFormat:v.audioFormat,audioBitrate:v.audioBitrate,clientId:h||void 0})).jobId;this.updateItem(u.id,{serverJobId:m}),this._connectPlaylistSSE(u.id,m),this._startPlaylistPolling(u.id,m)}catch(h){this.updateItem(u.id,{stage:"error",status:h.message||"failed to start playlist"}),ve(h.message||"failed to start playlist","error")}},_connectPlaylistSSE(u,v){const h=ur(v,{onMessage:x=>{this._handlePlaylistUpdate(u,x)},onError:()=>{}});i.set(u,h)},_startPlaylistPolling(u,v){d(u);const h=setInterval(async()=>{try{const x=await fetch(`${Te()}/api/playlist/status/${v}`);if(!x.ok){x.status===404&&(this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),g(u),ve("playlist expired â try again!","error"));return}const m=await x.json();this._handlePlaylistUpdate(u,{stage:m.status==="complete"?"complete":m.status,message:m.message,progress:m.progress,totalVideos:m.totalVideos,currentVideo:m.currentVideo,currentVideoTitle:m.currentVideoTitle,failedVideos:m.failedVideos,failedCount:m.failedCount,downloadedCount:m.videosCompleted,downloadToken:m.downloadToken,fileName:m.fileName,fileSize:m.fileSize,speed:m.speed,eta:m.eta})}catch{}},3e3);a.set(u,h)},_handlePlaylistUpdate(u,v){const h={stage:v.stage,status:v.message};if(v.progress!==void 0&&(h.progress=v.progress),v.speed!==void 0&&(h.speed=v.speed),v.eta!==void 0&&(h.eta=v.eta),v.totalVideos!==void 0&&(h.videoCount=v.totalVideos),v.currentVideo!==void 0&&(h.currentVideo=v.currentVideo),v.currentVideoTitle!==void 0&&(h.currentVideoTitle=v.currentVideoTitle),v.downloadedCount!==void 0&&(h.downloadedCount=v.downloadedCount),v.failedVideos&&(h.failedVideos=v.failedVideos),v.failedCount!==void 0&&(h.failedCount=v.failedCount),v.stage==="complete"&&v.downloadToken){h.stage="ready",h.downloadToken=v.downloadToken,h.fileName=v.fileName,h.fileSize=v.fileSize,h.endTime=Date.now(),h.status="playlist ready â tap to download",this.updateItem(u,h),g(u);const m=c().find(k=>k.id===u);ve(`${(m==null?void 0:m.title)||"playlist"} is ready to download!`,"success",8e3),Za((m==null?void 0:m.title)||"playlist",m==null?void 0:m.serverJobId);return}if(v.stage==="error"){this.updateItem(u,h),g(u),ve(v.message,"error");return}if(v.stage==="cancelled"){this.updateItem(u,h),g(u);return}this.updateItem(u,h)},async downloadReady(u){const h=c().find(x=>x.id===u);if(!(!h||!h.downloadToken)){if(h.serverJobId)try{if(!(await fetch(`${Te()}/api/playlist/status/${h.serverJobId}`)).ok){this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),ve("playlist expired â try again!","error");return}}catch{this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),ve("playlist expired â try again!","error");return}Hr(`${Te()}/api/playlist/download/${h.downloadToken}`),ve("downloading playlist zip...","success"),setTimeout(()=>this.remove(u),1e4)}},startAllQueued(){c().filter(h=>h.stage==="queued").forEach((h,x)=>{setTimeout(()=>this.startDownload(h),x*500)})},retryDownload(u){if(!c().find(C=>C.id===u))return;const x=Date.now().toString()+Math.random().toString(36).substr(2,9);this.updateItem(u,{id:x,stage:"queued",progress:0,status:"queued for retry",logs:[],endTime:null,serverJobId:null,downloadToken:null});const k=c().find(C=>C.id===x);k&&this.startDownload(k)},async finishPlaylistEarly(u){const h=c().find(m=>m.id===u),x=(h==null?void 0:h.serverJobId)||u;try{await fetch(`${Te()}/api/finish-early/${x}`,{method:"POST"})}catch{ve("failed to finish early","error")}},resumePlaylistJobs(){c().filter(v=>v.stage==="reconnecting"&&v.serverJobId).forEach(v=>{this._connectPlaylistSSE(v.id,v.serverJobId),this._startPlaylistPolling(v.id,v.serverJobId)})}};return typeof window<"u"&&setTimeout(()=>y.resumePlaylistJobs(),500),y}const We=el();var tl=Fe('<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',1),sl=Fe('<polyline points="20 6 9 17 4 12"></polyline>'),nl=Fe('<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',1),rl=Fe('<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',1),il=Fe('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),ol=Fe('<path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path d="M9 12l2 2 4-4"></path>',1),al=Fe('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),ll=S('<span class="queue-item-format svelte-151vo4w"> </span>'),cl=S('<span class="queue-item-timer svelte-151vo4w"> </span>'),ul=S('<span class="queue-item-timer svelte-151vo4w"> </span>'),vl=S('<button class="queue-item-download svelte-151vo4w" title="Download"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),dl=S('<button class="queue-item-retry svelte-151vo4w" title="Retry"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg></button>'),fl=S('<button class="queue-item-retry svelte-151vo4w" title="Start now"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button>'),hl=S('<button class="queue-item-retry svelte-151vo4w" title="Download now (skip remaining)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),pl=S('<div class="queue-item-progress svelte-151vo4w"><div class="queue-item-progress-fill svelte-151vo4w"></div></div>'),gl=S('<div class="queue-item-failed-item svelte-151vo4w"><span class="queue-item-failed-num svelte-151vo4w"> </span> <span> </span></div>'),ml=S('<div class="queue-item-failed svelte-151vo4w"><div class="queue-item-failed-header svelte-151vo4w"> </div> <!></div>'),wl=S('<div><div class="queue-item-header svelte-151vo4w"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-151vo4w"><!></svg></div> <div class="queue-item-info svelte-151vo4w"><div class="queue-item-title svelte-151vo4w"> <!> <!></div> <div> </div></div> <div class="queue-item-actions svelte-151vo4w"><!> <!> <!> <button class="queue-item-remove svelte-151vo4w" title="Remove"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div></div> <!> <!></div>');function _l(e,t){ht(t,!0);let s=we(()=>Mn.includes(t.item.stage)),n=we(()=>t.item.stage==="complete"),i=we(()=>t.item.stage==="error"),r=we(()=>t.item.stage==="queued"),a=we(()=>t.item.stage==="ready"),l=we(()=>o(s)&&t.item.progress!==void 0),c=we(()=>o(a)?"success":o(s)?"active":o(n)?"success":o(i)?"error":""),d=we(()=>{if(!t.item.fileSize)return"";const $=t.item.fileSize/(1024*1024);return $>=1024?`${($/1024).toFixed(1)} GB`:`${$.toFixed(1)} MB`}),g=we(()=>{if(!t.item.startTime||!o(s)&&!o(n))return"";const $=o(n)&&t.item.endTime?t.item.endTime:Date.now(),B=Math.floor(($-t.item.startTime)/1e3),Q=Math.floor(B/60);return Q>0?`${Q}m ${B%60}s`:`${B}s`}),y=we(()=>{if(t.item.isPlaylist&&t.item.currentVideo&&t.item.videoCount)return`${t.item.currentVideo}/${t.item.videoCount} - ${t.item.currentVideoTitle||t.item.status}`;let $=t.item.status||"waiting...";if(o(s)&&(t.item.speed||t.item.eta)){const B=[];t.item.speed&&B.push(t.item.speed),t.item.eta&&B.push(`~${t.item.eta} left`),B.length&&($+=` Â· ${B.join(" Â· ")}`)}return $});var u=wl();let v;u.__click=()=>{o(a)?We.downloadReady(t.item.id):o(r)&&We.startDownload(t.item)};var h=p(u),x=p(h);let m;var k=p(x),C=p(k);{var R=$=>{var B=tl();b($,B)},ue=$=>{var B=Je(),Q=je(B);{var K=me=>{var Ee=sl();b(me,Ee)},oe=me=>{var Ee=Je(),Le=je(Ee);{var Ue=Qe=>{var nt=nl();b(Qe,nt)},st=Qe=>{var nt=Je(),At=je(nt);{var us=gt=>{var Nt=rl();b(gt,Nt)},Dt=gt=>{var Nt=Je(),Ws=je(Nt);{var Gs=z=>{var Y=il();b(z,Y)},T=z=>{var Y=Je(),ce=je(Y);{var E=j=>{var H=ol();b(j,H)},P=j=>{var H=al();b(j,H)};D(ce,j=>{o(s)?j(E):j(P,!1)},!0)}b(z,Y)};D(Ws,z=>{t.item.format==="audio"?z(Gs):z(T,!1)},!0)}b(gt,Nt)};D(At,gt=>{t.item.isPlaylist?gt(us):gt(Dt,!1)},!0)}b(Qe,nt)};D(Le,Qe=>{o(i)?Qe(Ue):Qe(st,!1)},!0)}b(me,Ee)};D(Q,me=>{o(n)?me(K):me(oe,!1)},!0)}b($,B)};D(C,$=>{o(a)?$(R):$(ue,!1)})}var G=w(x,2),se=p(G),ke=p(se),_e=w(ke);{var de=$=>{var B=ll(),Q=p(B);W(()=>N(Q,t.item.formatDisplay)),b($,B)};D(_e,$=>{t.item.isPlaylist&&t.item.formatDisplay&&$(de)})}var Be=w(_e,2);{var Ge=$=>{var B=cl(),Q=p(B);W(()=>N(Q,o(d))),b($,B)},Ye=$=>{var B=Je(),Q=je(B);{var K=oe=>{var me=ul(),Ee=p(me);W(()=>N(Ee,o(g))),b(oe,me)};D(Q,oe=>{o(g)&&oe(K)},!0)}b($,B)};D(Be,$=>{o(a)&&o(d)?$(Ge):$(Ye,!1)})}var U=w(se,2),V=p(U),fe=w(G,2),M=p(fe);{var q=$=>{var B=vl();B.__click=Q=>{Q.stopPropagation(),We.downloadReady(t.item.id)},b($,B)},L=$=>{var B=Je(),Q=je(B);{var K=oe=>{var me=dl();me.__click=Ee=>{Ee.stopPropagation(),We.retryDownload(t.item.id)},b(oe,me)};D(Q,oe=>{o(i)&&t.item.url&&oe(K)},!0)}b($,B)};D(M,$=>{o(a)?$(q):$(L,!1)})}var A=w(M,2);{var he=$=>{var B=fl();B.__click=Q=>{Q.stopPropagation(),We.startDownload(t.item)},b($,B)};D(A,$=>{o(r)&&$(he)})}var Z=w(A,2);{var pe=$=>{var B=hl();B.__click=Q=>{Q.stopPropagation(),We.finishPlaylistEarly(t.item.id)},b($,B)};D(Z,$=>{t.item.isPlaylist&&o(s)&&t.item.currentVideo>0&&$(pe)})}var ge=w(Z,2);ge.__click=$=>{$.stopPropagation(),We.remove(t.item.id)};var ee=w(h,2);{var ie=$=>{var B=pl(),Q=p(B);W(()=>bn(Q,`width: ${(t.item.progress||0)??""}%`)),b($,B)};D(ee,$=>{o(l)&&$(ie)})}var J=w(ee,2);{var le=$=>{var B=ml(),Q=p(B),K=p(Q),oe=w(Q,2);He(oe,17,()=>t.item.failedVideos,et,(me,Ee)=>{var Le=gl(),Ue=p(Le),st=p(Ue),Qe=w(Ue,2),nt=p(Qe);W(()=>{N(st,`#${o(Ee).num??""}`),N(nt,`${(o(Ee).title||"Video")??""} - ${(o(Ee).reason||"Download failed")??""}`)}),b(me,Le)}),W(()=>N(K,`failed videos (${(t.item.failedCount||t.item.failedVideos.length)??""})`)),b($,B)};D(J,$=>{var B;t.item.isPlaylist&&((B=t.item.failedVideos)==null?void 0:B.length)>0&&$(le)})}W(()=>{v=be(u,1,"queue-item svelte-151vo4w",null,v,{clickable:o(a)||o(r)}),m=be(x,1,"queue-item-icon svelte-151vo4w",null,m,{spinning:o(s),ready:o(a)}),N(ke,`${t.item.title??""} `),be(U,1,`queue-item-status ${o(c)??""}`,"svelte-151vo4w"),N(V,o(y))}),b(e,u),pt()}Rt(["click"]);var yl=S('<button class="queue-clear svelte-i3r5ty">clear all</button>'),bl=S('<div class="queue-empty svelte-i3r5ty">no downloads yet</div>'),kl=S('<div class="queue-dropdown-header svelte-i3r5ty"><span class="queue-dropdown-title svelte-i3r5ty">downloads</span> <div class="queue-header-actions svelte-i3r5ty"><button class="queue-start-all svelte-i3r5ty" title="Start all queued"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-i3r5ty"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button> <!></div></div> <div class="queue-list svelte-i3r5ty"><!></div>',1);function so(e,t){ht(t,!0);const s=()=>qt(We,"$queue",n),[n,i]=Wt();let r=we(s),a=we(()=>o(r).length>0);var l=kl(),c=je(l),d=w(p(c),2),g=p(d);g.__click=()=>We.startAllQueued();var y=w(g,2);{var u=k=>{var C=yl();C.__click=()=>{We.clear(),ve("Queue cleared","info")},b(k,C)};D(y,k=>{o(a)&&k(u)})}var v=w(c,2),h=p(v);{var x=k=>{var C=Je(),R=je(C);He(R,17,()=>o(r),ue=>ue.id,(ue,G)=>{_l(ue,{get item(){return o(G)}})}),b(k,C)},m=k=>{var C=bl();b(k,C)};D(h,k=>{o(a)?k(x):k(m,!1)})}b(e,l),pt(),i()}Rt(["click"]);var xl=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-1xkxv2n"></path><polyline points="7 10 12 15 17 10" class="svelte-1xkxv2n"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-1xkxv2n"></line></svg>'),Sl=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="17 1 21 5 17 9" class="svelte-1xkxv2n"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" class="svelte-1xkxv2n"></path><polyline points="7 23 3 19 7 15" class="svelte-1xkxv2n"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" class="svelte-1xkxv2n"></path></svg>'),Cl=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="4 14 10 14 10 20" class="svelte-1xkxv2n"></polyline><polyline points="20 10 14 10 14 4" class="svelte-1xkxv2n"></polyline><line x1="14" y1="10" x2="21" y2="3" class="svelte-1xkxv2n"></line><line x1="3" y1="21" x2="10" y2="14" class="svelte-1xkxv2n"></line></svg>'),jl=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><circle cx="12" cy="12" r="3" class="svelte-1xkxv2n"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" class="svelte-1xkxv2n"></path></svg>'),Tl=S('<a><div class="nav-icon svelte-1xkxv2n"><!></div> <span class="nav-label svelte-1xkxv2n"> </span></a>'),zl=S('<span class="nav-badge svelte-1xkxv2n"> </span>'),El=S('<div class="queue-sheet-overlay svelte-1xkxv2n"></div> <div><div class="sheet-handle svelte-1xkxv2n"></div> <!></div>',1),Pl=S('<nav class="bottom-nav svelte-1xkxv2n"><!> <button><div class="nav-icon svelte-1xkxv2n"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><line x1="8" y1="6" x2="21" y2="6" class="svelte-1xkxv2n"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-1xkxv2n"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-1xkxv2n"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-1xkxv2n"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-1xkxv2n"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-1xkxv2n"></line></svg> <!></div> <span class="nav-label svelte-1xkxv2n">queue</span></button></nav> <!>',1);function Ml(e,t){ht(t,!0);const s=()=>qt(We,"$queue",i),n=()=>qt(jr,"$path",i),[i,r]=Wt();let a=I(!1),l,c=I(0),d=I(!1),g=0,y=0,u=we(s),v=we(()=>o(u).length),h=we(n),x=we(()=>o(u).filter(M=>["starting","downloading","processing","zipping","sending"].includes(M.stage)).length);function m(M){M.preventDefault(),M.stopPropagation(),f(a,!o(a)),f(c,0)}function k(){f(a,!1),f(c,0)}function C(M){const q=l;q&&(q.scrollTop>0&&M.target.closest(".queue-sheet")&&!M.target.closest(".sheet-handle")||(g=M.touches[0].clientY,y=Date.now(),f(d,!0)))}function R(M){if(!o(d))return;const q=M.touches[0].clientY-g;q>0?(f(c,q),M.preventDefault()):f(c,0)}function ue(){if(!o(d))return;f(d,!1);const M=o(c)/(Date.now()-y);o(c)>80||M>.5?k():f(c,0)}const G=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/settings",label:"settings",icon:"settings"}];var se=Pl();Pt("keydown",wr,M=>{M.key==="Escape"&&o(a)&&k()});var ke=je(se),_e=p(ke);He(_e,17,()=>G,et,(M,q)=>{var L=Tl();let A;var he=p(L),Z=p(he);{var pe=J=>{var le=xl();b(J,le)},ge=J=>{var le=Je(),$=je(le);{var B=K=>{var oe=Sl();b(K,oe)},Q=K=>{var oe=Je(),me=je(oe);{var Ee=Ue=>{var st=Cl();b(Ue,st)},Le=Ue=>{var st=Je(),Qe=je(st);{var nt=At=>{var us=jl();b(At,us)};D(Qe,At=>{o(q).icon==="settings"&&At(nt)},!0)}b(Ue,st)};D(me,Ue=>{o(q).icon==="compress"?Ue(Ee):Ue(Le,!1)},!0)}b(K,oe)};D($,K=>{o(q).icon==="convert"?K(B):K(Q,!1)},!0)}b(J,le)};D(Z,J=>{o(q).icon==="download"?J(pe):J(ge,!1)})}var ee=w(he,2),ie=p(ee);W(()=>{A=be(L,1,"bottom-nav-item svelte-1xkxv2n",null,A,{active:o(h)===o(q).href}),ls(L,"href",o(q).href),N(ie,o(q).label)}),b(M,L)});var de=w(_e,2);let Be;de.__click=m;var Ge=p(de),Ye=w(p(Ge),2);{var U=M=>{var q=zl(),L=p(q);W(()=>N(L,o(v))),b(M,q)};D(Ye,M=>{o(v)>0&&M(U)})}var V=w(ke,2);{var fe=M=>{var q=El(),L=je(q);L.__click=k;var A=w(L,2);let he;A.__touchstart=C,A.__touchmove=R,A.__touchend=ue;var Z=w(p(A),2);so(Z,{}),kn(A,pe=>l=pe,()=>l),W(()=>{he=be(A,1,"queue-sheet svelte-1xkxv2n",null,he,{swiping:o(d)}),bn(A,o(c)>0?`transform: translateY(${o(c)}px)`:"")}),b(M,q)};D(V,M=>{o(a)&&M(fe)})}W(()=>Be=be(de,1,"bottom-nav-item queue-item svelte-1xkxv2n",null,Be,{active:o(a),"has-active":o(x)>0})),b(e,se),pt(),r()}Rt(["click","touchstart","touchmove","touchend"]);var $l=S("<a><!></a>");function ts(e,t){const s=()=>qt(jr,"$path",n),[n,i]=Wt();let r=we(()=>s()===t.href);var a=$l();let l;var c=p(a);Gi(c,()=>t.children),W(()=>{l=be(a,1,"nav-link svelte-5q5w88",null,l,{active:o(r)}),ls(a,"href",t.href)}),b(e,a),i()}var ql=S('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> <span>download</span>',1),Bl=S('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> <span>convert</span>',1),Il=S('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> <span>compress</span>',1),Rl=S('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span>settings</span>',1),Al=S('<header class="svelte-4b3o1e"><div class="header-left svelte-4b3o1e"><a href="/" class="logo-link svelte-4b3o1e"><span class="logo-text svelte-4b3o1e">yoink</span> <span class="logo-tld svelte-4b3o1e">.tools</span></a></div> <div class="header-right svelte-4b3o1e"><!> <nav class="nav-links svelte-4b3o1e"><!> <!> <!> <!></nav></div></header>');function Dl(e,t){var s=Al(),n=w(p(s),2),i=p(n);{var r=y=>{var u=Je(),v=je(u);Gi(v,()=>t.extraContent),b(y,u)};D(i,y=>{t.extraContent&&y(r)})}var a=w(i,2),l=p(a);ts(l,{href:"/",children:(y,u)=>{var v=ql();b(y,v)}});var c=w(l,2);ts(c,{href:"/convert",children:(y,u)=>{var v=Bl();b(y,v)}});var d=w(c,2);ts(d,{href:"/compress",children:(y,u)=>{var v=Il();b(y,v)}});var g=w(d,2);ts(g,{href:"/settings",children:(y,u)=>{var v=Rl();b(y,v)}}),b(e,s)}var Nl=S('<footer class="svelte-ww03jg"><div class="footer-left svelte-ww03jg"><div>this is a <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-ww03jg">yt-dlp</a> wrapper</div> <div>inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt</a>, love u wukko</div> <div>youtube powered by <a href="https://patriick.dev/" target="_blank" rel="noopener" class="svelte-ww03jg">patrick</a> at <a href="https://cobalt.meowing.de" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt.meowing.de</a></div> <div class="legal svelte-ww03jg">by using this site you agree to our <a href="/privacy" class="svelte-ww03jg">privacy policy</a></div></div> <div class="footer-right svelte-ww03jg"><a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-ww03jg">github</a> <span>Â·</span> <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-ww03jg">coah80.com</a> <span>Â·</span> <a href="/privacy" class="svelte-ww03jg">privacy</a></div></footer>');function Ol(e){var t=Nl();b(e,t)}var Fl=S('<span class="queue-badge svelte-1picwiz"> </span>'),Ll=S('<div class="queue-dropdown svelte-1picwiz"><!></div>'),Ul=S('<div class="queue-menu svelte-1picwiz"><button class="queue-toggle svelte-1picwiz"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1picwiz"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> queue <!></button> <!></div>');function Vl(e,t){ht(t,!0);const s=()=>qt(We,"$queue",n),[n,i]=Wt();let r=I(!1),a,l=we(s),c=we(()=>o(l).length);function d(k){k.stopPropagation(),f(r,!o(r))}function g(k){a&&!a.contains(k.target)&&f(r,!1)}rn(()=>(document.addEventListener("click",g),()=>document.removeEventListener("click",g)));var y=Ul(),u=p(y);u.__click=d;var v=w(p(u),2);{var h=k=>{var C=Fl(),R=p(C);W(()=>N(R,o(c))),b(k,C)};D(v,k=>{o(c)>0&&k(h)})}var x=w(u,2);{var m=k=>{var C=Ll(),R=p(C);so(R,{}),b(k,C)};D(x,k=>{o(r)&&k(m)})}kn(y,k=>a=k,()=>a),b(e,y),pt(),i()}Rt(["click"]);var Hl=S('<div class="spinner svelte-1ea6fjo" role="status" aria-label="Loading"></div>');function no(e){var t=Hl();b(e,t)}function ro(e){if(e===0||!Number.isFinite(e)||e<0)return"0 B";const t=1024,s=["B","KB","MB","GB","TB"],n=Math.min(Math.max(Math.floor(Math.log(e)/Math.log(t)),0),s.length-1);return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+s[n]}function Gr(e){try{const t=new URL(e);if(t.hostname==="youtu.be"){const s=t.pathname.slice(1).split("?")[0],n=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${s}${n?`&list=${n}`:""}`}if(t.hostname.includes("youtube.com")){if(t.pathname.startsWith("/shorts/"))return`https://www.youtube.com/watch?v=${t.pathname.replace("/shorts/","").split("?")[0]}`;if(t.searchParams.get("v")){const s=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${t.searchParams.get("v")}${s?`&list=${s}`:""}`}if(t.pathname==="/playlist"&&t.searchParams.get("list"))return`https://www.youtube.com/playlist?list=${t.searchParams.get("list")}`}return e}catch{return e}}function Yr(e){try{const t=new URL(e).hostname;return t==="youtu.be"||t.includes("youtube.com")}catch{return!1}}function Qr(e){try{return new URL(e).searchParams.has("list")}catch{return!1}}function Kr(){return Date.now().toString()+Math.random().toString(36).substr(2,9)}var Jl=S("<p> </p>"),Wl=S('<button class="clear-btn svelte-et6md" type="button" title="Clear"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button>'),Gl=S('<button class="paste-btn svelte-et6md" type="button" title="Paste from clipboard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" class="svelte-et6md"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" class="svelte-et6md"></path></svg></button>'),Yl=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" class="svelte-et6md"></polygon></svg>'),Ql=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" class="svelte-et6md"></rect><line x1="7" y1="2" x2="7" y2="22" class="svelte-et6md"></line><line x1="17" y1="2" x2="17" y2="22" class="svelte-et6md"></line><line x1="2" y1="12" x2="22" y2="12" class="svelte-et6md"></line><line x1="2" y1="7" x2="7" y2="7" class="svelte-et6md"></line><line x1="2" y1="17" x2="7" y2="17" class="svelte-et6md"></line><line x1="17" y1="17" x2="22" y2="17" class="svelte-et6md"></line><line x1="17" y1="7" x2="22" y2="7" class="svelte-et6md"></line></svg>'),Kl=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M9 18V5l12-2v13" class="svelte-et6md"></path><circle cx="6" cy="18" r="3" class="svelte-et6md"></circle><circle cx="18" cy="16" r="3" class="svelte-et6md"></circle></svg>'),Xl=Fe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" class="svelte-et6md"></rect><circle cx="8.5" cy="8.5" r="1.5" class="svelte-et6md"></circle><polyline points="21 15 16 10 5 21" class="svelte-et6md"></polyline></svg>'),Zl=S('<button><!> <span class="svelte-et6md"> </span></button>'),ec=S('<div class="yoink-dropdown svelte-et6md"><button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button> <button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> batch add urls</button></div>'),tc=S("<div><!> </div>"),sc=S('<div class="modal-overlay svelte-et6md"><div class="modal svelte-et6md"><div class="modal-title svelte-et6md">playlist detected!</div> <div class="modal-subtitle svelte-et6md">do you want to download just this video, or the whole playlist?</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="5 3 19 12 5 21 5 3" class="svelte-et6md"></polygon></svg> video</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> playlist</button></div> <label class="modal-toggle svelte-et6md"><input type="checkbox" class="svelte-et6md"/> <span class="modal-toggle-switch svelte-et6md"></span> <span class="modal-toggle-label svelte-et6md">remember this choice</span></label> <div class="modal-hint svelte-et6md">this can be changed in <a href="/settings" class="svelte-et6md">settings</a>!</div></div></div>'),nc=S('<div class="modal-overlay svelte-et6md"><div class="modal batch-modal svelte-et6md"><div class="modal-title svelte-et6md">batch add urls</div> <div class="modal-subtitle svelte-et6md">paste multiple URLs, one per line</div> <textarea class="batch-textarea svelte-et6md"></textarea> <div class="batch-count svelte-et6md"><span class="svelte-et6md"> </span> urls detected</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md">cancel</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button></div></div></div>'),rc=S('<!> <main class="svelte-et6md"><div class="branding svelte-et6md"><h1 class="svelte-et6md">yoink<span class="brand-tld svelte-et6md">.tools</span></h1> <!></div> <div class="input-container svelte-et6md"><div class="url-input-wrapper svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" class="svelte-et6md"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" class="svelte-et6md"></path></svg> <input type="text" class="url-input svelte-et6md" placeholder="paste the link here..." autocomplete="off" spellcheck="false"/> <!></div> <div class="format-section svelte-et6md"><div class="segmented-control svelte-et6md"></div> <div><button class="yoink-btn svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-et6md"></path><polyline points="7 10 12 15 17 10" class="svelte-et6md"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-et6md"></line></svg> </button> <button class="yoink-dropdown-toggle svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polyline points="6 9 12 15 18 9" class="svelte-et6md"></polyline></svg></button> <!></div></div> <!></div> <div class="privacy-notice svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="3" y="11" width="18" height="11" rx="2" ry="2" class="svelte-et6md"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4" class="svelte-et6md"></path></svg> <span class="svelte-et6md">files processed in RAM only, auto-deleted after download</span></div></main> <!> <!> <!>',1);function ic(e,t){ht(t,!0);const s=()=>qt(ks,"$settings",n),[n,i]=Wt();let r=I(""),a=I("auto"),l=I(!1),c=I(null),d=I(""),g=I(!1),y=I(!1),u=I(!1),v=I(""),h=I(null),x=I(null),m,k=we(()=>o(v).split(`
`).filter(T=>{const z=T.trim();if(!z)return!1;try{return new URL(z),!0}catch{return!1}}).length);const C=[{id:"auto",label:"auto",icon:"bolt"},{id:"video",label:"video",icon:"video"},{id:"audio",label:"audio",icon:"audio"},{id:"images",label:"images",icon:"image"}];function R(){f(x,Jr[Math.floor(Math.random()*Jr.length)],!0)}function ue(){var T;(T=o(x))!=null&&T.link&&window.open(o(x).link,"_blank")}function G(){let T=sessionStorage.getItem("yoink_shared_url");if(!T&&window.location.pathname==="/share"){const z=new URLSearchParams(window.location.search),ce=(z.get("url")||z.get("text")||"").match(/https?:\/\/[^\s]+/);ce&&(T=ce[0].replace(/[.,!?;:)\]}>]+$/,"")),history.replaceState(null,"","/")}T&&(sessionStorage.removeItem("yoink_shared_url"),f(r,T,!0),setTimeout(()=>U(),150))}rn(()=>{R(),G()});async function se(){try{const T=await navigator.clipboard.readText();T&&(f(r,T.trim(),!0),m==null||m.focus())}catch{ve("Could not read clipboard","error")}}function ke(T,z){f(c,T,!0),f(d,z,!0)}function _e(){f(c,null),f(d,"")}function de(){return new Promise(T=>{f(h,T,!0),f(g,!0)})}function Be(T,z){z&&ks.setSetting("playlistPreference",T),o(h)&&o(h)(T),f(h,null),f(g,!1)}function Ge(){o(h)&&o(h)(null),f(h,null),f(g,!1)}async function Ye(T,z=!1){const Y=Gr(T),ce=o(a)==="auto"?"video":o(a);if(ce==="images"&&Yr(Y))return ve("YouTube doesn't support image downloads","error"),null;const E=Kr(),P=s();let j=!1;if(ce!=="images"&&Qr(Y))if(P.playlistPreference==="video")j=!1;else if(P.playlistPreference==="playlist")j=!0;else{const F=await de();if(F===null)return null;j=F==="playlist"}let H="Loading...";try{if(ce==="images"){const F=await fetch(`${Te()}/api/gallery/metadata?url=${encodeURIComponent(Y)}`),X=F.headers.get("content-type");F.ok&&(X!=null&&X.includes("application/json"))?H=(await F.json()).title||"Gallery":H=Y.substring(0,50)}else{const F=await fetch(`${Te()}/api/metadata?url=${encodeURIComponent(Y)}&playlist=${j}`),X=F.headers.get("content-type");if(F.ok&&(X!=null&&X.includes("application/json"))){const ye=await F.json();if(H=ye.title||"Unknown",ye.usingCookies&&ve("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3),ye.clipNote){const Se=ye.clipNote.toLowerCase().includes("warning")||ye.originalDuration>600;ve(ye.clipNote,Se?"warning":"info",6e3)}}else if(!F.ok&&(X!=null&&X.includes("application/json"))){const ye=await F.json();if(ye.clipUnsupported)return ve("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),null;throw new Error(ye.error||"Metadata fetch failed")}else H=Y.substring(0,50)}}catch{H=Y.substring(0,50)}const O={id:E,title:H,url:Y,format:ce,stage:z?"starting":"queued",status:z?"initializing...":"in queue",progress:0,isPlaylist:j,formatDisplay:ce==="images"?"images":ce==="audio"?P.audioFormat:`${P.quality} ${P.container}`,startTime:z?Date.now():null,failedVideos:[]};return We.add(O),z&&We.startDownload(O),O}async function U(){const T=o(r).trim();if(!T){ve("Please enter a URL","error");return}const z=Gr(T);try{new URL(z)}catch{ve("Please enter a valid URL","error");return}if(Qa(z)&&f(x,{text:"okay dude are you just gonna download porn"},!0),o(a)==="images"&&Yr(z)){ve("YouTube doesn't support image downloads â use video or audio","error");return}f(l,!0);const Y=o(a)==="auto"?"video":o(a),ce=s();let E=!1;if(Y!=="images"&&Qr(z))if(ce.playlistPreference==="video")E=!1;else if(ce.playlistPreference==="playlist")E=!0;else{const j=await de();if(j===null){f(l,!1);return}E=j==="playlist"}const P=Kr();try{ke("loading",Y==="images"?"fetching gallery info...":"fetching video info...");let j;if(Y==="images"){const Se=await fetch(`${Te()}/api/gallery/metadata?url=${encodeURIComponent(z)}`),qe=Se.headers.get("content-type");if(!Se.ok){let Ce="Failed to fetch gallery info";if(qe!=null&&qe.includes("application/json"))Ce=(await Se.json()).error||Ce;else{const Pe=await Se.text();Ce=Pe.includes("Cloudflare")||Pe.includes("403")?"Access denied (VPN blocked?)":`Server error: ${Se.status}`}throw new Error(Ce)}j=await Se.json(),j.title=j.title||"Gallery"}else{const Se=await fetch(`${Te()}/api/metadata?url=${encodeURIComponent(z)}&playlist=${E}`),qe=Se.headers.get("content-type");if(!Se.ok){let Ce="Failed to fetch metadata";if(qe!=null&&qe.includes("application/json")){const Pe=await Se.json();if(Pe.clipUnsupported){ke("error","Could not parse YouTube clip"),ve("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),f(l,!1);return}Ce=Pe.error||Ce}else{const Pe=await Se.text();Ce=`Server error ${Se.status} (likely VPN blocked)`}throw new Error(Ce)}j=await Se.json()}const H=j.title,O=j.isPlaylist&&E,F=Y==="images",X=j.videoCount||j.imageCount||0;j.usingCookies&&ve("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3);const ye={id:P,title:H,url:z,format:Y,stage:"starting",status:"initializing...",progress:0,isPlaylist:O,isGallery:F,videoCount:X,currentVideo:0,currentVideoTitle:"",formatDisplay:Y==="images"?"images":Y==="audio"?ce.audioFormat:`${ce.quality} ${ce.container}`,failedVideos:[],startTime:Date.now()};We.add(ye),We.startDownload(ye),f(r,""),_e()}catch(j){ke("error",j.message||"Download failed"),ve(j.message||"Download failed","error")}finally{f(l,!1)}}function V(T){T.key==="Enter"&&U()}async function fe(){f(u,!1);const T=o(r).trim();if(!T){ve("Please enter a URL","error");return}try{new URL(T)}catch{ve("Please enter a valid URL","error");return}await Ye(T),f(r,"")}function M(){f(u,!1),f(v,""),f(y,!0)}async function q(){const T=o(v).split(`
`).map(z=>z.trim()).filter(z=>{try{return new URL(z),!0}catch{return!1}});if(T.length===0){ve("No valid URLs found","error");return}f(y,!1),ve(`Adding ${T.length} URLs to queue...`,"info");for(const z of T)await Ye(z,!1);ve(`${T.length} items added to queue`,"success")}let L=I(!1);var A=rc();Pt("click",wr,T=>{T.target.closest(".yoink-btn-wrapper")||f(u,!1)});var he=je(A);Dl(he,{extraContent:z=>{Vl(z,{})}});var Z=w(he,2),pe=p(Z),ge=w(p(pe),2);{var ee=T=>{var z=Jl();let Y;z.__click=ue;var ce=p(z);W(E=>{Y=be(z,1,"splash svelte-et6md",null,Y,E),bn(z,o(x).link?"cursor: pointer;":""),N(ce,o(x).text)},[()=>{var E,P,j;return{fancy:(E=o(x).classes)==null?void 0:E.includes("fancy"),clickable:(P=o(x).classes)==null?void 0:P.includes("clickable"),rainbow:(j=o(x).classes)==null?void 0:j.includes("rainbow")}}]),b(T,z)};D(ge,T=>{o(x)&&T(ee)})}var ie=w(pe,2),J=p(ie),le=w(p(J),2);le.__keydown=V,kn(le,T=>m=T,()=>m);var $=w(le,2);{var B=T=>{var z=Wl();z.__click=()=>{f(r,""),m==null||m.focus()},b(T,z)},Q=T=>{var z=Gl();z.__click=se,b(T,z)};D($,T=>{o(r)?T(B):T(Q,!1)})}var K=w(J,2),oe=p(K);He(oe,21,()=>C,et,(T,z)=>{var Y=Zl();let ce;Y.__click=()=>f(a,o(z).id,!0);var E=p(Y);{var P=F=>{var X=Yl();b(F,X)},j=F=>{var X=Je(),ye=je(X);{var Se=Ce=>{var Pe=Ql();b(Ce,Pe)},qe=Ce=>{var Pe=Je(),xt=je(Pe);{var ze=Yt=>{var Qt=Kl();b(Yt,Qt)},Gt=Yt=>{var Qt=Je(),Sn=je(Qt);{var Cn=zs=>{var Ys=Xl();b(zs,Ys)};D(Sn,zs=>{o(z).icon==="image"&&zs(Cn)},!0)}b(Yt,Qt)};D(xt,Yt=>{o(z).icon==="audio"?Yt(ze):Yt(Gt,!1)},!0)}b(Ce,Pe)};D(ye,Ce=>{o(z).icon==="video"?Ce(Se):Ce(qe,!1)},!0)}b(F,X)};D(E,F=>{o(z).icon==="bolt"?F(P):F(j,!1)})}var H=w(E,2),O=p(H);W(()=>{ce=be(Y,1,"segment svelte-et6md",null,ce,{active:o(a)===o(z).id}),N(O,o(z).label)}),b(T,Y)});var me=w(oe,2);let Ee;var Le=p(me);Le.__click=U;var Ue=w(p(Le)),st=w(Le,2);st.__click=T=>{T.stopPropagation(),f(u,!o(u))};var Qe=w(st,2);{var nt=T=>{var z=ec(),Y=p(z);Y.__click=fe;var ce=w(Y,2);ce.__click=M,b(T,z)};D(Qe,T=>{o(u)&&T(nt)})}var At=w(K,2);{var us=T=>{var z=tc(),Y=p(z);{var ce=P=>{no(P)};D(Y,P=>{o(c)==="loading"&&P(ce)})}var E=w(Y);W(()=>{be(z,1,`status ${o(c)??""}`,"svelte-et6md"),N(E,` ${o(d)??""}`)}),b(T,z)};D(At,T=>{o(c)&&T(us)})}var Dt=w(Z,2);Ol(Dt);var gt=w(Dt,2);{var Nt=T=>{var z=sc();z.__click=O=>{O.target===O.currentTarget&&Ge()};var Y=p(z),ce=w(p(Y),4),E=p(ce);E.__click=()=>Be("video",o(L));var P=w(E,2);P.__click=()=>Be("playlist",o(L));var j=w(ce,2),H=p(j);Qi(H,()=>o(L),O=>f(L,O)),b(T,z)};D(gt,T=>{o(g)&&T(Nt)})}var Ws=w(gt,2);{var Gs=T=>{var z=nc();z.__click=X=>{X.target===X.currentTarget&&f(y,!1)};var Y=p(z),ce=w(p(Y),4);ls(ce,"placeholder",`https://youtube.com/watch?v=...
https://youtube.com/watch?v=...
https://youtube.com/watch?v=...`);var E=w(ce,2),P=p(E),j=p(P),H=w(E,2),O=p(H);O.__click=()=>f(y,!1);var F=w(O,2);F.__click=q,W(()=>N(j,o(k))),Fr(ce,()=>o(v),X=>f(v,X)),b(T,z)};D(Ws,T=>{o(y)&&T(Gs)})}W(()=>{Ee=be(me,1,"yoink-btn-wrapper svelte-et6md",null,Ee,{open:o(u)}),Le.disabled=o(l),N(Ue,` ${o(l)?"loading...":"yoink"}`)}),Pt("focus",le,_e),Fr(le,()=>o(r),T=>f(r,T)),b(e,A),pt(),i()}Rt(["click","keydown"]);var oc=S('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> <span>Download</span>',1),ac=S('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> <span>Convert</span>',1),lc=S('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> <span>Compress</span>',1),cc=S('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span>Settings</span>',1),uc=S('<header class="svelte-67r2h0"><div class="header-center svelte-67r2h0"><a href="/" class="logo-link svelte-67r2h0"><span class="logo-text svelte-67r2h0">yoink</span> <span class="logo-tld svelte-67r2h0">.tools</span></a></div> <nav class="header-right svelte-67r2h0"><!> <!> <!> <!></nav></header>');function xn(e){var t=uc(),s=w(p(t),2),n=p(s);ts(n,{href:"/",children:(l,c)=>{var d=oc();b(l,d)}});var i=w(n,2);ts(i,{href:"/convert",children:(l,c)=>{var d=ac();b(l,d)}});var r=w(i,2);ts(r,{href:"/compress",children:(l,c)=>{var d=lc();b(l,d)}});var a=w(r,2);ts(a,{href:"/settings",children:(l,c)=>{var d=cc();b(l,d)}}),b(e,t)}var vc=S('<footer class="svelte-1dij6pu"><a href="/" class="svelte-1dij6pu">yoink.tools</a> - powered by <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-1dij6pu">yt-dlp</a> Â· <a href="/privacy" class="svelte-1dij6pu">privacy</a></footer>');function Un(e){var t=vc();b(e,t)}var dc=S("<button><span> </span></button>"),fc=S("<button> </button>"),hc=S("<button> </button>"),pc=S("<button> </button>"),gc=S(`<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">video</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">video quality</div> <div class="quality-grid svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">if preferred quality isn't available, the next best option will be used. 1080p is recommended for most uses.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">preferred codec</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">h264: best compatibility, max 1080p. av1: best quality & efficiency, supports 8k & HDR. vp9: same quality as av1 but ~2x larger.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">file container</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp4 has the best compatibility. webm is great for web. mkv supports more features but has limited playback support.</p></div></section>`),mc=S("<button> </button>"),wc=S("<button> </button>"),_c=S('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">audio</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio format</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp3: universal compatibility. m4a: better quality at same size. opus: best compression. flac/wav: lossless quality.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio bitrate</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">higher bitrate = better quality but larger file size. 320kbps is CD-quality for most people.</p></div></section>'),yc=S("<button> </button>"),bc=S("<button> </button>"),kc=S('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">downloads</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">filename style</div> <div class="segmented-control svelte-1ozf5k3"></div> <div class="filename-preview svelte-1ozf5k3"><code class="svelte-1ozf5k3"> </code></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">twitter/x gifs as gif</div> <p class="setting-description svelte-1ozf5k3">automatically convert twitter/x "gifs" (which are actually videos) to real gif files. turn off to keep them as mp4.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">playlist behavior</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">when a link contains a playlist, should we download just the video or the entire playlist? "ask me" will show a popup each time.</p></div></section>'),xc=S('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">advanced</h2> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">allow h265 codec</div> <p class="setting-description svelte-1ozf5k3">enables downloading h265/HEVC videos for platforms like TikTok. higher quality but may have compatibility issues with some players.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">embed metadata</div> <p class="setting-description svelte-1ozf5k3">include title, artist, and other metadata in downloaded files.</p></div> <button></button></div></div> <div class="divider svelte-1ozf5k3"></div> <button class="reset-btn svelte-1ozf5k3">reset all settings</button></section>'),Sc=S('<!> <main class="svelte-1ozf5k3"><div class="page-header svelte-1ozf5k3"><h1 class="svelte-1ozf5k3">settings</h1> <p class="svelte-1ozf5k3">customize your download experience</p></div> <nav class="settings-nav svelte-1ozf5k3"></nav> <!> <!> <!> <!></main> <!>',1);function Cc(e,t){ht(t,!0);const s=()=>qt(ks,"$settings",n),[n,i]=Wt();let r=I("video"),a=we(s);const l=[{id:"video",label:"video"},{id:"audio",label:"audio"},{id:"downloads",label:"downloads"},{id:"advanced",label:"advanced"}],c=["best","4k","1440p","1080p","720p","480p","360p"],d={best:"8k+","4k":"4k","1440p":"1440p","1080p":"1080p","720p":"720p","480p":"480p","360p":"360p"},g=[{value:"h264",label:"h264 + aac"},{value:"av1",label:"av1 + opus"},{value:"vp9",label:"vp9 + opus"}],y=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mkv",label:"mkv"}],u=[{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"opus",label:"opus"},{value:"flac",label:"flac"},{value:"wav",label:"wav"}],v=[{value:"320",label:"320 kbps"},{value:"256",label:"256 kbps"},{value:"192",label:"192 kbps"},{value:"128",label:"128 kbps"}],h=[{value:"classic",label:"classic"},{value:"basic",label:"basic"},{value:"pretty",label:"pretty"},{value:"nerdy",label:"nerdy"}],x=[{value:"ask",label:"ask me"},{value:"video",label:"just video"},{value:"playlist",label:"full playlist"}];let m=we(()=>{const M=o(a).container||"mp4",q={classic:`Video Title (${o(a).quality}).${M}`,basic:`Video Title.${M}`,pretty:`Video Title - Author (${o(a).quality}, ${o(a).codec}).${M}`,nerdy:`Video_Title_${o(a).quality}_${o(a).codec}_aac.${M}`};return q[o(a).filenameStyle]||q.basic});function k(M,q){ks.setSetting(M,q)}function C(){confirm("Reset all settings to defaults?")&&(ks.reset(),ve("Settings reset!","success"))}var R=Sc(),ue=je(R);xn(ue);var G=w(ue,2),se=w(p(G),2);He(se,21,()=>l,et,(M,q)=>{var L=dc();let A;L.__click=()=>f(r,o(q).id,!0);var he=p(L),Z=p(he);W(()=>{A=be(L,1,"settings-nav-item svelte-1ozf5k3",null,A,{active:o(r)===o(q).id}),N(Z,o(q).label)}),b(M,L)});var ke=w(se,2);{var _e=M=>{var q=gc(),L=w(p(q),2),A=w(p(L),2);He(A,21,()=>c,et,(ee,ie)=>{var J=fc();let le;J.__click=()=>k("quality",o(ie));var $=p(J);W(()=>{le=be(J,1,"quality-option svelte-1ozf5k3",null,le,{active:o(a).quality===o(ie)}),N($,d[o(ie)])}),b(ee,J)});var he=w(L,2),Z=w(p(he),2);He(Z,21,()=>g,et,(ee,ie)=>{var J=hc();let le;J.__click=()=>k("codec",o(ie).value);var $=p(J);W(()=>{le=be(J,1,"segment svelte-1ozf5k3",null,le,{active:o(a).codec===o(ie).value}),N($,o(ie).label)}),b(ee,J)});var pe=w(he,2),ge=w(p(pe),2);He(ge,21,()=>y,et,(ee,ie)=>{var J=pc();let le;J.__click=()=>k("container",o(ie).value);var $=p(J);W(()=>{le=be(J,1,"segment svelte-1ozf5k3",null,le,{active:o(a).container===o(ie).value}),N($,o(ie).label)}),b(ee,J)}),b(M,q)};D(ke,M=>{o(r)==="video"&&M(_e)})}var de=w(ke,2);{var Be=M=>{var q=_c(),L=w(p(q),2),A=w(p(L),2);He(A,21,()=>u,et,(pe,ge)=>{var ee=mc();let ie;ee.__click=()=>k("audioFormat",o(ge).value);var J=p(ee);W(()=>{ie=be(ee,1,"segment svelte-1ozf5k3",null,ie,{active:o(a).audioFormat===o(ge).value}),N(J,o(ge).label)}),b(pe,ee)});var he=w(L,2),Z=w(p(he),2);He(Z,21,()=>v,et,(pe,ge)=>{var ee=wc();let ie;ee.__click=()=>k("audioBitrate",o(ge).value);var J=p(ee);W(()=>{ie=be(ee,1,"segment svelte-1ozf5k3",null,ie,{active:o(a).audioBitrate===o(ge).value}),N(J,o(ge).label)}),b(pe,ee)}),b(M,q)};D(de,M=>{o(r)==="audio"&&M(Be)})}var Ge=w(de,2);{var Ye=M=>{var q=kc(),L=w(p(q),2),A=w(p(L),2);He(A,21,()=>h,et,(B,Q)=>{var K=yc();let oe;K.__click=()=>k("filenameStyle",o(Q).value);var me=p(K);W(()=>{oe=be(K,1,"segment svelte-1ozf5k3",null,oe,{active:o(a).filenameStyle===o(Q).value}),N(me,o(Q).label)}),b(B,K)});var he=w(A,2),Z=p(he),pe=p(Z),ge=w(L,2),ee=p(ge),ie=w(p(ee),2);let J;ie.__click=()=>k("twitterGifs",!(!o(a).twitterGifs||o(a).twitterGifs===void 0));var le=w(ge,2),$=w(p(le),2);He($,21,()=>x,et,(B,Q)=>{var K=bc();let oe;K.__click=()=>k("playlistPreference",o(Q).value==="ask"?null:o(Q).value);var me=p(K);W(()=>{oe=be(K,1,"segment svelte-1ozf5k3",null,oe,{active:(o(a).playlistPreference===null?"ask":o(a).playlistPreference)===o(Q).value}),N(me,o(Q).label)}),b(B,K)}),W(()=>{N(pe,o(m)),J=be(ie,1,"toggle svelte-1ozf5k3",null,J,{active:o(a).twitterGifs!==!1})}),b(M,q)};D(Ge,M=>{o(r)==="downloads"&&M(Ye)})}var U=w(Ge,2);{var V=M=>{var q=xc(),L=w(p(q),2),A=p(L),he=w(p(A),2);let Z;he.__click=()=>k("h265",!o(a).h265);var pe=w(L,2),ge=p(pe),ee=w(p(ge),2);let ie;ee.__click=()=>k("metadata",o(a).metadata===!1);var J=w(pe,4);J.__click=C,W(()=>{Z=be(he,1,"toggle svelte-1ozf5k3",null,Z,{active:o(a).h265}),ie=be(ee,1,"toggle svelte-1ozf5k3",null,ie,{active:o(a).metadata!==!1})}),b(M,q)};D(U,M=>{o(r)==="advanced"&&M(V)})}var fe=w(G,2);Un(fe),b(e,R),pt(),i()}Rt(["click"]);var jc=S('<span class="progress-label svelte-1untuf7"> </span>'),Tc=S('<div class="progress-wrapper svelte-1untuf7"><!> <div class="progress-track svelte-1untuf7" role="progressbar"><div class="progress-fill svelte-1untuf7"></div></div></div>');function io(e,t){let s=cr(t,"percent",3,0),n=cr(t,"label",3,""),i=we(()=>Math.min(100,Math.max(0,s())));var r=Tc(),a=p(r);{var l=g=>{var y=jc(),u=p(y);W(()=>N(u,n())),b(g,y)};D(a,g=>{n()&&g(l)})}var c=w(a,2);ls(c,"aria-valuemin",0),ls(c,"aria-valuemax",100);var d=p(c);W(()=>{ls(c,"aria-valuenow",o(i)),bn(d,`width: ${o(i)??""}%`)}),b(e,r)}const Gn=50*1024*1024;async function oo(e,t){const s=Te(),n=Math.ceil(e.size/Gn),i=await fetch(`${s}/api/upload/init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e.name,fileSize:e.size,totalChunks:n})});if(!i.ok){let l="Failed to initialize upload";try{l=(await i.json()).error||l}catch{l=await i.text().catch(()=>l)}throw new Error(l)}const{uploadId:r}=await i.json();for(let l=0;l<n;l++){const c=l*Gn,d=Math.min(c+Gn,e.size),g=e.slice(c,d),y=new FormData;y.append("chunk",g);const u=await fetch(`${s}/api/upload/chunk/${r}/${l}`,{method:"POST",body:y});if(!u.ok){let h=`Failed to upload chunk ${l+1}`;try{h=(await u.json()).error||h}catch{h=await u.text().catch(()=>h)}throw new Error(h)}const v=(l+1)/n*100;t(v)}const a=await fetch(`${s}/api/upload/complete/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!a.ok){let l="Failed to complete upload";try{l=(await a.json()).error||l}catch{l=await a.text().catch(()=>l)}throw new Error(l)}return await a.json()}var zc=S('<button type="button"><svg class="drop-zone-icon svelte-17hyuhr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-17hyuhr">drop a file here or click to browse</p> <p class="drop-zone-hint svelte-17hyuhr">supports video and audio files (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>'),Ec=Fe('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Pc=Fe('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),Mc=S("<button> </button>"),$c=S('<div class="file-info svelte-17hyuhr"><div class="file-header svelte-17hyuhr"><div class="file-icon svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><!></svg></div> <div class="file-details svelte-17hyuhr"><div class="file-name svelte-17hyuhr"> </div> <div class="file-size svelte-17hyuhr"> </div></div> <button class="file-remove svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="convert-options svelte-17hyuhr"><div class="option-label svelte-17hyuhr">convert to</div> <div class="segmented-control svelte-17hyuhr"></div></div> <button class="convert-btn svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> </button></div>'),qc=S('<div class="progress-container svelte-17hyuhr"><!></div>'),Bc=S("<div> </div>"),Ic=S('<!> <main class="svelte-17hyuhr"><div class="page-header svelte-17hyuhr"><h1 class="svelte-17hyuhr">convert</h1> <p class="svelte-17hyuhr">change video and audio file formats</p></div> <div class="converter svelte-17hyuhr"><!> <!> <!> <div class="privacy-notice svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg> <span>files processed in RAM only, auto-deleted after download</span></div></div></main> <!>',1);function Rc(e,t){ht(t,!0);let s=I(null),n=I("mp4"),i=I(!1),r=I(0),a=I(""),l=I(null),c=I(""),d=I(!1),g;const y=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"wav",label:"wav"}];function u(U){return U.type.startsWith("audio/")||["mp3","m4a","wav","flac","ogg","opus"].some(V=>U.name.toLowerCase().endsWith("."+V))}function v(U){if(!U)return;const V=8*1024*1024*1024;if(U.size>V){f(l,"error"),f(c,"File too large. Maximum size is 8GB.");return}f(s,U,!0),f(l,null),f(c,"")}function h(){f(s,null),f(r,0),f(a,""),f(l,null),f(c,""),g&&(g.value="")}async function x(U){let V="";try{V=await(await U.blob()).text()}catch{V=await U.text().catch(()=>"")}try{return JSON.parse(V).error||`Request failed with status ${U.status}`}catch{return V||`Request failed with status ${U.status}`}}async function m(){if(!o(s)||o(i))return;f(i,!0),f(r,0),f(a,"Uploading..."),f(l,null),f(c,"");const U=o(s).size>90*1024*1024;let V=null;try{V=Tr();let fe;if(U){const{filePath:A,fileName:he}=await oo(o(s),ee=>{f(r,ee,!0),f(a,"Uploading...")});f(r,0),f(a,"Converting...");const Z=await fetch(`${Te()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:A,fileName:he,format:o(n)})});if(!Z.ok)throw new Error(await x(Z));const{jobId:pe}=await Z.json();let ge=0;for(;;){if(ge>=300)throw new Error("Conversion timed out after 10 minutes");ge++,await new Promise($=>setTimeout($,2e3));const ee=new AbortController,ie=setTimeout(()=>ee.abort(),1e4);let J;try{J=await fetch(`${Te()}/api/job/${pe}/status`,{signal:ee.signal})}finally{clearTimeout(ie)}if(!J.ok)throw J.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const le=await J.json();if(le.status==="error")throw new Error(le.error||"Conversion failed");if(f(r,le.progress||0,!0),f(a,le.message||"processing...",!0),le.status==="complete")break}fe=await fetch(`${Te()}/api/job/${pe}/download`)}else fe=await new Promise((A,he)=>{const Z=new XMLHttpRequest;Z.open("POST",`${Te()}/api/convert`),Z.upload.onprogress=ge=>{if(ge.lengthComputable){const ee=Math.round(ge.loaded/ge.total*90);f(r,ee,!0),f(a,`uploading... ${ee}%`)}},Z.onload=()=>{f(r,95),f(a,"processing..."),A(new Response(Z.response,{status:Z.status,statusText:Z.statusText,headers:{"Content-Disposition":Z.getResponseHeader("Content-Disposition")||""}}))},Z.onerror=()=>he(new Error("Network error during upload")),Z.responseType="blob";const pe=new FormData;pe.append("file",o(s)),pe.append("format",o(n)),Z.send(pe)});if(!fe.ok)throw new Error(await x(fe));f(r,100),f(a,"complete!");const M=fe.headers.get("Content-Disposition");let q=o(s).name.replace(/\.[^.]+$/,"")+"."+o(n);if(M){const A=M.match(/filename="?([^"]+)"?/);A&&(q=A[1])}const L=await fe.blob();eo(L,q),f(l,"success"),f(c,"conversion complete! download started."),V&&un(V)}catch(fe){f(l,"error"),f(c,fe.message||"conversion failed",!0),f(r,0),f(a,""),V&&un(V)}finally{f(i,!1)}}var k=Ic(),C=je(k);xn(C);var R=w(C,2),ue=w(p(R),2),G=p(ue);{var se=U=>{var V=zc();let fe;V.__click=()=>g==null?void 0:g.click();var M=w(p(V),6);M.__change=q=>{var L;v((L=q.target.files)==null?void 0:L[0]),q.target.value=""},kn(M,q=>g=q,()=>g),W(()=>fe=be(V,1,"drop-zone svelte-17hyuhr",null,fe,{dragover:o(d)})),Pt("dragover",V,q=>{q.preventDefault(),f(d,!0)}),Pt("dragleave",V,q=>{q.preventDefault(),f(d,!1)}),Pt("drop",V,q=>{var L,A;q.preventDefault(),f(d,!1),v((A=(L=q.dataTransfer)==null?void 0:L.files)==null?void 0:A[0])}),b(U,V)},ke=U=>{var V=$c(),fe=p(V),M=p(fe),q=p(M),L=p(q);{var A=K=>{var oe=Ec();b(K,oe)},he=K=>{var oe=Pc();b(K,oe)};D(L,K=>{u(o(s))?K(A):K(he,!1)})}var Z=w(M,2),pe=p(Z),ge=p(pe),ee=w(pe,2),ie=p(ee),J=w(Z,2);J.__click=h;var le=w(fe,2),$=w(p(le),2);He($,21,()=>y,et,(K,oe)=>{var me=Mc();let Ee;me.__click=()=>f(n,o(oe).value,!0);var Le=p(me);W(()=>{Ee=be(me,1,"segment svelte-17hyuhr",null,Ee,{active:o(n)===o(oe).value}),N(Le,o(oe).label)}),b(K,me)});var B=w(le,2);B.__click=m;var Q=w(p(B));W(K=>{ls(pe,"title",o(s).name),N(ge,o(s).name),N(ie,K),B.disabled=o(i),N(Q,` ${o(i)?"converting...":"convert"}`)},[()=>ro(o(s).size)]),b(U,V)};D(G,U=>{o(s)?U(ke,!1):U(se)})}var _e=w(G,2);{var de=U=>{var V=qc(),fe=p(V);io(fe,{get percent(){return o(r)},get label(){return o(a)}}),b(U,V)};D(_e,U=>{o(i)&&U(de)})}var Be=w(_e,2);{var Ge=U=>{var V=Bc(),fe=p(V);W(()=>{be(V,1,`status ${o(l)??""}`,"svelte-17hyuhr"),N(fe,o(c))}),b(U,V)};D(Be,U=>{o(l)&&U(Ge)})}var Ye=w(R,2);Un(Ye),b(e,k),pt()}Rt(["click","change"]);Rt(["click","keydown"]);var Ac=S('<button type="button"><svg class="drop-zone-icon svelte-15o2uhu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-15o2uhu">drop a video here or click to browse</p> <p class="drop-zone-hint svelte-15o2uhu">supports mp4, webm, mov, mkv, avi (max 8GB)</p> <input type="file" accept="video/*" style="display: none;"/></button>'),Dc=S('<div class="file-info svelte-15o2uhu"><div class="file-header svelte-15o2uhu"><div class="file-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-15o2uhu"><div class="file-name svelte-15o2uhu"> </div> <div class="file-size svelte-15o2uhu"> </div></div> <button class="file-remove svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-15o2uhu"><span> </span> <span> </span></div></div>'),Nc=S('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),Oc=S('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),Fc=S('<div class="progress-container svelte-15o2uhu"><div class="progress-header svelte-15o2uhu"><span class="progress-status svelte-15o2uhu"> </span> <span class="progress-percent svelte-15o2uhu"> </span></div> <!> <div class="progress-details svelte-15o2uhu"> </div></div>'),Lc=S('<div class="result-container svelte-15o2uhu"><div class="result-header svelte-15o2uhu"><div class="result-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-15o2uhu">compression complete!</div></div> <div class="result-stats svelte-15o2uhu"><div class="result-stat svelte-15o2uhu"><div class="result-stat-value svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">original</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value arrow svelte-15o2uhu">-></div> <div class="result-stat-label svelte-15o2uhu"></div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">compressed</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">saved</div></div></div> <button class="result-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> compress another</button></div>'),Uc=S('<div class="quality-overlay svelte-15o2uhu"><div class="quality-modal svelte-15o2uhu"><div class="quality-modal-title svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg> quality warning</div> <div class="quality-gauge svelte-15o2uhu"><div class="quality-gauge-bg svelte-15o2uhu"></div> <div class="quality-gauge-mask svelte-15o2uhu"></div> <div class="quality-gauge-needle svelte-15o2uhu"></div> <div class="quality-gauge-center svelte-15o2uhu"></div> <div class="quality-gauge-value svelte-15o2uhu"><span> </span> <span class="quality-gauge-unit svelte-15o2uhu">kbps</span></div></div> <div class="quality-modal-message svelte-15o2uhu">Your video is <strong class="svelte-15o2uhu"> </strong> long. At this size, the estimated bitrate is very low and the output <strong class="svelte-15o2uhu">may look blocky or blurry</strong>. <br/><br/> For better results, try a <strong class="svelte-15o2uhu">shorter clip</strong> or a <strong class="svelte-15o2uhu">larger target size</strong>.</div> <div class="quality-modal-buttons svelte-15o2uhu"><button class="quality-modal-btn cancel svelte-15o2uhu">cancel</button> <button class="quality-modal-btn proceed svelte-15o2uhu">compress anyway</button></div></div></div>'),Vc=S('<!> <main class="svelte-15o2uhu"><div class="page-header svelte-15o2uhu"><h1 class="svelte-15o2uhu">compress</h1> <p class="svelte-15o2uhu">shrink videos for discord, email, or anywhere!</p></div> <div class="compress-container svelte-15o2uhu"><!> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">target size</div> <div class="size-description svelte-15o2uhu">choose a size limit or enter a custom size</div> <div class="size-grid svelte-15o2uhu"></div> <div class="custom-size-row svelte-15o2uhu"><input type="number" class="custom-size-input svelte-15o2uhu" placeholder="custom" min="1" max="4096"/> <span class="custom-size-suffix svelte-15o2uhu">MB</span></div> <div class="estimate svelte-15o2uhu"><span class="estimate-label svelte-15o2uhu">estimated quality</span> <span> </span></div></div> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">encoding preset</div> <div class="size-description svelte-15o2uhu">quality = better compression, slower | fast = quicker encoding</div> <div class="preset-grid svelte-15o2uhu"></div> <label class="checkbox-row svelte-15o2uhu"><input type="checkbox" class="svelte-15o2uhu"/> <span class="svelte-15o2uhu">downscale for better quality (reduces blockiness)</span></label></div> <button class="compress-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg> </button> <!> <div class="privacy-notice svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg> <span>files processed in RAM only, auto-deleted after download</span></div> <!></div></main> <!> <!>',1);function Hc(e,t){ht(t,!0);let s=I(null),n=I(0),i=I(0),r=I(0),a=I(50),l=I(47),c=I(""),d=I(!1),g=I("balanced"),y=I(!1),u=I(!1),v=I(0),h=I(""),x=I(""),m=I(!1),k=I(""),C=I(""),R=I(""),ue=I(!1),G=I(!1),se;const ke=[{size:8,actual:7.5,label:"MB free"},{size:10,actual:9.5,label:"MB"},{size:50,actual:47,label:"MB basic"},{size:100,actual:95,label:"MB"},{size:500,actual:475,label:"MB nitro"}],_e=[{id:"fast",label:"fast",sublabel:"quick encode"},{id:"balanced",label:"balanced",sublabel:"recommended"},{id:"quality",label:"quality",sublabel:"best results"}];let de=we(()=>{if(!o(s)||!o(n))return 0;const E=o(l)*1024*1024,P=128*1024,j=E-P/8*o(n);return Math.floor(j*8/o(n)/1024)}),Be=we(()=>!o(s)||!o(n)?"select a file to see estimate":o(s).size/(1024*1024)<=o(l)?`already under ${o(a)}MB!`:o(de)<500?`~${o(de)} kbps video - very low quality (may be blocky)`:o(de)<1e3?`~${o(de)} kbps video - low quality`:o(de)<2500?`~${o(de)} kbps video - medium quality`:o(de)<5e3?`~${o(de)} kbps video - good quality`:`~${o(de)} kbps video - excellent quality`),Ge=we(()=>o(s)&&o(n)&&o(de)<500&&o(s).size/(1024*1024)>o(l)),Ye=we(()=>-90+Math.min(o(de),2e3)/2e3*180),U=we(()=>{if(!o(n))return"--:--";const E=Math.floor(o(n)/60),P=Math.floor(o(n)%60);return`${E}:${P.toString().padStart(2,"0")}`}),V=we(()=>!o(i)||!o(r)?"unknown":`${o(i)}x${o(r)}`);function fe(E){return new Promise(P=>{const j=document.createElement("video");j.preload="metadata",j.onloadedmetadata=()=>{URL.revokeObjectURL(j.src),P({duration:j.duration,width:j.videoWidth,height:j.videoHeight})},j.onerror=()=>{P({duration:0,width:0,height:0})},j.src=URL.createObjectURL(E)})}async function M(E){if(!E)return;if(!E.type.startsWith("video/")){ve("Please select a video file","error");return}const P=8*1024*1024*1024;if(E.size>P){ve("File too large. Maximum size is 8GB.","error");return}f(s,E,!0),f(m,!1);const j=await fe(E);f(n,j.duration,!0),f(i,j.width,!0),f(r,j.height,!0)}function q(){f(s,null),f(n,0),f(i,0),f(r,0),f(v,0),f(h,""),f(x,""),f(m,!1),f(c,""),f(d,!1),se&&(se.value="")}function L(E){f(a,E.size,!0),f(l,E.actual,!0),f(d,!1),f(c,"")}function A(E){f(c,E,!0);const P=parseInt(E);P&&P>0&&(f(a,P,!0),f(l,P*.95),f(d,!0))}function he(){(!o(c)||parseInt(o(c))<=0)&&o(d)&&(f(a,50),f(l,47),f(d,!1))}function Z(){if(!o(s))return;if(o(s).size/(1024*1024)<=o(l)){ve(`File is already under ${o(a)}MB!`,"success");return}o(de)<500?f(G,!0):pe()}async function pe(){if(!o(s)||o(u))return;if(f(G,!1),o(s).size/(1024*1024)<=o(l)){ve(`File is already under ${o(a)}MB!`,"success");return}f(u,!0),f(v,0),f(h,"uploading..."),f(x,"sending file to server..."),f(m,!1);const P=Date.now().toString()+Math.random().toString(36).substr(2,9),j=o(s).size>90*1024*1024;let H=null,O=null;try{H=Tr(),O=ur(P,{onMessage:ze=>{ze.stage==="compressing"&&(f(h,"compressing..."),ze.progress!==void 0&&f(v,ze.progress,!0),ze.message&&f(x,ze.message,!0))},onError:()=>{}});let F;if(j){f(h,"uploading..."),f(x,"large file detected, uploading in chunks...");const ze=await oo(o(s),St=>{f(v,St,!0),f(x,"uploading chunks...")}),{filePath:Gt,fileName:Yt}=ze;f(v,0),f(h,"compressing..."),f(x,"starting compression...");const Qt=await fetch(`${Te()}/api/compress-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:Gt,fileName:Yt,targetSize:o(l).toString(),duration:o(n).toString(),progressId:P,preset:o(g),downscale:o(y)})});if(!Qt.ok){const St=await Qt.json();throw new Error(St.error||"Failed to start compression")}const{jobId:Sn}=await Qt.json(),Cn=Date.now(),zs=1800*1e3;let Ys=0;for(;Date.now()-Cn<=zs;){await new Promise(St=>setTimeout(St,2e3));try{const St=new AbortController,ao=setTimeout(()=>St.abort(),1e4);let jn;try{jn=await fetch(`${Te()}/api/job/${Sn}/status`,{signal:St.signal})}finally{clearTimeout(ao)}if(!jn.ok)throw new Error(`Server returned ${jn.status}`);const vs=await jn.json();if(Ys=0,vs.status==="error")throw new Error(vs.error||"Compression failed");if(vs.progress!==void 0&&f(v,vs.progress,!0),vs.message&&f(x,vs.message,!0),vs.status==="complete")break}catch(St){if(Ys++,Ys>=3)throw new Error(`Failed to check job status after 3 attempts: ${St.message}`)}}if(Date.now()-Cn>zs)throw new Error("Job timed out after 30 minutes.");F=await fetch(`${Te()}/api/job/${Sn}/download`)}else{const ze=new FormData;ze.append("file",o(s)),ze.append("targetSize",o(l).toString()),ze.append("duration",o(n).toString()),ze.append("progressId",P),ze.append("preset",o(g)),ze.append("downscale",o(y)),F=await fetch(`${Te()}/api/compress`,{method:"POST",body:ze})}if(O&&O.close(),!F.ok){const ze=await F.json();throw new Error(ze.error||"Compression failed")}const X=await F.blob(),ye=X.size,Se=(o(s).size/(1024*1024)).toFixed(1),qe=(ye/(1024*1024)).toFixed(1),Ce=Math.round((1-ye/o(s).size)*100);f(k,`${Se} MB`),f(C,`${qe} MB`),f(R,`${Ce}%`),f(m,!0);const Pe=o(s).name.lastIndexOf("."),xt=Pe>0?o(s).name.slice(0,Pe):o(s).name;eo(X,`${xt}_compressed.mp4`),ve("Compression complete!","success"),H&&un(H)}catch(F){ve(F.message||"Compression failed","error"),O&&O.close(),H&&un(H)}finally{f(u,!1),f(v,0),f(h,""),f(x,"")}}var ge=Vc(),ee=je(ge);xn(ee);var ie=w(ee,2),J=w(p(ie),2),le=p(J);{var $=E=>{var P=Ac();let j;P.__click=()=>se==null?void 0:se.click();var H=w(p(P),6);H.__change=O=>{var F;M((F=O.target.files)==null?void 0:F[0]),O.target.value=""},kn(H,O=>se=O,()=>se),W(()=>j=be(P,1,"drop-zone svelte-15o2uhu",null,j,{dragover:o(ue)})),Pt("dragover",P,O=>{O.preventDefault(),f(ue,!0)}),Pt("dragleave",P,O=>{O.preventDefault(),f(ue,!1)}),Pt("drop",P,O=>{var F,X;O.preventDefault(),f(ue,!1),M((X=(F=O.dataTransfer)==null?void 0:F.files)==null?void 0:X[0])}),b(E,P)},B=E=>{var P=Dc(),j=p(P),H=w(p(j),2),O=p(H),F=p(O),X=w(O,2),ye=p(X),Se=w(H,2);Se.__click=q;var qe=w(j,2),Ce=p(qe),Pe=p(Ce),xt=w(Ce,2),ze=p(xt);W(Gt=>{ls(O,"title",o(s).name),N(F,o(s).name),N(ye,Gt),N(Pe,`duration: ${(o(n)?o(U):"unknown")??""}`),N(ze,`resolution: ${o(V)??""}`)},[()=>ro(o(s).size)]),b(E,P)};D(le,E=>{o(s)?E(B,!1):E($)})}var Q=w(le,2),K=w(p(Q),4);He(K,21,()=>ke,et,(E,P)=>{var j=Nc();let H;j.__click=()=>L(o(P));var O=p(j),F=p(O),X=w(O,2),ye=p(X);W(()=>{H=be(j,1,"size-option svelte-15o2uhu",null,H,{active:!o(d)&&o(a)===o(P).size}),N(F,o(P).size),N(ye,o(P).label)}),b(E,j)});var oe=w(K,2),me=p(oe);me.__input=E=>A(E.target.value);var Ee=w(oe,2),Le=w(p(Ee),2);let Ue;var st=p(Le),Qe=w(Q,2),nt=w(p(Qe),4);He(nt,21,()=>_e,et,(E,P)=>{var j=Oc();let H;j.__click=()=>f(g,o(P).id,!0);var O=p(j),F=p(O),X=w(O,2),ye=p(X);W(()=>{H=be(j,1,"size-option svelte-15o2uhu",null,H,{active:o(g)===o(P).id}),N(F,o(P).label),N(ye,o(P).sublabel)}),b(E,j)});var At=w(nt,2),us=p(At),Dt=w(Qe,2);Dt.__click=Z;var gt=w(p(Dt)),Nt=w(Dt,2);{var Ws=E=>{var P=Fc(),j=p(P),H=p(j),O=p(H),F=w(H,2),X=p(F),ye=w(j,2);io(ye,{get percent(){return o(v)}});var Se=w(ye,2),qe=p(Se);W(Ce=>{N(O,o(h)),N(X,`${Ce??""}%`),N(qe,o(x))},[()=>Math.round(o(v))]),b(E,P)};D(Nt,E=>{o(u)&&E(Ws)})}var Gs=w(Nt,4);{var T=E=>{var P=Lc(),j=w(p(P),2),H=p(j),O=p(H),F=p(O),X=w(H,4),ye=p(X),Se=p(ye),qe=w(X,2),Ce=p(qe),Pe=p(Ce),xt=w(j,2);xt.__click=q,W(()=>{N(F,o(k)),N(Se,o(C)),N(Pe,o(R))}),b(E,P)};D(Gs,E=>{o(m)&&E(T)})}var z=w(ie,2);{var Y=E=>{var P=Uc();P.__click=Gt=>{Gt.target===Gt.currentTarget&&f(G,!1)};var j=p(P),H=w(p(j),2),O=w(p(H),4),F=w(O,4),X=p(F),ye=p(X),Se=w(H,2),qe=w(p(Se)),Ce=p(qe),Pe=w(Se,2),xt=p(Pe);xt.__click=()=>f(G,!1);var ze=w(xt,2);ze.__click=pe,W(()=>{bn(O,`transform: translateX(-50%) rotate(${o(Ye)??""}deg);`),N(ye,o(de)),N(Ce,o(U))}),b(E,P)};D(z,E=>{o(G)&&E(Y)})}var ce=w(z,2);Un(ce),W(()=>{ja(me,o(c)),Ue=be(Le,1,"estimate-value svelte-15o2uhu",null,Ue,{"estimate-warning":o(Ge)}),N(st,o(Be)),Dt.disabled=!o(s)||o(u),N(gt,` ${o(u)?"compressing...":"compress video"}`)}),Pt("blur",me,he),Qi(us,()=>o(y),E=>f(y,E)),b(e,ge),pt()}Rt(["click","change","input"]);var Jc=S(`<!> <main class="svelte-13tj7i"><div class="page-header svelte-13tj7i"><h1 class="svelte-13tj7i">privacy policy</h1> <p class="svelte-13tj7i">no legal jargon, just the truth</p></div> <div class="tldr-box svelte-13tj7i"><h3 class="svelte-13tj7i">tl;dr</h3> <p class="svelte-13tj7i">yoink doesn't collect anything. no tracking, no cookies, no analytics. your files only exist in RAM and get wiped automatically.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">who runs this</h2> <p class="svelte-13tj7i">just me, one person. i made yoink because i wanted a simple tool that does what it says without being weird about your data. i was inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-13tj7i">cobalt.tools</a> and <a href="https://vert.sh" target="_blank" rel="noopener" class="svelte-13tj7i">vert.sh</a>, and wanted to combine the best parts into one site.</p> <p class="svelte-13tj7i">im not a company, i have no investors, and i have no reason to collect your data.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">your files</h2> <p class="svelte-13tj7i">everything runs in RAM. files never touch a hard drive, they live in a tmpfs mount that only exists in memory. once your download or conversion is done, the file gets deleted immediately. if something goes wrong and it doesn't get cleaned up, there's a hard limit of 20 minutes before it's wiped no matter what.</p> <p class="svelte-13tj7i">we don't log what you download, what you convert, what you compress, or any filenames or URLs. none of that gets saved anywhere.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">what we collect</h2> <p class="svelte-13tj7i">nothing. literally zero.</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">no analytics</strong> - no tracking scripts, no usage stats, nothing</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no cookies</strong> - we don't set a single cookie</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no IP logging</strong> - your IP isn't stored or logged</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no content logging</strong> - URLs, filenames, and what you do here are not recorded</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no accounts</strong> - there's nothing to sign up for, no emails collected</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no third party stuff</strong> - no google analytics, no facebook pixel, no ad networks</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">encryption</h2> <p class="svelte-13tj7i">everything goes through HTTPS, so your connection to yoink is encrypted. nobody between you and the server can see what you're doing.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">open source</h2> <p class="svelte-13tj7i">the whole thing is on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>. you can read every line of code yourself if you want to verify any of this. if you find something off, please tell me.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">contact</h2> <p class="svelte-13tj7i">questions, concerns, or just want to say hi, reach me at <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-13tj7i">coah80.com</a> or open an issue on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">changes</h2> <p class="svelte-13tj7i">if this policy changes, it gets updated here. no sneaky edits. last updated: <strong class="svelte-13tj7i">february 2026</strong>.</p></div></main> <!>`,1);function Wc(e){var t=Jc(),s=je(t);xn(s);var n=w(s,4);Un(n),b(e,t)}var Gc=S('<div class="spinner-wrap svelte-121vd2i"><!></div> <h1 class="svelte-121vd2i">downloading...</h1> <p class="svelte-121vd2i">your download should start automatically</p>',1),Yc=S('<h1 class="success svelte-121vd2i">done</h1> <p class="svelte-121vd2i">download started successfully</p>',1),Qc=S('<h1 class="error svelte-121vd2i">download failed</h1> <p class="svelte-121vd2i">this file is no longer available</p>',1),Kc=S('<main class="svelte-121vd2i"><div class="download-container svelte-121vd2i"><!> <div> </div></div></main>');function Xc(e,t){ht(t,!0);const s=()=>qt(Ia,"$query",n),[n,i]=Wt();let r=I("loading"),a=I("preparing download..."),l=we(()=>s().token||"");Cr(()=>{const m=window.location.pathname.replace("/download","").replace(/^\//,""),k=o(l)||m;if(!k){f(r,"error"),f(a,"no download token provided");return}const C=`${Te()}/api/bot/download/${k}`;f(a,"starting download..."),fetch(C,{method:"HEAD"}).then(R=>{if(R.ok)f(a,"download started"),window.location.href=C,setTimeout(()=>{f(r,"success"),f(a,"you can close this page now")},2e3);else throw new Error("Download not available")}).catch(()=>{f(r,"error"),f(a,"the download link has expired (5 minute limit)")})});var c=Kc(),d=p(c),g=p(d);{var y=m=>{var k=Gc(),C=je(k),R=p(C);no(R),b(m,k)},u=m=>{var k=Je(),C=je(k);{var R=G=>{var se=Yc();b(G,se)},ue=G=>{var se=Qc();b(G,se)};D(C,G=>{o(r)==="success"?G(R):G(ue,!1)},!0)}b(m,k)};D(g,m=>{o(r)==="loading"?m(y):m(u,!1)})}var v=w(g,2);let h;var x=p(v);W(()=>{h=be(v,1,"status svelte-121vd2i",null,h,{error:o(r)==="error",success:o(r)==="success"}),N(x,o(a))}),b(e,c),pt(),i()}var Zc=S('<main class="svelte-zxc657"><p>Redirecting...</p></main>');function eu(e,t){ht(t,!1),Cr(()=>{const n=new URLSearchParams(window.location.search),r=(n.get("url")||n.get("text")||"").match(/https?:\/\/[^\s]+/);let a=r?r[0]:"";if(a=a.replace(/[.,!?;:)\]}>]+$/,""),a)try{const l=new URL(a);(l.protocol==="http:"||l.protocol==="https:")&&sessionStorage.setItem("yoink_shared_url",a)}catch{}Xi("/")}),za();var s=Zc();b(e,s),pt()}var tu=S(`<!> <main class="svelte-kbj945"><div class="not-found svelte-kbj945"><h1 class="svelte-kbj945">404</h1> <p class="svelte-kbj945">this page doesn't exist</p> <a href="/" class="back-link svelte-kbj945">go back home</a></div></main>`,1);function su(e){var t=tu(),s=je(t);xn(s),b(e,t)}var nu=S("<div><!> <!> <!></div>");function ru(e,t){ht(t,!0);const s=()=>qt(jr,"$path",n),[n,i]=Wt(),r={"/":ic,"/settings":Cc,"/convert":Rc,"/compress":Hc,"/privacy":Wc,"/download":Xc,"/share":eu};let a=we(s),l=we(()=>r[o(a)]||su);function c(v){const h=v.target.closest("a");if(!h)return;const x=h.getAttribute("href");!x||!x.startsWith("/")||h.target==="_blank"||(v.preventDefault(),Xi(x))}Cr(()=>{Ga(),localStorage.removeItem("yoink_trackingId"),localStorage.removeItem("yoink_last_daily_report"),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{})});var d=nu();d.__click=c;var g=p(d);ba(g,()=>o(l),(v,h)=>{h(v,{})});var y=w(g,2);Ml(y,{});var u=w(y,2);Fa(u),b(e,d),pt(),i()}Rt(["click"]);pa(ru,{target:document.getElementById("app")});
