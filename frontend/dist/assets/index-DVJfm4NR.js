var Bi=Object.defineProperty;var ra=e=>{throw TypeError(e)};var Di=(e,s,r)=>s in e?Bi(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r;var ns=(e,s,r)=>Di(e,typeof s!="symbol"?s+"":s,r),bn=(e,s,r)=>s.has(e)||ra("Cannot "+r);var T=(e,s,r)=>(bn(e,s,"read from private field"),r?r.call(e):s.get(e)),Ae=(e,s,r)=>s.has(e)?ra("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(e):s.set(e,r),Fe=(e,s,r,n)=>(bn(e,s,"write to private field"),n?n.call(e,r):s.set(e,r),r),Ct=(e,s,r)=>(bn(e,s,"access private method"),r);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const Tn=!1;var Ca=Array.isArray,Ni=Array.prototype.indexOf,hr=Array.prototype.includes,vn=Array.from,Ta=Object.defineProperty,Ir=Object.getOwnPropertyDescriptor,za=Object.getOwnPropertyDescriptors,Fi=Object.prototype,Oi=Array.prototype,Vn=Object.getPrototypeOf,na=Object.isExtensible;const Es=()=>{};function Ai(e){return e()}function rn(e){for(var s=0;s<e.length;s++)e[s]()}function Ea(){var e,s,r=new Promise((n,o)=>{e=n,s=o});return{promise:r,resolve:e,reject:s}}const kt=2,nn=4,Vr=8,$a=1<<24,xs=16,ss=32,tr=64,Hn=128,Vt=512,wt=1024,St=2048,ts=4096,Ft=8192,$s=16384,Jn=32768,Rs=65536,aa=1<<17,Ma=1<<18,yr=1<<19,Pa=1<<20,_s=1<<25,Qs=32768,zn=1<<21,Wn=1<<22,Ms=1<<23,or=Symbol("$state"),Li=Symbol(""),ir=new class extends Error{constructor(){super(...arguments);ns(this,"name","StaleReactionError");ns(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Ui(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Vi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Hi(e,s,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Ji(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Wi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Gi(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Yi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Qi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ki(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Zi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const eo=1,to=2,Ia=4,so=8,ro=16,qa=1,no=2,bt=Symbol(),ao="http://www.w3.org/1999/xhtml";function io(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ra(e){return e===this.v}function Ba(e,s){return e!=e?s==s:e!==s||e!==null&&typeof e=="object"||typeof e=="function"}function Da(e){return!Ba(e,this.v)}let Hr=!1,oo=!1;function lo(){Hr=!0}let pt=null;function gr(e){pt=e}function Tt(e,s=!1,r){pt={p:pt,i:!1,c:null,e:null,s:e,x:null,l:Hr&&!s?{s:null,u:null,$:[]}:null}}function zt(e){var s=pt,r=s.e;if(r!==null){s.e=null;for(var n of r)ai(n)}return s.i=!0,pt=s.p,{}}function Jr(){return!Hr||pt!==null&&pt.l===null}let Ns=[];function Na(){var e=Ns;Ns=[],rn(e)}function ys(e){if(Ns.length===0&&!qr){var s=Ns;queueMicrotask(()=>{s===Ns&&Na()})}Ns.push(e)}function co(){for(;Ns.length>0;)Na()}function Fa(e){var s=Ke;if(s===null)return Ve.f|=Ms,e;if((s.f&Jn)===0){if((s.f&Hn)===0)throw e;s.b.error(e)}else mr(e,s)}function mr(e,s){for(;s!==null;){if((s.f&Hn)!==0)try{s.b.error(e);return}catch(r){e=r}s=s.parent}throw e}const vo=-7169;function ft(e,s){e.f=e.f&vo|s}function Gn(e){(e.f&Vt)!==0||e.deps===null?ft(e,wt):ft(e,ts)}function Oa(e){if(e!==null)for(const s of e)(s.f&kt)===0||(s.f&Qs)===0||(s.f^=Qs,Oa(s.deps))}function Aa(e,s,r){(e.f&St)!==0?s.add(e):(e.f&ts)!==0&&r.add(e),Oa(e.deps),ft(e,wt)}const Zr=new Set;let Le=null,En=null,xt=null,$t=[],un=null,$n=!1,qr=!1;var lr,cr,Os,vr,Or,Ar,As,hs,ur,ds,Mn,Pn,La;const sa=class sa{constructor(){Ae(this,ds);ns(this,"committed",!1);ns(this,"current",new Map);ns(this,"previous",new Map);Ae(this,lr,new Set);Ae(this,cr,new Set);Ae(this,Os,0);Ae(this,vr,0);Ae(this,Or,null);Ae(this,Ar,new Set);Ae(this,As,new Set);Ae(this,hs,new Map);ns(this,"is_fork",!1);Ae(this,ur,!1)}is_deferred(){return this.is_fork||T(this,vr)>0}skip_effect(s){T(this,hs).has(s)||T(this,hs).set(s,{d:[],m:[]})}unskip_effect(s){var r=T(this,hs).get(s);if(r){T(this,hs).delete(s);for(var n of r.d)ft(n,St),Zt(n);for(n of r.m)ft(n,ts),Zt(n)}}process(s){var o;$t=[],this.apply();var r=[],n=[];for(const a of s)Ct(this,ds,Mn).call(this,a,r,n);if(this.is_deferred()){Ct(this,ds,Pn).call(this,n),Ct(this,ds,Pn).call(this,r);for(const[a,c]of T(this,hs))Ja(a,c)}else{for(const a of T(this,lr))a();T(this,lr).clear(),T(this,Os)===0&&Ct(this,ds,La).call(this),En=this,Le=null,ia(n),ia(r),En=null,(o=T(this,Or))==null||o.resolve()}xt=null}capture(s,r){r!==bt&&!this.previous.has(s)&&this.previous.set(s,r),(s.f&Ms)===0&&(this.current.set(s,s.v),xt==null||xt.set(s,s.v))}activate(){Le=this,this.apply()}deactivate(){Le===this&&(Le=null,xt=null)}flush(){if(this.activate(),$t.length>0){if(Ua(),Le!==null&&Le!==this)return}else T(this,Os)===0&&this.process([]);this.deactivate()}discard(){for(const s of T(this,cr))s(this);T(this,cr).clear()}increment(s){Fe(this,Os,T(this,Os)+1),s&&Fe(this,vr,T(this,vr)+1)}decrement(s){Fe(this,Os,T(this,Os)-1),s&&Fe(this,vr,T(this,vr)-1),!T(this,ur)&&(Fe(this,ur,!0),ys(()=>{Fe(this,ur,!1),this.is_deferred()?$t.length>0&&this.flush():this.revive()}))}revive(){for(const s of T(this,Ar))T(this,As).delete(s),ft(s,St),Zt(s);for(const s of T(this,As))ft(s,ts),Zt(s);this.flush()}oncommit(s){T(this,lr).add(s)}ondiscard(s){T(this,cr).add(s)}settled(){return(T(this,Or)??Fe(this,Or,Ea())).promise}static ensure(){if(Le===null){const s=Le=new sa;Zr.add(Le),qr||ys(()=>{Le===s&&s.flush()})}return Le}apply(){}};lr=new WeakMap,cr=new WeakMap,Os=new WeakMap,vr=new WeakMap,Or=new WeakMap,Ar=new WeakMap,As=new WeakMap,hs=new WeakMap,ur=new WeakMap,ds=new WeakSet,Mn=function(s,r,n){s.f^=wt;for(var o=s.first,a=null;o!==null;){var c=o.f,f=(c&(ss|tr))!==0,v=f&&(c&wt)!==0,g=v||(c&Ft)!==0||T(this,hs).has(o);if(!g&&o.fn!==null){f?o.f^=wt:a!==null&&(c&(nn|Vr|$a))!==0?a.b.defer_effect(o):(c&nn)!==0?r.push(o):Yr(o)&&((c&xs)!==0&&T(this,As).add(o),Br(o));var _=o.first;if(_!==null){o=_;continue}}var S=o.parent;for(o=o.next;o===null&&S!==null;)S===a&&(a=null),o=S.next,S=S.parent}},Pn=function(s){for(var r=0;r<s.length;r+=1)Aa(s[r],T(this,Ar),T(this,As))},La=function(){var o;if(Zr.size>1){this.previous.clear();var s=xt,r=!0;for(const a of Zr){if(a===this){r=!1;continue}const c=[];for(const[v,g]of this.current){if(a.current.has(v))if(r&&g!==a.current.get(v))a.current.set(v,g);else continue;c.push(v)}if(c.length===0)continue;const f=[...a.current.keys()].filter(v=>!this.current.has(v));if(f.length>0){var n=$t;$t=[];const v=new Set,g=new Map;for(const _ of c)Va(_,f,v,g);if($t.length>0){Le=a,a.apply();for(const _ of $t)Ct(o=a,ds,Mn).call(o,_,[],[]);a.deactivate()}$t=n}}Le=null,xt=s}this.committed=!0,Zr.delete(this)};let Ps=sa;function uo(e){var s=qr;qr=!0;try{for(var r;;){if(co(),$t.length===0&&(Le==null||Le.flush(),$t.length===0))return un=null,r;Ua()}}finally{qr=s}}function Ua(){$n=!0;var e=null;try{for(var s=0;$t.length>0;){var r=Ps.ensure();if(s++>1e3){var n,o;fo()}r.process($t),Is.clear()}}finally{$t=[],$n=!1,un=null}}function fo(){try{Yi()}catch(e){mr(e,un)}}let Yt=null;function ia(e){var s=e.length;if(s!==0){for(var r=0;r<s;){var n=e[r++];if((n.f&($s|Ft))===0&&Yr(n)&&(Yt=new Set,Br(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?li(n):n.fn=null),(Yt==null?void 0:Yt.size)>0)){Is.clear();for(const o of Yt){if((o.f&($s|Ft))!==0)continue;const a=[o];let c=o.parent;for(;c!==null;)Yt.has(c)&&(Yt.delete(c),a.push(c)),c=c.parent;for(let f=a.length-1;f>=0;f--){const v=a[f];(v.f&($s|Ft))===0&&Br(v)}}Yt.clear()}}Yt=null}}function Va(e,s,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const o of e.reactions){const a=o.f;(a&kt)!==0?Va(o,s,r,n):(a&(Wn|xs))!==0&&(a&St)===0&&Ha(o,s,n)&&(ft(o,St),Zt(o))}}function Ha(e,s,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const o of e.deps){if(hr.call(s,o))return!0;if((o.f&kt)!==0&&Ha(o,s,r))return r.set(o,!0),!0}return r.set(e,!1),!1}function Zt(e){for(var s=un=e;s.parent!==null;){s=s.parent;var r=s.f;if($n&&s===Ke&&(r&xs)!==0&&(r&Ma)===0)return;if((r&(tr|ss))!==0){if((r&wt)===0)return;s.f^=wt}}$t.push(s)}function Ja(e,s){if(!((e.f&ss)!==0&&(e.f&wt)!==0)){(e.f&St)!==0?s.d.push(e):(e.f&ts)!==0&&s.m.push(e),ft(e,wt);for(var r=e.first;r!==null;)Ja(r,s),r=r.next}}function po(e){let s=0,r=Ks(0),n;return()=>{Qn()&&(t(r),pn(()=>(s===0&&(n=sr(()=>e(()=>Rr(r)))),s+=1,()=>{ys(()=>{s-=1,s===0&&(n==null||n(),n=void 0,Rr(r))})})))}}var ho=Rs|yr|Hn;function go(e,s,r){new mo(e,s,r)}var At,Un,as,Ls,is,Lt,Et,os,gs,Ts,Us,zs,dr,Vs,fr,pr,ms,ln,yt,wo,_o,In,en,tn,qn;class mo{constructor(s,r,n){Ae(this,yt);ns(this,"parent");ns(this,"is_pending",!1);Ae(this,At);Ae(this,Un,null);Ae(this,as);Ae(this,Ls);Ae(this,is);Ae(this,Lt,null);Ae(this,Et,null);Ae(this,os,null);Ae(this,gs,null);Ae(this,Ts,null);Ae(this,Us,0);Ae(this,zs,0);Ae(this,dr,!1);Ae(this,Vs,!1);Ae(this,fr,new Set);Ae(this,pr,new Set);Ae(this,ms,null);Ae(this,ln,po(()=>(Fe(this,ms,Ks(T(this,Us))),()=>{Fe(this,ms,null)})));Fe(this,At,s),Fe(this,as,r),Fe(this,Ls,n),this.parent=Ke.b,this.is_pending=!!T(this,as).pending,Fe(this,is,Gr(()=>{Ke.b=this;{var o=Ct(this,yt,In).call(this);try{Fe(this,Lt,Ut(()=>n(o)))}catch(a){this.error(a)}T(this,zs)>0?Ct(this,yt,tn).call(this):this.is_pending=!1}return()=>{var a;(a=T(this,Ts))==null||a.remove()}},ho))}defer_effect(s){Aa(s,T(this,fr),T(this,pr))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!T(this,as).pending}update_pending_count(s){Ct(this,yt,qn).call(this,s),Fe(this,Us,T(this,Us)+s),!(!T(this,ms)||T(this,dr))&&(Fe(this,dr,!0),ys(()=>{Fe(this,dr,!1),T(this,ms)&&wr(T(this,ms),T(this,Us))}))}get_effect_pending(){return T(this,ln).call(this),t(T(this,ms))}error(s){var r=T(this,as).onerror;let n=T(this,as).failed;if(T(this,Vs)||!r&&!n)throw s;T(this,Lt)&&(It(T(this,Lt)),Fe(this,Lt,null)),T(this,Et)&&(It(T(this,Et)),Fe(this,Et,null)),T(this,os)&&(It(T(this,os)),Fe(this,os,null));var o=!1,a=!1;const c=()=>{if(o){io();return}o=!0,a&&Zi(),Ps.ensure(),Fe(this,Us,0),T(this,os)!==null&&Js(T(this,os),()=>{Fe(this,os,null)}),this.is_pending=this.has_pending_snippet(),Fe(this,Lt,Ct(this,yt,en).call(this,()=>(Fe(this,Vs,!1),Ut(()=>T(this,Ls).call(this,T(this,At)))))),T(this,zs)>0?Ct(this,yt,tn).call(this):this.is_pending=!1};ys(()=>{try{a=!0,r==null||r(s,c),a=!1}catch(f){mr(f,T(this,is)&&T(this,is).parent)}n&&Fe(this,os,Ct(this,yt,en).call(this,()=>{Ps.ensure(),Fe(this,Vs,!0);try{return Ut(()=>{n(T(this,At),()=>s,()=>c)})}catch(f){return mr(f,T(this,is).parent),null}finally{Fe(this,Vs,!1)}}))})}}At=new WeakMap,Un=new WeakMap,as=new WeakMap,Ls=new WeakMap,is=new WeakMap,Lt=new WeakMap,Et=new WeakMap,os=new WeakMap,gs=new WeakMap,Ts=new WeakMap,Us=new WeakMap,zs=new WeakMap,dr=new WeakMap,Vs=new WeakMap,fr=new WeakMap,pr=new WeakMap,ms=new WeakMap,ln=new WeakMap,yt=new WeakSet,wo=function(){try{Fe(this,Lt,Ut(()=>T(this,Ls).call(this,T(this,At))))}catch(s){this.error(s)}},_o=function(){const s=T(this,as).pending;s&&(Fe(this,Et,Ut(()=>s(T(this,At)))),ys(()=>{var r=Ct(this,yt,In).call(this);Fe(this,Lt,Ct(this,yt,en).call(this,()=>(Ps.ensure(),Ut(()=>T(this,Ls).call(this,r))))),T(this,zs)>0?Ct(this,yt,tn).call(this):(Js(T(this,Et),()=>{Fe(this,Et,null)}),this.is_pending=!1)}))},In=function(){var s=T(this,At);return this.is_pending&&(Fe(this,Ts,qs()),T(this,At).before(T(this,Ts)),s=T(this,Ts)),s},en=function(s){var r=Ke,n=Ve,o=pt;us(T(this,is)),Jt(T(this,is)),gr(T(this,is).ctx);try{return s()}catch(a){return Fa(a),null}finally{us(r),Jt(n),gr(o)}},tn=function(){const s=T(this,as).pending;T(this,Lt)!==null&&(Fe(this,gs,document.createDocumentFragment()),T(this,gs).append(T(this,Ts)),ui(T(this,Lt),T(this,gs))),T(this,Et)===null&&Fe(this,Et,Ut(()=>s(T(this,At))))},qn=function(s){var r;if(!this.has_pending_snippet()){this.parent&&Ct(r=this.parent,yt,qn).call(r,s);return}if(Fe(this,zs,T(this,zs)+s),T(this,zs)===0){this.is_pending=!1;for(const n of T(this,fr))ft(n,St),Zt(n);for(const n of T(this,pr))ft(n,ts),Zt(n);T(this,fr).clear(),T(this,pr).clear(),T(this,Et)&&Js(T(this,Et),()=>{Fe(this,Et,null)}),T(this,gs)&&(T(this,At).before(T(this,gs)),Fe(this,gs,null))}};function yo(e,s,r,n){const o=Jr()?dn:Wa;var a=e.filter(d=>!d.settled);if(r.length===0&&a.length===0){n(s.map(o));return}var c=Le,f=Ke,v=bo(),g=a.length===1?a[0].promise:a.length>1?Promise.all(a.map(d=>d.promise)):null;function _(d){v();try{n(d)}catch(p){(f.f&$s)===0&&mr(p,f)}c==null||c.deactivate(),Rn()}if(r.length===0){g.then(()=>_(s.map(o)));return}function S(){v(),Promise.all(r.map(d=>xo(d))).then(d=>_([...s.map(o),...d])).catch(d=>mr(d,f))}g?g.then(S):S()}function bo(){var e=Ke,s=Ve,r=pt,n=Le;return function(a=!0){us(e),Jt(s),gr(r),a&&(n==null||n.activate())}}function Rn(){us(null),Jt(null),gr(null)}function dn(e){var s=kt|St,r=Ve!==null&&(Ve.f&kt)!==0?Ve:null;return Ke!==null&&(Ke.f|=yr),{ctx:pt,deps:null,effects:null,equals:Ra,f:s,fn:e,reactions:null,rv:0,v:bt,wv:0,parent:r??Ke,ac:null}}function xo(e,s,r){let n=Ke;n===null&&Vi();var o=n.b,a=void 0,c=Ks(bt),f=!Ve,v=new Map;return Po(()=>{var p;var g=Ea();a=g.promise;try{Promise.resolve(e()).then(g.resolve,g.reject).then(()=>{_===Le&&_.committed&&_.deactivate(),Rn()})}catch(w){g.reject(w),Rn()}var _=Le;if(f){var S=o.is_rendered();o.update_pending_count(1),_.increment(S),(p=v.get(_))==null||p.reject(ir),v.delete(_),v.set(_,g)}const d=(w,C=void 0)=>{if(_.activate(),C)C!==ir&&(c.f|=Ms,wr(c,C));else{(c.f&Ms)!==0&&(c.f^=Ms),wr(c,w);for(const[y,x]of v){if(v.delete(y),y===_)break;x.reject(ir)}}f&&(o.update_pending_count(-1),_.decrement(S))};g.promise.then(d,w=>d(null,w||"unknown"))}),Kn(()=>{for(const g of v.values())g.reject(ir)}),new Promise(g=>{function _(S){function d(){S===a?g(c):_(a)}S.then(d,d)}_(a)})}function be(e){const s=dn(e);return di(s),s}function Wa(e){const s=dn(e);return s.equals=Da,s}function Ga(e){var s=e.effects;if(s!==null){e.effects=null;for(var r=0;r<s.length;r+=1)It(s[r])}}function ko(e){for(var s=e.parent;s!==null;){if((s.f&kt)===0)return(s.f&$s)===0?s:null;s=s.parent}return null}function Yn(e){var s,r=Ke;us(ko(e));try{e.f&=~Qs,Ga(e),s=gi(e)}finally{us(r)}return s}function Ya(e){var s=Yn(e);if(!e.equals(s)&&(e.wv=pi(),(!(Le!=null&&Le.is_fork)||e.deps===null)&&(e.v=s,e.deps===null))){ft(e,wt);return}Xs||(xt!==null?(Qn()||Le!=null&&Le.is_fork)&&xt.set(e,s):Gn(e))}let Bn=new Set;const Is=new Map;let Qa=!1;function Ks(e,s){var r={f:0,v:e,reactions:null,equals:Ra,rv:0,wv:0};return r}function M(e,s){const r=Ks(e);return di(r),r}function Ka(e,s=!1,r=!0){var o;const n=Ks(e);return s||(n.equals=Da),Hr&&r&&pt!==null&&pt.l!==null&&((o=pt.l).s??(o.s=[])).push(n),n}function i(e,s,r=!1){Ve!==null&&(!es||(Ve.f&aa)!==0)&&Jr()&&(Ve.f&(kt|xs|Wn|aa))!==0&&(Ht===null||!hr.call(Ht,e))&&Xi();let n=r?$r(s):s;return wr(e,n)}function wr(e,s){if(!e.equals(s)){var r=e.v;Xs?Is.set(e,s):Is.set(e,r),e.v=s;var n=Ps.ensure();if(n.capture(e,r),(e.f&kt)!==0){const o=e;(e.f&St)!==0&&Yn(o),Gn(o)}e.wv=pi(),Xa(e,St),Jr()&&Ke!==null&&(Ke.f&wt)!==0&&(Ke.f&(ss|tr))===0&&(Ot===null?Ro([e]):Ot.push(e)),!n.is_fork&&Bn.size>0&&!Qa&&So()}return s}function So(){Qa=!1;for(const e of Bn)(e.f&wt)!==0&&ft(e,ts),Yr(e)&&Br(e);Bn.clear()}function Rr(e){i(e,e.v+1)}function Xa(e,s){var r=e.reactions;if(r!==null)for(var n=Jr(),o=r.length,a=0;a<o;a++){var c=r[a],f=c.f;if(!(!n&&c===Ke)){var v=(f&St)===0;if(v&&ft(c,s),(f&kt)!==0){var g=c;xt==null||xt.delete(g),(f&Qs)===0&&(f&Vt&&(c.f|=Qs),Xa(g,ts))}else v&&((f&xs)!==0&&Yt!==null&&Yt.add(c),Zt(c))}}}function $r(e){if(typeof e!="object"||e===null||or in e)return e;const s=Vn(e);if(s!==Fi&&s!==Oi)return e;var r=new Map,n=Ca(e),o=M(0),a=Ws,c=f=>{if(Ws===a)return f();var v=Ve,g=Ws;Jt(null),va(a);var _=f();return Jt(v),va(g),_};return n&&r.set("length",M(e.length)),new Proxy(e,{defineProperty(f,v,g){(!("value"in g)||g.configurable===!1||g.enumerable===!1||g.writable===!1)&&Qi();var _=r.get(v);return _===void 0?_=c(()=>{var S=M(g.value);return r.set(v,S),S}):i(_,g.value,!0),!0},deleteProperty(f,v){var g=r.get(v);if(g===void 0){if(v in f){const _=c(()=>M(bt));r.set(v,_),Rr(o)}}else i(g,bt),Rr(o);return!0},get(f,v,g){var p;if(v===or)return e;var _=r.get(v),S=v in f;if(_===void 0&&(!S||(p=Ir(f,v))!=null&&p.writable)&&(_=c(()=>{var w=$r(S?f[v]:bt),C=M(w);return C}),r.set(v,_)),_!==void 0){var d=t(_);return d===bt?void 0:d}return Reflect.get(f,v,g)},getOwnPropertyDescriptor(f,v){var g=Reflect.getOwnPropertyDescriptor(f,v);if(g&&"value"in g){var _=r.get(v);_&&(g.value=t(_))}else if(g===void 0){var S=r.get(v),d=S==null?void 0:S.v;if(S!==void 0&&d!==bt)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return g},has(f,v){var d;if(v===or)return!0;var g=r.get(v),_=g!==void 0&&g.v!==bt||Reflect.has(f,v);if(g!==void 0||Ke!==null&&(!_||(d=Ir(f,v))!=null&&d.writable)){g===void 0&&(g=c(()=>{var p=_?$r(f[v]):bt,w=M(p);return w}),r.set(v,g));var S=t(g);if(S===bt)return!1}return _},set(f,v,g,_){var O;var S=r.get(v),d=v in f;if(n&&v==="length")for(var p=g;p<S.v;p+=1){var w=r.get(p+"");w!==void 0?i(w,bt):p in f&&(w=c(()=>M(bt)),r.set(p+"",w))}if(S===void 0)(!d||(O=Ir(f,v))!=null&&O.writable)&&(S=c(()=>M(void 0)),i(S,$r(g)),r.set(v,S));else{d=S.v!==bt;var C=c(()=>$r(g));i(S,C)}var y=Reflect.getOwnPropertyDescriptor(f,v);if(y!=null&&y.set&&y.set.call(_,g),!d){if(n&&typeof v=="string"){var x=r.get("length"),P=Number(v);Number.isInteger(P)&&P>=x.v&&i(x,P+1)}Rr(o)}return!0},ownKeys(f){t(o);var v=Reflect.ownKeys(f).filter(S=>{var d=r.get(S);return d===void 0||d.v!==bt});for(var[g,_]of r)_.v!==bt&&!(g in f)&&v.push(g);return v},setPrototypeOf(){Ki()}})}var oa,br,Za,ei,ti;function jo(){if(oa===void 0){oa=window,br=document,Za=/Firefox/.test(navigator.userAgent);var e=Element.prototype,s=Node.prototype,r=Text.prototype;ei=Ir(s,"firstChild").get,ti=Ir(s,"nextSibling").get,na(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),na(r)&&(r.__t=void 0)}}function qs(e=""){return document.createTextNode(e)}function ws(e){return ei.call(e)}function Wr(e){return ti.call(e)}function l(e,s){return ws(e)}function ve(e,s=!1){{var r=ws(e);return r instanceof Comment&&r.data===""?Wr(r):r}}function u(e,s=1,r=!1){let n=e;for(;s--;)n=Wr(n);return n}function Co(e){e.textContent=""}function si(){return!1}let la=!1;function To(){la||(la=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var s;if(!e.defaultPrevented)for(const r of e.target.elements)(s=r.__on_r)==null||s.call(r)})},{capture:!0}))}function fn(e){var s=Ve,r=Ke;Jt(null),us(null);try{return e()}finally{Jt(s),us(r)}}function ri(e,s,r,n=r){e.addEventListener(s,()=>fn(r));const o=e.__on_r;o?e.__on_r=()=>{o(),n(!0)}:e.__on_r=()=>n(!0),To()}function ni(e){Ke===null&&(Ve===null&&Gi(),Wi()),Xs&&Ji()}function zo(e,s){var r=s.last;r===null?s.last=s.first=e:(r.next=e,e.prev=r,s.last=e)}function fs(e,s,r){var n=Ke;n!==null&&(n.f&Ft)!==0&&(e|=Ft);var o={ctx:pt,deps:null,nodes:null,f:e|St|Vt,first:null,fn:s,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{Br(o),o.f|=Jn}catch(f){throw It(o),f}else s!==null&&Zt(o);var a=o;if(r&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&yr)===0&&(a=a.first,(e&xs)!==0&&(e&Rs)!==0&&a!==null&&(a.f|=Rs)),a!==null&&(a.parent=n,n!==null&&zo(a,n),Ve!==null&&(Ve.f&kt)!==0&&(e&tr)===0)){var c=Ve;(c.effects??(c.effects=[])).push(a)}return o}function Qn(){return Ve!==null&&!es}function Kn(e){const s=fs(Vr,null,!1);return ft(s,wt),s.teardown=e,s}function _r(e){ni();var s=Ke.f,r=!Ve&&(s&ss)!==0&&(s&Jn)===0;if(r){var n=pt;(n.e??(n.e=[])).push(e)}else return ai(e)}function ai(e){return fs(nn|Pa,e,!1)}function Eo(e){return ni(),fs(Vr|Pa,e,!0)}function $o(e){Ps.ensure();const s=fs(tr|yr,e,!0);return(r={})=>new Promise(n=>{r.outro?Js(s,()=>{It(s),n(void 0)}):(It(s),n(void 0))})}function Mo(e){return fs(nn,e,!1)}function Po(e){return fs(Wn|yr,e,!0)}function pn(e,s=0){return fs(Vr|s,e,!0)}function W(e,s=[],r=[],n=[]){yo(n,s,r,o=>{fs(Vr,()=>e(...o.map(t)),!0)})}function Gr(e,s=0){var r=fs(xs|s,e,!0);return r}function Ut(e){return fs(ss|yr,e,!0)}function ii(e){var s=e.teardown;if(s!==null){const r=Xs,n=Ve;ca(!0),Jt(null);try{s.call(null)}finally{ca(r),Jt(n)}}}function oi(e,s=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const o=r.ac;o!==null&&fn(()=>{o.abort(ir)});var n=r.next;(r.f&tr)!==0?r.parent=null:It(r,s),r=n}}function Io(e){for(var s=e.first;s!==null;){var r=s.next;(s.f&ss)===0&&It(s),s=r}}function It(e,s=!0){var r=!1;(s||(e.f&Ma)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(qo(e.nodes.start,e.nodes.end),r=!0),oi(e,s&&!r),an(e,0),ft(e,$s);var n=e.nodes&&e.nodes.t;if(n!==null)for(const a of n)a.stop();ii(e);var o=e.parent;o!==null&&o.first!==null&&li(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function qo(e,s){for(;e!==null;){var r=e===s?null:Wr(e);e.remove(),e=r}}function li(e){var s=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),s!==null&&(s.first===e&&(s.first=n),s.last===e&&(s.last=r))}function Js(e,s,r=!0){var n=[];ci(e,n,!0);var o=()=>{r&&It(e),s&&s()},a=n.length;if(a>0){var c=()=>--a||o();for(var f of n)f.out(c)}else o()}function ci(e,s,r){if((e.f&Ft)===0){e.f^=Ft;var n=e.nodes&&e.nodes.t;if(n!==null)for(const f of n)(f.is_global||r)&&s.push(f);for(var o=e.first;o!==null;){var a=o.next,c=(o.f&Rs)!==0||(o.f&ss)!==0&&(e.f&xs)!==0;ci(o,s,c?r:!1),o=a}}}function Xn(e){vi(e,!0)}function vi(e,s){if((e.f&Ft)!==0){e.f^=Ft,(e.f&wt)===0&&(ft(e,St),Zt(e));for(var r=e.first;r!==null;){var n=r.next,o=(r.f&Rs)!==0||(r.f&ss)!==0;vi(r,o?s:!1),r=n}var a=e.nodes&&e.nodes.t;if(a!==null)for(const c of a)(c.is_global||s)&&c.in()}}function ui(e,s){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var o=r===n?null:Wr(r);s.append(r),r=o}}let sn=!1,Xs=!1;function ca(e){Xs=e}let Ve=null,es=!1;function Jt(e){Ve=e}let Ke=null;function us(e){Ke=e}let Ht=null;function di(e){Ve!==null&&(Ht===null?Ht=[e]:Ht.push(e))}let Mt=null,Dt=0,Ot=null;function Ro(e){Ot=e}let fi=1,Fs=0,Ws=Fs;function va(e){Ws=e}function pi(){return++fi}function Yr(e){var s=e.f;if((s&St)!==0)return!0;if(s&kt&&(e.f&=~Qs),(s&ts)!==0){for(var r=e.deps,n=r.length,o=0;o<n;o++){var a=r[o];if(Yr(a)&&Ya(a),a.wv>e.wv)return!0}(s&Vt)!==0&&xt===null&&ft(e,wt)}return!1}function hi(e,s,r=!0){var n=e.reactions;if(n!==null&&!(Ht!==null&&hr.call(Ht,e)))for(var o=0;o<n.length;o++){var a=n[o];(a.f&kt)!==0?hi(a,s,!1):s===a&&(r?ft(a,St):(a.f&wt)!==0&&ft(a,ts),Zt(a))}}function gi(e){var C;var s=Mt,r=Dt,n=Ot,o=Ve,a=Ht,c=pt,f=es,v=Ws,g=e.f;Mt=null,Dt=0,Ot=null,Ve=(g&(ss|tr))===0?e:null,Ht=null,gr(e.ctx),es=!1,Ws=++Fs,e.ac!==null&&(fn(()=>{e.ac.abort(ir)}),e.ac=null);try{e.f|=zn;var _=e.fn,S=_(),d=e.deps,p=Le==null?void 0:Le.is_fork;if(Mt!==null){var w;if(p||an(e,Dt),d!==null&&Dt>0)for(d.length=Dt+Mt.length,w=0;w<Mt.length;w++)d[Dt+w]=Mt[w];else e.deps=d=Mt;if(Qn()&&(e.f&Vt)!==0)for(w=Dt;w<d.length;w++)((C=d[w]).reactions??(C.reactions=[])).push(e)}else!p&&d!==null&&Dt<d.length&&(an(e,Dt),d.length=Dt);if(Jr()&&Ot!==null&&!es&&d!==null&&(e.f&(kt|ts|St))===0)for(w=0;w<Ot.length;w++)hi(Ot[w],e);if(o!==null&&o!==e){if(Fs++,o.deps!==null)for(let y=0;y<r;y+=1)o.deps[y].rv=Fs;if(s!==null)for(const y of s)y.rv=Fs;Ot!==null&&(n===null?n=Ot:n.push(...Ot))}return(e.f&Ms)!==0&&(e.f^=Ms),S}catch(y){return Fa(y)}finally{e.f^=zn,Mt=s,Dt=r,Ot=n,Ve=o,Ht=a,gr(c),es=f,Ws=v}}function Bo(e,s){let r=s.reactions;if(r!==null){var n=Ni.call(r,e);if(n!==-1){var o=r.length-1;o===0?r=s.reactions=null:(r[n]=r[o],r.pop())}}if(r===null&&(s.f&kt)!==0&&(Mt===null||!hr.call(Mt,s))){var a=s;(a.f&Vt)!==0&&(a.f^=Vt,a.f&=~Qs),Gn(a),Ga(a),an(a,0)}}function an(e,s){var r=e.deps;if(r!==null)for(var n=s;n<r.length;n++)Bo(e,r[n])}function Br(e){var s=e.f;if((s&$s)===0){ft(e,wt);var r=Ke,n=sn;Ke=e,sn=!0;try{(s&(xs|$a))!==0?Io(e):oi(e),ii(e);var o=gi(e);e.teardown=typeof o=="function"?o:null,e.wv=fi;var a;Tn&&oo&&(e.f&St)!==0&&e.deps}finally{sn=n,Ke=r}}}async function Do(){await Promise.resolve(),uo()}function t(e){var s=e.f,r=(s&kt)!==0;if(Ve!==null&&!es){var n=Ke!==null&&(Ke.f&$s)!==0;if(!n&&(Ht===null||!hr.call(Ht,e))){var o=Ve.deps;if((Ve.f&zn)!==0)e.rv<Fs&&(e.rv=Fs,Mt===null&&o!==null&&o[Dt]===e?Dt++:Mt===null?Mt=[e]:Mt.push(e));else{(Ve.deps??(Ve.deps=[])).push(e);var a=e.reactions;a===null?e.reactions=[Ve]:hr.call(a,Ve)||a.push(Ve)}}}if(Xs&&Is.has(e))return Is.get(e);if(r){var c=e;if(Xs){var f=c.v;return((c.f&wt)===0&&c.reactions!==null||wi(c))&&(f=Yn(c)),Is.set(c,f),f}var v=(c.f&Vt)===0&&!es&&Ve!==null&&(sn||(Ve.f&Vt)!==0),g=c.deps===null;Yr(c)&&(v&&(c.f|=Vt),Ya(c)),v&&!g&&mi(c)}if(xt!=null&&xt.has(e))return xt.get(e);if((e.f&Ms)!==0)throw e.v;return e.v}function mi(e){if(e.deps!==null){e.f|=Vt;for(const s of e.deps)(s.reactions??(s.reactions=[])).push(e),(s.f&kt)!==0&&(s.f&Vt)===0&&mi(s)}}function wi(e){if(e.v===bt)return!0;if(e.deps===null)return!1;for(const s of e.deps)if(Is.has(s)||(s.f&kt)!==0&&wi(s))return!0;return!1}function sr(e){var s=es;try{return es=!0,e()}finally{es=s}}function No(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(or in e)Dn(e);else if(!Array.isArray(e))for(let s in e){const r=e[s];typeof r=="object"&&r&&or in r&&Dn(r)}}}function Dn(e,s=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!s.has(e)){s.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Dn(e[n],s)}catch{}const r=Vn(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=za(r);for(let o in n){const a=n[o].get;if(a)try{a.call(e)}catch{}}}}}const Fo=["touchstart","touchmove"];function Oo(e){return Fo.includes(e)}const _i=new Set,Nn=new Set;function Ao(e,s,r,n={}){function o(a){if(n.capture||Mr.call(s,a),!a.cancelBubble)return fn(()=>r==null?void 0:r.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?ys(()=>{s.addEventListener(e,o,n)}):s.addEventListener(e,o,n),o}function gt(e,s,r,n,o){var a={capture:n,passive:o},c=Ao(e,s,r,a);(s===document.body||s===window||s===document||s instanceof HTMLMediaElement)&&Kn(()=>{s.removeEventListener(e,c,a)})}function qt(e){for(var s=0;s<e.length;s++)_i.add(e[s]);for(var r of Nn)r(e)}let ua=null;function Mr(e){var y;var s=this,r=s.ownerDocument,n=e.type,o=((y=e.composedPath)==null?void 0:y.call(e))||[],a=o[0]||e.target;ua=e;var c=0,f=ua===e&&e.__root;if(f){var v=o.indexOf(f);if(v!==-1&&(s===document||s===window)){e.__root=s;return}var g=o.indexOf(s);if(g===-1)return;v<=g&&(c=v)}if(a=o[c]||e.target,a!==s){Ta(e,"currentTarget",{configurable:!0,get(){return a||r}});var _=Ve,S=Ke;Jt(null),us(null);try{for(var d,p=[];a!==null;){var w=a.assignedSlot||a.parentNode||a.host||null;try{var C=a["__"+n];C!=null&&(!a.disabled||e.target===a)&&C.call(a,e)}catch(x){d?p.push(x):d=x}if(e.cancelBubble||w===s||w===null)break;a=w}if(d){for(let x of p)queueMicrotask(()=>{throw x});throw d}}finally{e.__root=s,delete e.currentTarget,Jt(_),us(S)}}}function yi(e){var s=document.createElement("template");return s.innerHTML=e.replaceAll("<!>","<!---->"),s.content}function Dr(e,s){var r=Ke;r.nodes===null&&(r.nodes={start:e,end:s,a:null,t:null})}function E(e,s){var r=(s&qa)!==0,n=(s&no)!==0,o,a=!e.startsWith("<!>");return()=>{o===void 0&&(o=yi(a?e:"<!>"+e),r||(o=ws(o)));var c=n||Za?document.importNode(o,!0):o.cloneNode(!0);if(r){var f=ws(c),v=c.lastChild;Dr(f,v)}else Dr(c,c);return c}}function Lo(e,s,r="svg"){var n=!e.startsWith("<!>"),o=(s&qa)!==0,a=`<${r}>${n?e:"<!>"+e}</${r}>`,c;return()=>{if(!c){var f=yi(a),v=ws(f);if(o)for(c=document.createDocumentFragment();ws(v);)c.appendChild(ws(v));else c=ws(v)}var g=c.cloneNode(!0);if(o){var _=ws(g),S=g.lastChild;Dr(_,S)}else Dr(g,g);return g}}function Be(e,s){return Lo(e,s,"svg")}function Re(){var e=document.createDocumentFragment(),s=document.createComment(""),r=qs();return e.append(s,r),Dr(s,r),e}function m(e,s){e!==null&&e.before(s)}function R(e,s){var r=s==null?"":typeof s=="object"?s+"":s;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function Uo(e,s){return Vo(e,s)}const nr=new Map;function Vo(e,{target:s,anchor:r,props:n={},events:o,context:a,intro:c=!0}){jo();var f=new Set,v=S=>{for(var d=0;d<S.length;d++){var p=S[d];if(!f.has(p)){f.add(p);var w=Oo(p);s.addEventListener(p,Mr,{passive:w});var C=nr.get(p);C===void 0?(document.addEventListener(p,Mr,{passive:w}),nr.set(p,1)):nr.set(p,C+1)}}};v(vn(_i)),Nn.add(v);var g=void 0,_=$o(()=>{var S=r??s.appendChild(qs());return go(S,{pending:()=>{}},d=>{Tt({});var p=pt;a&&(p.c=a),o&&(n.$$events=o),g=e(d,n)||{},zt()}),()=>{var w;for(var d of f){s.removeEventListener(d,Mr);var p=nr.get(d);--p===0?(document.removeEventListener(d,Mr),nr.delete(d)):nr.set(d,p)}Nn.delete(v),S!==r&&((w=S.parentNode)==null||w.removeChild(S))}});return Ho.set(g,_),g}let Ho=new WeakMap;var Qt,ls,Nt,Hs,Lr,Ur,cn;class Zn{constructor(s,r=!0){ns(this,"anchor");Ae(this,Qt,new Map);Ae(this,ls,new Map);Ae(this,Nt,new Map);Ae(this,Hs,new Set);Ae(this,Lr,!0);Ae(this,Ur,()=>{var s=Le;if(T(this,Qt).has(s)){var r=T(this,Qt).get(s),n=T(this,ls).get(r);if(n)Xn(n),T(this,Hs).delete(r);else{var o=T(this,Nt).get(r);o&&(T(this,ls).set(r,o.effect),T(this,Nt).delete(r),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),n=o.effect)}for(const[a,c]of T(this,Qt)){if(T(this,Qt).delete(a),a===s)break;const f=T(this,Nt).get(c);f&&(It(f.effect),T(this,Nt).delete(c))}for(const[a,c]of T(this,ls)){if(a===r||T(this,Hs).has(a))continue;const f=()=>{if(Array.from(T(this,Qt).values()).includes(a)){var g=document.createDocumentFragment();ui(c,g),g.append(qs()),T(this,Nt).set(a,{effect:c,fragment:g})}else It(c);T(this,Hs).delete(a),T(this,ls).delete(a)};T(this,Lr)||!n?(T(this,Hs).add(a),Js(c,f,!1)):f()}}});Ae(this,cn,s=>{T(this,Qt).delete(s);const r=Array.from(T(this,Qt).values());for(const[n,o]of T(this,Nt))r.includes(n)||(It(o.effect),T(this,Nt).delete(n))});this.anchor=s,Fe(this,Lr,r)}ensure(s,r){var n=Le,o=si();if(r&&!T(this,ls).has(s)&&!T(this,Nt).has(s))if(o){var a=document.createDocumentFragment(),c=qs();a.append(c),T(this,Nt).set(s,{effect:Ut(()=>r(c)),fragment:a})}else T(this,ls).set(s,Ut(()=>r(this.anchor)));if(T(this,Qt).set(n,s),o){for(const[f,v]of T(this,ls))f===s?n.unskip_effect(v):n.skip_effect(v);for(const[f,v]of T(this,Nt))f===s?n.unskip_effect(v.effect):n.skip_effect(v.effect);n.oncommit(T(this,Ur)),n.ondiscard(T(this,cn))}else T(this,Ur).call(this)}}Qt=new WeakMap,ls=new WeakMap,Nt=new WeakMap,Hs=new WeakMap,Lr=new WeakMap,Ur=new WeakMap,cn=new WeakMap;function I(e,s,r=!1){var n=new Zn(e),o=r?Rs:0;function a(c,f){n.ensure(c,f)}Gr(()=>{var c=!1;s((f,v=!0)=>{c=!0,a(v,f)}),c||a(!1,null)},o)}function ot(e,s){return s}function Jo(e,s,r){for(var n=[],o=s.length,a,c=s.length,f=0;f<o;f++){let S=s[f];Js(S,()=>{if(a){if(a.pending.delete(S),a.done.add(S),a.pending.size===0){var d=e.outrogroups;Fn(vn(a.done)),d.delete(a),d.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var v=n.length===0&&r!==null;if(v){var g=r,_=g.parentNode;Co(_),_.append(g),e.items.clear()}Fn(s,!v)}else a={pending:new Set(s),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(a)}function Fn(e,s=!0){for(var r=0;r<e.length;r++)It(e[r],s)}var da;function nt(e,s,r,n,o,a=null){var c=e,f=new Map,v=(s&Ia)!==0;if(v){var g=e;c=g.appendChild(qs())}var _=null,S=Wa(()=>{var x=r();return Ca(x)?x:x==null?[]:vn(x)}),d,p=!0;function w(){y.fallback=_,Wo(y,d,c,s,n),_!==null&&(d.length===0?(_.f&_s)===0?Xn(_):(_.f^=_s,Pr(_,null,c)):Js(_,()=>{_=null}))}var C=Gr(()=>{d=t(S);for(var x=d.length,P=new Set,O=Le,ie=si(),te=0;te<x;te+=1){var de=d[te],_e=n(de,te),je=p?null:f.get(_e);je?(je.v&&wr(je.v,de),je.i&&wr(je.i,te),ie&&O.unskip_effect(je.e)):(je=Go(f,p?c:da??(da=qs()),de,_e,te,o,s,r),p||(je.e.f|=_s),f.set(_e,je)),P.add(_e)}if(x===0&&a&&!_&&(p?_=Ut(()=>a(c)):(_=Ut(()=>a(da??(da=qs()))),_.f|=_s)),x>P.size&&Hi(),!p)if(ie){for(const[Te,X]of f)P.has(Te)||O.skip_effect(X.e);O.oncommit(w),O.ondiscard(()=>{})}else w();t(S)}),y={effect:C,items:f,outrogroups:null,fallback:_};p=!1}function Er(e){for(;e!==null&&(e.f&ss)===0;)e=e.next;return e}function Wo(e,s,r,n,o){var X,$e,Je,we,Oe,Me,J,B,L;var a=(n&so)!==0,c=s.length,f=e.items,v=Er(e.effect.first),g,_=null,S,d=[],p=[],w,C,y,x;if(a)for(x=0;x<c;x+=1)w=s[x],C=o(w,x),y=f.get(C).e,(y.f&_s)===0&&(($e=(X=y.nodes)==null?void 0:X.a)==null||$e.measure(),(S??(S=new Set)).add(y));for(x=0;x<c;x+=1){if(w=s[x],C=o(w,x),y=f.get(C).e,e.outrogroups!==null)for(const se of e.outrogroups)se.pending.delete(y),se.done.delete(y);if((y.f&_s)!==0)if(y.f^=_s,y===v)Pr(y,null,r);else{var P=_?_.next:v;y===e.effect.last&&(e.effect.last=y.prev),y.prev&&(y.prev.next=y.next),y.next&&(y.next.prev=y.prev),Cs(e,_,y),Cs(e,y,P),Pr(y,P,r),_=y,d=[],p=[],v=Er(_.next);continue}if((y.f&Ft)!==0&&(Xn(y),a&&((we=(Je=y.nodes)==null?void 0:Je.a)==null||we.unfix(),(S??(S=new Set)).delete(y))),y!==v){if(g!==void 0&&g.has(y)){if(d.length<p.length){var O=p[0],ie;_=O.prev;var te=d[0],de=d[d.length-1];for(ie=0;ie<d.length;ie+=1)Pr(d[ie],O,r);for(ie=0;ie<p.length;ie+=1)g.delete(p[ie]);Cs(e,te.prev,de.next),Cs(e,_,te),Cs(e,de,O),v=O,_=de,x-=1,d=[],p=[]}else g.delete(y),Pr(y,v,r),Cs(e,y.prev,y.next),Cs(e,y,_===null?e.effect.first:_.next),Cs(e,_,y),_=y;continue}for(d=[],p=[];v!==null&&v!==y;)(g??(g=new Set)).add(v),p.push(v),v=Er(v.next);if(v===null)continue}(y.f&_s)===0&&d.push(y),_=y,v=Er(y.next)}if(e.outrogroups!==null){for(const se of e.outrogroups)se.pending.size===0&&(Fn(vn(se.done)),(Oe=e.outrogroups)==null||Oe.delete(se));e.outrogroups.size===0&&(e.outrogroups=null)}if(v!==null||g!==void 0){var _e=[];if(g!==void 0)for(y of g)(y.f&Ft)===0&&_e.push(y);for(;v!==null;)(v.f&Ft)===0&&v!==e.fallback&&_e.push(v),v=Er(v.next);var je=_e.length;if(je>0){var Te=(n&Ia)!==0&&c===0?r:null;if(a){for(x=0;x<je;x+=1)(J=(Me=_e[x].nodes)==null?void 0:Me.a)==null||J.measure();for(x=0;x<je;x+=1)(L=(B=_e[x].nodes)==null?void 0:B.a)==null||L.fix()}Jo(e,_e,Te)}}a&&ys(()=>{var se,fe;if(S!==void 0)for(y of S)(fe=(se=y.nodes)==null?void 0:se.a)==null||fe.apply()})}function Go(e,s,r,n,o,a,c,f){var v=(c&eo)!==0?(c&ro)===0?Ka(r,!1,!1):Ks(r):null,g=(c&to)!==0?Ks(o):null;return{v,i:g,e:Ut(()=>(a(s,v??r,g??o,f),()=>{e.delete(n)}))}}function Pr(e,s,r){if(e.nodes)for(var n=e.nodes.start,o=e.nodes.end,a=s&&(s.f&_s)===0?s.nodes.start:r;n!==null;){var c=Wr(n);if(a.before(n),n===o)return;n=c}}function Cs(e,s,r){s===null?e.effect.first=r:s.next=r,r===null?e.effect.last=s:r.prev=s}function bi(e,s,...r){var n=new Zn(e);Gr(()=>{const o=s()??null;n.ensure(o,o&&(a=>o(a,...r)))},Rs)}function Yo(e,s,r){var n=new Zn(e);Gr(()=>{var o=s()??null;n.ensure(o,o&&(a=>r(a,o)))},Rs)}const fa=[...` 	
\r\fÂ \v\uFEFF`];function Qo(e,s,r){var n=e==null?"":""+e;if(s&&(n=n?n+" "+s:s),r){for(var o in r)if(r[o])n=n?n+" "+o:o;else if(n.length)for(var a=o.length,c=0;(c=n.indexOf(o,c))>=0;){var f=c+a;(c===0||fa.includes(n[c-1]))&&(f===n.length||fa.includes(n[f]))?n=(c===0?"":n.substring(0,c))+n.substring(f+1):c=f}}return n===""?null:n}function Ko(e,s){return e==null?null:String(e)}function pe(e,s,r,n,o,a){var c=e.__className;if(c!==r||c===void 0){var f=Qo(r,n,a);f==null?e.removeAttribute("class"):s?e.className=f:e.setAttribute("class",f),e.__className=r}else if(a&&o!==a)for(var v in a){var g=!!a[v];(o==null||g!==!!o[v])&&e.classList.toggle(v,g)}return a}function Xt(e,s,r,n){var o=e.__style;if(o!==s){var a=Ko(s);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=s}return n}const Xo=Symbol("is custom element"),Zo=Symbol("is html");function on(e,s){var r=xi(e);r.value===(r.value=s??void 0)||e.value===s&&(s!==0||e.nodeName!=="PROGRESS")||(e.value=s??"")}function _t(e,s,r,n){var o=xi(e);o[s]!==(o[s]=r)&&(s==="loading"&&(e[Li]=r),r==null?e.removeAttribute(s):typeof r!="string"&&el(e).includes(s)?e[s]=r:e.setAttribute(s,r))}function xi(e){return e.__attributes??(e.__attributes={[Xo]:e.nodeName.includes("-"),[Zo]:e.namespaceURI===ao})}var pa=new Map;function el(e){var s=e.getAttribute("is")||e.nodeName,r=pa.get(s);if(r)return r;pa.set(s,r=[]);for(var n,o=e,a=Element.prototype;a!==o;){n=za(o);for(var c in n)n[c].set&&r.push(c);o=Vn(o)}return r}function Kt(e,s,r=s){var n=new WeakSet;ri(e,"input",async o=>{var a=o?e.defaultValue:e.value;if(a=xn(e)?kn(a):a,r(a),Le!==null&&n.add(Le),await Do(),a!==(a=s())){var c=e.selectionStart,f=e.selectionEnd,v=e.value.length;if(e.value=a??"",f!==null){var g=e.value.length;c===f&&f===v&&g>v?(e.selectionStart=g,e.selectionEnd=g):(e.selectionStart=c,e.selectionEnd=Math.min(f,g))}}}),sr(s)==null&&e.value&&(r(xn(e)?kn(e.value):e.value),Le!==null&&n.add(Le)),pn(()=>{var o=s();if(e===document.activeElement){var a=En??Le;if(n.has(a))return}xn(e)&&o===kn(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function ki(e,s,r=s){ri(e,"change",n=>{var o=n?e.defaultChecked:e.checked;r(o)}),sr(s)==null&&r(e.checked),pn(()=>{var n=s();e.checked=!!n})}function xn(e){var s=e.type;return s==="number"||s==="range"}function kn(e){return e===""?null:+e}function ha(e,s){return e===s||(e==null?void 0:e[or])===s}function bs(e={},s,r,n){return Mo(()=>{var o,a;return pn(()=>{o=a,a=[],sr(()=>{e!==r(...a)&&(s(e,...a),o&&ha(r(...o),e)&&s(null,...o))})}),()=>{ys(()=>{a&&ha(r(...a),e)&&s(null,...a)})}}),e}function Si(e=!1){const s=pt,r=s.l.u;if(!r)return;let n=()=>No(s.s);if(e){let o=0,a={};const c=dn(()=>{let f=!1;const v=s.s;for(const g in v)v[g]!==a[g]&&(a[g]=v[g],f=!0);return f&&o++,o});n=()=>t(c)}r.b.length&&Eo(()=>{ga(s,n),rn(r.b)}),_r(()=>{const o=sr(()=>r.m.map(Ai));return()=>{for(const a of o)typeof a=="function"&&a()}}),r.a.length&&_r(()=>{ga(s,n),rn(r.a)})}function ga(e,s){if(e.l.s)for(const r of e.l.s)t(r);s()}function ea(e,s,r){if(e==null)return s(void 0),r&&r(void 0),Es;const n=sr(()=>e.subscribe(s,r));return n.unsubscribe?()=>n.unsubscribe():n}const ar=[];function tl(e,s){return{subscribe:xr(e,s).subscribe}}function xr(e,s=Es){let r=null;const n=new Set;function o(f){if(Ba(e,f)&&(e=f,r)){const v=!ar.length;for(const g of n)g[1](),ar.push(g,e);if(v){for(let g=0;g<ar.length;g+=2)ar[g][0](ar[g+1]);ar.length=0}}}function a(f){o(f(e))}function c(f,v=Es){const g=[f,v];return n.add(g),n.size===1&&(r=s(o,a)||Es),f(e),()=>{n.delete(g),n.size===0&&r&&(r(),r=null)}}return{set:o,update:a,subscribe:c}}function ta(e,s,r){const n=!Array.isArray(e),o=n?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=s.length<2;return tl(r,(c,f)=>{let v=!1;const g=[];let _=0,S=Es;const d=()=>{if(_)return;S();const w=s(n?g[0]:g,c,f);a?c(w):S=typeof w=="function"?w:Es},p=o.map((w,C)=>ea(w,y=>{g[C]=y,_&=~(1<<C),v&&d()},()=>{_|=1<<C}));return v=!0,d(),function(){rn(p),S(),v=!1}})}function vs(e){let s;return ea(e,r=>s=r)(),s}let On=Symbol();function Wt(e,s,r){const n=r[s]??(r[s]={store:null,source:Ka(void 0),unsubscribe:Es});if(n.store!==e&&!(On in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=Es;else{var o=!0;n.unsubscribe=ea(e,a=>{o?n.source.v=a:i(n.source,a)}),o=!1}return e&&On in r?vs(e):t(n.source)}function ps(){const e={};function s(){Kn(()=>{for(var r in e)e[r].unsubscribe();Ta(e,On,{enumerable:!1,value:!0})})}return[e,s]}function An(e,s,r,n){var o=n,a=!0,c=()=>(a&&(a=!1,o=n),o),f;f=e[s],f===void 0&&n!==void 0&&(f=c());var v;return v=()=>{var g=e[s];return g===void 0?c():(a=!0,g)},v}function kr(e){pt===null&&Ui(),Hr&&pt.l!==null?sl(pt).m.push(e):_r(()=>{const s=sr(e);if(typeof s=="function")return s})}function sl(e){var s=e.l;return s.u??(s.u={a:[],b:[],m:[]})}const rl="5";var ja;typeof window<"u"&&((ja=window.__svelte??(window.__svelte={})).v??(ja.v=new Set)).add(rl);function ji(){return window.location.pathname||"/"}function Ci(){return window.location.search?window.location.search.slice(1):""}function nl(){const e=window.location.hash;if(e&&e.startsWith("#/")){const s=e.slice(1);history.replaceState(null,"",s)}}nl();const hn=xr(ji());window.addEventListener("popstate",()=>{hn.set(ji())});const gn=ta(hn,e=>e.split("?")[0]||"/"),al=ta(hn,()=>Ci()),Ti=ta(al,e=>Object.fromEntries(new URLSearchParams(e)));function Sr(e){history.pushState(null,"",e),hn.set(e)}function mn(){const e=Ci();return Object.fromEntries(new URLSearchParams(e))}lo();let il=0;function ol(){const{subscribe:e,update:s}=xr([]);return{subscribe:e,add(r,n="info",o=3e3){const a={id:il++,message:r,type:n};s(c=>[...c,a]),setTimeout(()=>{s(c=>c.filter(f=>f.id!==a.id))},o)},remove(r){s(n=>n.filter(o=>o.id!==r))}}}const zi=ol();function Ce(e,s,r){zi.add(e,s,r)}var ll=E('<div role="alert"> </div>');function cl(e,s){let r=An(s,"type",3,"info");var n=ll(),o=l(n);W(()=>{pe(n,1,`toast ${r()??""}`,"svelte-1i7wnxu"),R(o,s.message)}),m(e,n)}var vl=E('<div class="toast-container svelte-3knp8x"></div>');function ul(e){const s=()=>Wt(zi,"$toasts",r),[r,n]=ps();var o=vl();nt(o,5,s,a=>a.id,(a,c)=>{cl(a,{get message(){return t(c).message},get type(){return t(c).type}})}),m(e,o),n()}function Se(){const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"http://localhost:3001":"https://yoink.coah80.com"}async function dl(e,s={}){const r=await fetch(e,s),n=r.headers.get("content-type");if(!r.ok){let o=`Request failed (${r.status})`;if(n&&n.includes("application/json"))o=(await r.json()).error||o;else{const a=await r.text();console.error("Non-JSON error response:",a.substring(0,500)),o=`Server error ${r.status} (likely VPN blocked)`}throw new Error(o)}return r.json()}async function fl(e,s={}){return dl(`${Se()}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}function Ln(e,{onMessage:s,onError:r,maxReconnectAttempts:n=10}){let o=0,a=null,c=!1;function f(){c||(a=new EventSource(`${Se()}/api/progress/${e}`),a.onmessage=g=>{try{const _=JSON.parse(g.data);o=0,s(_),(_.stage==="complete"||_.stage==="error"||_.stage==="cancelled")&&v()}catch(_){console.error("SSE parse error:",_)}},a.onerror=()=>{if(a.close(),!c)if(o<n){o++;const g=Math.min(1e3*o,5e3);r&&r({type:"reconnecting",attempt:o,max:n}),setTimeout(f,g)}else r&&r({type:"failed",message:"Connection lost - refresh page to retry"})})}function v(){c=!0,a&&(a.close(),a=null)}return f(),{close:v}}const Nr=[],pl=5;function ma(e){e.parentNode&&e.parentNode.removeChild(e);const s=Nr.indexOf(e);s>-1&&Nr.splice(s,1)}function hl(){for(;Nr.length>pl;){const e=Nr.shift();e&&e.parentNode&&e.parentNode.removeChild(e)}}function wa(e){const s=document.createElement("iframe");s.style.display="none",s.src=e,document.body.appendChild(s),Nr.push(s),hl(),s.onload=()=>setTimeout(()=>ma(s),5e3),setTimeout(()=>ma(s),120*1e3)}function Fr(e,s){const r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=s,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}const Zs=xr(sessionStorage.getItem("yoink_clientId")||null),Gs=new Set;let gl=0,Pt=null,cs=0;const Ei=3;async function ml(){let e=vs(Zs);if(!e){try{e=(await(await fetch(`${Se()}/api/connect`,{method:"POST"})).json()).clientId}catch{e="local-"+Date.now()+"-"+Math.random().toString(36).slice(2,11)}sessionStorage.setItem("yoink_clientId",e),Zs.set(e)}return e}function Qr(){const e=`job-${++gl}-${Date.now()}`,s=Gs.size===0;if(Gs.add(e),s&&!Pt){cs=0;const r=vs(Zs);r&&!r.startsWith("local-")&&fetch(`${Se()}/api/heartbeat/${r}`,{method:"POST"}).catch(()=>{}),Pt=setInterval(async()=>{const n=vs(Zs);if(!(!n||n.startsWith("local-")))try{await fetch(`${Se()}/api/heartbeat/${n}`,{method:"POST"}),cs=0}catch{cs++,cs>=Ei&&(clearInterval(Pt),Pt=null,cs=0)}},15e3)}return e}function wl(){if(Gs.size>0&&!Pt){cs=0;const e=vs(Zs);e&&!e.startsWith("local-")&&fetch(`${Se()}/api/heartbeat/${e}`,{method:"POST"}).catch(()=>{}),Pt=setInterval(async()=>{const s=vs(Zs);if(!(!s||s.startsWith("local-")))try{await fetch(`${Se()}/api/heartbeat/${s}`,{method:"POST"}),cs=0}catch{cs++,cs>=Ei&&(clearInterval(Pt),Pt=null,cs=0)}},15e3)}}function Kr(e){e?Gs.delete(e):Gs.clear(),Gs.size===0&&Pt&&(clearInterval(Pt),Pt=null)}typeof window<"u"&&window.addEventListener("beforeunload",()=>{Pt&&(clearInterval(Pt),Pt=null),Gs.clear()});const _a=[{text:"yoink it, go on..."},{text:"not cobalt"},{text:"im bored"},{text:"have you yoinked it today?"},{text:"download helium browser",link:"https://helium.computer/",classes:["clickable"]},{text:"dont like it? use cliply (dont)"},{text:"the biggest yt-dlp wrapper of them all"},{text:"awesome name, right?"},{text:"get yoinked!"},{text:"funny message here"},{text:"SHOUTOUT TO COAH"},{text:"new feature: yoink!"},{text:"new feature: ai download"},{text:"welcome to yoink.tools"},{text:"feelin' yoinky?"},{text:"im parched"},{text:"stay hydrated!"},{text:"computers are cool"},{text:"missing assignments?"},{text:"procrastinate with yoink"},{text:"newgrounds.com",link:"https://newgrounds.com",classes:["clickable"]},{text:"bring back flash!"},{text:"FUCK ICE"},{text:"post this one to twitter"},{text:"google i need yoinks! NOW!!!!!"},{text:"im feeling fancy today...",classes:["fancy"]},{text:"powered by yt-dlp"},{text:"hello world!"},{text:"1000+ sites!",link:"https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md",classes:["clickable"]},{text:"yes, that site works. even the one you're thinking of."}],_l=["4tube","alphaporno","beeg","behindkink","bongacams","cam4","cammodels","camsoda","chaturbate","drtuber","empflix","eporner","erocast","eroprofile","fux","hellporno","hotmovs","iceporn","lovehomeporn","manyvids","motherless","moviefap","noodlemagazine","nuvid","peekvideos","peekvids","playvids","porn","pornbox","pornerbros","pornflip","pornhub","pornotube","pornovoisines","pornoxo","porntop","porntube","redtube","rule34video","slutload","spankbang","stripchat","sunporno","thisvid","tnaflix","tube8","txxx","xhamster","xnxx","xvideos","xxxymovies","youjizz","youporn","zenporn","xtube","erome","hentai","hclips","gotporn","fuq","ashemaletube"];function yl(e){try{const s=new URL(e).hostname.toLowerCase().replace("www.","");return _l.some(r=>s.includes(r))}catch{return!1}}const Sn={quality:"1080p",codec:"h264",container:"mp4",audioFormat:"mp3",audioBitrate:"320",filenameStyle:"basic",playlistPreference:null,twitterGifs:!0},Ds=["starting","downloading","processing","remuxing","sending","zipping","playlist-info","reconnecting","uploading","converting","compressing","transcribing"];function bl(){let e={...Sn};try{const a=localStorage.getItem("yoink_settings");a&&(e={...Sn,...JSON.parse(a)})}catch{}const{subscribe:s,set:r,update:n}=xr(e);function o(a){localStorage.setItem("yoink_settings",JSON.stringify(a))}return{subscribe:s,set(a){o(a),r(a)},update(a){n(c=>{const f=a(c);return o(f),f})},setSetting(a,c){n(f=>{const v={...f,[a]:c};return o(v),v})},reset(){const a={...Sn};o(a),r(a)}}}const Ys=bl();let ya=!1;async function $i(){if(!(ya||!("serviceWorker"in navigator)))try{await navigator.serviceWorker.register("/sw.js"),ya=!0}catch{}}async function xl(){return"Notification"in window?Notification.permission==="granted"?"granted":Notification.permission==="denied"?"denied":await Notification.requestPermission():"unsupported"}async function kl(e,s){if(!(!("Notification"in window)||Notification.permission!=="granted")){if(await $i(),"serviceWorker"in navigator)try{const r=await navigator.serviceWorker.ready;if(r.active){r.active.postMessage({type:"PLAYLIST_COMPLETE",message:`${e} is ready to download!`,jobId:s});return}}catch{}new Notification("yoink",{body:`${e} is ready to download!`,icon:"/icons/icon-192.png"})}}function Sl(){let e=[];try{const d=localStorage.getItem("yoink_queue");d&&(e=JSON.parse(d).map(p=>p.isPlaylist&&p.serverJobId&&p.stage!=="ready"?{...p,stage:"reconnecting",progress:p.progress||0,status:"reconnecting..."}:Ds.includes(p.stage)?{...p,stage:"queued",progress:0,status:"interrupted - tap to restart"}:p).filter(p=>p.stage!=="complete"&&p.stage!=="error"))}catch{e=[]}const{subscribe:s,set:r,update:n}=xr(e),o=new Map,a=new Map,c=new Map;function f(d){localStorage.setItem("yoink_queue",JSON.stringify(d))}function v(){return vs({subscribe:s})}function g(d){const p=c.get(d);p&&(clearInterval(p),c.delete(d))}function _(d){const p=o.get(d);p&&(p.close(),o.delete(d)),g(d);const w=a.get(d);w&&(Kr(w),a.delete(d))}const S={subscribe:s,add(d){n(p=>{if(p.some(C=>C.id===d.id))return p;const w=[...p,d];return f(w),w})},remove(d){const w=v().find(C=>C.id===d);if(_(d),w&&Ds.includes(w.stage)){const C=w.serverJobId||d;fetch(`${Se()}/api/cancel/${C}`,{method:"POST"}).catch(()=>{})}n(C=>{const y=C.filter(x=>x.id!==d);return f(y),y}),w&&!w.isPlaylist&&Ds.includes(w.stage)&&setTimeout(()=>this.processNext(),100)},updateItem(d,p){n(w=>{const C=w.map(y=>y.id===d?{...y,...p}:y);return f(C),C})},clear(){v().forEach(p=>{if(_(p.id),Ds.includes(p.stage)){const w=p.serverJobId||p.id;fetch(`${Se()}/api/cancel/${w}`,{method:"POST"}).catch(()=>{})}}),o.clear(),a.clear(),c.clear(),r([]),f([])},startDownload(d){if(d.isPlaylist){this._startPlaylistDownload(d);return}this._startDirectDownload(d)},_startDirectDownload(d){const p=vs(Ys),w=Qr();a.set(d.id,w),this.updateItem(d.id,{stage:"starting",status:"starting download...",startTime:Date.now()});const C=Ln(d.id,{onMessage:P=>{const O={stage:P.stage,status:P.message};if(P.progress!==void 0&&(O.progress=P.progress),P.speed!==void 0&&(O.speed=P.speed),P.eta!==void 0&&(O.eta=P.eta),P.totalVideos!==void 0&&(O.videoCount=P.totalVideos),P.currentVideo!==void 0&&(O.currentVideo=P.currentVideo),P.currentVideoTitle!==void 0&&(O.currentVideoTitle=P.currentVideoTitle),P.format!==void 0&&(O.formatDisplay=P.format),P.downloadedCount!==void 0&&(O.downloadedCount=P.downloadedCount),P.failedVideos&&(O.failedVideos=P.failedVideos),P.failedCount!==void 0&&(O.failedCount=P.failedCount),this.updateItem(d.id,O),P.stage==="complete"){O.endTime=Date.now(),this.updateItem(d.id,O),_(d.id);const te=v().find(Te=>Te.id===d.id),de=te!=null&&te.startTime?Math.floor((Date.now()-te.startTime)/1e3):0,_e=de>=60?`${Math.floor(de/60)}m ${de%60}s`:`${de}s`,je=d.format==="images"?"gallery download complete!":`download complete! (${_e})`;Ce(je,"success"),this.processNext(),setTimeout(()=>this.remove(d.id),5e3)}else P.stage==="error"?(_(d.id),Ce(P.message,"error"),this.processNext()):P.stage==="cancelled"&&(_(d.id),this.processNext())},onError:P=>{P.type==="reconnecting"?this.updateItem(d.id,{status:`reconnecting... (${P.attempt}/${P.max})`}):(this.updateItem(d.id,{stage:"error",status:P.message}),_(d.id),this.processNext())}});o.set(d.id,C);const y=new URLSearchParams({url:d.url,format:d.format,filename:d.title,quality:p.quality,container:p.container,audioFormat:p.audioFormat,audioBitrate:p.audioBitrate,progressId:d.id,twitterGifs:p.twitterGifs!==!1?"true":"false"});let x;d.format==="images"?x="/api/gallery/download":x="/api/download",wa(`${Se()}${x}?${y.toString()}`)},async _startPlaylistDownload(d){const p=vs(Ys),w=d.resumeFrom>1;this.updateItem(d.id,{stage:"starting",status:w?`resuming from video ${d.resumeFrom}...`:"starting playlist download...",startTime:Date.now()}),$i(),xl();try{const C=vs(Zs),x=(await fl("/api/playlist/start",{url:d.url,format:d.format,quality:p.quality,container:p.container,audioFormat:p.audioFormat,audioBitrate:p.audioBitrate,clientId:C||void 0,resumeFrom:d.resumeFrom||1})).jobId;this.updateItem(d.id,{serverJobId:x}),this._connectPlaylistSSE(d.id,x),this._startPlaylistPolling(d.id,x)}catch(C){this.updateItem(d.id,{stage:"error",status:C.message||"failed to start playlist"}),Ce(C.message||"failed to start playlist","error")}},_connectPlaylistSSE(d,p){const w=Ln(p,{onMessage:C=>{this._handlePlaylistUpdate(d,C)},onError:()=>{}});o.set(d,w)},_startPlaylistPolling(d,p){g(d);const w=setInterval(async()=>{try{const C=await fetch(`${Se()}/api/playlist/status/${p}`);if(!C.ok){C.status===404&&(this.updateItem(d,{stage:"error",status:"playlist expired â try again!"}),_(d),Ce("playlist expired â try again!","error"));return}const y=await C.json();this._handlePlaylistUpdate(d,{stage:y.status==="complete"?"complete":y.status,message:y.message,progress:y.progress,totalVideos:y.totalVideos,currentVideo:y.currentVideo,currentVideoTitle:y.currentVideoTitle,failedVideos:y.failedVideos,failedCount:y.failedCount,downloadedCount:y.videosCompleted,downloadToken:y.downloadToken,fileName:y.fileName,fileSize:y.fileSize,speed:y.speed,eta:y.eta})}catch{}},3e3);c.set(d,w)},_handlePlaylistUpdate(d,p){const w={stage:p.stage,status:p.message};if(p.progress!==void 0&&(w.progress=p.progress),p.speed!==void 0&&(w.speed=p.speed),p.eta!==void 0&&(w.eta=p.eta),p.totalVideos!==void 0&&(w.videoCount=p.totalVideos),p.currentVideo!==void 0&&(w.currentVideo=p.currentVideo),p.currentVideoTitle!==void 0&&(w.currentVideoTitle=p.currentVideoTitle),p.downloadedCount!==void 0&&(w.downloadedCount=p.downloadedCount),p.failedVideos&&(w.failedVideos=p.failedVideos),p.failedCount!==void 0&&(w.failedCount=p.failedCount),p.stage==="complete"&&p.downloadToken){w.stage="ready",w.downloadToken=p.downloadToken,w.fileName=p.fileName,w.fileSize=p.fileSize,w.endTime=Date.now(),w.status="playlist ready â tap to download",this.updateItem(d,w),_(d);const y=v().find(x=>x.id===d);Ce(`${(y==null?void 0:y.title)||"playlist"} is ready to download!`,"success",8e3),kl((y==null?void 0:y.title)||"playlist",y==null?void 0:y.serverJobId);return}if(p.stage==="error"){this.updateItem(d,w),_(d),Ce(p.message,"error");return}if(p.stage==="cancelled"){this.updateItem(d,w),_(d);return}this.updateItem(d,w)},async downloadReady(d){const w=v().find(C=>C.id===d);if(!(!w||!w.downloadToken)){if(w.serverJobId)try{if(!(await fetch(`${Se()}/api/playlist/status/${w.serverJobId}`)).ok){this.updateItem(d,{stage:"error",status:"playlist expired â try again!"}),Ce("playlist expired â try again!","error");return}}catch{this.updateItem(d,{stage:"error",status:"playlist expired â try again!"}),Ce("playlist expired â try again!","error");return}wa(`${Se()}/api/playlist/download/${w.downloadToken}`),Ce("downloading playlist zip...","success"),setTimeout(()=>this.remove(d),1e4)}},processNext(){const d=v();if(d.some(C=>!C.isPlaylist&&Ds.includes(C.stage)))return;const w=d.find(C=>C.stage==="queued");w&&this.startDownload(w)},startAllQueued(){this.processNext()},retryDownload(d){const w=v().find(y=>y.id===d);if(!w)return;_(d);const C=Date.now().toString()+Math.random().toString(36).substr(2,9);if(w.isPlaylist){const y=(w.downloadedCount||0)+1,x=y>1?`resuming from video ${y}...`:"queued for retry";this.updateItem(d,{id:C,stage:"queued",progress:w.progress||0,status:x,endTime:null,serverJobId:null,downloadToken:null,resumeFrom:y})}else this.updateItem(d,{id:C,stage:"queued",progress:0,status:"queued for retry",logs:[],endTime:null,serverJobId:null,downloadToken:null});this.processNext()},async finishPlaylistEarly(d){const w=v().find(y=>y.id===d),C=(w==null?void 0:w.serverJobId)||d;try{await fetch(`${Se()}/api/finish-early/${C}`,{method:"POST"})}catch{Ce("failed to finish early","error")}},resumePlaylistJobs(){v().filter(p=>p.stage==="reconnecting"&&p.serverJobId).forEach(p=>{this._connectPlaylistSSE(p.id,p.serverJobId),this._startPlaylistPolling(p.id,p.serverJobId)})},reconnectOnResume(){v().filter(p=>p.isPlaylist&&p.serverJobId&&Ds.includes(p.stage)).forEach(p=>{const w=o.get(p.id);w&&(w.close(),o.delete(p.id)),this._connectPlaylistSSE(p.id,p.serverJobId),g(p.id),this._startPlaylistPolling(p.id,p.serverJobId)})}};return typeof window<"u"&&setTimeout(()=>S.resumePlaylistJobs(),500),S}const ce=Sl();var jl=Be('<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',1),Cl=Be('<polyline points="20 6 9 17 4 12"></polyline>'),Tl=Be('<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',1),zl=Be('<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',1),El=Be('<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',1),$l=Be('<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',1),Ml=Be('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Pl=Be('<path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path d="M9 12l2 2 4-4"></path>',1),Il=Be('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),ql=E('<span class="queue-item-format svelte-151vo4w"> </span>'),Rl=E('<span class="queue-item-timer svelte-151vo4w"> </span>'),Bl=E('<span class="queue-item-timer svelte-151vo4w"> </span>'),Dl=E('<button class="queue-item-download svelte-151vo4w" title="Download"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),Nl=E('<button class="queue-item-retry svelte-151vo4w" title="Retry"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg></button>'),Fl=E('<button class="queue-item-retry svelte-151vo4w" title="Start now"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button>'),Ol=E('<button class="queue-item-retry svelte-151vo4w" title="Download now (skip remaining)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),Al=E('<div class="send-to-flyout svelte-151vo4w"><button class="send-to-option svelte-151vo4w"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> transcribe</button> <button class="send-to-option svelte-151vo4w"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg> compress</button> <button class="send-to-option svelte-151vo4w"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg> trim</button> <button class="send-to-option svelte-151vo4w"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> convert</button></div>'),Ll=E('<div class="send-to-wrapper svelte-151vo4w"><button class="queue-item-sendto svelte-151vo4w" title="Send to..."><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></button> <!></div>'),Ul=E('<div class="queue-item-progress svelte-151vo4w"><div class="queue-item-progress-fill svelte-151vo4w"></div></div>'),Vl=E('<div class="queue-item-failed-item svelte-151vo4w"><span class="queue-item-failed-num svelte-151vo4w"> </span> <span> </span></div>'),Hl=E('<div class="queue-item-failed svelte-151vo4w"><div class="queue-item-failed-header svelte-151vo4w"> </div> <!></div>'),Jl=E('<div><div class="queue-item-header svelte-151vo4w"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-151vo4w"><!></svg></div> <div class="queue-item-info svelte-151vo4w"><div class="queue-item-title svelte-151vo4w"> <!> <!></div> <div> </div></div> <div class="queue-item-actions svelte-151vo4w"><!> <!> <!> <!> <button class="queue-item-remove svelte-151vo4w" title="Remove"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div></div> <!> <!></div>');function Wl(e,s){Tt(s,!0);let r=M(!1),n=M(null),o=be(()=>Ds.includes(s.item.stage)),a=be(()=>s.item.stage==="complete"),c=be(()=>s.item.stage==="error"),f=be(()=>s.item.stage==="queued"),v=be(()=>s.item.stage==="ready"),g=be(()=>t(o)&&s.item.progress!==void 0),_=be(()=>t(v)?"success":t(o)?"active":t(a)?"success":t(c)?"error":""),S=be(()=>{if(!s.item.fileSize)return"";const V=s.item.fileSize/(1024*1024);return V>=1024?`${(V/1024).toFixed(1)} GB`:`${V.toFixed(1)} MB`}),d=be(()=>{if(!s.item.startTime||!t(o)&&!t(a))return"";const V=t(a)&&s.item.endTime?s.item.endTime:Date.now(),Y=Math.floor((V-s.item.startTime)/1e3),xe=Math.floor(Y/60);return xe>0?`${xe}m ${Y%60}s`:`${Y}s`}),p=be(()=>{if(s.item.isPlaylist&&s.item.currentVideo&&s.item.videoCount)return`${s.item.currentVideo}/${s.item.videoCount} - ${s.item.currentVideoTitle||s.item.status}`;let V=s.item.status||"waiting...";if(t(o)&&(s.item.speed||s.item.eta)){const Y=[];s.item.speed&&Y.push(s.item.speed),s.item.eta&&Y.push(`~${s.item.eta} left`),Y.length&&(V+=` Â· ${Y.join(" Â· ")}`)}return V}),w=be(()=>!!s.item.url);function C(V){Sr(`/${V}?url=${encodeURIComponent(s.item.url)}`),i(r,!1)}function y(V){t(n)&&!t(n).contains(V.target)&&i(r,!1)}_r(()=>{if(t(r))return document.addEventListener("click",y,!0),()=>document.removeEventListener("click",y,!0)});var x=Jl();let P;x.__click=()=>{t(v)?ce.downloadReady(s.item.id):t(f)&&ce.startDownload(s.item)};var O=l(x),ie=l(O);let te;var de=l(ie),_e=l(de);{var je=V=>{var Y=jl();m(V,Y)},Te=V=>{var Y=Re(),xe=ve(Y);{var We=ye=>{var Pe=Cl();m(ye,Pe)},Xe=ye=>{var Pe=Re(),tt=ve(Pe);{var at=ct=>{var Ye=Tl();m(ct,Ye)},ht=ct=>{var Ye=Re(),H=ve(Ye);{var ee=Ee=>{var He=zl();m(Ee,He)},qe=Ee=>{var He=Re(),Ze=ve(He);{var et=k=>{var h=El();m(k,h)},st=k=>{var h=Re(),b=ve(h);{var j=A=>{var z=$l();m(A,z)},q=A=>{var z=Re(),U=ve(z);{var $=D=>{var F=Ml();m(D,F)},N=D=>{var F=Re(),G=ve(F);{var he=ae=>{var De=Pl();m(ae,De)},le=ae=>{var De=Il();m(ae,De)};I(G,ae=>{t(o)?ae(he):ae(le,!1)},!0)}m(D,F)};I(U,D=>{s.item.format==="audio"?D($):D(N,!1)},!0)}m(A,z)};I(b,A=>{s.item.type==="compress"?A(j):A(q,!1)},!0)}m(k,h)};I(Ze,k=>{s.item.type==="convert"?k(et):k(st,!1)},!0)}m(Ee,He)};I(H,Ee=>{s.item.isPlaylist?Ee(ee):Ee(qe,!1)},!0)}m(ct,Ye)};I(tt,ct=>{t(c)?ct(at):ct(ht,!1)},!0)}m(ye,Pe)};I(xe,ye=>{t(a)?ye(We):ye(Xe,!1)},!0)}m(V,Y)};I(_e,V=>{t(v)?V(je):V(Te,!1)})}var X=u(ie,2),$e=l(X),Je=l($e),we=u(Je);{var Oe=V=>{var Y=ql(),xe=l(Y);W(()=>R(xe,s.item.formatDisplay)),m(V,Y)};I(we,V=>{s.item.isPlaylist&&s.item.formatDisplay&&V(Oe)})}var Me=u(we,2);{var J=V=>{var Y=Rl(),xe=l(Y);W(()=>R(xe,t(S))),m(V,Y)},B=V=>{var Y=Re(),xe=ve(Y);{var We=Xe=>{var ye=Bl(),Pe=l(ye);W(()=>R(Pe,t(d))),m(Xe,ye)};I(xe,Xe=>{t(d)&&Xe(We)},!0)}m(V,Y)};I(Me,V=>{t(v)&&t(S)?V(J):V(B,!1)})}var L=u($e,2),se=l(L),fe=u(X,2),Z=l(fe);{var ue=V=>{var Y=Dl();Y.__click=xe=>{xe.stopPropagation(),ce.downloadReady(s.item.id)},m(V,Y)},ge=V=>{var Y=Re(),xe=ve(Y);{var We=Xe=>{var ye=Nl();ye.__click=Pe=>{Pe.stopPropagation(),ce.retryDownload(s.item.id)},m(Xe,ye)};I(xe,Xe=>{t(c)&&s.item.url&&Xe(We)},!0)}m(V,Y)};I(Z,V=>{t(v)?V(ue):V(ge,!1)})}var Q=u(Z,2);{var oe=V=>{var Y=Fl();Y.__click=xe=>{xe.stopPropagation(),ce.startDownload(s.item)},m(V,Y)};I(Q,V=>{t(f)&&V(oe)})}var K=u(Q,2);{var re=V=>{var Y=Ol();Y.__click=xe=>{xe.stopPropagation(),ce.finishPlaylistEarly(s.item.id)},m(V,Y)};I(K,V=>{s.item.isPlaylist&&t(o)&&s.item.currentVideo>0&&V(re)})}var me=u(K,2);{var Ne=V=>{var Y=Ll(),xe=l(Y);xe.__click=ye=>{ye.stopPropagation(),i(r,!t(r))};var We=u(xe,2);{var Xe=ye=>{var Pe=Al(),tt=l(Pe);tt.__click=Ye=>{Ye.stopPropagation(),C("transcribe")};var at=u(tt,2);at.__click=Ye=>{Ye.stopPropagation(),C("compress")};var ht=u(at,2);ht.__click=Ye=>{Ye.stopPropagation(),C("trim")};var ct=u(ht,2);ct.__click=Ye=>{Ye.stopPropagation(),C("convert")},m(ye,Pe)};I(We,ye=>{t(r)&&ye(Xe)})}bs(Y,ye=>i(n,ye),()=>t(n)),m(V,Y)};I(me,V=>{t(w)&&V(Ne)})}var ke=u(me,2);ke.__click=V=>{V.stopPropagation(),ce.remove(s.item.id)};var ne=u(O,2);{var ze=V=>{var Y=Ul(),xe=l(Y);W(()=>Xt(xe,`width: ${(s.item.progress||0)??""}%`)),m(V,Y)};I(ne,V=>{t(g)&&V(ze)})}var Ie=u(ne,2);{var Ge=V=>{var Y=Hl(),xe=l(Y),We=l(xe),Xe=u(xe,2);nt(Xe,17,()=>s.item.failedVideos,ot,(ye,Pe)=>{var tt=Vl(),at=l(tt),ht=l(at),ct=u(at,2),Ye=l(ct);W(()=>{R(ht,`#${t(Pe).num??""}`),R(Ye,`${(t(Pe).title||"Video")??""} - ${(t(Pe).reason||"Download failed")??""}`)}),m(ye,tt)}),W(()=>R(We,`failed videos (${(s.item.failedCount||s.item.failedVideos.length)??""})`)),m(V,Y)};I(Ie,V=>{var Y;s.item.isPlaylist&&((Y=s.item.failedVideos)==null?void 0:Y.length)>0&&V(Ge)})}W(()=>{P=pe(x,1,"queue-item svelte-151vo4w",null,P,{clickable:t(v)||t(f)}),te=pe(ie,1,"queue-item-icon svelte-151vo4w",null,te,{spinning:t(o),ready:t(v)}),R(Je,`${s.item.title??""} `),pe(L,1,`queue-item-status ${t(_)??""}`,"svelte-151vo4w"),R(se,t(p))}),m(e,x),zt()}qt(["click"]);var Gl=E('<button class="queue-clear svelte-i3r5ty">clear all</button>'),Yl=E('<div class="queue-empty svelte-i3r5ty">nothing here yet</div>'),Ql=E('<div class="queue-dropdown-header svelte-i3r5ty"><span class="queue-dropdown-title svelte-i3r5ty">queue</span> <div class="queue-header-actions svelte-i3r5ty"><button class="queue-start-all svelte-i3r5ty" title="Start all queued"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-i3r5ty"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button> <!></div></div> <div class="queue-list svelte-i3r5ty"><!></div>',1);function Mi(e,s){Tt(s,!0);const r=()=>Wt(ce,"$queue",n),[n,o]=ps();let a=be(r),c=be(()=>t(a).length>0);var f=Ql(),v=ve(f),g=u(l(v),2),_=l(g);_.__click=()=>ce.startAllQueued();var S=u(_,2);{var d=x=>{var P=Gl();P.__click=()=>{ce.clear(),Ce("Queue cleared","info")},m(x,P)};I(S,x=>{t(c)&&x(d)})}var p=u(v,2),w=l(p);{var C=x=>{var P=Re(),O=ve(P);nt(O,17,()=>t(a),ie=>ie.id,(ie,te)=>{Wl(ie,{get item(){return t(te)}})}),m(x,P)},y=x=>{var P=Yl();m(x,P)};I(w,x=>{t(c)?x(C):x(y,!1)})}m(e,f),zt(),o()}qt(["click"]);var Kl=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-1xkxv2n"></path><polyline points="7 10 12 15 17 10" class="svelte-1xkxv2n"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-1xkxv2n"></line></svg>'),Xl=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="17 1 21 5 17 9" class="svelte-1xkxv2n"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" class="svelte-1xkxv2n"></path><polyline points="7 23 3 19 7 15" class="svelte-1xkxv2n"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" class="svelte-1xkxv2n"></path></svg>'),Zl=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="4 14 10 14 10 20" class="svelte-1xkxv2n"></polyline><polyline points="20 10 14 10 14 4" class="svelte-1xkxv2n"></polyline><line x1="14" y1="10" x2="21" y2="3" class="svelte-1xkxv2n"></line><line x1="3" y1="21" x2="10" y2="14" class="svelte-1xkxv2n"></line></svg>'),ec=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><circle cx="6" cy="6" r="3" class="svelte-1xkxv2n"></circle><circle cx="6" cy="18" r="3" class="svelte-1xkxv2n"></circle><line x1="20" y1="4" x2="8.12" y2="15.88" class="svelte-1xkxv2n"></line><line x1="14.47" y1="14.48" x2="20" y2="20" class="svelte-1xkxv2n"></line><line x1="8.12" y1="8.12" x2="12" y2="12" class="svelte-1xkxv2n"></line></svg>'),tc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" class="svelte-1xkxv2n"></path></svg>'),sc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><circle cx="12" cy="12" r="3" class="svelte-1xkxv2n"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" class="svelte-1xkxv2n"></path></svg>'),rc=E('<a><div class="nav-icon svelte-1xkxv2n"><!></div> <span class="nav-label svelte-1xkxv2n"> </span></a>'),nc=E('<span class="nav-badge svelte-1xkxv2n"> </span>'),ac=E('<div class="queue-sheet-overlay svelte-1xkxv2n"></div> <div><div class="sheet-handle svelte-1xkxv2n"></div> <!></div>',1),ic=E('<nav class="bottom-nav svelte-1xkxv2n"><!> <button><div class="nav-icon svelte-1xkxv2n"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><line x1="8" y1="6" x2="21" y2="6" class="svelte-1xkxv2n"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-1xkxv2n"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-1xkxv2n"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-1xkxv2n"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-1xkxv2n"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-1xkxv2n"></line></svg> <!></div> <span class="nav-label svelte-1xkxv2n">queue</span></button></nav> <!>',1);function oc(e,s){Tt(s,!0);const r=()=>Wt(ce,"$queue",o),n=()=>Wt(gn,"$path",o),[o,a]=ps();let c=M(!1),f,v=M(0),g=M(!1),_=0,S=0,d=be(r),p=be(()=>t(d).length),w=be(n),C=be(()=>t(d).filter(J=>["starting","downloading","processing","zipping","sending","transcribing"].includes(J.stage)).length);function y(J){J.preventDefault(),J.stopPropagation(),i(c,!t(c)),i(v,0)}function x(){i(c,!1),i(v,0)}function P(J){const B=f;B&&(B.scrollTop>0&&J.target.closest(".queue-sheet")&&!J.target.closest(".sheet-handle")||(_=J.touches[0].clientY,S=Date.now(),i(g,!0)))}function O(J){if(!t(g))return;const B=J.touches[0].clientY-_;B>0?(i(v,B),J.preventDefault()):i(v,0)}function ie(){if(!t(g))return;i(g,!1);const J=t(v)/(Date.now()-S);t(v)>80||J>.5?x():i(v,0)}const te=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/trim",label:"trim",icon:"trim"},{href:"/transcribe",label:"transcribe",icon:"transcribe"},{href:"/settings",label:"settings",icon:"settings"}];var de=ic();gt("keydown",br,J=>{J.key==="Escape"&&t(c)&&x()});var _e=ve(de),je=l(_e);nt(je,17,()=>te,ot,(J,B)=>{var L=rc();let se;var fe=l(L),Z=l(fe);{var ue=K=>{var re=Kl();m(K,re)},ge=K=>{var re=Re(),me=ve(re);{var Ne=ne=>{var ze=Xl();m(ne,ze)},ke=ne=>{var ze=Re(),Ie=ve(ze);{var Ge=Y=>{var xe=Zl();m(Y,xe)},V=Y=>{var xe=Re(),We=ve(xe);{var Xe=Pe=>{var tt=ec();m(Pe,tt)},ye=Pe=>{var tt=Re(),at=ve(tt);{var ht=Ye=>{var H=tc();m(Ye,H)},ct=Ye=>{var H=Re(),ee=ve(H);{var qe=Ee=>{var He=sc();m(Ee,He)};I(ee,Ee=>{t(B).icon==="settings"&&Ee(qe)},!0)}m(Ye,H)};I(at,Ye=>{t(B).icon==="transcribe"?Ye(ht):Ye(ct,!1)},!0)}m(Pe,tt)};I(We,Pe=>{t(B).icon==="trim"?Pe(Xe):Pe(ye,!1)},!0)}m(Y,xe)};I(Ie,Y=>{t(B).icon==="compress"?Y(Ge):Y(V,!1)},!0)}m(ne,ze)};I(me,ne=>{t(B).icon==="convert"?ne(Ne):ne(ke,!1)},!0)}m(K,re)};I(Z,K=>{t(B).icon==="download"?K(ue):K(ge,!1)})}var Q=u(fe,2),oe=l(Q);W(()=>{se=pe(L,1,"bottom-nav-item svelte-1xkxv2n",null,se,{active:t(w)===t(B).href}),_t(L,"href",t(B).href),R(oe,t(B).label)}),m(J,L)});var Te=u(je,2);let X;Te.__click=y;var $e=l(Te),Je=u(l($e),2);{var we=J=>{var B=nc(),L=l(B);W(()=>R(L,t(p))),m(J,B)};I(Je,J=>{t(p)>0&&J(we)})}var Oe=u(_e,2);{var Me=J=>{var B=ac(),L=ve(B);L.__click=x;var se=u(L,2);let fe;se.__touchstart=P,se.__touchmove=O,se.__touchend=ie;var Z=u(l(se),2);Mi(Z,{}),bs(se,ue=>f=ue,()=>f),W(()=>{fe=pe(se,1,"queue-sheet svelte-1xkxv2n",null,fe,{swiping:t(g)}),Xt(se,t(v)>0?`transform: translateY(${t(v)}px)`:"")}),m(J,B)};I(Oe,J=>{t(c)&&J(Me)})}W(()=>X=pe(Te,1,"bottom-nav-item queue-item svelte-1xkxv2n",null,X,{active:t(c),"has-active":t(C)>0})),m(e,de),zt(),a()}qt(["click","touchstart","touchmove","touchend"]);var lc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),cc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),vc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),uc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),dc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),fc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),pc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),hc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),gc=E("<a><!> <span> </span></a>"),mc=E('<div class="nav-dropdown svelte-4b3o1e"></div>'),wc=E('<header class="svelte-4b3o1e"><div class="header-left svelte-4b3o1e"><a href="/" class="logo-link svelte-4b3o1e"><span class="logo-text svelte-4b3o1e">yoink</span> <span class="logo-tld svelte-4b3o1e">.tools</span></a></div> <div class="header-right svelte-4b3o1e"><!> <div class="nav-dropdown-wrapper svelte-4b3o1e"><button class="nav-trigger svelte-4b3o1e"><!> <span> </span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div> <a href="/settings" aria-label="Settings"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-4b3o1e"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></a></div></header>');function _c(e,s){const r=()=>Wt(gn,"$path",n),[n,o]=ps();let a=M(!1);const c=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/transcribe",label:"transcribe",icon:"transcribe"}];let f=be(()=>c.find(X=>X.href===r())||c[0]),v=be(()=>r()==="/settings");var g=wc();gt("click",br,X=>{X.target.closest(".nav-dropdown-wrapper")||i(a,!1)});var _=u(l(g),2),S=l(_);{var d=X=>{var $e=Re(),Je=ve($e);bi(Je,()=>s.extraContent),m(X,$e)};I(S,X=>{s.extraContent&&X(d)})}var p=u(S,2),w=l(p);w.__click=()=>i(a,!t(a));var C=l(w);{var y=X=>{var $e=lc();m(X,$e)},x=X=>{var $e=Re(),Je=ve($e);{var we=Me=>{var J=cc();m(Me,J)},Oe=Me=>{var J=Re(),B=ve(J);{var L=fe=>{var Z=vc();m(fe,Z)},se=fe=>{var Z=Re(),ue=ve(Z);{var ge=Q=>{var oe=uc();m(Q,oe)};I(ue,Q=>{t(f).icon==="transcribe"&&Q(ge)},!0)}m(fe,Z)};I(B,fe=>{t(f).icon==="compress"?fe(L):fe(se,!1)},!0)}m(Me,J)};I(Je,Me=>{t(f).icon==="convert"?Me(we):Me(Oe,!1)},!0)}m(X,$e)};I(C,X=>{t(f).icon==="download"?X(y):X(x,!1)})}var P=u(C,2),O=l(P),ie=u(P,2);let te;var de=u(w,2);{var _e=X=>{var $e=mc();nt($e,21,()=>c,ot,(Je,we)=>{var Oe=gc();let Me;Oe.__click=()=>i(a,!1);var J=l(Oe);{var B=Z=>{var ue=dc();m(Z,ue)},L=Z=>{var ue=Re(),ge=ve(ue);{var Q=K=>{var re=fc();m(K,re)},oe=K=>{var re=Re(),me=ve(re);{var Ne=ne=>{var ze=pc();m(ne,ze)},ke=ne=>{var ze=Re(),Ie=ve(ze);{var Ge=V=>{var Y=hc();m(V,Y)};I(Ie,V=>{t(we).icon==="transcribe"&&V(Ge)},!0)}m(ne,ze)};I(me,ne=>{t(we).icon==="compress"?ne(Ne):ne(ke,!1)},!0)}m(K,re)};I(ge,K=>{t(we).icon==="convert"?K(Q):K(oe,!1)},!0)}m(Z,ue)};I(J,Z=>{t(we).icon==="download"?Z(B):Z(L,!1)})}var se=u(J,2),fe=l(se);W(()=>{Me=pe(Oe,1,"nav-dropdown-item svelte-4b3o1e",null,Me,{active:t(we).href===t(f).href}),_t(Oe,"href",t(we).href),R(fe,t(we).label)}),m(Je,Oe)}),m(X,$e)};I(de,X=>{t(a)&&X(_e)})}var je=u(p,2);let Te;W(()=>{R(O,t(f).label),te=pe(ie,0,"chevron svelte-4b3o1e",null,te,{open:t(a)}),Te=pe(je,1,"settings-btn svelte-4b3o1e",null,Te,{active:t(v)})}),m(e,g),o()}qt(["click"]);var yc=E('<footer class="svelte-ww03jg"><div class="footer-left svelte-ww03jg"><div>this is a <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-ww03jg">yt-dlp</a> wrapper</div> <div>inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt</a>, love u wukko</div> <div>youtube powered by <a href="https://patriick.dev/" target="_blank" rel="noopener" class="svelte-ww03jg">patrick</a> at <a href="https://cobalt.meowing.de" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt.meowing.de</a></div> <div class="legal svelte-ww03jg">by using this site you agree to our <a href="/privacy" class="svelte-ww03jg">privacy policy</a></div></div> <div class="footer-right svelte-ww03jg"><a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-ww03jg">github</a> <span>Â·</span> <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-ww03jg">coah80.com</a> <span>Â·</span> <a href="/privacy" class="svelte-ww03jg">privacy</a> <span>Â·</span> <a href="/?updates" class="svelte-ww03jg">updates</a></div></footer>');function bc(e){var s=yc();m(e,s)}var xc=E('<span class="queue-badge svelte-1picwiz"> </span>'),kc=E('<div class="queue-dropdown svelte-1picwiz"><!></div>'),Sc=E('<div class="queue-menu svelte-1picwiz"><button class="queue-toggle svelte-1picwiz"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1picwiz"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> queue <!></button> <!></div>');function jr(e,s){Tt(s,!0);const r=()=>Wt(ce,"$queue",n),[n,o]=ps();let a=M(!1),c,f=be(r),v=be(()=>t(f).length);function g(x){x.stopPropagation(),i(a,!t(a))}function _(x){c&&!c.contains(x.target)&&i(a,!1)}_r(()=>(document.addEventListener("click",_),()=>document.removeEventListener("click",_)));var S=Sc(),d=l(S);d.__click=g;var p=u(l(d),2);{var w=x=>{var P=xc(),O=l(P);W(()=>R(O,t(v))),m(x,P)};I(p,x=>{t(v)>0&&x(w)})}var C=u(d,2);{var y=x=>{var P=kc(),O=l(P);Mi(O,{}),m(x,P)};I(C,x=>{t(a)&&x(y)})}bs(S,x=>c=x,()=>c),m(e,S),zt(),o()}qt(["click"]);var jc=E('<div class="spinner svelte-1ea6fjo" role="status" aria-label="Loading"></div>');function Pi(e){var s=jc();m(e,s)}function er(e){if(e===0||!Number.isFinite(e)||e<0)return"0 B";const s=1024,r=["B","KB","MB","GB","TB"],n=Math.min(Math.max(Math.floor(Math.log(e)/Math.log(s)),0),r.length-1);return parseFloat((e/Math.pow(s,n)).toFixed(2))+" "+r[n]}function ba(e){try{const s=new URL(e);if(s.hostname==="youtu.be"){const r=s.pathname.slice(1).split("?")[0],n=s.searchParams.get("list");return`https://www.youtube.com/watch?v=${r}${n?`&list=${n}`:""}`}if(s.hostname.includes("youtube.com")){if(s.pathname.startsWith("/shorts/"))return`https://www.youtube.com/watch?v=${s.pathname.replace("/shorts/","").split("?")[0]}`;if(s.searchParams.get("v")){const r=s.searchParams.get("list");return`https://www.youtube.com/watch?v=${s.searchParams.get("v")}${r?`&list=${r}`:""}`}if(s.pathname==="/playlist"&&s.searchParams.get("list"))return`https://www.youtube.com/playlist?list=${s.searchParams.get("list")}`}return e}catch{return e}}function xa(e){try{const s=new URL(e).hostname;return s==="youtu.be"||s.includes("youtube.com")}catch{return!1}}function ka(e){try{return new URL(e).searchParams.has("list")}catch{return!1}}function Sa(){return Date.now().toString()+Math.random().toString(36).substr(2,9)}const jn="2.1",Ii=[{version:"2.1",date:"february 23, 2026",title:"trim & crop tool, cobalt for youtube across all tools",image:"/updates/v2.1.png",summary:"new trim & crop tool for cutting videos and changing aspect ratios. youtube links now use cobalt across convert, compress, transcribe, and trim for faster, more reliable downloads.",content:`new tool and a big quality-of-life fix for youtube links.

## trim & crop

new tool for cutting and cropping videos. upload a file or paste a link, set your start and end times with a video preview, pick an aspect ratio if you want to crop (16:9, 9:16, 1:1, etc.), and download the result. good for clipping highlights or reformatting videos for different platforms.

## cobalt everywhere

pasting youtube links into convert, compress, transcribe, and trim now uses cobalt instead of yt-dlp. same fast downloads you get on the main download page, now everywhere. non-youtube links still use yt-dlp as before.

## other stuff

- crop aspect ratios: 16:9, 9:16, 1:1, 4:3, 4:5
- trim shows a video preview with set start/end buttons
- crop overlay preview shows what gets cut
- manual time inputs for URL mode (no preview)`},{version:"2.0",date:"february 23, 2026",title:"transcription, encryption, and fixes",image:"/updates/v2.png",summary:"transcription, server-side encryption, gallery-dl auto-fallback, and a ton of fixes across the board.",content:`big update. transcription, server encryption, and a bunch of stuff got cleaned up.

## transcribe

the biggest new thing. drop a video or audio file and get back a plain text transcript, subtitle file (SRT or ASS), or a version with captions burned right into the video. four model sizes from tiny to medium, auto language detection, and new caption formatting controls so you can set max words per caption, line wrapping, minimum duration, and gaps between captions. works with anything ffmpeg can read.

## encryption

all files on the server are now encrypted at rest using LUKS. the encryption key only lives in RAM, so if the server reboots, everything is gone. temp files are processed in encrypted storage and cleaned up after. the server also sanitizes all logs now, no URLs, filenames, or IPs are stored anywhere.

## gallery-dl fallback

when yt-dlp can't handle something (like image-only tweets), yoink now automatically falls back to gallery-dl. you don't have to do anything different, it just works.

## queue improvements

downloads now process one at a time instead of all at once, which is way more reliable. convert and compress jobs show up in the queue now too. playlists resume from where they left off if you retry after an error instead of starting over from scratch.

## other stuff

- switched from hash routing to clean URLs (/convert instead of #/convert)
- disk space checks before starting any job
- job limits so the server doesn't get overwhelmed
- rewrote the privacy page in plain english
- a bunch of bug fixes and cleanup`}];var Cc=E("<p> </p>"),Tc=E('<button class="clear-btn svelte-et6md" type="button" title="Clear"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button>'),zc=E('<button class="paste-btn svelte-et6md" type="button" title="Paste from clipboard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" class="svelte-et6md"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" class="svelte-et6md"></path></svg></button>'),Ec=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" class="svelte-et6md"></polygon></svg>'),$c=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" class="svelte-et6md"></rect><line x1="7" y1="2" x2="7" y2="22" class="svelte-et6md"></line><line x1="17" y1="2" x2="17" y2="22" class="svelte-et6md"></line><line x1="2" y1="12" x2="22" y2="12" class="svelte-et6md"></line><line x1="2" y1="7" x2="7" y2="7" class="svelte-et6md"></line><line x1="2" y1="17" x2="7" y2="17" class="svelte-et6md"></line><line x1="17" y1="17" x2="22" y2="17" class="svelte-et6md"></line><line x1="17" y1="7" x2="22" y2="7" class="svelte-et6md"></line></svg>'),Mc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M9 18V5l12-2v13" class="svelte-et6md"></path><circle cx="6" cy="18" r="3" class="svelte-et6md"></circle><circle cx="18" cy="16" r="3" class="svelte-et6md"></circle></svg>'),Pc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" class="svelte-et6md"></rect><circle cx="8.5" cy="8.5" r="1.5" class="svelte-et6md"></circle><polyline points="21 15 16 10 5 21" class="svelte-et6md"></polyline></svg>'),Ic=E('<button><!> <span class="svelte-et6md"> </span></button>'),qc=E('<div class="yoink-dropdown svelte-et6md"><button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button> <button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> batch add urls</button></div>'),Rc=E("<div><!> </div>"),Bc=E('<div class="modal-overlay svelte-et6md"><div class="modal svelte-et6md"><div class="modal-title svelte-et6md">playlist detected!</div> <div class="modal-subtitle svelte-et6md">do you want to download just this video, or the whole playlist?</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="5 3 19 12 5 21 5 3" class="svelte-et6md"></polygon></svg> video</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> playlist</button></div> <label class="modal-toggle svelte-et6md"><input type="checkbox" class="svelte-et6md"/> <span class="modal-toggle-switch svelte-et6md"></span> <span class="modal-toggle-label svelte-et6md">remember this choice</span></label> <div class="modal-hint svelte-et6md">this can be changed in <a href="/settings" class="svelte-et6md">settings</a>!</div></div></div>'),Dc=E('<div class="modal-overlay svelte-et6md"><div class="modal batch-modal svelte-et6md"><div class="modal-title svelte-et6md">batch add urls</div> <div class="modal-subtitle svelte-et6md">paste multiple URLs, one per line</div> <textarea class="batch-textarea svelte-et6md"></textarea> <div class="batch-count svelte-et6md"><span class="svelte-et6md"> </span> urls detected</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md">cancel</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button></div></div></div>'),Nc=E('<h3 class="svelte-et6md"> </h3>'),Fc=E('<li class="svelte-et6md"> </li>'),Oc=E('<ul class="svelte-et6md"></ul>'),Ac=E('<p class="svelte-et6md"> </p>'),Lc=E('<article class="update-card svelte-et6md"><div class="update-meta svelte-et6md"><span class="update-version svelte-et6md"> </span> <span class="update-date svelte-et6md"> </span></div> <h2 class="update-title svelte-et6md"> </h2> <img class="update-image svelte-et6md"/> <div class="update-content svelte-et6md"></div></article>'),Uc=E('<div role="dialog" aria-modal="true" aria-label="Updates"><div class="updates-scroll svelte-et6md"><div class="updates-header svelte-et6md"><span class="updates-pill svelte-et6md">updates</span> <button class="updates-close svelte-et6md" aria-label="Close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button></div> <!></div></div>'),Vc=E('<!> <main class="svelte-et6md"><div class="branding svelte-et6md"><h1 class="svelte-et6md">yoink<span class="brand-tld svelte-et6md">.tools</span></h1> <!></div> <div class="input-container svelte-et6md"><div class="url-input-wrapper svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" class="svelte-et6md"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" class="svelte-et6md"></path></svg> <input type="text" class="url-input svelte-et6md" placeholder="paste the link here..." autocomplete="off" spellcheck="false"/> <!></div> <div class="format-section svelte-et6md"><div class="segmented-control svelte-et6md"></div> <div><button class="yoink-btn svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-et6md"></path><polyline points="7 10 12 15 17 10" class="svelte-et6md"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-et6md"></line></svg> </button> <button class="yoink-dropdown-toggle svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polyline points="6 9 12 15 18 9" class="svelte-et6md"></polyline></svg></button> <!></div></div> <!></div></main> <!> <!> <!> <!>',1);function Hc(e,s){Tt(s,!0);const r=()=>Wt(Ys,"$settings",o),n=()=>Wt(Ti,"$query",o),[o,a]=ps();let c=M(""),f=M("auto"),v=M(!1),g=M(null),_=M(""),S=M(!1),d=M(!1),p=M(!1),w=M(""),C=M(null),y=M(null),x,P=be(()=>t(w).split(`
`).filter(k=>{const h=k.trim();if(!h)return!1;try{return new URL(h),!0}catch{return!1}}).length);const O=[{id:"auto",label:"auto",icon:"bolt"},{id:"video",label:"video",icon:"video"},{id:"audio",label:"audio",icon:"audio"},{id:"images",label:"images",icon:"image"}];function ie(){i(y,_a[Math.floor(Math.random()*_a.length)],!0)}function te(){var k;(k=t(y))!=null&&k.link&&window.open(t(y).link,"_blank")}function de(){let k=null;try{const h=localStorage.getItem("yoink_shared_url");if(h){const b=JSON.parse(h);Date.now()-b.timestamp<300*1e3&&(k=b.url),localStorage.removeItem("yoink_shared_url")}}catch{localStorage.removeItem("yoink_shared_url")}if(!k&&window.location.pathname==="/share"){const h=new URLSearchParams(window.location.search),j=(h.get("url")||h.get("text")||"").match(/https?:\/\/[^\s]+/);j&&(k=j[0].replace(/[.,!?;:)\]}>]+$/,"")),history.replaceState(null,"","/")}k&&(i(c,k,!0),setTimeout(()=>Oe(),150))}kr(()=>{ie(),de()});async function _e(){try{const k=await navigator.clipboard.readText();k&&(i(c,k.trim(),!0),x==null||x.focus())}catch{Ce("Could not read clipboard","error")}}function je(k,h){i(g,k,!0),i(_,h,!0)}function Te(){i(g,null),i(_,"")}function X(){return new Promise(k=>{i(C,k,!0),i(S,!0)})}function $e(k,h){h&&Ys.setSetting("playlistPreference",k),t(C)&&t(C)(k),i(C,null),i(S,!1)}function Je(){t(C)&&t(C)(null),i(C,null),i(S,!1)}async function we(k,h=!1){const b=ba(k),j=t(f)==="auto"?"video":t(f);let q=j;if(j==="images"&&xa(b))return Ce("YouTube doesn't support image downloads","error"),null;const A=Sa(),z=r();let U=!1;if(j!=="images"&&ka(b))if(z.playlistPreference==="video")U=!1;else if(z.playlistPreference==="playlist")U=!0;else{const D=await X();if(D===null)return null;U=D==="playlist"}let $="Loading...";try{if(j==="images"){const D=await fetch(`${Se()}/api/gallery/metadata?url=${encodeURIComponent(b)}`),F=D.headers.get("content-type");D.ok&&(F!=null&&F.includes("application/json"))?$=(await D.json()).title||"Gallery":$=b.substring(0,50)}else{const D=await fetch(`${Se()}/api/metadata?url=${encodeURIComponent(b)}&playlist=${U}`),F=D.headers.get("content-type");if(D.ok&&(F!=null&&F.includes("application/json"))){const G=await D.json();if($=G.title||"Unknown",G.isGallery===!0&&(q="images"),G.usingCookies&&Ce("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3),G.clipNote){const he=G.clipNote.toLowerCase().includes("warning")||G.originalDuration>600;Ce(G.clipNote,he?"warning":"info",6e3)}}else if(!D.ok&&(F!=null&&F.includes("application/json"))){const G=await D.json();if(G.clipUnsupported)return Ce("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),null;throw new Error(G.error||"Metadata fetch failed")}else $=b.substring(0,50)}}catch{$=b.substring(0,50)}const N={id:A,title:$,url:b,format:q,stage:h?"starting":"queued",status:h?"initializing...":"in queue",progress:0,isPlaylist:U,formatDisplay:q==="images"?"images":q==="audio"?z.audioFormat:`${z.quality} ${z.container}`,startTime:h?Date.now():null,failedVideos:[]};return ce.add(N),h&&ce.startDownload(N),N}async function Oe(){const k=t(c).trim();if(!k){Ce("Please enter a URL","error");return}const h=ba(k);try{new URL(h)}catch{Ce("Please enter a valid URL","error");return}if(yl(h)&&i(y,{text:"okay dude are you just gonna download porn"},!0),t(f)==="images"&&xa(h)){Ce("YouTube doesn't support image downloads â use video or audio","error");return}i(v,!0);const b=t(f)==="auto"?"video":t(f),j=r();let q=!1;if(b!=="images"&&ka(h))if(j.playlistPreference==="video")q=!1;else if(j.playlistPreference==="playlist")q=!0;else{const z=await X();if(z===null){i(v,!1);return}q=z==="playlist"}const A=Sa();try{je("loading",b==="images"?"fetching gallery info...":"fetching video info...");let z;if(b==="images"){const he=await fetch(`${Se()}/api/gallery/metadata?url=${encodeURIComponent(h)}`),le=he.headers.get("content-type");if(!he.ok){let ae="Failed to fetch gallery info";if(le!=null&&le.includes("application/json"))ae=(await he.json()).error||ae;else{const De=await he.text();ae=De.includes("Cloudflare")||De.includes("403")?"Access denied (VPN blocked?)":`Server error: ${he.status}`}throw new Error(ae)}z=await he.json(),z.title=z.title||"Gallery"}else{const he=await fetch(`${Se()}/api/metadata?url=${encodeURIComponent(h)}&playlist=${q}`),le=he.headers.get("content-type");if(!he.ok){let ae="Failed to fetch metadata";if(le!=null&&le.includes("application/json")){const De=await he.json();if(De.clipUnsupported){je("error","Could not parse YouTube clip"),Ce("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),i(v,!1);return}ae=De.error||ae}else{const De=await he.text();ae=`Server error ${he.status} (likely VPN blocked)`}throw new Error(ae)}z=await he.json()}const U=z.title,$=z.isPlaylist&&q,N=b==="images"||z.isGallery===!0,D=z.isGallery===!0?"images":b,F=z.videoCount||z.imageCount||0;z.usingCookies&&Ce("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3);const G={id:A,title:U,url:h,format:D,stage:"starting",status:"initializing...",progress:0,isPlaylist:$,isGallery:N,videoCount:F,currentVideo:0,currentVideoTitle:"",formatDisplay:N?"images":D==="audio"?j.audioFormat:`${j.quality} ${j.container}`,failedVideos:[],startTime:Date.now()};ce.add(G),ce.startDownload(G),i(c,""),Te()}catch(z){je("error",z.message||"Download failed"),Ce(z.message||"Download failed","error")}finally{i(v,!1)}}function Me(k){k.key==="Enter"&&Oe()}async function J(){i(p,!1);const k=t(c).trim();if(!k){Ce("Please enter a URL","error");return}try{new URL(k)}catch{Ce("Please enter a valid URL","error");return}await we(k),i(c,"")}function B(){i(p,!1),i(w,""),i(d,!0)}async function L(){const k=t(w).split(`
`).map(h=>h.trim()).filter(h=>{try{return new URL(h),!0}catch{return!1}});if(k.length===0){Ce("No valid URLs found","error");return}i(d,!1),Ce(`Adding ${k.length} URLs to queue...`,"info");for(const h of k)await we(h,!1);Ce(`${k.length} items added to queue`,"success")}let se=M(!1),fe=be(()=>"updates"in n()),Z=M(!1),ue=M(!1),ge=null;_r(()=>{t(fe)&&(i(Z,!0),i(ue,!1),ge&&(clearTimeout(ge),ge=null))});function Q(){t(ue)||(i(ue,!0),Sr("/"),ge=setTimeout(()=>{i(Z,!1),i(ue,!1),ge=null},350))}var oe=Vc();gt("click",br,k=>{k.target.closest(".yoink-btn-wrapper")||i(p,!1)});var K=ve(oe);_c(K,{extraContent:h=>{jr(h,{})}});var re=u(K,2),me=l(re),Ne=u(l(me),2);{var ke=k=>{var h=Cc();let b;h.__click=te;var j=l(h);W(q=>{b=pe(h,1,"splash svelte-et6md",null,b,q),Xt(h,t(y).link?"cursor: pointer;":""),R(j,t(y).text)},[()=>{var q,A,z;return{fancy:(q=t(y).classes)==null?void 0:q.includes("fancy"),clickable:(A=t(y).classes)==null?void 0:A.includes("clickable"),rainbow:(z=t(y).classes)==null?void 0:z.includes("rainbow")}}]),m(k,h)};I(Ne,k=>{t(y)&&k(ke)})}var ne=u(me,2),ze=l(ne),Ie=u(l(ze),2);Ie.__keydown=Me,bs(Ie,k=>x=k,()=>x);var Ge=u(Ie,2);{var V=k=>{var h=Tc();h.__click=()=>{i(c,""),x==null||x.focus()},m(k,h)},Y=k=>{var h=zc();h.__click=_e,m(k,h)};I(Ge,k=>{t(c)?k(V):k(Y,!1)})}var xe=u(ze,2),We=l(xe);nt(We,21,()=>O,ot,(k,h)=>{var b=Ic();let j;b.__click=()=>i(f,t(h).id,!0);var q=l(b);{var A=N=>{var D=Ec();m(N,D)},z=N=>{var D=Re(),F=ve(D);{var G=le=>{var ae=$c();m(le,ae)},he=le=>{var ae=Re(),De=ve(ae);{var Ue=vt=>{var it=Mc();m(vt,it)},rt=vt=>{var it=Re(),jt=ve(it);{var Qe=mt=>{var Rt=Pc();m(mt,Rt)};I(jt,mt=>{t(h).icon==="image"&&mt(Qe)},!0)}m(vt,it)};I(De,vt=>{t(h).icon==="audio"?vt(Ue):vt(rt,!1)},!0)}m(le,ae)};I(F,le=>{t(h).icon==="video"?le(G):le(he,!1)},!0)}m(N,D)};I(q,N=>{t(h).icon==="bolt"?N(A):N(z,!1)})}var U=u(q,2),$=l(U);W(()=>{j=pe(b,1,"segment svelte-et6md",null,j,{active:t(f)===t(h).id}),R($,t(h).label)}),m(k,b)});var Xe=u(We,2);let ye;var Pe=l(Xe);Pe.__click=Oe;var tt=u(l(Pe)),at=u(Pe,2);at.__click=k=>{k.stopPropagation(),i(p,!t(p))};var ht=u(at,2);{var ct=k=>{var h=qc(),b=l(h);b.__click=J;var j=u(b,2);j.__click=B,m(k,h)};I(ht,k=>{t(p)&&k(ct)})}var Ye=u(xe,2);{var H=k=>{var h=Rc(),b=l(h);{var j=A=>{Pi(A)};I(b,A=>{t(g)==="loading"&&A(j)})}var q=u(b);W(()=>{pe(h,1,`status ${t(g)??""}`,"svelte-et6md"),R(q,` ${t(_)??""}`)}),m(k,h)};I(Ye,k=>{t(g)&&k(H)})}var ee=u(re,2);bc(ee);var qe=u(ee,2);{var Ee=k=>{var h=Bc();h.__click=$=>{$.target===$.currentTarget&&Je()};var b=l(h),j=u(l(b),4),q=l(j);q.__click=()=>$e("video",t(se));var A=u(q,2);A.__click=()=>$e("playlist",t(se));var z=u(j,2),U=l(z);ki(U,()=>t(se),$=>i(se,$)),m(k,h)};I(qe,k=>{t(S)&&k(Ee)})}var He=u(qe,2);{var Ze=k=>{var h=Dc();h.__click=D=>{D.target===D.currentTarget&&i(d,!1)};var b=l(h),j=u(l(b),4);_t(j,"placeholder",`https://youtube.com/watch?v=...
https://youtube.com/watch?v=...
https://youtube.com/watch?v=...`);var q=u(j,2),A=l(q),z=l(A),U=u(q,2),$=l(U);$.__click=()=>i(d,!1);var N=u($,2);N.__click=L,W(()=>R(z,t(P))),Kt(j,()=>t(w),D=>i(w,D)),m(k,h)};I(He,k=>{t(d)&&k(Ze)})}var et=u(He,2);{var st=k=>{var h=Uc();let b;h.__click=U=>{U.target===U.currentTarget&&Q()},h.__keydown=U=>{U.key==="Escape"&&Q()};var j=l(h),q=l(j),A=u(l(q),2);A.__click=Q;var z=u(q,2);nt(z,17,()=>Ii,ot,(U,$)=>{var N=Lc(),D=l(N),F=l(D),G=l(F),he=u(F,2),le=l(he),ae=u(D,2),De=l(ae),Ue=u(ae,2),rt=u(Ue,2);nt(rt,21,()=>t($).content.split(`

`),ot,(vt,it)=>{var jt=Re(),Qe=ve(jt);{var mt=lt=>{var ut=Nc(),ks=l(ut);W(Gt=>R(ks,Gt),[()=>t(it).replace("## ","")]),m(lt,ut)},Rt=lt=>{var ut=Re(),ks=ve(ut);{var Gt=Ss=>{var Bs=Oc();nt(Bs,21,()=>t(it).split(`
`),ot,(dt,rs)=>{var js=Re(),Tr=ve(js);{var yn=zr=>{var Xr=Fc(),qi=l(Xr);W(Ri=>R(qi,Ri),[()=>t(rs).replace("- ","")]),m(zr,Xr)};I(Tr,zr=>{t(rs).startsWith("- ")&&zr(yn)})}m(dt,js)}),m(Ss,Bs)},Bt=Ss=>{var Bs=Ac(),dt=l(Bs);W(()=>R(dt,t(it))),m(Ss,Bs)};I(ks,Ss=>{t(it).startsWith("- ")?Ss(Gt):Ss(Bt,!1)},!0)}m(lt,ut)};I(Qe,lt=>{t(it).startsWith("## ")?lt(mt):lt(Rt,!1)})}m(vt,jt)}),W(()=>{R(G,t($).version),R(le,t($).date),R(De,t($).title),_t(Ue,"src",t($).image),_t(Ue,"alt",t($).title)}),m(U,N)}),W(()=>b=pe(h,1,"updates-overlay svelte-et6md",null,b,{closing:t(ue)})),m(k,h)};I(et,k=>{t(Z)&&k(st)})}W(()=>{ye=pe(Xe,1,"yoink-btn-wrapper svelte-et6md",null,ye,{open:t(p)}),Pe.disabled=t(v),R(tt,` ${t(v)?"loading...":"yoink"}`)}),gt("focus",Ie,Te),Kt(Ie,()=>t(c),k=>i(c,k)),m(e,oe),zt(),a()}qt(["click","keydown"]);var Jc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),Wc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),Gc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),Yc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),Qc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>'),Kc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg>'),Xc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>'),Zc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>'),ev=E("<a><!> <span> </span></a>"),tv=E('<div class="nav-dropdown svelte-67r2h0"></div>'),sv=E('<header class="svelte-67r2h0"><div class="header-center svelte-67r2h0"><a href="/" class="logo-link svelte-67r2h0"><span class="logo-text svelte-67r2h0">yoink</span> <span class="logo-tld svelte-67r2h0">.tools</span></a></div> <div class="header-right svelte-67r2h0"><!> <div class="nav-dropdown-wrapper svelte-67r2h0"><button class="nav-trigger svelte-67r2h0"><!> <span> </span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></button> <!></div> <a href="/settings" aria-label="Settings"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-67r2h0"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></a></div></header>');function rr(e,s){const r=()=>Wt(gn,"$path",n),[n,o]=ps();let a=M(!1);const c=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/transcribe",label:"transcribe",icon:"transcribe"}];let f=be(()=>c.find(X=>X.href===r())||c[0]),v=be(()=>r()==="/settings");var g=sv();gt("click",br,X=>{X.target.closest(".nav-dropdown-wrapper")||i(a,!1)});var _=u(l(g),2),S=l(_);{var d=X=>{var $e=Re(),Je=ve($e);bi(Je,()=>s.extraContent),m(X,$e)};I(S,X=>{s.extraContent&&X(d)})}var p=u(S,2),w=l(p);w.__click=()=>i(a,!t(a));var C=l(w);{var y=X=>{var $e=Jc();m(X,$e)},x=X=>{var $e=Re(),Je=ve($e);{var we=Me=>{var J=Wc();m(Me,J)},Oe=Me=>{var J=Re(),B=ve(J);{var L=fe=>{var Z=Gc();m(fe,Z)},se=fe=>{var Z=Re(),ue=ve(Z);{var ge=Q=>{var oe=Yc();m(Q,oe)};I(ue,Q=>{t(f).icon==="transcribe"&&Q(ge)},!0)}m(fe,Z)};I(B,fe=>{t(f).icon==="compress"?fe(L):fe(se,!1)},!0)}m(Me,J)};I(Je,Me=>{t(f).icon==="convert"?Me(we):Me(Oe,!1)},!0)}m(X,$e)};I(C,X=>{t(f).icon==="download"?X(y):X(x,!1)})}var P=u(C,2),O=l(P),ie=u(P,2);let te;var de=u(w,2);{var _e=X=>{var $e=tv();nt($e,21,()=>c,ot,(Je,we)=>{var Oe=ev();let Me;Oe.__click=()=>i(a,!1);var J=l(Oe);{var B=Z=>{var ue=Qc();m(Z,ue)},L=Z=>{var ue=Re(),ge=ve(ue);{var Q=K=>{var re=Kc();m(K,re)},oe=K=>{var re=Re(),me=ve(re);{var Ne=ne=>{var ze=Xc();m(ne,ze)},ke=ne=>{var ze=Re(),Ie=ve(ze);{var Ge=V=>{var Y=Zc();m(V,Y)};I(Ie,V=>{t(we).icon==="transcribe"&&V(Ge)},!0)}m(ne,ze)};I(me,ne=>{t(we).icon==="compress"?ne(Ne):ne(ke,!1)},!0)}m(K,re)};I(ge,K=>{t(we).icon==="convert"?K(Q):K(oe,!1)},!0)}m(Z,ue)};I(J,Z=>{t(we).icon==="download"?Z(B):Z(L,!1)})}var se=u(J,2),fe=l(se);W(()=>{Me=pe(Oe,1,"nav-dropdown-item svelte-67r2h0",null,Me,{active:t(we).href===t(f).href}),_t(Oe,"href",t(we).href),R(fe,t(we).label)}),m(Je,Oe)}),m(X,$e)};I(de,X=>{t(a)&&X(_e)})}var je=u(p,2);let Te;W(()=>{R(O,t(f).label),te=pe(ie,0,"chevron svelte-67r2h0",null,te,{open:t(a)}),Te=pe(je,1,"settings-btn svelte-67r2h0",null,Te,{active:t(v)})}),m(e,g),o()}qt(["click"]);var rv=E('<footer class="svelte-1dij6pu"><a href="/" class="svelte-1dij6pu">yoink.tools</a> - powered by <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-1dij6pu">yt-dlp</a> Â· <a href="/privacy" class="svelte-1dij6pu">privacy</a></footer>');function Cr(e){var s=rv();m(e,s)}var nv=E("<button><span> </span></button>"),av=E("<button> </button>"),iv=E("<button> </button>"),ov=E("<button> </button>"),lv=E(`<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">video</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">video quality</div> <div class="quality-grid svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">if preferred quality isn't available, the next best option will be used. 1080p is recommended for most uses.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">preferred codec</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">h264: best compatibility, max 1080p. av1: best quality & efficiency, supports 8k & HDR. vp9: same quality as av1 but ~2x larger.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">file container</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp4 has the best compatibility. webm is great for web. mkv supports more features but has limited playback support.</p></div></section>`),cv=E("<button> </button>"),vv=E("<button> </button>"),uv=E('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">audio</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio format</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp3: universal compatibility. m4a: better quality at same size. opus: best compression. flac/wav: lossless quality.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio bitrate</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">higher bitrate = better quality but larger file size. 320kbps is CD-quality for most people.</p></div></section>'),dv=E("<button> </button>"),fv=E("<button> </button>"),pv=E('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">downloads</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">filename style</div> <div class="segmented-control svelte-1ozf5k3"></div> <div class="filename-preview svelte-1ozf5k3"><code class="svelte-1ozf5k3"> </code></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">twitter/x gifs as gif</div> <p class="setting-description svelte-1ozf5k3">automatically convert twitter/x "gifs" (which are actually videos) to real gif files. turn off to keep them as mp4.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">playlist behavior</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">when a link contains a playlist, should we download just the video or the entire playlist? "ask me" will show a popup each time.</p></div></section>'),hv=E('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">advanced</h2> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">allow h265 codec</div> <p class="setting-description svelte-1ozf5k3">enables downloading h265/HEVC videos for platforms like TikTok. higher quality but may have compatibility issues with some players.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">embed metadata</div> <p class="setting-description svelte-1ozf5k3">include title, artist, and other metadata in downloaded files.</p></div> <button></button></div></div> <div class="divider svelte-1ozf5k3"></div> <button class="reset-btn svelte-1ozf5k3">reset all settings</button></section>'),gv=E('<!> <main class="svelte-1ozf5k3"><div class="page-header svelte-1ozf5k3"><h1 class="svelte-1ozf5k3">settings</h1> <p class="svelte-1ozf5k3">customize your download experience</p></div> <nav class="settings-nav svelte-1ozf5k3"></nav> <!> <!> <!> <!></main> <!>',1);function mv(e,s){Tt(s,!0);const r=()=>Wt(Ys,"$settings",n),[n,o]=ps();let a=M("video"),c=be(r);const f=[{id:"video",label:"video"},{id:"audio",label:"audio"},{id:"downloads",label:"downloads"},{id:"advanced",label:"advanced"}],v=["best","4k","1440p","1080p","720p","480p","360p"],g={best:"8k+","4k":"4k","1440p":"1440p","1080p":"1080p","720p":"720p","480p":"480p","360p":"360p"},_=[{value:"h264",label:"h264 + aac"},{value:"av1",label:"av1 + opus"},{value:"vp9",label:"vp9 + opus"}],S=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mkv",label:"mkv"}],d=[{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"opus",label:"opus"},{value:"flac",label:"flac"},{value:"wav",label:"wav"}],p=[{value:"320",label:"320 kbps"},{value:"256",label:"256 kbps"},{value:"192",label:"192 kbps"},{value:"128",label:"128 kbps"}],w=[{value:"classic",label:"classic"},{value:"basic",label:"basic"},{value:"pretty",label:"pretty"},{value:"nerdy",label:"nerdy"}],C=[{value:"ask",label:"ask me"},{value:"video",label:"just video"},{value:"playlist",label:"full playlist"}];let y=be(()=>{const J=t(c).container||"mp4",B={classic:`Video Title (${t(c).quality}).${J}`,basic:`Video Title.${J}`,pretty:`Video Title - Author (${t(c).quality}, ${t(c).codec}).${J}`,nerdy:`Video_Title_${t(c).quality}_${t(c).codec}_aac.${J}`};return B[t(c).filenameStyle]||B.basic});function x(J,B){Ys.setSetting(J,B)}function P(){confirm("Reset all settings to defaults?")&&(Ys.reset(),Ce("Settings reset!","success"))}var O=gv(),ie=ve(O);rr(ie,{extraContent:B=>{jr(B,{})}});var te=u(ie,2),de=u(l(te),2);nt(de,21,()=>f,ot,(J,B)=>{var L=nv();let se;L.__click=()=>i(a,t(B).id,!0);var fe=l(L),Z=l(fe);W(()=>{se=pe(L,1,"settings-nav-item svelte-1ozf5k3",null,se,{active:t(a)===t(B).id}),R(Z,t(B).label)}),m(J,L)});var _e=u(de,2);{var je=J=>{var B=lv(),L=u(l(B),2),se=u(l(L),2);nt(se,21,()=>v,ot,(Q,oe)=>{var K=av();let re;K.__click=()=>x("quality",t(oe));var me=l(K);W(()=>{re=pe(K,1,"quality-option svelte-1ozf5k3",null,re,{active:t(c).quality===t(oe)}),R(me,g[t(oe)])}),m(Q,K)});var fe=u(L,2),Z=u(l(fe),2);nt(Z,21,()=>_,ot,(Q,oe)=>{var K=iv();let re;K.__click=()=>x("codec",t(oe).value);var me=l(K);W(()=>{re=pe(K,1,"segment svelte-1ozf5k3",null,re,{active:t(c).codec===t(oe).value}),R(me,t(oe).label)}),m(Q,K)});var ue=u(fe,2),ge=u(l(ue),2);nt(ge,21,()=>S,ot,(Q,oe)=>{var K=ov();let re;K.__click=()=>x("container",t(oe).value);var me=l(K);W(()=>{re=pe(K,1,"segment svelte-1ozf5k3",null,re,{active:t(c).container===t(oe).value}),R(me,t(oe).label)}),m(Q,K)}),m(J,B)};I(_e,J=>{t(a)==="video"&&J(je)})}var Te=u(_e,2);{var X=J=>{var B=uv(),L=u(l(B),2),se=u(l(L),2);nt(se,21,()=>d,ot,(ue,ge)=>{var Q=cv();let oe;Q.__click=()=>x("audioFormat",t(ge).value);var K=l(Q);W(()=>{oe=pe(Q,1,"segment svelte-1ozf5k3",null,oe,{active:t(c).audioFormat===t(ge).value}),R(K,t(ge).label)}),m(ue,Q)});var fe=u(L,2),Z=u(l(fe),2);nt(Z,21,()=>p,ot,(ue,ge)=>{var Q=vv();let oe;Q.__click=()=>x("audioBitrate",t(ge).value);var K=l(Q);W(()=>{oe=pe(Q,1,"segment svelte-1ozf5k3",null,oe,{active:t(c).audioBitrate===t(ge).value}),R(K,t(ge).label)}),m(ue,Q)}),m(J,B)};I(Te,J=>{t(a)==="audio"&&J(X)})}var $e=u(Te,2);{var Je=J=>{var B=pv(),L=u(l(B),2),se=u(l(L),2);nt(se,21,()=>w,ot,(Ne,ke)=>{var ne=dv();let ze;ne.__click=()=>x("filenameStyle",t(ke).value);var Ie=l(ne);W(()=>{ze=pe(ne,1,"segment svelte-1ozf5k3",null,ze,{active:t(c).filenameStyle===t(ke).value}),R(Ie,t(ke).label)}),m(Ne,ne)});var fe=u(se,2),Z=l(fe),ue=l(Z),ge=u(L,2),Q=l(ge),oe=u(l(Q),2);let K;oe.__click=()=>x("twitterGifs",!(!t(c).twitterGifs||t(c).twitterGifs===void 0));var re=u(ge,2),me=u(l(re),2);nt(me,21,()=>C,ot,(Ne,ke)=>{var ne=fv();let ze;ne.__click=()=>x("playlistPreference",t(ke).value==="ask"?null:t(ke).value);var Ie=l(ne);W(()=>{ze=pe(ne,1,"segment svelte-1ozf5k3",null,ze,{active:(t(c).playlistPreference===null?"ask":t(c).playlistPreference)===t(ke).value}),R(Ie,t(ke).label)}),m(Ne,ne)}),W(()=>{R(ue,t(y)),K=pe(oe,1,"toggle svelte-1ozf5k3",null,K,{active:t(c).twitterGifs!==!1})}),m(J,B)};I($e,J=>{t(a)==="downloads"&&J(Je)})}var we=u($e,2);{var Oe=J=>{var B=hv(),L=u(l(B),2),se=l(L),fe=u(l(se),2);let Z;fe.__click=()=>x("h265",!t(c).h265);var ue=u(L,2),ge=l(ue),Q=u(l(ge),2);let oe;Q.__click=()=>x("metadata",t(c).metadata===!1);var K=u(ue,4);K.__click=P,W(()=>{Z=pe(fe,1,"toggle svelte-1ozf5k3",null,Z,{active:t(c).h265}),oe=pe(Q,1,"toggle svelte-1ozf5k3",null,oe,{active:t(c).metadata!==!1})}),m(J,B)};I(we,J=>{t(a)==="advanced"&&J(Oe)})}var Me=u(te,2);Cr(Me),m(e,O),zt(),o()}qt(["click"]);var wv=E('<span class="progress-label svelte-1untuf7"> </span>'),_v=E('<div class="progress-wrapper svelte-1untuf7"><!> <div class="progress-track svelte-1untuf7" role="progressbar"><div class="progress-fill svelte-1untuf7"></div></div></div>');function wn(e,s){let r=An(s,"percent",3,0),n=An(s,"label",3,""),o=be(()=>Math.min(100,Math.max(0,r())));var a=_v(),c=l(a);{var f=_=>{var S=wv(),d=l(S);W(()=>R(d,n())),m(_,S)};I(c,_=>{n()&&_(f)})}var v=u(c,2);_t(v,"aria-valuemin",0),_t(v,"aria-valuemax",100);var g=l(v);W(()=>{_t(v,"aria-valuenow",t(o)),Xt(g,`width: ${t(o)??""}%`)}),m(e,a)}const Cn=50*1024*1024;async function _n(e,s){const r=Se(),n=Math.ceil(e.size/Cn),o=await fetch(`${r}/api/upload/init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e.name,fileSize:e.size,totalChunks:n})});if(!o.ok){let f="Failed to initialize upload";try{f=(await o.json()).error||f}catch{f=await o.text().catch(()=>f)}throw new Error(f)}const{uploadId:a}=await o.json();for(let f=0;f<n;f++){const v=f*Cn,g=Math.min(v+Cn,e.size),_=e.slice(v,g),S=new FormData;S.append("chunk",_);const d=await fetch(`${r}/api/upload/chunk/${a}/${f}`,{method:"POST",body:S});if(!d.ok){let w=`Failed to upload chunk ${f+1}`;try{w=(await d.json()).error||w}catch{w=await d.text().catch(()=>w)}throw new Error(w)}const p=(f+1)/n*100;s(p)}const c=await fetch(`${r}/api/upload/complete/${a}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!c.ok){let f="Failed to complete upload";try{f=(await c.json()).error||f}catch{f=await c.text().catch(()=>f)}throw new Error(f)}return await c.json()}var yv=E('<div class="input-tabs svelte-17hyuhr"><button>upload file</button> <button>paste link</button></div> <button type="button"><svg class="drop-zone-icon svelte-17hyuhr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-17hyuhr">drop a file here or click to browse</p> <p class="drop-zone-hint svelte-17hyuhr">supports video and audio files (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>',1),bv=E("<button> </button>"),xv=E('<div class="input-tabs svelte-17hyuhr"><button>upload file</button> <button>paste link</button></div> <div class="url-input-section svelte-17hyuhr"><input type="url" class="url-input svelte-17hyuhr" placeholder="https://youtube.com/watch?v=..."/> <p class="url-hint svelte-17hyuhr">paste a link to any video or audio â youtube, twitter, tiktok, etc.</p></div> <div class="convert-options svelte-17hyuhr"><div class="option-label svelte-17hyuhr">convert to</div> <div class="segmented-control svelte-17hyuhr"></div></div> <button class="convert-btn svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> </button>',1),kv=Be('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Sv=Be('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),jv=E("<button> </button>"),Cv=E('<div class="file-info svelte-17hyuhr"><div class="file-header svelte-17hyuhr"><div class="file-icon svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><!></svg></div> <div class="file-details svelte-17hyuhr"><div class="file-name svelte-17hyuhr"> </div> <div class="file-size svelte-17hyuhr"> </div></div> <button class="file-remove svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="convert-options svelte-17hyuhr"><div class="option-label svelte-17hyuhr">convert to</div> <div class="segmented-control svelte-17hyuhr"></div></div> <button class="convert-btn svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> </button></div>'),Tv=E('<div class="progress-container svelte-17hyuhr"><!></div>'),zv=E("<div> </div>"),Ev=E('<!> <main class="svelte-17hyuhr"><div class="page-header svelte-17hyuhr"><h1 class="svelte-17hyuhr">convert</h1> <p class="svelte-17hyuhr">change video and audio file formats</p></div> <div class="converter svelte-17hyuhr"><!> <!> <!></div></main> <!>',1);function $v(e,s){Tt(s,!0);let r=M(null),n=M("mp4"),o=M(""),a=M("file"),c=M(null);const f=mn();f.url&&(i(o,f.url,!0),i(a,"url"));let v=M(!1),g=M(0),_=M(""),S=M(null),d=M(""),p=M(!1),w;const C=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"wav",label:"wav"}];function y(B){return B.type.startsWith("audio/")||["mp3","m4a","wav","flac","ogg","opus"].some(L=>B.name.toLowerCase().endsWith("."+L))}function x(B){if(!B)return;const L=8*1024*1024*1024;if(B.size>L){i(S,"error"),i(d,"File too large. Maximum size is 8GB.");return}i(r,B,!0),i(S,null),i(d,"")}function P(){i(r,null),i(g,0),i(_,""),i(S,null),i(d,""),w&&(w.value="")}async function O(B){let L="";try{L=await(await B.blob()).text()}catch{L=await B.text().catch(()=>"")}try{return JSON.parse(L).error||`Request failed with status ${B.status}`}catch{return L||`Request failed with status ${B.status}`}}async function ie(){const B=t(a)==="url"&&t(o).trim();if(!t(r)&&!B||t(v))return;i(v,!0),i(g,0),i(S,null),i(d,"");const L=Date.now().toString()+Math.random().toString(36).substr(2,9),se=B?`URL â .${t(n)}`:`${t(r).name} â .${t(n)}`;ce.add({id:L,title:se,type:"convert",stage:B?"downloading":"uploading",status:B?"downloading media...":"uploading...",progress:0,startTime:Date.now()});let fe=null;try{fe=Qr();let Z;if(B){i(_,"Downloading media..."),ce.updateItem(L,{status:"downloading media..."});const ue=await fetch(`${Se()}/api/fetch-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t(o).trim()})});if(!ue.ok){let ke="Failed to download from URL";try{ke=(await ue.json()).error||ke}catch{}throw new Error(ke)}const ge=await ue.json();i(c,ge,!0),ce.updateItem(L,{title:`${ge.fileName} â .${t(n)}`,stage:"converting",status:"converting...",progress:0}),i(g,0),i(_,"Converting...");const Q=await fetch(`${Se()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:ge.filePath,fileName:ge.fileName,format:t(n)})});if(!Q.ok)throw new Error(await O(Q));const{jobId:oe}=await Q.json();let K=0;for(;;){if(K>=300)throw new Error("Conversion timed out after 10 minutes");K++,await new Promise(Ge=>setTimeout(Ge,2e3));const ke=new AbortController,ne=setTimeout(()=>ke.abort(),1e4);let ze;try{ze=await fetch(`${Se()}/api/job/${oe}/status`,{signal:ke.signal})}finally{clearTimeout(ne)}if(!ze.ok)throw ze.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const Ie=await ze.json();if(Ie.status==="error")throw new Error(Ie.error||"Conversion failed");if(i(g,Ie.progress||0,!0),i(_,Ie.message||"processing...",!0),ce.updateItem(L,{progress:Ie.progress||0,status:Ie.message||"converting..."}),Ie.status==="complete")break}if(Z=await fetch(`${Se()}/api/job/${oe}/download`),!Z.ok)throw new Error(await O(Z));i(g,100),i(_,"complete!");const re=Z.headers.get("Content-Disposition");let me=ge.fileName.replace(/\.[^.]+$/,"")+"."+t(n);if(re){const ke=re.match(/filename="?([^"]+)"?/);ke&&(me=ke[1])}const Ne=await Z.blob();Fr(Ne,me),i(S,"success"),i(d,"conversion complete! download started."),ce.updateItem(L,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>ce.remove(L),5e3)}else{const ue=t(r).size>94371840;if(i(_,"Uploading..."),ue){const{filePath:K,fileName:re}=await _n(t(r),ne=>{i(g,ne,!0),i(_,"Uploading..."),ce.updateItem(L,{progress:ne,status:"uploading..."})});i(g,0),i(_,"Converting..."),ce.updateItem(L,{stage:"converting",status:"converting...",progress:0});const me=await fetch(`${Se()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:K,fileName:re,format:t(n)})});if(!me.ok)throw new Error(await O(me));const{jobId:Ne}=await me.json();let ke=0;for(;;){if(ke>=300)throw new Error("Conversion timed out after 10 minutes");ke++,await new Promise(V=>setTimeout(V,2e3));const ne=new AbortController,ze=setTimeout(()=>ne.abort(),1e4);let Ie;try{Ie=await fetch(`${Se()}/api/job/${Ne}/status`,{signal:ne.signal})}finally{clearTimeout(ze)}if(!Ie.ok)throw Ie.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const Ge=await Ie.json();if(Ge.status==="error")throw new Error(Ge.error||"Conversion failed");if(i(g,Ge.progress||0,!0),i(_,Ge.message||"processing...",!0),ce.updateItem(L,{progress:Ge.progress||0,status:Ge.message||"converting..."}),Ge.status==="complete")break}Z=await fetch(`${Se()}/api/job/${Ne}/download`)}else Z=await new Promise((K,re)=>{const me=new XMLHttpRequest;me.open("POST",`${Se()}/api/convert`),me.upload.onprogress=ke=>{if(ke.lengthComputable){const ne=Math.round(ke.loaded/ke.total*90);i(g,ne,!0),i(_,`uploading... ${ne}%`),ce.updateItem(L,{progress:ne,status:`uploading... ${ne}%`})}},me.onload=()=>{i(g,95),i(_,"processing..."),ce.updateItem(L,{stage:"converting",status:"converting...",progress:95}),K(new Response(me.response,{status:me.status,statusText:me.statusText,headers:{"Content-Disposition":me.getResponseHeader("Content-Disposition")||""}}))},me.onerror=()=>re(new Error("Network error during upload")),me.responseType="blob";const Ne=new FormData;Ne.append("file",t(r)),Ne.append("format",t(n)),me.send(Ne)});if(!Z.ok)throw new Error(await O(Z));i(g,100),i(_,"complete!");const ge=Z.headers.get("Content-Disposition");let Q=t(r).name.replace(/\.[^.]+$/,"")+"."+t(n);if(ge){const K=ge.match(/filename="?([^"]+)"?/);K&&(Q=K[1])}const oe=await Z.blob();Fr(oe,Q),i(S,"success"),i(d,"conversion complete! download started."),ce.updateItem(L,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>ce.remove(L),5e3)}}catch(Z){i(S,"error"),i(d,Z.message||"conversion failed",!0),i(g,0),i(_,""),ce.updateItem(L,{stage:"error",status:Z.message||"conversion failed"})}finally{i(v,!1),fe&&Kr(fe)}}var te=Ev(),de=ve(te);rr(de,{extraContent:L=>{jr(L,{})}});var _e=u(de,2),je=u(l(_e),2),Te=l(je);{var X=B=>{var L=yv(),se=ve(L),fe=l(se);let Z;fe.__click=()=>i(a,"file");var ue=u(fe,2);let ge;ue.__click=()=>i(a,"url");var Q=u(se,2);let oe;Q.__click=()=>w==null?void 0:w.click();var K=u(l(Q),6);K.__change=re=>{var me;x((me=re.target.files)==null?void 0:me[0]),re.target.value=""},bs(K,re=>w=re,()=>w),W(()=>{Z=pe(fe,1,"input-tab svelte-17hyuhr",null,Z,{active:t(a)==="file"}),ge=pe(ue,1,"input-tab svelte-17hyuhr",null,ge,{active:t(a)==="url"}),oe=pe(Q,1,"drop-zone svelte-17hyuhr",null,oe,{dragover:t(p)})}),gt("dragover",Q,re=>{re.preventDefault(),i(p,!0)}),gt("dragleave",Q,re=>{re.preventDefault(),i(p,!1)}),gt("drop",Q,re=>{var me,Ne;re.preventDefault(),i(p,!1),x((Ne=(me=re.dataTransfer)==null?void 0:me.files)==null?void 0:Ne[0])}),m(B,L)},$e=B=>{var L=Re(),se=ve(L);{var fe=ue=>{var ge=xv(),Q=ve(ge),oe=l(Q);let K;oe.__click=()=>i(a,"file");var re=u(oe,2);let me;re.__click=()=>i(a,"url");var Ne=u(Q,2),ke=l(Ne),ne=u(Ne,2),ze=u(l(ne),2);nt(ze,21,()=>C,ot,(V,Y)=>{var xe=bv();let We;xe.__click=()=>i(n,t(Y).value,!0);var Xe=l(xe);W(()=>{We=pe(xe,1,"segment svelte-17hyuhr",null,We,{active:t(n)===t(Y).value}),R(Xe,t(Y).label)}),m(V,xe)});var Ie=u(ne,2);Ie.__click=ie;var Ge=u(l(Ie));W(V=>{K=pe(oe,1,"input-tab svelte-17hyuhr",null,K,{active:t(a)==="file"}),me=pe(re,1,"input-tab svelte-17hyuhr",null,me,{active:t(a)==="url"}),Ie.disabled=V,R(Ge,` ${t(v)?"converting...":"convert"}`)},[()=>!t(o).trim()||t(v)]),Kt(ke,()=>t(o),V=>i(o,V)),m(ue,ge)},Z=ue=>{var ge=Cv(),Q=l(ge),oe=l(Q),K=l(oe),re=l(K);{var me=ye=>{var Pe=kv();m(ye,Pe)},Ne=ye=>{var Pe=Sv();m(ye,Pe)};I(re,ye=>{t(r)&&y(t(r))?ye(me):ye(Ne,!1)})}var ke=u(oe,2),ne=l(ke),ze=l(ne),Ie=u(ne,2),Ge=l(Ie),V=u(ke,2);V.__click=P;var Y=u(Q,2),xe=u(l(Y),2);nt(xe,21,()=>C,ot,(ye,Pe)=>{var tt=jv();let at;tt.__click=()=>i(n,t(Pe).value,!0);var ht=l(tt);W(()=>{at=pe(tt,1,"segment svelte-17hyuhr",null,at,{active:t(n)===t(Pe).value}),R(ht,t(Pe).label)}),m(ye,tt)});var We=u(Y,2);We.__click=ie;var Xe=u(l(We));W(ye=>{_t(ne,"title",t(r).name),R(ze,t(r).name),R(Ge,ye),We.disabled=t(v),R(Xe,` ${t(v)?"converting...":"convert"}`)},[()=>er(t(r).size)]),m(ue,ge)};I(se,ue=>{t(a)==="url"&&!t(r)?ue(fe):ue(Z,!1)},!0)}m(B,L)};I(Te,B=>{!t(r)&&t(a)!=="url"?B(X):B($e,!1)})}var Je=u(Te,2);{var we=B=>{var L=Tv(),se=l(L);wn(se,{get percent(){return t(g)},get label(){return t(_)}}),m(B,L)};I(Je,B=>{t(v)&&B(we)})}var Oe=u(Je,2);{var Me=B=>{var L=zv(),se=l(L);W(()=>{pe(L,1,`status ${t(S)??""}`,"svelte-17hyuhr"),R(se,t(d))}),m(B,L)};I(Oe,B=>{t(S)&&B(Me)})}var J=u(_e,2);Cr(J),m(e,te),zt()}qt(["click","change"]);qt(["click","keydown"]);var Mv=E('<button type="button"><svg class="drop-zone-icon svelte-15o2uhu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-15o2uhu">drop a video here or click to browse</p> <p class="drop-zone-hint svelte-15o2uhu">supports mp4, webm, mov, mkv, avi (max 8GB)</p> <input type="file" accept="video/*" style="display: none;"/></button>'),Pv=E('<div class="url-input-section svelte-15o2uhu"><input type="url" class="url-input svelte-15o2uhu" placeholder="https://youtube.com/watch?v=..."/> <p class="url-hint svelte-15o2uhu">paste a link to any video â youtube, twitter, tiktok, etc.</p></div>'),Iv=E('<div class="input-tabs svelte-15o2uhu"><button>upload file</button> <button>paste link</button></div> <!>',1),qv=E('<div class="file-info svelte-15o2uhu"><div class="file-header svelte-15o2uhu"><div class="file-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-15o2uhu"><div class="file-name svelte-15o2uhu"> </div> <div class="file-size svelte-15o2uhu"> </div></div> <button class="file-remove svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-15o2uhu"><span> </span> <span> </span></div></div>'),Rv=E('<div class="file-info svelte-15o2uhu"><div class="file-header svelte-15o2uhu"><div class="file-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-15o2uhu"><div class="file-name svelte-15o2uhu"> </div> <div class="file-size svelte-15o2uhu"> </div></div> <button class="file-remove svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-15o2uhu"><span> </span> <span> </span></div></div>'),Bv=E('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),Dv=E('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),Nv=E('<div class="progress-container svelte-15o2uhu"><div class="progress-header svelte-15o2uhu"><span class="progress-status svelte-15o2uhu"> </span> <span class="progress-percent svelte-15o2uhu"> </span></div> <!> <div class="progress-details svelte-15o2uhu"> </div></div>'),Fv=E('<div class="result-container svelte-15o2uhu"><div class="result-header svelte-15o2uhu"><div class="result-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-15o2uhu">compression complete!</div></div> <div class="result-stats svelte-15o2uhu"><div class="result-stat svelte-15o2uhu"><div class="result-stat-value svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">original</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value arrow svelte-15o2uhu">-></div> <div class="result-stat-label svelte-15o2uhu"></div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">compressed</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">saved</div></div></div> <button class="result-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> compress another</button></div>'),Ov=E('<div class="quality-overlay svelte-15o2uhu"><div class="quality-modal svelte-15o2uhu"><div class="quality-modal-title svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg> quality warning</div> <div class="quality-gauge svelte-15o2uhu"><div class="quality-gauge-bg svelte-15o2uhu"></div> <div class="quality-gauge-mask svelte-15o2uhu"></div> <div class="quality-gauge-needle svelte-15o2uhu"></div> <div class="quality-gauge-center svelte-15o2uhu"></div> <div class="quality-gauge-value svelte-15o2uhu"><span> </span> <span class="quality-gauge-unit svelte-15o2uhu">kbps</span></div></div> <div class="quality-modal-message svelte-15o2uhu">Your video is <strong class="svelte-15o2uhu"> </strong> long. At this size, the estimated bitrate is very low and the output <strong class="svelte-15o2uhu">may look blocky or blurry</strong>. <br/><br/> For better results, try a <strong class="svelte-15o2uhu">shorter clip</strong> or a <strong class="svelte-15o2uhu">larger target size</strong>.</div> <div class="quality-modal-buttons svelte-15o2uhu"><button class="quality-modal-btn cancel svelte-15o2uhu">cancel</button> <button class="quality-modal-btn proceed svelte-15o2uhu">compress anyway</button></div></div></div>'),Av=E('<!> <main class="svelte-15o2uhu"><div class="page-header svelte-15o2uhu"><h1 class="svelte-15o2uhu">compress</h1> <p class="svelte-15o2uhu">shrink videos for discord, email, or anywhere!</p></div> <div class="compress-container svelte-15o2uhu"><!> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">target size</div> <div class="size-description svelte-15o2uhu">choose a size limit or enter a custom size</div> <div class="size-grid svelte-15o2uhu"></div> <div class="custom-size-row svelte-15o2uhu"><input type="number" class="custom-size-input svelte-15o2uhu" placeholder="custom" min="1" max="4096"/> <span class="custom-size-suffix svelte-15o2uhu">MB</span></div> <div class="estimate svelte-15o2uhu"><span class="estimate-label svelte-15o2uhu">estimated quality</span> <span> </span></div></div> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">encoding preset</div> <div class="size-description svelte-15o2uhu">quality = better compression, slower | fast = quicker encoding</div> <div class="preset-grid svelte-15o2uhu"></div> <label class="checkbox-row svelte-15o2uhu"><input type="checkbox" class="svelte-15o2uhu"/> <span class="svelte-15o2uhu">downscale for better quality (reduces blockiness)</span></label></div> <button class="compress-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg> </button> <!> <!></div></main> <!> <!>',1);function Lv(e,s){Tt(s,!0);let r=M(null),n=M(0),o=M(0),a=M(0),c=M(""),f=M("file"),v=M(null);const g=mn();g.url&&(i(c,g.url,!0),i(f,"url"));let _=M(50),S=M(47),d=M(""),p=M(!1),w=M("balanced"),C=M(!1),y=M(!1),x=M(0),P=M(""),O=M(""),ie=M(!1),te=M(""),de=M(""),_e=M(""),je=M(!1),Te=M(!1),X;const $e=[{size:8,actual:7.5,label:"MB free"},{size:10,actual:9.5,label:"MB"},{size:50,actual:47,label:"MB basic"},{size:100,actual:95,label:"MB"},{size:500,actual:475,label:"MB nitro"}],Je=[{id:"fast",label:"fast",sublabel:"quick encode"},{id:"balanced",label:"balanced",sublabel:"recommended"},{id:"quality",label:"quality",sublabel:"best results"}];let we=be(()=>{if(!t(r)&&!t(v)||!t(n))return 0;const h=t(S)*1024*1024,b=128*1024,j=h-b/8*t(n);return Math.floor(j*8/t(n)/1024)}),Oe=be(()=>t(f)==="url"&&!t(v)&&!t(r)?t(c)?"fetch the URL to see estimate":"paste a link to see estimate":!t(r)&&!t(v)||!t(n)?"select a file to see estimate":(t(v)?t(v).fileSize/(1024*1024):t(r).size/(1024*1024))<=t(S)?`already under ${t(_)}MB!`:t(we)<500?`~${t(we)} kbps video - very low quality (may be blocky)`:t(we)<1e3?`~${t(we)} kbps video - low quality`:t(we)<2500?`~${t(we)} kbps video - medium quality`:t(we)<5e3?`~${t(we)} kbps video - good quality`:`~${t(we)} kbps video - excellent quality`),Me=be(()=>{var b;const h=t(v)?t(v).fileSize:(b=t(r))==null?void 0:b.size;return(t(r)||t(v))&&t(n)&&t(we)<500&&h&&h/(1024*1024)>t(S)}),J=be(()=>-90+Math.min(t(we),2e3)/2e3*180),B=be(()=>{if(!t(n))return"--:--";const h=Math.floor(t(n)/60),b=Math.floor(t(n)%60);return`${h}:${b.toString().padStart(2,"0")}`}),L=be(()=>!t(o)||!t(a)?"unknown":`${t(o)}x${t(a)}`);function se(h){return new Promise(b=>{const j=document.createElement("video");j.preload="metadata",j.onloadedmetadata=()=>{URL.revokeObjectURL(j.src),b({duration:j.duration,width:j.videoWidth,height:j.videoHeight})},j.onerror=()=>{b({duration:0,width:0,height:0})},j.src=URL.createObjectURL(h)})}async function fe(h){if(!h)return;if(!h.type.startsWith("video/")){Ce("Please select a video file","error");return}const b=8*1024*1024*1024;if(h.size>b){Ce("File too large. Maximum size is 8GB.","error");return}i(r,h,!0),i(ie,!1);const j=await se(h);i(n,j.duration,!0),i(o,j.width,!0),i(a,j.height,!0)}function Z(){i(r,null),i(n,0),i(o,0),i(a,0),i(x,0),i(P,""),i(O,""),i(ie,!1),i(d,""),i(p,!1),X&&(X.value="")}function ue(h){i(_,h.size,!0),i(S,h.actual,!0),i(p,!1),i(d,"")}function ge(h){i(d,h,!0);const b=parseInt(h);b&&b>0&&(i(_,b,!0),i(S,b*.95),i(p,!0))}function Q(){(!t(d)||parseInt(t(d))<=0)&&t(p)&&(i(_,50),i(S,47),i(p,!1))}async function oe(){if(t(c).trim()){i(y,!0),i(P,"downloading media..."),i(O,"fetching media from URL..."),i(x,0);try{const h=await fetch(`${Se()}/api/fetch-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t(c).trim()})});if(!h.ok){let j="Failed to download from URL";try{j=(await h.json()).error||j}catch{}throw new Error(j)}const b=await h.json();i(v,b,!0),i(n,b.duration||0,!0),i(o,b.width||0,!0),i(a,b.height||0,!0),i(y,!1),i(P,""),i(O,""),i(x,0)}catch(h){Ce(h.message||"Failed to fetch URL","error"),i(y,!1),i(P,""),i(O,""),i(x,0)}}}function K(){if(t(f)==="url"&&t(c).trim()&&!t(v)){oe();return}if(!t(r)&&!t(v))return;if((t(v)?t(v).fileSize/(1024*1024):t(r).size/(1024*1024))<=t(S)){Ce(`File is already under ${t(_)}MB!`,"success");return}t(we)<500?i(Te,!0):re()}async function re(){if(!t(r)&&!t(v)||t(y))return;i(Te,!1);const h=!!t(v),b=h?t(v).fileSize:t(r).size,j=h?t(v).fileName:t(r).name;if(b/(1024*1024)<=t(S)){Ce(`File is already under ${t(_)}MB!`,"success");return}i(y,!0),i(x,0),i(P,h?"compressing...":"uploading...",!0),i(O,h?"starting compression...":"sending file to server...",!0),i(ie,!1);const A=Date.now().toString()+Math.random().toString(36).substr(2,9),z=A;ce.add({id:z,title:`${j} â ${t(_)}MB`,type:"compress",stage:h?"compressing":"uploading",status:h?"compressing...":"uploading...",progress:0,startTime:Date.now()});let U=null,$=null;try{U=Qr(),$=Ln(A,{onMessage:Ue=>{Ue.stage==="compressing"&&(i(P,"compressing..."),Ue.progress!==void 0&&i(x,Ue.progress,!0),Ue.message&&i(O,Ue.message,!0),ce.updateItem(z,{stage:"compressing",progress:Ue.progress||0,status:Ue.message||"compressing..."}))},onError:()=>{}});let N;if(h){i(x,0),i(P,"compressing..."),i(O,"starting compression..."),ce.updateItem(z,{stage:"compressing",status:"compressing...",progress:0});const Ue=await fetch(`${Se()}/api/compress-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:t(v).filePath,fileName:t(v).fileName,targetSize:t(S).toString(),duration:t(n).toString(),progressId:A,preset:t(w),downscale:t(C)})});if(!Ue.ok){let Qe="Failed to start compression";try{Qe=(await Ue.json()).error||Qe}catch{}throw new Error(Qe)}const{jobId:rt}=await Ue.json(),vt=Date.now(),it=1800*1e3;let jt=0;for(;Date.now()-vt<=it;){await new Promise(Qe=>setTimeout(Qe,2e3));try{const Qe=new AbortController,mt=setTimeout(()=>Qe.abort(),1e4);let Rt;try{Rt=await fetch(`${Se()}/api/job/${rt}/status`,{signal:Qe.signal})}finally{clearTimeout(mt)}if(!Rt.ok)throw new Error(`Server returned ${Rt.status}`);const lt=await Rt.json();if(jt=0,lt.status==="error")throw new Error(lt.error||"Compression failed");if(lt.progress!==void 0&&i(x,lt.progress,!0),lt.message&&i(O,lt.message,!0),ce.updateItem(z,{progress:lt.progress||0,status:lt.message||"compressing..."}),lt.status==="complete")break}catch(Qe){if(jt++,jt>=3)throw new Error(`Failed to check job status after 3 attempts: ${Qe.message}`)}}if(Date.now()-vt>it)throw new Error("Job timed out after 30 minutes.");N=await fetch(`${Se()}/api/job/${rt}/download`)}else if(t(r).size>94371840){i(P,"uploading..."),i(O,"large file detected, uploading in chunks...");const rt=await _n(t(r),ut=>{i(x,ut,!0),i(O,"uploading chunks..."),ce.updateItem(z,{progress:ut,status:"uploading..."})}),{filePath:vt,fileName:it}=rt;i(x,0),i(P,"compressing..."),i(O,"starting compression..."),ce.updateItem(z,{stage:"compressing",status:"compressing...",progress:0});const jt=await fetch(`${Se()}/api/compress-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:vt,fileName:it,targetSize:t(S).toString(),duration:t(n).toString(),progressId:A,preset:t(w),downscale:t(C)})});if(!jt.ok){let ut="Failed to start compression";try{ut=(await jt.json()).error||ut}catch{}throw new Error(ut)}const{jobId:Qe}=await jt.json(),mt=Date.now(),Rt=1800*1e3;let lt=0;for(;Date.now()-mt<=Rt;){await new Promise(ut=>setTimeout(ut,2e3));try{const ut=new AbortController,ks=setTimeout(()=>ut.abort(),1e4);let Gt;try{Gt=await fetch(`${Se()}/api/job/${Qe}/status`,{signal:ut.signal})}finally{clearTimeout(ks)}if(!Gt.ok)throw new Error(`Server returned ${Gt.status}`);const Bt=await Gt.json();if(lt=0,Bt.status==="error")throw new Error(Bt.error||"Compression failed");if(Bt.progress!==void 0&&i(x,Bt.progress,!0),Bt.message&&i(O,Bt.message,!0),ce.updateItem(z,{progress:Bt.progress||0,status:Bt.message||"compressing..."}),Bt.status==="complete")break}catch(ut){if(lt++,lt>=3)throw new Error(`Failed to check job status after 3 attempts: ${ut.message}`)}}if(Date.now()-mt>Rt)throw new Error("Job timed out after 30 minutes.");N=await fetch(`${Se()}/api/job/${Qe}/download`)}else{const rt=new FormData;rt.append("file",t(r)),rt.append("targetSize",t(S).toString()),rt.append("duration",t(n).toString()),rt.append("progressId",A),rt.append("preset",t(w)),rt.append("downscale",t(C)),N=await fetch(`${Se()}/api/compress`,{method:"POST",body:rt})}if($&&$.close(),!N.ok){let Ue="Compression failed";try{Ue=(await N.json()).error||Ue}catch{}throw new Error(Ue)}const D=await N.blob(),F=D.size,G=(b/(1024*1024)).toFixed(1),he=(F/(1024*1024)).toFixed(1),le=Math.round((1-F/b)*100);i(te,`${G} MB`),i(de,`${he} MB`),i(_e,`${le}%`),i(ie,!0);const ae=j.lastIndexOf("."),De=ae>0?j.slice(0,ae):j;Fr(D,`${De}_compressed.mp4`),Ce("Compression complete!","success"),ce.updateItem(z,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>ce.remove(z),5e3)}catch(N){Ce(N.message||"Compression failed","error"),ce.updateItem(z,{stage:"error",status:N.message||"compression failed"}),$&&$.close()}finally{i(y,!1),i(x,0),i(P,""),i(O,""),U&&Kr(U)}}var me=Av(),Ne=ve(me);rr(Ne,{extraContent:b=>{jr(b,{})}});var ke=u(Ne,2),ne=u(l(ke),2),ze=l(ne);{var Ie=h=>{var b=Iv(),j=ve(b),q=l(j);let A;q.__click=()=>i(f,"file");var z=u(q,2);let U;z.__click=()=>i(f,"url");var $=u(j,2);{var N=F=>{var G=Mv();let he;G.__click=()=>X==null?void 0:X.click();var le=u(l(G),6);le.__change=ae=>{var De;fe((De=ae.target.files)==null?void 0:De[0]),ae.target.value=""},bs(le,ae=>X=ae,()=>X),W(()=>he=pe(G,1,"drop-zone svelte-15o2uhu",null,he,{dragover:t(je)})),gt("dragover",G,ae=>{ae.preventDefault(),i(je,!0)}),gt("dragleave",G,ae=>{ae.preventDefault(),i(je,!1)}),gt("drop",G,ae=>{var De,Ue;ae.preventDefault(),i(je,!1),fe((Ue=(De=ae.dataTransfer)==null?void 0:De.files)==null?void 0:Ue[0])}),m(F,G)},D=F=>{var G=Pv(),he=l(G);Kt(he,()=>t(c),le=>i(c,le)),m(F,G)};I($,F=>{t(f)==="file"?F(N):F(D,!1)})}W(()=>{A=pe(q,1,"input-tab svelte-15o2uhu",null,A,{active:t(f)==="file"}),U=pe(z,1,"input-tab svelte-15o2uhu",null,U,{active:t(f)==="url"})}),m(h,b)},Ge=h=>{var b=Re(),j=ve(b);{var q=z=>{var U=qv(),$=l(U),N=u(l($),2),D=l(N),F=l(D),G=u(D,2),he=l(G),le=u(N,2);le.__click=()=>{i(v,null),i(n,0),i(o,0),i(a,0)};var ae=u($,2),De=l(ae),Ue=l(De),rt=u(De,2),vt=l(rt);W(it=>{_t(D,"title",t(v).fileName),R(F,t(v).fileName),R(he,it),R(Ue,`duration: ${(t(n)?t(B):"unknown")??""}`),R(vt,`resolution: ${t(L)??""}`)},[()=>er(t(v).fileSize)]),m(z,U)},A=z=>{var U=Rv(),$=l(U),N=u(l($),2),D=l(N),F=l(D),G=u(D,2),he=l(G),le=u(N,2);le.__click=Z;var ae=u($,2),De=l(ae),Ue=l(De),rt=u(De,2),vt=l(rt);W(it=>{_t(D,"title",t(r).name),R(F,t(r).name),R(he,it),R(Ue,`duration: ${(t(n)?t(B):"unknown")??""}`),R(vt,`resolution: ${t(L)??""}`)},[()=>er(t(r).size)]),m(z,U)};I(j,z=>{t(v)?z(q):z(A,!1)},!0)}m(h,b)};I(ze,h=>{!t(r)&&!t(v)?h(Ie):h(Ge,!1)})}var V=u(ze,2),Y=u(l(V),4);nt(Y,21,()=>$e,ot,(h,b)=>{var j=Bv();let q;j.__click=()=>ue(t(b));var A=l(j),z=l(A),U=u(A,2),$=l(U);W(()=>{q=pe(j,1,"size-option svelte-15o2uhu",null,q,{active:!t(p)&&t(_)===t(b).size}),R(z,t(b).size),R($,t(b).label)}),m(h,j)});var xe=u(Y,2),We=l(xe);We.__input=h=>ge(h.target.value);var Xe=u(xe,2),ye=u(l(Xe),2);let Pe;var tt=l(ye),at=u(V,2),ht=u(l(at),4);nt(ht,21,()=>Je,ot,(h,b)=>{var j=Dv();let q;j.__click=()=>i(w,t(b).id,!0);var A=l(j),z=l(A),U=u(A,2),$=l(U);W(()=>{q=pe(j,1,"size-option svelte-15o2uhu",null,q,{active:t(w)===t(b).id}),R(z,t(b).label),R($,t(b).sublabel)}),m(h,j)});var ct=u(ht,2),Ye=l(ct),H=u(at,2);H.__click=K;var ee=u(l(H)),qe=u(H,2);{var Ee=h=>{var b=Nv(),j=l(b),q=l(j),A=l(q),z=u(q,2),U=l(z),$=u(j,2);wn($,{get percent(){return t(x)}});var N=u($,2),D=l(N);W(F=>{R(A,t(P)),R(U,`${F??""}%`),R(D,t(O))},[()=>Math.round(t(x))]),m(h,b)};I(qe,h=>{t(y)&&h(Ee)})}var He=u(qe,2);{var Ze=h=>{var b=Fv(),j=u(l(b),2),q=l(j),A=l(q),z=l(A),U=u(q,4),$=l(U),N=l($),D=u(U,2),F=l(D),G=l(F),he=u(j,2);he.__click=Z,W(()=>{R(z,t(te)),R(N,t(de)),R(G,t(_e))}),m(h,b)};I(He,h=>{t(ie)&&h(Ze)})}var et=u(ke,2);{var st=h=>{var b=Ov();b.__click=ae=>{ae.target===ae.currentTarget&&i(Te,!1)};var j=l(b),q=u(l(j),2),A=u(l(q),4),z=u(A,4),U=l(z),$=l(U),N=u(q,2),D=u(l(N)),F=l(D),G=u(N,2),he=l(G);he.__click=()=>i(Te,!1);var le=u(he,2);le.__click=re,W(()=>{Xt(A,`transform: translateX(-50%) rotate(${t(J)??""}deg);`),R($,t(we)),R(F,t(B))}),m(h,b)};I(et,h=>{t(Te)&&h(st)})}var k=u(et,2);Cr(k),W(h=>{on(We,t(d)),Pe=pe(ye,1,"estimate-value svelte-15o2uhu",null,Pe,{"estimate-warning":t(Me)}),R(tt,t(Oe)),H.disabled=h,R(ee,` ${t(y)?"compressing...":"compress video"}`)},[()=>!t(r)&&!t(v)&&!(t(f)==="url"&&t(c).trim())||t(y)]),gt("blur",We,Q),ki(Ye,()=>t(C),h=>i(C,h)),m(e,me),zt()}qt(["click","change","input"]);var Uv=E('<button type="button"><svg class="drop-zone-icon svelte-oxrnxe" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-oxrnxe">drop a video here or click to browse</p> <p class="drop-zone-hint svelte-oxrnxe">supports mp4, webm, mov, mkv (max 8GB)</p> <input type="file" accept="video/*" style="display: none;"/></button>'),Vv=E('<div class="url-input-section svelte-oxrnxe"><input type="url" class="url-input svelte-oxrnxe" placeholder="https://youtube.com/watch?v=..."/> <p class="url-hint svelte-oxrnxe">paste a link to any video â youtube, twitter, tiktok, etc.</p></div>'),Hv=E('<div class="input-tabs svelte-oxrnxe"><button>upload file</button> <button>paste link</button></div> <!>',1),Jv=E('<div class="file-info svelte-oxrnxe"><div class="file-header svelte-oxrnxe"><div class="file-icon svelte-oxrnxe"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-oxrnxe"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></div> <div class="file-details svelte-oxrnxe"><div class="file-name svelte-oxrnxe"> </div> <div class="file-size svelte-oxrnxe"> </div></div> <button class="file-remove svelte-oxrnxe"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div></div>'),Wv=E('<div class="crop-overlay crop-overlay-top svelte-oxrnxe"></div> <div class="crop-overlay crop-overlay-bottom svelte-oxrnxe"></div> <div class="crop-overlay crop-overlay-left svelte-oxrnxe"></div> <div class="crop-overlay crop-overlay-right svelte-oxrnxe"></div>',1),Gv=E('<div class="video-preview svelte-oxrnxe"><div class="video-wrapper svelte-oxrnxe"><video controls preload="metadata" class="svelte-oxrnxe"></video> <!></div> <div class="trim-controls svelte-oxrnxe"><div class="trim-buttons svelte-oxrnxe"><button class="trim-btn svelte-oxrnxe"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line></svg> set start</button> <div class="trim-time svelte-oxrnxe"> </div> <span class="trim-arrow svelte-oxrnxe">â</span> <div class="trim-time svelte-oxrnxe"> </div> <button class="trim-btn svelte-oxrnxe">set end <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line></svg></button></div> <div class="trim-bar svelte-oxrnxe"><div class="trim-bar-selected svelte-oxrnxe"></div></div> <div class="trim-duration svelte-oxrnxe">trimmed duration: <strong class="svelte-oxrnxe"> </strong></div></div></div>',2),Yv=E('<div class="section svelte-oxrnxe"><div class="section-label svelte-oxrnxe">trim times (seconds or MM:SS)</div> <div class="manual-time-inputs svelte-oxrnxe"><div class="time-field svelte-oxrnxe"><label class="svelte-oxrnxe">start</label> <input type="text" placeholder="0:00" class="svelte-oxrnxe"/></div> <span class="trim-arrow svelte-oxrnxe">â</span> <div class="time-field svelte-oxrnxe"><label class="svelte-oxrnxe">end</label> <input type="text" placeholder="0:30" class="svelte-oxrnxe"/></div></div></div>'),Qv=E("<button> </button>"),Kv=E('<div class="progress-container svelte-oxrnxe"><!></div>'),Xv=E("<div> </div>"),Zv=E('<!> <main class="svelte-oxrnxe"><div class="page-header svelte-oxrnxe"><h1 class="svelte-oxrnxe">trim & crop</h1> <p class="svelte-oxrnxe">cut videos and change aspect ratios</p></div> <div class="trim-container svelte-oxrnxe"><!> <!> <!> <div class="section svelte-oxrnxe"><div class="section-label svelte-oxrnxe">crop aspect ratio</div> <div class="segmented-control svelte-oxrnxe"></div></div> <button class="process-btn svelte-oxrnxe"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-oxrnxe"><circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line></svg> </button> <!> <!></div></main> <!>',1);function eu(e,s){Tt(s,!0);let r=M(null),n=M(""),o=M("file"),a=M(null);const c=mn();c.url&&(i(n,c.url,!0),i(o,"url"));let f=M(0),v=M(0),g=M(0),_=M(0),S=M(0),d=M(""),p=M(""),w=M(""),C=M(!1),y=M(0),x=M(""),P=M(null),O=M(""),ie=M(!1),te,de=M(null),_e=M("");const je=[{value:"",label:"original"},{value:"16:9",label:"16:9"},{value:"9:16",label:"9:16"},{value:"1:1",label:"1:1"},{value:"4:3",label:"4:3"},{value:"4:5",label:"4:5"}];let Te=be(()=>t(S)>t(_)?t(S)-t(_):t(f)),X=be(()=>{const H=t(Te);if(!H)return"--:--";const ee=Math.floor(H/60),qe=Math.floor(H%60),Ee=Math.floor(H%1*10);return`${ee}:${qe.toString().padStart(2,"0")}.${Ee}`}),$e=be(()=>t(f)>0?t(_)/t(f)*100:0),Je=be(()=>t(f)>0?t(S)/t(f)*100:100),we=be(()=>t(w)?"trim & crop":"trim"),Oe=be(()=>t(S)>t(_)&&t(S)>0);function Me(H){const ee=Math.floor(H/60),qe=Math.floor(H%60),Ee=Math.floor(H%1*10);return`${ee}:${qe.toString().padStart(2,"0")}.${Ee}`}function J(H){if(!H)return null;if(H=H.trim(),/^\d+(\.\d+)?$/.test(H))return parseFloat(H);const ee=H.match(/^(\d+):(\d{1,2})(?:\.(\d+))?$/);return ee?parseInt(ee[1])*60+parseInt(ee[2])+(ee[3]?parseFloat("0."+ee[3]):0):null}function B(){t(de)&&(i(f,t(de).duration,!0),i(v,t(de).videoWidth,!0),i(g,t(de).videoHeight,!0),i(S,t(de).duration,!0),i(p,Me(t(de).duration),!0))}async function L(H){if(!H)return;if(!H.type.startsWith("video/")){Ce("please select a video file","error");return}const ee=8*1024*1024*1024;if(H.size>ee){Ce("file too large. maximum size is 8GB.","error");return}i(r,H,!0),i(P,null),i(O,""),t(_e)&&URL.revokeObjectURL(t(_e)),i(_e,URL.createObjectURL(H),!0)}function se(){i(r,null),i(a,null),t(_e)&&URL.revokeObjectURL(t(_e)),i(_e,""),i(f,0),i(v,0),i(g,0),i(_,0),i(S,0),i(d,""),i(p,""),i(w,""),i(y,0),i(x,""),i(P,null),i(O,""),te&&(te.value="")}function fe(){t(de)&&(i(_,t(de).currentTime,!0),i(d,Me(t(_)),!0))}function Z(){t(de)&&(i(S,t(de).currentTime,!0),i(p,Me(t(S)),!0))}function ue(H){i(d,H,!0);const ee=J(H);ee!==null&&ee>=0&&i(_,ee,!0)}function ge(H){i(p,H,!0);const ee=J(H);ee!==null&&ee>=0&&i(S,ee,!0)}let Q=be(()=>{if(!t(w)||!t(v)||!t(g))return null;const[H,ee]=t(w).split(":").map(Number),qe=t(v)/t(g),Ee=H/ee;let He=0,Ze=0,et=0,st=0;if(qe>Ee){const h=(1-Ee/qe)/2;He=h*100,et=h*100}else{const h=(1-qe/Ee)/2;Ze=h*100,st=h*100}return{left:He,top:Ze,right:et,bottom:st}});async function oe(H){let ee="";try{ee=await(await H.blob()).text()}catch{ee=await H.text().catch(()=>"")}try{return JSON.parse(ee).error||`Request failed with status ${H.status}`}catch{return ee||`Request failed with status ${H.status}`}}async function K(){const H=t(o)==="url"&&t(n).trim();if(!t(r)&&!H&&!t(a)||t(C))return;if(!t(Oe)&&!t(w)){Ce("set start and end times, or pick a crop ratio","error");return}i(C,!0),i(y,0),i(P,null),i(O,"");const ee=Date.now().toString()+Math.random().toString(36).substr(2,9),Ee=`${t(a)?t(a).fileName:t(r)?t(r).name:"video"} â ${t(we)}`;ce.add({id:ee,title:Ee,type:"convert",stage:H&&!t(a)?"downloading":"uploading",status:H&&!t(a)?"downloading media...":"uploading...",progress:0,startTime:Date.now()});let He=null;try{He=Qr();let Ze,et;if(H&&!t(a)){i(x,"Downloading media..."),ce.updateItem(ee,{status:"downloading media..."});const U=await fetch(`${Se()}/api/fetch-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t(n).trim()})});if(!U.ok){let N="Failed to download from URL";try{N=(await U.json()).error||N}catch{}throw new Error(N)}const $=await U.json();i(a,$,!0),Ze=$.filePath,et=$.fileName,!t(f)&&$.duration&&i(f,$.duration,!0),!t(v)&&$.width&&i(v,$.width,!0),!t(g)&&$.height&&i(g,$.height,!0),!t(S)&&$.duration&&(i(S,$.duration,!0),i(p,Me($.duration),!0)),ce.updateItem(ee,{title:`${$.fileName} â ${t(we)}`,stage:"processing",status:"processing...",progress:0})}else if(t(a))Ze=t(a).filePath,et=t(a).fileName,ce.updateItem(ee,{stage:"processing",status:"processing...",progress:0});else{i(x,"Uploading...");const U=await _n(t(r),$=>{i(y,$,!0),i(x,"Uploading..."),ce.updateItem(ee,{progress:$,status:"uploading..."})});Ze=U.filePath,et=U.fileName,ce.updateItem(ee,{stage:"processing",status:"processing...",progress:0})}i(y,0),i(x,"Processing...");const st={filePath:Ze,fileName:et,format:"mp4",reencode:"always"};t(Oe)&&(st.startTime=String(t(_)),st.endTime=String(t(S))),t(w)&&(st.cropRatio=t(w));const k=await fetch(`${Se()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(st)});if(!k.ok)throw new Error(await oe(k));const{jobId:h}=await k.json();let b=0;for(;;){if(b>=600)throw new Error("Processing timed out after 20 minutes");b++,await new Promise(F=>setTimeout(F,2e3));const U=new AbortController,$=setTimeout(()=>U.abort(),1e4);let N;try{N=await fetch(`${Se()}/api/job/${h}/status`,{signal:U.signal})}finally{clearTimeout($)}if(!N.ok)throw N.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const D=await N.json();if(D.status==="error")throw new Error(D.error||"Processing failed");if(i(y,D.progress||0,!0),i(x,D.message||"processing...",!0),ce.updateItem(ee,{progress:D.progress||0,status:D.message||"processing..."}),D.status==="complete")break}const j=await fetch(`${Se()}/api/job/${h}/download`);if(!j.ok)throw new Error(await oe(j));i(y,100),i(x,"complete!");const A=`${(et||"video").replace(/\.[^.]+$/,"")}_trimmed.mp4`,z=await j.blob();Fr(z,A),i(P,"success"),i(O,`${t(we)} complete! download started.`),ce.updateItem(ee,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>ce.remove(ee),5e3)}catch(Ze){i(P,"error"),i(O,Ze.message||"processing failed",!0),i(y,0),i(x,""),ce.updateItem(ee,{stage:"error",status:Ze.message||"processing failed"})}finally{i(C,!1),He&&Kr(He)}}var re=Zv(),me=ve(re);rr(me,{extraContent:ee=>{jr(ee,{})}});var Ne=u(me,2),ke=u(l(Ne),2),ne=l(ke);{var ze=H=>{var ee=Hv(),qe=ve(ee),Ee=l(qe);let He;Ee.__click=()=>i(o,"file");var Ze=u(Ee,2);let et;Ze.__click=()=>i(o,"url");var st=u(qe,2);{var k=b=>{var j=Uv();let q;j.__click=()=>te==null?void 0:te.click();var A=u(l(j),6);A.__change=z=>{var U;L((U=z.target.files)==null?void 0:U[0]),z.target.value=""},bs(A,z=>te=z,()=>te),W(()=>q=pe(j,1,"drop-zone svelte-oxrnxe",null,q,{dragover:t(ie)})),gt("dragover",j,z=>{z.preventDefault(),i(ie,!0)}),gt("dragleave",j,z=>{z.preventDefault(),i(ie,!1)}),gt("drop",j,z=>{var U,$;z.preventDefault(),i(ie,!1),L(($=(U=z.dataTransfer)==null?void 0:U.files)==null?void 0:$[0])}),m(b,j)},h=b=>{var j=Vv(),q=l(j);Kt(q,()=>t(n),A=>i(n,A)),m(b,j)};I(st,b=>{t(o)==="file"?b(k):b(h,!1)})}W(()=>{He=pe(Ee,1,"input-tab svelte-oxrnxe",null,He,{active:t(o)==="file"}),et=pe(Ze,1,"input-tab svelte-oxrnxe",null,et,{active:t(o)==="url"})}),m(H,ee)},Ie=H=>{var ee=Jv(),qe=l(ee),Ee=u(l(qe),2),He=l(Ee),Ze=l(He),et=u(He,2),st=l(et),k=u(Ee,2);k.__click=se,W(h=>{_t(He,"title",t(a)?t(a).fileName:t(r).name),R(Ze,t(a)?t(a).fileName:t(r).name),R(st,h)},[()=>t(a)?er(t(a).fileSize):er(t(r).size)]),m(H,ee)};I(ne,H=>{!t(r)&&!t(a)?H(ze):H(Ie,!1)})}var Ge=u(ne,2);{var V=H=>{var ee=Gv(),qe=l(ee),Ee=l(qe);bs(Ee,F=>i(de,F),()=>t(de));var He=u(Ee,2);{var Ze=F=>{var G=Wv(),he=ve(G),le=u(he,2),ae=u(le,2),De=u(ae,2);W(()=>{Xt(he,`height: ${t(Q).top??""}%`),Xt(le,`height: ${t(Q).bottom??""}%`),Xt(ae,`width: ${t(Q).left??""}%; top: ${t(Q).top??""}%; bottom: ${t(Q).bottom??""}%`),Xt(De,`width: ${t(Q).right??""}%; top: ${t(Q).top??""}%; bottom: ${t(Q).bottom??""}%`)}),m(F,G)};I(He,F=>{t(Q)&&F(Ze)})}var et=u(qe,2),st=l(et),k=l(st);k.__click=fe;var h=u(k,2),b=l(h),j=u(h,4),q=l(j),A=u(j,2);A.__click=Z;var z=u(st,2),U=l(z),$=u(z,2),N=u(l($)),D=l(N);W((F,G)=>{_t(Ee,"src",t(_e)),R(b,F),R(q,G),Xt(U,`left: ${t($e)??""}%; right: ${100-t(Je)}%`),R(D,t(X))},[()=>Me(t(_)),()=>Me(t(S))]),gt("loadedmetadata",Ee,B),m(H,ee)};I(Ge,H=>{t(r)&&t(_e)&&H(V)})}var Y=u(Ge,2);{var xe=H=>{var ee=Yv(),qe=u(l(ee),2),Ee=l(qe),He=u(l(Ee),2);He.__input=st=>ue(st.target.value);var Ze=u(Ee,4),et=u(l(Ze),2);et.__input=st=>ge(st.target.value),W(()=>{on(He,t(d)),on(et,t(p))}),m(H,ee)};I(Y,H=>{t(o)==="url"&&!t(r)&&!t(a)&&H(xe)})}var We=u(Y,2),Xe=u(l(We),2);nt(Xe,21,()=>je,ot,(H,ee)=>{var qe=Qv();let Ee;qe.__click=()=>i(w,t(ee).value,!0);var He=l(qe);W(()=>{Ee=pe(qe,1,"segment svelte-oxrnxe",null,Ee,{active:t(w)===t(ee).value}),R(He,t(ee).label)}),m(H,qe)});var ye=u(We,2);ye.__click=K;var Pe=u(l(ye)),tt=u(ye,2);{var at=H=>{var ee=Kv(),qe=l(ee);wn(qe,{get percent(){return t(y)},get label(){return t(x)}}),m(H,ee)};I(tt,H=>{t(C)&&H(at)})}var ht=u(tt,2);{var ct=H=>{var ee=Xv(),qe=l(ee);W(()=>{pe(ee,1,`status ${t(P)??""}`,"svelte-oxrnxe"),R(qe,t(O))}),m(H,ee)};I(ht,H=>{t(P)&&H(ct)})}var Ye=u(Ne,2);Cr(Ye),W(H=>{ye.disabled=H,R(Pe,` ${(t(C)?"processing...":t(we))??""}`)},[()=>t(C)||!t(r)&&!t(a)&&!(t(o)==="url"&&t(n).trim())]),m(e,re),zt()}qt(["click","change","input"]);var tu=E('<button type="button"><svg class="drop-zone-icon svelte-am61ph" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-am61ph">drop a video or audio file here</p> <p class="drop-zone-hint svelte-am61ph">supports mp4, webm, mov, mkv, mp3, wav, flac, m4a (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>'),su=E('<div class="url-input-section svelte-am61ph"><input type="url" class="url-input svelte-am61ph" placeholder="https://youtube.com/watch?v=..."/> <p class="url-hint svelte-am61ph">paste a link to any video or audio â youtube, twitter, tiktok, etc.</p></div>'),ru=E('<div class="input-tabs svelte-am61ph"><button>upload file</button> <button>paste link</button></div> <!>',1),nu=E('<div class="file-info svelte-am61ph"><div class="file-header svelte-am61ph"><div class="file-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-am61ph"><div class="file-name svelte-am61ph"> </div> <div class="file-size svelte-am61ph"> </div></div> <button class="file-remove svelte-am61ph" aria-label="Remove file"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-am61ph"><span> </span></div></div>'),au=Be('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),iu=Be('<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line>',1),ou=E('<div class="file-info svelte-am61ph"><div class="file-header svelte-am61ph"><div class="file-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><!></svg></div> <div class="file-details svelte-am61ph"><div class="file-name svelte-am61ph"> </div> <div class="file-size svelte-am61ph"> </div></div> <button class="file-remove svelte-am61ph" aria-label="Remove file"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-am61ph"><span> </span></div></div>'),lu=E('<button><div class="mode-option-value svelte-am61ph"> </div> <div class="mode-option-label svelte-am61ph"> </div></button>'),cu=E('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">subtitle format</div> <div class="format-row svelte-am61ph"><button>SRT</button> <button>ASS</button></div></div>'),vu=E('<button><div class="mode-option-value svelte-am61ph"> </div> <div class="mode-option-label svelte-am61ph"> </div></button>'),uu=E('<div class="caption-preview svelte-am61ph"><div class="caption-preview-text svelte-am61ph"> </div></div>'),du=E('<div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">caption size</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="40" max="120" step="2"/> <div class="slider-hint svelte-am61ph">size of caption text</div></div>'),fu=E('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">caption formatting</div> <div class="section-description svelte-am61ph">control how captions are split and timed</div> <!> <!> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">max words per caption</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="20" step="1"/> <div class="slider-hint svelte-am61ph">split long captions into smaller chunks</div></div> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">max characters per line</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="80" step="1"/> <div class="slider-hint svelte-am61ph">wrap long lines to fit on screen</div></div> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">minimum duration</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="5" step="0.1"/> <div class="slider-hint svelte-am61ph">keep captions on screen longer</div></div> <div class="slider-group svelte-am61ph"><div class="slider-header svelte-am61ph"><span class="slider-label svelte-am61ph">gap between captions</span> <span class="slider-value svelte-am61ph"> </span></div> <input type="range" class="caption-slider svelte-am61ph" min="0" max="1" step="0.05"/> <div class="slider-hint svelte-am61ph">add breathing room between captions</div></div></div>'),pu=E('<div class="section svelte-am61ph"><div class="section-label svelte-am61ph">language hint</div> <div class="section-description svelte-am61ph">optional, auto-detected if empty (e.g. en, es, ja, fr)</div> <input type="text" class="language-input svelte-am61ph" placeholder="auto-detect" maxlength="5"/></div> <!>',1),hu=E('<div class="progress-container svelte-am61ph"><div class="progress-header svelte-am61ph"><span class="progress-status svelte-am61ph"> </span> <span class="progress-percent svelte-am61ph"> </span></div> <!> <div class="progress-details svelte-am61ph"> </div></div>'),gu=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg> copied!',1),mu=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> copy text',1),wu=E('<div class="result-container svelte-am61ph"><div class="result-header svelte-am61ph"><div class="result-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-am61ph">transcription complete!</div></div> <div class="transcript-box svelte-am61ph"><pre class="transcript-text svelte-am61ph"> </pre></div> <div class="result-actions svelte-am61ph"><button class="result-btn copy-btn svelte-am61ph"><!></button> <button class="result-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> transcribe another</button></div></div>'),_u=E('<div class="result-container svelte-am61ph"><div class="result-header svelte-am61ph"><div class="result-icon svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-am61ph"> </div></div> <button class="result-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> transcribe another</button></div>'),yu=E('<!> <main class="svelte-am61ph"><div class="page-header svelte-am61ph"><h1 class="svelte-am61ph">transcribe</h1> <p class="svelte-am61ph">get subtitles, captions, or a text transcript from any video or audio</p></div> <div class="transcribe-container svelte-am61ph"><!> <div class="section svelte-am61ph"><div class="section-label svelte-am61ph">output mode</div> <div class="section-description svelte-am61ph">choose what you want back</div> <div class="mode-grid svelte-am61ph"></div></div> <!> <div class="section svelte-am61ph"><div class="section-label svelte-am61ph">model</div> <div class="section-description svelte-am61ph">larger models are more accurate but slower</div> <div class="model-grid svelte-am61ph"></div></div> <button class="advanced-toggle svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg> advanced options</button> <!> <div class="estimate-row svelte-am61ph"><span class="estimate-label svelte-am61ph">estimated time</span> <span> </span></div> <button class="transcribe-btn svelte-am61ph"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-am61ph"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg> </button> <!> <!></div></main> <!>',1);function bu(e,s){Tt(s,!0);let r=M(null),n=M(0),o=M(""),a=M("file"),c=M(null);const f=mn();f.url&&(i(o,f.url,!0),i(a,"url"));let v=M("text"),g=M("base"),_=M("srt"),S=M(""),d=M(72),p=M(0),w=M(0),C=M(0),y=M(0),x=M(!1),P=M(!1),O=M(0),ie=M(""),te=M(""),de=M(!1),_e=M(""),je=M(!1),Te=M(!1),X;const $e=[{id:"text",label:"text",sublabel:"plain transcript"},{id:"subtitles",label:"subtitles",sublabel:"SRT / ASS file"},{id:"captions",label:"captions",sublabel:"burned into video"}],Je=[{id:"tiny",label:"tiny",sublabel:"fastest, less accurate"},{id:"base",label:"base",sublabel:"recommended"},{id:"small",label:"small",sublabel:"slower, more accurate"},{id:"medium",label:"medium",sublabel:"slowest local model"},{id:"large",label:"large",sublabel:"cloud, best quality"}];let we=be(()=>t(v)==="subtitles"||t(v)==="captions");const Oe="lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua".split(" ");let Me=be(()=>{const k=t(p)>0?t(p):7;let h=Oe.slice(0,k).join(" ");if(t(w)>0){const b=h.split(" "),j=[];let q=b[0]||"";for(let A=1;A<b.length;A++)q.length+1+b[A].length<=t(w)?q+=" "+b[A]:(j.push(q),q=b[A]);j.push(q),h=j.join(`
`)}return h});const J={tiny:.17,base:.33,small:1,medium:3.3,large:1.5};let B=be(()=>{if(t(a)==="url"&&!t(c)&&!t(r))return t(o)?"paste a link and transcribe to see estimate":"paste a link to see estimate";if(!t(r)&&!t(c)||!t(n))return"select a file to see estimate";const k=t(n)/60,h=J[t(g)],b=Math.ceil(k*h);return b<1?"less than a minute":b===1?"~1 minute":`~${b} minutes`}),L=be(()=>t(r)&&t(n)&&Math.ceil(t(n)/60*J[t(g)])>30),se=be(()=>{if(!t(n))return"--:--";const k=Math.floor(t(n)/60),h=Math.floor(t(n)%60);return`${k}:${h.toString().padStart(2,"0")}`});function fe(k){return new Promise(h=>{const b=k.type.startsWith("video/")?document.createElement("video"):document.createElement("audio");b.preload="metadata",b.onloadedmetadata=()=>{URL.revokeObjectURL(b.src),h(b.duration||0)},b.onerror=()=>{URL.revokeObjectURL(b.src),h(0)},b.src=URL.createObjectURL(k)})}async function Z(k){if(!k)return;if(!(k.type.startsWith("video/")||k.type.startsWith("audio/"))){Ce("Please select a video or audio file","error");return}const b=8*1024*1024*1024;if(k.size>b){Ce("File too large. Maximum size is 8GB.","error");return}i(r,k,!0),i(de,!1),i(_e,""),i(n,await fe(k),!0)}function ue(){i(r,null),i(n,0),i(O,0),i(ie,""),i(te,""),i(de,!1),i(_e,""),i(je,!1),X&&(X.value="")}async function ge(){try{await navigator.clipboard.writeText(t(_e)),i(je,!0),Ce("Copied to clipboard!","success"),setTimeout(()=>{i(je,!1)},2e3)}catch{Ce("Failed to copy","error")}}async function Q(){const k=t(a)==="url"&&t(o).trim();if(!t(r)&&!k||t(P))return;t(L)&&Ce("This may take over 30 minutes. Consider using a faster model.","warning"),i(P,!0),i(O,0),i(de,!1),i(_e,"");const h=k?`URL â ${t(v)}`:`${t(r).name} â ${t(v)}`,b=Date.now().toString()+Math.random().toString(36).slice(2,11);ce.add({id:b,title:h,type:"transcribe",stage:k?"downloading":"uploading",status:k?"downloading media...":"uploading...",progress:0,startTime:Date.now()});let j=null;try{j=Qr();let q;if(k){i(ie,"downloading media..."),i(te,"fetching media from URL..."),ce.updateItem(b,{status:"downloading media..."});const $=await fetch(`${Se()}/api/fetch-url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t(o).trim()})});if(!$.ok){let G="Failed to download from URL";try{G=(await $.json()).error||G}catch{}throw new Error(G)}const N=await $.json();i(c,N,!0),i(n,N.duration||0,!0),ce.updateItem(b,{title:`${N.fileName} â ${t(v)}`,stage:"transcribing",status:"transcribing...",progress:0}),i(O,0),i(ie,"transcribing..."),i(te,"starting transcription...");const D=await fetch(`${Se()}/api/transcribe-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:N.filePath,fileName:N.fileName,outputMode:t(v),model:t(g),subtitleFormat:t(_),language:t(S)||void 0,...t(d)!==72&&{captionSize:t(d)},...t(p)>0&&{maxWordsPerCaption:t(p)},...t(w)>0&&{maxCharsPerLine:t(w)},...t(C)>0&&{minDuration:t(C)},...t(y)>0&&{captionGap:t(y)}})});if(!D.ok){let G="Failed to start transcription";try{G=(await D.json()).error||G}catch{}throw new Error(G)}q=(await D.json()).jobId}else{const $=t(r).size>94371840;if(i(ie,"uploading..."),i(te,"sending file to server..."),$){i(ie,"uploading..."),i(te,"large file detected, uploading in chunks...");const N=await _n(t(r),le=>{i(O,le,!0),i(te,"uploading chunks..."),ce.updateItem(b,{progress:le,status:"uploading..."})}),{filePath:D,fileName:F}=N;i(O,0),i(ie,"transcribing..."),i(te,"starting transcription..."),ce.updateItem(b,{stage:"transcribing",status:"transcribing...",progress:0});const G=await fetch(`${Se()}/api/transcribe-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:D,fileName:F,outputMode:t(v),model:t(g),subtitleFormat:t(_),language:t(S)||void 0,...t(d)!==72&&{captionSize:t(d)},...t(p)>0&&{maxWordsPerCaption:t(p)},...t(w)>0&&{maxCharsPerLine:t(w)},...t(C)>0&&{minDuration:t(C)},...t(y)>0&&{captionGap:t(y)}})});if(!G.ok){let le="Failed to start transcription";try{le=(await G.json()).error||le}catch{}throw new Error(le)}q=(await G.json()).jobId}else{const N=new FormData;N.append("file",t(r)),N.append("outputMode",t(v)),N.append("model",t(g)),N.append("subtitleFormat",t(_)),t(S)&&N.append("language",t(S)),t(d)!==72&&N.append("captionSize",t(d)),t(p)>0&&N.append("maxWordsPerCaption",t(p)),t(w)>0&&N.append("maxCharsPerLine",t(w)),t(C)>0&&N.append("minDuration",t(C)),t(y)>0&&N.append("captionGap",t(y));const D=await fetch(`${Se()}/api/transcribe`,{method:"POST",body:N});if(!D.ok){let G="Failed to start transcription";try{G=(await D.json()).error||G}catch{}throw new Error(G)}q=(await D.json()).jobId}}i(ie,"transcribing..."),i(te,"starting transcription..."),ce.updateItem(b,{stage:"transcribing",status:"transcribing...",progress:0});const A=Date.now(),z=3600*1e3;let U=0;for(;Date.now()-A<=z;){await new Promise($=>setTimeout($,2e3));try{const $=new AbortController,N=setTimeout(()=>$.abort(),1e4);let D;try{D=await fetch(`${Se()}/api/job/${q}/status`,{signal:$.signal})}finally{clearTimeout(N)}if(!D.ok)throw new Error(`Server returned ${D.status}`);const F=await D.json();if(U=0,F.status==="error")throw new Error(F.error||"Transcription failed");if(F.progress!==void 0&&i(O,F.progress,!0),F.message&&(i(te,F.message,!0),i(ie,"transcribing...")),ce.updateItem(b,{progress:F.progress||0,status:F.message||"transcribing..."}),F.status==="complete"){F.textContent&&i(_e,F.textContent,!0);break}}catch($){if(U++,U>=5)throw new Error(`Failed to check job status after 5 attempts: ${$.message}`)}}if(Date.now()-A>z)throw new Error("Job timed out after 60 minutes.");if(t(v)==="text"){if(!t(_e)){const $=await fetch(`${Se()}/api/job/${q}/download`);if(!$.ok)throw new Error("Failed to download transcript");i(_e,await $.text(),!0)}i(de,!0),Ce("Transcription complete!","success")}else{const $=await fetch(`${Se()}/api/job/${q}/download`);if(!$.ok)throw new Error("Failed to download result");const N=await $.blob(),F=($.headers.get("content-disposition")||"").match(/filename="([^"]+)"/),G=F?F[1]:t(v)==="captions"?"captioned.mp4":`subtitles.${t(_)}`;Fr(N,G),i(de,!0),Ce("Transcription complete!","success")}ce.updateItem(b,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>ce.remove(b),5e3)}catch(q){Ce(q.message||"Transcription failed","error"),ce.updateItem(b,{stage:"error",status:q.message||"transcription failed"})}finally{i(P,!1),i(O,0),i(ie,""),i(te,""),j&&Kr(j)}}var oe=yu(),K=ve(oe);rr(K,{extraContent:h=>{jr(h,{})}});var re=u(K,2),me=u(l(re),2),Ne=l(me);{var ke=k=>{var h=ru(),b=ve(h),j=l(b);let q;j.__click=()=>i(a,"file");var A=u(j,2);let z;A.__click=()=>i(a,"url");var U=u(b,2);{var $=D=>{var F=tu();let G;F.__click=()=>X==null?void 0:X.click();var he=u(l(F),6);he.__change=le=>{var ae;Z((ae=le.target.files)==null?void 0:ae[0]),le.target.value=""},bs(he,le=>X=le,()=>X),W(()=>G=pe(F,1,"drop-zone svelte-am61ph",null,G,{dragover:t(Te)})),gt("dragover",F,le=>{le.preventDefault(),i(Te,!0)}),gt("dragleave",F,le=>{le.preventDefault(),i(Te,!1)}),gt("drop",F,le=>{var ae,De;le.preventDefault(),i(Te,!1),Z((De=(ae=le.dataTransfer)==null?void 0:ae.files)==null?void 0:De[0])}),m(D,F)},N=D=>{var F=su(),G=l(F);Kt(G,()=>t(o),he=>i(o,he)),m(D,F)};I(U,D=>{t(a)==="file"?D($):D(N,!1)})}W(()=>{q=pe(j,1,"input-tab svelte-am61ph",null,q,{active:t(a)==="file"}),z=pe(A,1,"input-tab svelte-am61ph",null,z,{active:t(a)==="url"})}),m(k,h)},ne=k=>{var h=Re(),b=ve(h);{var j=A=>{var z=nu(),U=l(z),$=u(l(U),2),N=l($),D=l(N),F=u(N,2),G=l(F),he=u($,2);he.__click=()=>{i(c,null),i(n,0)};var le=u(U,2),ae=l(le),De=l(ae);W(Ue=>{_t(N,"title",t(c).fileName),R(D,t(c).fileName),R(G,Ue),R(De,`duration: ${(t(n)?t(se):"unknown")??""}`)},[()=>er(t(c).fileSize)]),m(A,z)},q=A=>{var z=ou(),U=l(z),$=l(U),N=l($),D=l(N);{var F=Qe=>{var mt=au();m(Qe,mt)},G=Qe=>{var mt=iu();m(Qe,mt)};I(D,Qe=>{t(r).type.startsWith("audio/")?Qe(F):Qe(G,!1)})}var he=u($,2),le=l(he),ae=l(le),De=u(le,2),Ue=l(De),rt=u(he,2);rt.__click=ue;var vt=u(U,2),it=l(vt),jt=l(it);W(Qe=>{_t(le,"title",t(r).name),R(ae,t(r).name),R(Ue,Qe),R(jt,`duration: ${(t(n)?t(se):"unknown")??""}`)},[()=>er(t(r).size)]),m(A,z)};I(b,A=>{t(c)?A(j):A(q,!1)},!0)}m(k,h)};I(Ne,k=>{!t(r)&&!t(c)?k(ke):k(ne,!1)})}var ze=u(Ne,2),Ie=u(l(ze),4);nt(Ie,21,()=>$e,ot,(k,h)=>{var b=lu();let j;b.__click=()=>i(v,t(h).id,!0);var q=l(b),A=l(q),z=u(q,2),U=l(z);W(()=>{j=pe(b,1,"mode-option svelte-am61ph",null,j,{active:t(v)===t(h).id}),R(A,t(h).label),R(U,t(h).sublabel)}),m(k,b)});var Ge=u(ze,2);{var V=k=>{var h=cu(),b=u(l(h),2),j=l(b);let q;j.__click=()=>i(_,"srt");var A=u(j,2);let z;A.__click=()=>i(_,"ass"),W(()=>{q=pe(j,1,"format-btn svelte-am61ph",null,q,{active:t(_)==="srt"}),z=pe(A,1,"format-btn svelte-am61ph",null,z,{active:t(_)==="ass"})}),m(k,h)};I(Ge,k=>{t(v)==="subtitles"&&k(V)})}var Y=u(Ge,2),xe=u(l(Y),4);nt(xe,21,()=>Je,ot,(k,h)=>{var b=vu();let j;b.__click=()=>i(g,t(h).id,!0);var q=l(b),A=l(q),z=u(q,2),U=l(z);W(()=>{j=pe(b,1,"mode-option svelte-am61ph",null,j,{active:t(g)===t(h).id}),R(A,t(h).label),R(U,t(h).sublabel)}),m(k,b)});var We=u(Y,2);We.__click=()=>i(x,!t(x));var Xe=l(We);let ye;var Pe=u(We,2);{var tt=k=>{var h=pu(),b=ve(h),j=u(l(b),4);j.__input=z=>i(S,z.target.value.trim(),!0);var q=u(b,2);{var A=z=>{var U=fu(),$=u(l(U),4);{var N=dt=>{var rs=uu(),js=l(rs),Tr=l(js);W(()=>{Xt(js,`font-size: calc(${t(d)??""} / 19.2 * 1cqw); white-space: pre-line;`),R(Tr,t(Me))}),m(dt,rs)};I($,dt=>{(t(v)==="captions"||t(_)==="ass")&&dt(N)})}var D=u($,2);{var F=dt=>{var rs=du(),js=l(rs),Tr=u(l(js),2),yn=l(Tr),zr=u(js,2);W(()=>R(yn,t(d))),Kt(zr,()=>t(d),Xr=>i(d,Xr)),m(dt,rs)};I(D,dt=>{(t(v)==="captions"||t(_)==="ass")&&dt(F)})}var G=u(D,2),he=l(G),le=u(l(he),2),ae=l(le),De=u(he,2),Ue=u(G,2),rt=l(Ue),vt=u(l(rt),2),it=l(vt),jt=u(rt,2),Qe=u(Ue,2),mt=l(Qe),Rt=u(l(mt),2),lt=l(Rt),ut=u(mt,2),ks=u(Qe,2),Gt=l(ks),Bt=u(l(Gt),2),Ss=l(Bt),Bs=u(Gt,2);W((dt,rs)=>{R(ae,t(p)===0?"off":t(p)),R(it,t(w)===0?"off":t(w)),R(lt,dt),R(Ss,rs)},[()=>t(C)===0?"off":t(C).toFixed(1)+"s",()=>t(y)===0?"off":t(y).toFixed(2)+"s"]),Kt(De,()=>t(p),dt=>i(p,dt)),Kt(jt,()=>t(w),dt=>i(w,dt)),Kt(ut,()=>t(C),dt=>i(C,dt)),Kt(Bs,()=>t(y),dt=>i(y,dt)),m(z,U)};I(q,z=>{t(we)&&z(A)})}W(()=>on(j,t(S))),m(k,h)};I(Pe,k=>{t(x)&&k(tt)})}var at=u(Pe,2),ht=u(l(at),2);let ct;var Ye=l(ht),H=u(at,2);H.__click=Q;var ee=u(l(H)),qe=u(H,2);{var Ee=k=>{var h=hu(),b=l(h),j=l(b),q=l(j),A=u(j,2),z=l(A),U=u(b,2);wn(U,{get percent(){return t(O)}});var $=u(U,2),N=l($);W(D=>{R(q,t(ie)),R(z,`${D??""}%`),R(N,t(te))},[()=>Math.round(t(O))]),m(k,h)};I(qe,k=>{t(P)&&k(Ee)})}var He=u(qe,2);{var Ze=k=>{var h=wu(),b=u(l(h),2),j=l(b),q=l(j),A=u(b,2),z=l(A);z.__click=ge;var U=l(z);{var $=F=>{var G=gu();m(F,G)},N=F=>{var G=mu();m(F,G)};I(U,F=>{t(je)?F($):F(N,!1)})}var D=u(z,2);D.__click=ue,W(()=>R(q,t(_e))),m(k,h)},et=k=>{var h=Re(),b=ve(h);{var j=q=>{var A=_u(),z=l(A),U=u(l(z),2),$=l(U),N=u(z,2);N.__click=ue,W(()=>R($,t(v)==="captions"?"captions burned in!":"subtitles ready!")),m(q,A)};I(b,q=>{t(de)&&q(j)},!0)}m(k,h)};I(He,k=>{t(de)&&t(v)==="text"?k(Ze):k(et,!1)})}var st=u(re,2);Cr(st),W(k=>{ye=pe(Xe,0,"svelte-am61ph",null,ye,{rotated:t(x)}),ct=pe(ht,1,"estimate-value svelte-am61ph",null,ct,{"estimate-warning":t(L)}),R(Ye,t(B)),H.disabled=k,R(ee,` ${t(P)?"transcribing...":"transcribe"}`)},[()=>!t(r)&&!(t(a)==="url"&&t(o).trim())||t(P)]),m(e,oe),zt()}qt(["click","change","input"]);var xu=E(`<!> <main class="svelte-13tj7i"><div class="page-header svelte-13tj7i"><h1 class="svelte-13tj7i">privacy policy</h1> <p class="svelte-13tj7i">no legal jargon, just the truth</p></div> <div class="tldr-box svelte-13tj7i"><h3 class="svelte-13tj7i">tl;dr</h3> <p class="svelte-13tj7i">yoink doesn't collect anything. no tracking, no cookies, no analytics. your files are stored on an encrypted volume with a key that only exists in RAM, and get wiped automatically.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">who runs this</h2> <p class="svelte-13tj7i">just me, one person. i made yoink because i wanted a simple tool that does what it says without being weird about your data. i was inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-13tj7i">cobalt.tools</a> and <a href="https://vert.sh" target="_blank" rel="noopener" class="svelte-13tj7i">vert.sh</a>, and wanted to combine the best parts into one site.</p> <p class="svelte-13tj7i">im not a company, i have no investors, and i have no reason to collect your data.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">your files</h2> <p class="svelte-13tj7i">files are stored on a LUKS2 encrypted volume on the server. the encryption key is randomly generated at every boot, stored only in RAM, never written to disk, so if the server ever powers off the key is gone and the data is just unrecoverable.</p> <p class="svelte-13tj7i">once your download or conversion is done, the file gets deleted immediately from that encrypted volume. there's also a cleanup job that runs every 5 minutes and wipes anything older than 20 minutes no matter what, just in case something slips through.</p> <p class="svelte-13tj7i">we don't log what you download, what you convert, what you compress, or any filenames or URLs. none of that gets saved anywhere.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">what we collect</h2> <p class="svelte-13tj7i">nothing. literally zero.</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">no analytics</strong> - no tracking scripts, no usage stats, nothing</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no cookies</strong> - we don't set a single cookie</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no IP logging</strong> - your IP isn't stored or logged</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no content logging</strong> - URLs, filenames, and what you do here are not recorded</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no accounts</strong> - there's nothing to sign up for, no emails collected</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no third party stuff</strong> - no google analytics, no facebook pixel, no ad networks</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">encryption</h2> <p class="svelte-13tj7i">two layers:</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">in transit</strong>: everything goes through HTTPS, so your connection to yoink is encrypted end to end, nobody between you and the server can see what you're doing.</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">at rest</strong>: all temporary files go on a LUKS2 encrypted volume (AES-256). the decryption key is generated fresh at every server boot using /dev/urandom, kept only in RAM, never written anywhere. no way to recover files after a reboot, and no way to read them without the key that only exists in memory.</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">open source</h2> <p class="svelte-13tj7i">the whole thing is on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>. you can read every line of code yourself if you want to verify any of this. if you find something off, please tell me.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">contact</h2> <p class="svelte-13tj7i">questions, concerns, or just want to say hi, reach me at <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-13tj7i">coah80.com</a> or open an issue on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">changes</h2> <p class="svelte-13tj7i">if this policy changes, it gets updated here. no sneaky edits. last updated: <strong class="svelte-13tj7i">february 23, 2026</strong>.</p></div></main> <!>`,1);function ku(e){var s=xu(),r=ve(s);rr(r,{});var n=u(r,4);Cr(n),m(e,s)}var Su=E('<div class="spinner-wrap svelte-121vd2i"><!></div> <h1 class="svelte-121vd2i">downloading...</h1> <p class="svelte-121vd2i">your download should start automatically</p>',1),ju=E('<h1 class="success svelte-121vd2i">done</h1> <p class="svelte-121vd2i">download started successfully</p>',1),Cu=E('<h1 class="error svelte-121vd2i">download failed</h1> <p class="svelte-121vd2i">this file is no longer available</p>',1),Tu=E('<main class="svelte-121vd2i"><div class="download-container svelte-121vd2i"><!> <div> </div></div></main>');function zu(e,s){Tt(s,!0);const r=()=>Wt(Ti,"$query",n),[n,o]=ps();let a=M("loading"),c=M("preparing download..."),f=be(()=>r().token||"");kr(()=>{const y=window.location.pathname.replace("/download","").replace(/^\//,""),x=t(f)||y;if(!x){i(a,"error"),i(c,"no download token provided");return}const P=`${Se()}/api/bot/download/${x}`;i(c,"starting download..."),fetch(P,{method:"HEAD"}).then(O=>{if(O.ok)i(c,"download started"),window.location.href=P,setTimeout(()=>{i(a,"success"),i(c,"you can close this page now")},2e3);else throw new Error("Download not available")}).catch(()=>{i(a,"error"),i(c,"the download link has expired (5 minute limit)")})});var v=Tu(),g=l(v),_=l(g);{var S=y=>{var x=Su(),P=ve(x),O=l(P);Pi(O),m(y,x)},d=y=>{var x=Re(),P=ve(x);{var O=te=>{var de=ju();m(te,de)},ie=te=>{var de=Cu();m(te,de)};I(P,te=>{t(a)==="success"?te(O):te(ie,!1)},!0)}m(y,x)};I(_,y=>{t(a)==="loading"?y(S):y(d,!1)})}var p=u(_,2);let w;var C=l(p);W(()=>{w=pe(p,1,"status svelte-121vd2i",null,w,{error:t(a)==="error",success:t(a)==="success"}),R(C,t(c))}),m(e,v),zt(),o()}var Eu=E('<main class="svelte-zxc657"><p>Redirecting...</p></main>');function $u(e,s){Tt(s,!1),kr(()=>{const n=new URLSearchParams(window.location.search),a=(n.get("url")||n.get("text")||"").match(/https?:\/\/[^\s]+/);let c=a?a[0]:"";if(c=c.replace(/[.,!?;:)\]}>]+$/,""),c)try{const f=new URL(c);(f.protocol==="http:"||f.protocol==="https:")&&localStorage.setItem("yoink_shared_url",JSON.stringify({url:c,timestamp:Date.now()}))}catch{}Sr("/")}),Si();var r=Eu();m(e,r),zt()}function Mu(e,s){Tt(s,!1),kr(()=>{Sr("/?updates")}),Si(),zt()}var Pu=E(`<!> <main class="svelte-kbj945"><div class="not-found svelte-kbj945"><h1 class="svelte-kbj945">404</h1> <p class="svelte-kbj945">this page doesn't exist</p> <a href="/" class="back-link svelte-kbj945">go back home</a></div></main>`,1);function Iu(e){var s=Pu(),r=ve(s);rr(r,{}),m(e,s)}var qu=E(`<div class="banner-overlay svelte-v9gb2s" role="dialog" aria-modal="true" aria-label="What's new"><div class="banner-card svelte-v9gb2s"><div class="banner-meta svelte-v9gb2s"><span class="banner-version svelte-v9gb2s"> </span> <span class="banner-date svelte-v9gb2s"> </span></div> <h2 class="banner-title svelte-v9gb2s"> </h2> <img class="banner-image svelte-v9gb2s"/> <p class="banner-summary svelte-v9gb2s"> </p> <div class="banner-actions svelte-v9gb2s"><button class="banner-btn primary svelte-v9gb2s">go to post</button> <button class="banner-btn svelte-v9gb2s">dismiss</button></div></div></div>`);function Ru(e,s){Tt(s,!0);let r=M(!1),n=Ii[0];kr(()=>{localStorage.getItem("yoink-update-dismissed")!==jn&&i(r,!0)});function o(){localStorage.setItem("yoink-update-dismissed",jn),i(r,!1)}function a(){localStorage.setItem("yoink-update-dismissed",jn),i(r,!1),Sr("/?updates")}var c=Re(),f=ve(c);{var v=g=>{var _=qu();_.__click=Te=>{Te.target===Te.currentTarget&&o()},_.__keydown=Te=>{Te.key==="Escape"&&o()};var S=l(_),d=l(S),p=l(d),w=l(p),C=u(p,2),y=l(C),x=u(d,2),P=l(x),O=u(x,2),ie=u(O,2),te=l(ie),de=u(ie,2),_e=l(de);_e.__click=a;var je=u(_e,2);je.__click=o,W(()=>{R(w,n.version),R(y,n.date),R(P,n.title),_t(O,"src",n.image),_t(O,"alt",n.title),R(te,n.summary)}),m(g,_)};I(f,g=>{t(r)&&g(v)})}m(e,c),zt()}qt(["click","keydown"]);var Bu=E("<!> <!> <!> <!>",1);function Du(e,s){Tt(s,!0);const r=()=>Wt(gn,"$path",n),[n,o]=ps(),a={"/":Hc,"/settings":mv,"/convert":$v,"/compress":Lv,"/trim":eu,"/transcribe":bu,"/privacy":ku,"/download":zu,"/share":$u,"/updates":Mu};let c=be(r),f=be(()=>a[t(c)]||Iu);function v(w){const C=w.target.closest("a");if(!C)return;const y=C.getAttribute("href");!y||!y.startsWith("/")||C.target==="_blank"||(w.preventDefault(),Sr(y))}kr(()=>{ml(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(ce.reconnectOnResume(),wl())})});var g=Bu();gt("click",br.body,v);var _=ve(g);Yo(_,()=>t(f),(w,C)=>{C(w,{})});var S=u(_,2);oc(S,{});var d=u(S,2);ul(d);var p=u(d,2);Ru(p,{}),m(e,g),zt(),o()}Uo(Du,{target:document.getElementById("app")});
