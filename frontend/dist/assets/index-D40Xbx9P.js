var uo=Object.defineProperty;var qr=e=>{throw TypeError(e)};var vo=(e,t,s)=>t in e?uo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var jt=(e,t,s)=>vo(e,typeof t!="symbol"?t+"":t,s),Jn=(e,t,s)=>t.has(e)||qr("Cannot "+s);var w=(e,t,s)=>(Jn(e,t,"read from private field"),s?s.call(e):t.get(e)),ie=(e,t,s)=>t.has(e)?qr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),se=(e,t,s,n)=>(Jn(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),We=(e,t,s)=>(Jn(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const Kn=!1;var ti=Array.isArray,fo=Array.prototype.indexOf,Us=Array.prototype.includes,Dn=Array.from,si=Object.defineProperty,nn=Object.getOwnPropertyDescriptor,ni=Object.getOwnPropertyDescriptors,po=Object.prototype,ho=Array.prototype,pr=Object.getPrototypeOf,Mr=Object.isExtensible;const ns=()=>{};function go(e){return e()}function Pn(e){for(var t=0;t<e.length;t++)e[t]()}function ri(){var e,t,s=new Promise((n,i)=>{e=n,t=i});return{promise:s,resolve:e,reject:t}}const Ue=2,qn=4,pn=8,ii=1<<24,Qt=16,Ct=32,js=64,hr=128,pt=512,Ne=1024,Ve=2048,zt=4096,ct=8192,rs=16384,gr=32768,us=65536,$r=1<<17,oi=1<<18,Ws=1<<19,ai=1<<20,Gt=1<<25,Ss=32768,Xn=1<<21,mr=1<<22,is=1<<23,Bs=Symbol("$state"),mo=Symbol(""),Is=new class extends Error{constructor(){super(...arguments);jt(this,"name","StaleReactionError");jt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function _o(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function wo(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function yo(e,t,s){throw new Error("https://svelte.dev/e/each_key_duplicate")}function bo(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ko(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function xo(e){throw new Error("https://svelte.dev/e/effect_orphan")}function So(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function To(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function zo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Co(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function jo(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Eo=1,Po=2,li=4,qo=8,Mo=16,ci=1,$o=2,Fe=Symbol(),Io="http://www.w3.org/1999/xhtml";function Bo(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ui(e){return e===this.v}function vi(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function di(e){return!vi(e,this.v)}let hn=!1,Do=!1;function Ro(){hn=!0}let Ie=null;function Vs(e){Ie=e}function mt(e,t=!1,s){Ie={p:Ie,i:!1,c:null,e:null,s:e,x:null,l:hn&&!t?{s:null,u:null,$:[]}:null}}function _t(e){var t=Ie,s=t.e;if(s!==null){t.e=null;for(var n of s)Ii(n)}return t.i=!0,Ie=t.p,{}}function gn(){return!hn||Ie!==null&&Ie.l===null}let ds=[];function fi(){var e=ds;ds=[],Pn(e)}function Yt(e){if(ds.length===0&&!rn){var t=ds;queueMicrotask(()=>{t===ds&&fi()})}ds.push(e)}function Ao(){for(;ds.length>0;)fi()}function pi(e){var t=Ce;if(t===null)return ce.f|=is,e;if((t.f&gr)===0){if((t.f&hr)===0)throw e;t.b.error(e)}else Hs(e,t)}function Hs(e,t){for(;t!==null;){if((t.f&hr)!==0)try{t.b.error(e);return}catch(s){e=s}t=t.parent}throw e}const No=-7169;function $e(e,t){e.f=e.f&No|t}function _r(e){(e.f&pt)!==0||e.deps===null?$e(e,Ne):$e(e,zt)}function hi(e){if(e!==null)for(const t of e)(t.f&Ue)===0||(t.f&Ss)===0||(t.f^=Ss,hi(t.deps))}function gi(e,t,s){(e.f&Ve)!==0?t.add(e):(e.f&zt)!==0&&s.add(e),hi(e.deps),$e(e,Ne)}const zn=new Set;let oe=null,Zn=null,Le=null,Ze=[],Rn=null,er=!1,rn=!1;var Ds,Rs,ps,As,un,vn,hs,Vt,Ns,Rt,tr,sr,mi;const Er=class Er{constructor(){ie(this,Rt);jt(this,"committed",!1);jt(this,"current",new Map);jt(this,"previous",new Map);ie(this,Ds,new Set);ie(this,Rs,new Set);ie(this,ps,0);ie(this,As,0);ie(this,un,null);ie(this,vn,new Set);ie(this,hs,new Set);ie(this,Vt,new Map);jt(this,"is_fork",!1);ie(this,Ns,!1)}is_deferred(){return this.is_fork||w(this,As)>0}skip_effect(t){w(this,Vt).has(t)||w(this,Vt).set(t,{d:[],m:[]})}unskip_effect(t){var s=w(this,Vt).get(t);if(s){w(this,Vt).delete(t);for(var n of s.d)$e(n,Ve),xt(n);for(n of s.m)$e(n,zt),xt(n)}}process(t){var i;Ze=[],this.apply();var s=[],n=[];for(const r of t)We(this,Rt,tr).call(this,r,s,n);if(this.is_deferred()){We(this,Rt,sr).call(this,n),We(this,Rt,sr).call(this,s);for(const[r,a]of w(this,Vt))bi(r,a)}else{for(const r of w(this,Ds))r();w(this,Ds).clear(),w(this,ps)===0&&We(this,Rt,mi).call(this),Zn=this,oe=null,Ir(n),Ir(s),Zn=null,(i=w(this,un))==null||i.resolve()}Le=null}capture(t,s){s!==Fe&&!this.previous.has(t)&&this.previous.set(t,s),(t.f&is)===0&&(this.current.set(t,t.v),Le==null||Le.set(t,t.v))}activate(){oe=this,this.apply()}deactivate(){oe===this&&(oe=null,Le=null)}flush(){if(this.activate(),Ze.length>0){if(_i(),oe!==null&&oe!==this)return}else w(this,ps)===0&&this.process([]);this.deactivate()}discard(){for(const t of w(this,Rs))t(this);w(this,Rs).clear()}increment(t){se(this,ps,w(this,ps)+1),t&&se(this,As,w(this,As)+1)}decrement(t){se(this,ps,w(this,ps)-1),t&&se(this,As,w(this,As)-1),!w(this,Ns)&&(se(this,Ns,!0),Yt(()=>{se(this,Ns,!1),this.is_deferred()?Ze.length>0&&this.flush():this.revive()}))}revive(){for(const t of w(this,vn))w(this,hs).delete(t),$e(t,Ve),xt(t);for(const t of w(this,hs))$e(t,zt),xt(t);this.flush()}oncommit(t){w(this,Ds).add(t)}ondiscard(t){w(this,Rs).add(t)}settled(){return(w(this,un)??se(this,un,ri())).promise}static ensure(){if(oe===null){const t=oe=new Er;zn.add(oe),rn||Yt(()=>{oe===t&&t.flush()})}return oe}apply(){}};Ds=new WeakMap,Rs=new WeakMap,ps=new WeakMap,As=new WeakMap,un=new WeakMap,vn=new WeakMap,hs=new WeakMap,Vt=new WeakMap,Ns=new WeakMap,Rt=new WeakSet,tr=function(t,s,n){t.f^=Ne;for(var i=t.first,r=null;i!==null;){var a=i.f,l=(a&(Ct|js))!==0,c=l&&(a&Ne)!==0,d=c||(a&ct)!==0||w(this,Vt).has(i);if(!d&&i.fn!==null){l?i.f^=Ne:r!==null&&(a&(qn|pn|ii))!==0?r.b.defer_effect(i):(a&qn)!==0?s.push(i):wn(i)&&((a&Qt)!==0&&w(this,hs).add(i),an(i));var h=i.first;if(h!==null){i=h;continue}}var b=i.parent;for(i=i.next;i===null&&b!==null;)b===r&&(r=null),i=b.next,b=b.parent}},sr=function(t){for(var s=0;s<t.length;s+=1)gi(t[s],w(this,vn),w(this,hs))},mi=function(){var i;if(zn.size>1){this.previous.clear();var t=Le,s=!0;for(const r of zn){if(r===this){s=!1;continue}const a=[];for(const[c,d]of this.current){if(r.current.has(c))if(s&&d!==r.current.get(c))r.current.set(c,d);else continue;a.push(c)}if(a.length===0)continue;const l=[...r.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){var n=Ze;Ze=[];const c=new Set,d=new Map;for(const h of a)wi(h,l,c,d);if(Ze.length>0){oe=r,r.apply();for(const h of Ze)We(i=r,Rt,tr).call(i,h,[],[]);r.deactivate()}Ze=n}}oe=null,Le=t}this.committed=!0,zn.delete(this)};let os=Er;function Oo(e){var t=rn;rn=!0;try{for(var s;;){if(Ao(),Ze.length===0&&(oe==null||oe.flush(),Ze.length===0))return Rn=null,s;_i()}}finally{rn=t}}function _i(){er=!0;var e=null;try{for(var t=0;Ze.length>0;){var s=os.ensure();if(t++>1e3){var n,i;Fo()}s.process(Ze),as.clear()}}finally{Ze=[],er=!1,Rn=null}}function Fo(){try{So()}catch(e){Hs(e,Rn)}}let bt=null;function Ir(e){var t=e.length;if(t!==0){for(var s=0;s<t;){var n=e[s++];if((n.f&(rs|ct))===0&&wn(n)&&(bt=new Set,an(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?Ri(n):n.fn=null),(bt==null?void 0:bt.size)>0)){as.clear();for(const i of bt){if((i.f&(rs|ct))!==0)continue;const r=[i];let a=i.parent;for(;a!==null;)bt.has(a)&&(bt.delete(a),r.push(a)),a=a.parent;for(let l=r.length-1;l>=0;l--){const c=r[l];(c.f&(rs|ct))===0&&an(c)}}bt.clear()}}bt=null}}function wi(e,t,s,n){if(!s.has(e)&&(s.add(e),e.reactions!==null))for(const i of e.reactions){const r=i.f;(r&Ue)!==0?wi(i,t,s,n):(r&(mr|Qt))!==0&&(r&Ve)===0&&yi(i,t,n)&&($e(i,Ve),xt(i))}}function yi(e,t,s){const n=s.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const i of e.deps){if(Us.call(t,i))return!0;if((i.f&Ue)!==0&&yi(i,t,s))return s.set(i,!0),!0}return s.set(e,!1),!1}function xt(e){for(var t=Rn=e;t.parent!==null;){t=t.parent;var s=t.f;if(er&&t===Ce&&(s&Qt)!==0&&(s&oi)===0)return;if((s&(js|Ct))!==0){if((s&Ne)===0)return;t.f^=Ne}}Ze.push(t)}function bi(e,t){if(!((e.f&Ct)!==0&&(e.f&Ne)!==0)){(e.f&Ve)!==0?t.d.push(e):(e.f&zt)!==0&&t.m.push(e),$e(e,Ne);for(var s=e.first;s!==null;)bi(s,t),s=s.next}}function Lo(e){let t=0,s=Ts(0),n;return()=>{yr()&&(o(s),Fn(()=>(t===0&&(n=Es(()=>e(()=>on(s)))),t+=1,()=>{Yt(()=>{t-=1,t===0&&(n==null||n(),n=void 0,on(s))})})))}}var Uo=us|Ws|hr;function Vo(e,t,s){new Ho(e,t,s)}var vt,fr,Et,gs,Pt,dt,Xe,qt,Ht,es,ms,ts,Os,_s,Fs,Ls,Jt,In,Oe,Jo,Wo,nr,Cn,jn,rr;class Ho{constructor(t,s,n){ie(this,Oe);jt(this,"parent");jt(this,"is_pending",!1);ie(this,vt);ie(this,fr,null);ie(this,Et);ie(this,gs);ie(this,Pt);ie(this,dt,null);ie(this,Xe,null);ie(this,qt,null);ie(this,Ht,null);ie(this,es,null);ie(this,ms,0);ie(this,ts,0);ie(this,Os,!1);ie(this,_s,!1);ie(this,Fs,new Set);ie(this,Ls,new Set);ie(this,Jt,null);ie(this,In,Lo(()=>(se(this,Jt,Ts(w(this,ms))),()=>{se(this,Jt,null)})));se(this,vt,t),se(this,Et,s),se(this,gs,n),this.parent=Ce.b,this.is_pending=!!w(this,Et).pending,se(this,Pt,_n(()=>{Ce.b=this;{var i=We(this,Oe,nr).call(this);try{se(this,dt,ft(()=>n(i)))}catch(r){this.error(r)}w(this,ts)>0?We(this,Oe,jn).call(this):this.is_pending=!1}return()=>{var r;(r=w(this,es))==null||r.remove()}},Uo))}defer_effect(t){gi(t,w(this,Fs),w(this,Ls))}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!w(this,Et).pending}update_pending_count(t){We(this,Oe,rr).call(this,t),se(this,ms,w(this,ms)+t),!(!w(this,Jt)||w(this,Os))&&(se(this,Os,!0),Yt(()=>{se(this,Os,!1),w(this,Jt)&&Js(w(this,Jt),w(this,ms))}))}get_effect_pending(){return w(this,In).call(this),o(w(this,Jt))}error(t){var s=w(this,Et).onerror;let n=w(this,Et).failed;if(w(this,_s)||!s&&!n)throw t;w(this,dt)&&(nt(w(this,dt)),se(this,dt,null)),w(this,Xe)&&(nt(w(this,Xe)),se(this,Xe,null)),w(this,qt)&&(nt(w(this,qt)),se(this,qt,null));var i=!1,r=!1;const a=()=>{if(i){Bo();return}i=!0,r&&jo(),os.ensure(),se(this,ms,0),w(this,qt)!==null&&ys(w(this,qt),()=>{se(this,qt,null)}),this.is_pending=this.has_pending_snippet(),se(this,dt,We(this,Oe,Cn).call(this,()=>(se(this,_s,!1),ft(()=>w(this,gs).call(this,w(this,vt)))))),w(this,ts)>0?We(this,Oe,jn).call(this):this.is_pending=!1};Yt(()=>{try{r=!0,s==null||s(t,a),r=!1}catch(l){Hs(l,w(this,Pt)&&w(this,Pt).parent)}n&&se(this,qt,We(this,Oe,Cn).call(this,()=>{os.ensure(),se(this,_s,!0);try{return ft(()=>{n(w(this,vt),()=>t,()=>a)})}catch(l){return Hs(l,w(this,Pt).parent),null}finally{se(this,_s,!1)}}))})}}vt=new WeakMap,fr=new WeakMap,Et=new WeakMap,gs=new WeakMap,Pt=new WeakMap,dt=new WeakMap,Xe=new WeakMap,qt=new WeakMap,Ht=new WeakMap,es=new WeakMap,ms=new WeakMap,ts=new WeakMap,Os=new WeakMap,_s=new WeakMap,Fs=new WeakMap,Ls=new WeakMap,Jt=new WeakMap,In=new WeakMap,Oe=new WeakSet,Jo=function(){try{se(this,dt,ft(()=>w(this,gs).call(this,w(this,vt))))}catch(t){this.error(t)}},Wo=function(){const t=w(this,Et).pending;t&&(se(this,Xe,ft(()=>t(w(this,vt)))),Yt(()=>{var s=We(this,Oe,nr).call(this);se(this,dt,We(this,Oe,Cn).call(this,()=>(os.ensure(),ft(()=>w(this,gs).call(this,s))))),w(this,ts)>0?We(this,Oe,jn).call(this):(ys(w(this,Xe),()=>{se(this,Xe,null)}),this.is_pending=!1)}))},nr=function(){var t=w(this,vt);return this.is_pending&&(se(this,es,ls()),w(this,vt).before(w(this,es)),t=w(this,es)),t},Cn=function(t){var s=Ce,n=ce,i=Ie;Bt(w(this,Pt)),gt(w(this,Pt)),Vs(w(this,Pt).ctx);try{return t()}catch(r){return pi(r),null}finally{Bt(s),gt(n),Vs(i)}},jn=function(){const t=w(this,Et).pending;w(this,dt)!==null&&(se(this,Ht,document.createDocumentFragment()),w(this,Ht).append(w(this,es)),Oi(w(this,dt),w(this,Ht))),w(this,Xe)===null&&se(this,Xe,ft(()=>t(w(this,vt))))},rr=function(t){var s;if(!this.has_pending_snippet()){this.parent&&We(s=this.parent,Oe,rr).call(s,t);return}if(se(this,ts,w(this,ts)+t),w(this,ts)===0){this.is_pending=!1;for(const n of w(this,Fs))$e(n,Ve),xt(n);for(const n of w(this,Ls))$e(n,zt),xt(n);w(this,Fs).clear(),w(this,Ls).clear(),w(this,Xe)&&ys(w(this,Xe),()=>{se(this,Xe,null)}),w(this,Ht)&&(w(this,vt).before(w(this,Ht)),se(this,Ht,null))}};function Go(e,t,s,n){const i=gn()?An:ki;var r=e.filter(u=>!u.settled);if(s.length===0&&r.length===0){n(t.map(i));return}var a=oe,l=Ce,c=Yo(),d=r.length===1?r[0].promise:r.length>1?Promise.all(r.map(u=>u.promise)):null;function h(u){c();try{n(u)}catch(v){(l.f&rs)===0&&Hs(v,l)}a==null||a.deactivate(),ir()}if(s.length===0){d.then(()=>h(t.map(i)));return}function b(){c(),Promise.all(s.map(u=>Qo(u))).then(u=>h([...t.map(i),...u])).catch(u=>Hs(u,l))}d?d.then(b):b()}function Yo(){var e=Ce,t=ce,s=Ie,n=oe;return function(r=!0){Bt(e),gt(t),Vs(s),r&&(n==null||n.activate())}}function ir(){Bt(null),gt(null),Vs(null)}function An(e){var t=Ue|Ve,s=ce!==null&&(ce.f&Ue)!==0?ce:null;return Ce!==null&&(Ce.f|=Ws),{ctx:Ie,deps:null,effects:null,equals:ui,f:t,fn:e,reactions:null,rv:0,v:Fe,wv:0,parent:s??Ce,ac:null}}function Qo(e,t,s){let n=Ce;n===null&&wo();var i=n.b,r=void 0,a=Ts(Fe),l=!ce,c=new Map;return oa(()=>{var v;var d=ri();r=d.promise;try{Promise.resolve(e()).then(d.resolve,d.reject).then(()=>{h===oe&&h.committed&&h.deactivate(),ir()})}catch(f){d.reject(f),ir()}var h=oe;if(l){var b=i.is_rendered();i.update_pending_count(1),h.increment(b),(v=c.get(h))==null||v.reject(Is),c.delete(h),c.set(h,d)}const u=(f,x=void 0)=>{if(h.activate(),x)x!==Is&&(a.f|=is,Js(a,x));else{(a.f&is)!==0&&(a.f^=is),Js(a,f);for(const[m,k]of c){if(c.delete(m),m===h)break;k.reject(Is)}}l&&(i.update_pending_count(-1),h.decrement(b))};d.promise.then(u,f=>u(null,f||"unknown"))}),br(()=>{for(const d of c.values())d.reject(Is)}),new Promise(d=>{function h(b){function u(){b===r?d(a):h(r)}b.then(u,u)}h(r)})}function ye(e){const t=An(e);return Fi(t),t}function ki(e){const t=An(e);return t.equals=di,t}function xi(e){var t=e.effects;if(t!==null){e.effects=null;for(var s=0;s<t.length;s+=1)nt(t[s])}}function Ko(e){for(var t=e.parent;t!==null;){if((t.f&Ue)===0)return(t.f&rs)===0?t:null;t=t.parent}return null}function wr(e){var t,s=Ce;Bt(Ko(e));try{e.f&=~Ss,xi(e),t=Hi(e)}finally{Bt(s)}return t}function Si(e){var t=wr(e);if(!e.equals(t)&&(e.wv=Ui(),(!(oe!=null&&oe.is_fork)||e.deps===null)&&(e.v=t,e.deps===null))){$e(e,Ne);return}zs||(Le!==null?(yr()||oe!=null&&oe.is_fork)&&Le.set(e,t):_r(e))}let or=new Set;const as=new Map;let Ti=!1;function Ts(e,t){var s={f:0,v:e,reactions:null,equals:ui,rv:0,wv:0};return s}function B(e,t){const s=Ts(e);return Fi(s),s}function zi(e,t=!1,s=!0){var i;const n=Ts(e);return t||(n.equals=di),hn&&s&&Ie!==null&&Ie.l!==null&&((i=Ie.l).s??(i.s=[])).push(n),n}function p(e,t,s=!1){ce!==null&&(!St||(ce.f&$r)!==0)&&gn()&&(ce.f&(Ue|Qt|mr|$r))!==0&&(ht===null||!Us.call(ht,e))&&Co();let n=s?Zs(t):t;return Js(e,n)}function Js(e,t){if(!e.equals(t)){var s=e.v;zs?as.set(e,t):as.set(e,s),e.v=t;var n=os.ensure();if(n.capture(e,s),(e.f&Ue)!==0){const i=e;(e.f&Ve)!==0&&wr(i),_r(i)}e.wv=Ui(),Ci(e,Ve),gn()&&Ce!==null&&(Ce.f&Ne)!==0&&(Ce.f&(Ct|js))===0&&(ut===null?ca([e]):ut.push(e)),!n.is_fork&&or.size>0&&!Ti&&Xo()}return t}function Xo(){Ti=!1;for(const e of or)(e.f&Ne)!==0&&$e(e,zt),wn(e)&&an(e);or.clear()}function on(e){p(e,e.v+1)}function Ci(e,t){var s=e.reactions;if(s!==null)for(var n=gn(),i=s.length,r=0;r<i;r++){var a=s[r],l=a.f;if(!(!n&&a===Ce)){var c=(l&Ve)===0;if(c&&$e(a,t),(l&Ue)!==0){var d=a;Le==null||Le.delete(d),(l&Ss)===0&&(l&pt&&(a.f|=Ss),Ci(d,zt))}else c&&((l&Qt)!==0&&bt!==null&&bt.add(a),xt(a))}}}function Zs(e){if(typeof e!="object"||e===null||Bs in e)return e;const t=pr(e);if(t!==po&&t!==ho)return e;var s=new Map,n=ti(e),i=B(0),r=bs,a=l=>{if(bs===r)return l();var c=ce,d=bs;gt(null),Ar(r);var h=l();return gt(c),Ar(d),h};return n&&s.set("length",B(e.length)),new Proxy(e,{defineProperty(l,c,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&To();var h=s.get(c);return h===void 0?h=a(()=>{var b=B(d.value);return s.set(c,b),b}):p(h,d.value,!0),!0},deleteProperty(l,c){var d=s.get(c);if(d===void 0){if(c in l){const h=a(()=>B(Fe));s.set(c,h),on(i)}}else p(d,Fe),on(i);return!0},get(l,c,d){var v;if(c===Bs)return e;var h=s.get(c),b=c in l;if(h===void 0&&(!b||(v=nn(l,c))!=null&&v.writable)&&(h=a(()=>{var f=Zs(b?l[c]:Fe),x=B(f);return x}),s.set(c,h)),h!==void 0){var u=o(h);return u===Fe?void 0:u}return Reflect.get(l,c,d)},getOwnPropertyDescriptor(l,c){var d=Reflect.getOwnPropertyDescriptor(l,c);if(d&&"value"in d){var h=s.get(c);h&&(d.value=o(h))}else if(d===void 0){var b=s.get(c),u=b==null?void 0:b.v;if(b!==void 0&&u!==Fe)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return d},has(l,c){var u;if(c===Bs)return!0;var d=s.get(c),h=d!==void 0&&d.v!==Fe||Reflect.has(l,c);if(d!==void 0||Ce!==null&&(!h||(u=nn(l,c))!=null&&u.writable)){d===void 0&&(d=a(()=>{var v=h?Zs(l[c]):Fe,f=B(v);return f}),s.set(c,d));var b=o(d);if(b===Fe)return!1}return h},set(l,c,d,h){var R;var b=s.get(c),u=c in l;if(n&&c==="length")for(var v=d;v<b.v;v+=1){var f=s.get(v+"");f!==void 0?p(f,Fe):v in l&&(f=a(()=>B(Fe)),s.set(v+"",f))}if(b===void 0)(!u||(R=nn(l,c))!=null&&R.writable)&&(b=a(()=>B(void 0)),p(b,Zs(d)),s.set(c,b));else{u=b.v!==Fe;var x=a(()=>Zs(d));p(b,x)}var m=Reflect.getOwnPropertyDescriptor(l,c);if(m!=null&&m.set&&m.set.call(h,d),!u){if(n&&typeof c=="string"){var k=s.get("length"),z=Number(c);Number.isInteger(z)&&z>=k.v&&p(k,z+1)}on(i)}return!0},ownKeys(l){o(i);var c=Reflect.ownKeys(l).filter(b=>{var u=s.get(b);return u===void 0||u.v!==Fe});for(var[d,h]of s)h.v!==Fe&&!(d in l)&&c.push(d);return c},setPrototypeOf(){zo()}})}var Br,Nn,ji,Ei,Pi;function Zo(){if(Br===void 0){Br=window,Nn=document,ji=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,s=Text.prototype;Ei=nn(t,"firstChild").get,Pi=nn(t,"nextSibling").get,Mr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Mr(s)&&(s.__t=void 0)}}function ls(e=""){return document.createTextNode(e)}function Wt(e){return Ei.call(e)}function mn(e){return Pi.call(e)}function g(e,t){return Wt(e)}function ze(e,t=!1){{var s=Wt(e);return s instanceof Comment&&s.data===""?mn(s):s}}function _(e,t=1,s=!1){let n=e;for(;t--;)n=mn(n);return n}function ea(e){e.textContent=""}function qi(){return!1}let Dr=!1;function ta(){Dr||(Dr=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const s of e.target.elements)(t=s.__on_r)==null||t.call(s)})},{capture:!0}))}function On(e){var t=ce,s=Ce;gt(null),Bt(null);try{return e()}finally{gt(t),Bt(s)}}function Mi(e,t,s,n=s){e.addEventListener(t,()=>On(s));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),ta()}function $i(e){Ce===null&&(ce===null&&xo(),ko()),zs&&bo()}function sa(e,t){var s=t.last;s===null?t.last=t.first=e:(s.next=e,e.prev=s,t.last=e)}function At(e,t,s){var n=Ce;n!==null&&(n.f&ct)!==0&&(e|=ct);var i={ctx:Ie,deps:null,nodes:null,f:e|Ve|pt,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(s)try{an(i),i.f|=gr}catch(l){throw nt(i),l}else t!==null&&xt(i);var r=i;if(s&&r.deps===null&&r.teardown===null&&r.nodes===null&&r.first===r.last&&(r.f&Ws)===0&&(r=r.first,(e&Qt)!==0&&(e&us)!==0&&r!==null&&(r.f|=us)),r!==null&&(r.parent=n,n!==null&&sa(r,n),ce!==null&&(ce.f&Ue)!==0&&(e&js)===0)){var a=ce;(a.effects??(a.effects=[])).push(r)}return i}function yr(){return ce!==null&&!St}function br(e){const t=At(pn,null,!1);return $e(t,Ne),t.teardown=e,t}function Mn(e){$i();var t=Ce.f,s=!ce&&(t&Ct)!==0&&(t&gr)===0;if(s){var n=Ie;(n.e??(n.e=[])).push(e)}else return Ii(e)}function Ii(e){return At(qn|ai,e,!1)}function na(e){return $i(),At(pn|ai,e,!0)}function ra(e){os.ensure();const t=At(js|Ws,e,!0);return(s={})=>new Promise(n=>{s.outro?ys(t,()=>{nt(t),n(void 0)}):(nt(t),n(void 0))})}function ia(e){return At(qn,e,!1)}function oa(e){return At(mr|Ws,e,!0)}function Fn(e,t=0){return At(pn|t,e,!0)}function W(e,t=[],s=[],n=[]){Go(n,t,s,i=>{At(pn,()=>e(...i.map(o)),!0)})}function _n(e,t=0){var s=At(Qt|t,e,!0);return s}function ft(e){return At(Ct|Ws,e,!0)}function Bi(e){var t=e.teardown;if(t!==null){const s=zs,n=ce;Rr(!0),gt(null);try{t.call(null)}finally{Rr(s),gt(n)}}}function Di(e,t=!1){var s=e.first;for(e.first=e.last=null;s!==null;){const i=s.ac;i!==null&&On(()=>{i.abort(Is)});var n=s.next;(s.f&js)!==0?s.parent=null:nt(s,t),s=n}}function aa(e){for(var t=e.first;t!==null;){var s=t.next;(t.f&Ct)===0&&nt(t),t=s}}function nt(e,t=!0){var s=!1;(t||(e.f&oi)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(la(e.nodes.start,e.nodes.end),s=!0),Di(e,t&&!s),$n(e,0),$e(e,rs);var n=e.nodes&&e.nodes.t;if(n!==null)for(const r of n)r.stop();Bi(e);var i=e.parent;i!==null&&i.first!==null&&Ri(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function la(e,t){for(;e!==null;){var s=e===t?null:mn(e);e.remove(),e=s}}function Ri(e){var t=e.parent,s=e.prev,n=e.next;s!==null&&(s.next=n),n!==null&&(n.prev=s),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=s))}function ys(e,t,s=!0){var n=[];Ai(e,n,!0);var i=()=>{s&&nt(e),t&&t()},r=n.length;if(r>0){var a=()=>--r||i();for(var l of n)l.out(a)}else i()}function Ai(e,t,s){if((e.f&ct)===0){e.f^=ct;var n=e.nodes&&e.nodes.t;if(n!==null)for(const l of n)(l.is_global||s)&&t.push(l);for(var i=e.first;i!==null;){var r=i.next,a=(i.f&us)!==0||(i.f&Ct)!==0&&(e.f&Qt)!==0;Ai(i,t,a?s:!1),i=r}}}function kr(e){Ni(e,!0)}function Ni(e,t){if((e.f&ct)!==0){e.f^=ct,(e.f&Ne)===0&&($e(e,Ve),xt(e));for(var s=e.first;s!==null;){var n=s.next,i=(s.f&us)!==0||(s.f&Ct)!==0;Ni(s,i?t:!1),s=n}var r=e.nodes&&e.nodes.t;if(r!==null)for(const a of r)(a.is_global||t)&&a.in()}}function Oi(e,t){if(e.nodes)for(var s=e.nodes.start,n=e.nodes.end;s!==null;){var i=s===n?null:mn(s);t.append(s),s=i}}let En=!1,zs=!1;function Rr(e){zs=e}let ce=null,St=!1;function gt(e){ce=e}let Ce=null;function Bt(e){Ce=e}let ht=null;function Fi(e){ce!==null&&(ht===null?ht=[e]:ht.push(e))}let et=null,at=0,ut=null;function ca(e){ut=e}let Li=1,fs=0,bs=fs;function Ar(e){bs=e}function Ui(){return++Li}function wn(e){var t=e.f;if((t&Ve)!==0)return!0;if(t&Ue&&(e.f&=~Ss),(t&zt)!==0){for(var s=e.deps,n=s.length,i=0;i<n;i++){var r=s[i];if(wn(r)&&Si(r),r.wv>e.wv)return!0}(t&pt)!==0&&Le===null&&$e(e,Ne)}return!1}function Vi(e,t,s=!0){var n=e.reactions;if(n!==null&&!(ht!==null&&Us.call(ht,e)))for(var i=0;i<n.length;i++){var r=n[i];(r.f&Ue)!==0?Vi(r,t,!1):t===r&&(s?$e(r,Ve):(r.f&Ne)!==0&&$e(r,zt),xt(r))}}function Hi(e){var x;var t=et,s=at,n=ut,i=ce,r=ht,a=Ie,l=St,c=bs,d=e.f;et=null,at=0,ut=null,ce=(d&(Ct|js))===0?e:null,ht=null,Vs(e.ctx),St=!1,bs=++fs,e.ac!==null&&(On(()=>{e.ac.abort(Is)}),e.ac=null);try{e.f|=Xn;var h=e.fn,b=h(),u=e.deps,v=oe==null?void 0:oe.is_fork;if(et!==null){var f;if(v||$n(e,at),u!==null&&at>0)for(u.length=at+et.length,f=0;f<et.length;f++)u[at+f]=et[f];else e.deps=u=et;if(yr()&&(e.f&pt)!==0)for(f=at;f<u.length;f++)((x=u[f]).reactions??(x.reactions=[])).push(e)}else!v&&u!==null&&at<u.length&&($n(e,at),u.length=at);if(gn()&&ut!==null&&!St&&u!==null&&(e.f&(Ue|zt|Ve))===0)for(f=0;f<ut.length;f++)Vi(ut[f],e);if(i!==null&&i!==e){if(fs++,i.deps!==null)for(let m=0;m<s;m+=1)i.deps[m].rv=fs;if(t!==null)for(const m of t)m.rv=fs;ut!==null&&(n===null?n=ut:n.push(...ut))}return(e.f&is)!==0&&(e.f^=is),b}catch(m){return pi(m)}finally{e.f^=Xn,et=t,at=s,ut=n,ce=i,ht=r,Vs(a),St=l,bs=c}}function ua(e,t){let s=t.reactions;if(s!==null){var n=fo.call(s,e);if(n!==-1){var i=s.length-1;i===0?s=t.reactions=null:(s[n]=s[i],s.pop())}}if(s===null&&(t.f&Ue)!==0&&(et===null||!Us.call(et,t))){var r=t;(r.f&pt)!==0&&(r.f^=pt,r.f&=~Ss),_r(r),xi(r),$n(r,0)}}function $n(e,t){var s=e.deps;if(s!==null)for(var n=t;n<s.length;n++)ua(e,s[n])}function an(e){var t=e.f;if((t&rs)===0){$e(e,Ne);var s=Ce,n=En;Ce=e,En=!0;try{(t&(Qt|ii))!==0?aa(e):Di(e),Bi(e);var i=Hi(e);e.teardown=typeof i=="function"?i:null,e.wv=Li;var r;Kn&&Do&&(e.f&Ve)!==0&&e.deps}finally{En=n,Ce=s}}}async function va(){await Promise.resolve(),Oo()}function o(e){var t=e.f,s=(t&Ue)!==0;if(ce!==null&&!St){var n=Ce!==null&&(Ce.f&rs)!==0;if(!n&&(ht===null||!Us.call(ht,e))){var i=ce.deps;if((ce.f&Xn)!==0)e.rv<fs&&(e.rv=fs,et===null&&i!==null&&i[at]===e?at++:et===null?et=[e]:et.push(e));else{(ce.deps??(ce.deps=[])).push(e);var r=e.reactions;r===null?e.reactions=[ce]:Us.call(r,ce)||r.push(ce)}}}if(zs&&as.has(e))return as.get(e);if(s){var a=e;if(zs){var l=a.v;return((a.f&Ne)===0&&a.reactions!==null||Wi(a))&&(l=wr(a)),as.set(a,l),l}var c=(a.f&pt)===0&&!St&&ce!==null&&(En||(ce.f&pt)!==0),d=a.deps===null;wn(a)&&(c&&(a.f|=pt),Si(a)),c&&!d&&Ji(a)}if(Le!=null&&Le.has(e))return Le.get(e);if((e.f&is)!==0)throw e.v;return e.v}function Ji(e){if(e.deps!==null){e.f|=pt;for(const t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&Ue)!==0&&(t.f&pt)===0&&Ji(t)}}function Wi(e){if(e.v===Fe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(as.has(t)||(t.f&Ue)!==0&&Wi(t))return!0;return!1}function Es(e){var t=St;try{return St=!0,e()}finally{St=t}}function da(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Bs in e)ar(e);else if(!Array.isArray(e))for(let t in e){const s=e[t];typeof s=="object"&&s&&Bs in s&&ar(s)}}}function ar(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{ar(e[n],t)}catch{}const s=pr(e);if(s!==Object.prototype&&s!==Array.prototype&&s!==Map.prototype&&s!==Set.prototype&&s!==Date.prototype){const n=ni(s);for(let i in n){const r=n[i].get;if(r)try{r.call(e)}catch{}}}}}const fa=["touchstart","touchmove"];function pa(e){return fa.includes(e)}const Gi=new Set,lr=new Set;function ha(e,t,s,n={}){function i(r){if(n.capture||en.call(t,r),!r.cancelBubble)return On(()=>s==null?void 0:s.call(this,r))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Yt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function Tt(e,t,s,n,i){var r={capture:n,passive:i},a=ha(e,t,s,r);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&br(()=>{t.removeEventListener(e,a,r)})}function Kt(e){for(var t=0;t<e.length;t++)Gi.add(e[t]);for(var s of lr)s(e)}let Nr=null;function en(e){var m;var t=this,s=t.ownerDocument,n=e.type,i=((m=e.composedPath)==null?void 0:m.call(e))||[],r=i[0]||e.target;Nr=e;var a=0,l=Nr===e&&e.__root;if(l){var c=i.indexOf(l);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var d=i.indexOf(t);if(d===-1)return;c<=d&&(a=c)}if(r=i[a]||e.target,r!==t){si(e,"currentTarget",{configurable:!0,get(){return r||s}});var h=ce,b=Ce;gt(null),Bt(null);try{for(var u,v=[];r!==null;){var f=r.assignedSlot||r.parentNode||r.host||null;try{var x=r["__"+n];x!=null&&(!r.disabled||e.target===r)&&x.call(r,e)}catch(k){u?v.push(k):u=k}if(e.cancelBubble||f===t||f===null)break;r=f}if(u){for(let k of v)queueMicrotask(()=>{throw k});throw u}}finally{e.__root=t,delete e.currentTarget,gt(h),Bt(b)}}}function Yi(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function ln(e,t){var s=Ce;s.nodes===null&&(s.nodes={start:e,end:t,a:null,t:null})}function T(e,t){var s=(t&ci)!==0,n=(t&$o)!==0,i,r=!e.startsWith("<!>");return()=>{i===void 0&&(i=Yi(r?e:"<!>"+e),s||(i=Wt(i)));var a=n||ji?document.importNode(i,!0):i.cloneNode(!0);if(s){var l=Wt(a),c=a.lastChild;ln(l,c)}else ln(a,a);return a}}function ga(e,t,s="svg"){var n=!e.startsWith("<!>"),i=(t&ci)!==0,r=`<${s}>${n?e:"<!>"+e}</${s}>`,a;return()=>{if(!a){var l=Yi(r),c=Wt(l);if(i)for(a=document.createDocumentFragment();Wt(c);)a.appendChild(Wt(c));else a=Wt(c)}var d=a.cloneNode(!0);if(i){var h=Wt(d),b=d.lastChild;ln(h,b)}else ln(d,d);return d}}function Be(e,t){return ga(e,t,"svg")}function Ae(){var e=document.createDocumentFragment(),t=document.createComment(""),s=ls();return e.append(t,s),ln(t,s),e}function y(e,t){e!==null&&e.before(t)}function A(e,t){var s=t==null?"":typeof t=="object"?t+"":t;s!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=s,e.nodeValue=s+"")}function ma(e,t){return _a(e,t)}const Ms=new Map;function _a(e,{target:t,anchor:s,props:n={},events:i,context:r,intro:a=!0}){Zo();var l=new Set,c=b=>{for(var u=0;u<b.length;u++){var v=b[u];if(!l.has(v)){l.add(v);var f=pa(v);t.addEventListener(v,en,{passive:f});var x=Ms.get(v);x===void 0?(document.addEventListener(v,en,{passive:f}),Ms.set(v,1)):Ms.set(v,x+1)}}};c(Dn(Gi)),lr.add(c);var d=void 0,h=ra(()=>{var b=s??t.appendChild(ls());return Vo(b,{pending:()=>{}},u=>{mt({});var v=Ie;r&&(v.c=r),i&&(n.$$events=i),d=e(u,n)||{},_t()}),()=>{var f;for(var u of l){t.removeEventListener(u,en);var v=Ms.get(u);--v===0?(document.removeEventListener(u,en),Ms.delete(u)):Ms.set(u,v)}lr.delete(c),b!==s&&((f=b.parentNode)==null||f.removeChild(b))}});return wa.set(d,h),d}let wa=new WeakMap;var kt,Mt,lt,ws,dn,fn,Bn;class xr{constructor(t,s=!0){jt(this,"anchor");ie(this,kt,new Map);ie(this,Mt,new Map);ie(this,lt,new Map);ie(this,ws,new Set);ie(this,dn,!0);ie(this,fn,()=>{var t=oe;if(w(this,kt).has(t)){var s=w(this,kt).get(t),n=w(this,Mt).get(s);if(n)kr(n),w(this,ws).delete(s);else{var i=w(this,lt).get(s);i&&(w(this,Mt).set(s,i.effect),w(this,lt).delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[r,a]of w(this,kt)){if(w(this,kt).delete(r),r===t)break;const l=w(this,lt).get(a);l&&(nt(l.effect),w(this,lt).delete(a))}for(const[r,a]of w(this,Mt)){if(r===s||w(this,ws).has(r))continue;const l=()=>{if(Array.from(w(this,kt).values()).includes(r)){var d=document.createDocumentFragment();Oi(a,d),d.append(ls()),w(this,lt).set(r,{effect:a,fragment:d})}else nt(a);w(this,ws).delete(r),w(this,Mt).delete(r)};w(this,dn)||!n?(w(this,ws).add(r),ys(a,l,!1)):l()}}});ie(this,Bn,t=>{w(this,kt).delete(t);const s=Array.from(w(this,kt).values());for(const[n,i]of w(this,lt))s.includes(n)||(nt(i.effect),w(this,lt).delete(n))});this.anchor=t,se(this,dn,s)}ensure(t,s){var n=oe,i=qi();if(s&&!w(this,Mt).has(t)&&!w(this,lt).has(t))if(i){var r=document.createDocumentFragment(),a=ls();r.append(a),w(this,lt).set(t,{effect:ft(()=>s(a)),fragment:r})}else w(this,Mt).set(t,ft(()=>s(this.anchor)));if(w(this,kt).set(n,t),i){for(const[l,c]of w(this,Mt))l===t?n.unskip_effect(c):n.skip_effect(c);for(const[l,c]of w(this,lt))l===t?n.unskip_effect(c.effect):n.skip_effect(c.effect);n.oncommit(w(this,fn)),n.ondiscard(w(this,Bn))}else w(this,fn).call(this)}}kt=new WeakMap,Mt=new WeakMap,lt=new WeakMap,ws=new WeakMap,dn=new WeakMap,fn=new WeakMap,Bn=new WeakMap;function D(e,t,s=!1){var n=new xr(e),i=s?us:0;function r(a,l){n.ensure(a,l)}_n(()=>{var a=!1;t((l,c=!0)=>{a=!0,r(c,l)}),a||r(!1,null)},i)}function tt(e,t){return t}function ya(e,t,s){for(var n=[],i=t.length,r,a=t.length,l=0;l<i;l++){let b=t[l];ys(b,()=>{if(r){if(r.pending.delete(b),r.done.add(b),r.pending.size===0){var u=e.outrogroups;cr(Dn(r.done)),u.delete(r),u.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var c=n.length===0&&s!==null;if(c){var d=s,h=d.parentNode;ea(h),h.append(d),e.items.clear()}cr(t,!c)}else r={pending:new Set(t),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(r)}function cr(e,t=!0){for(var s=0;s<e.length;s++)nt(e[s],t)}var Or;function Ge(e,t,s,n,i,r=null){var a=e,l=new Map,c=(t&li)!==0;if(c){var d=e;a=d.appendChild(ls())}var h=null,b=ki(()=>{var k=s();return ti(k)?k:k==null?[]:Dn(k)}),u,v=!0;function f(){m.fallback=h,ba(m,u,a,t,n),h!==null&&(u.length===0?(h.f&Gt)===0?kr(h):(h.f^=Gt,tn(h,null,a)):ys(h,()=>{h=null}))}var x=_n(()=>{u=o(b);for(var k=u.length,z=new Set,R=oe,ve=qi(),Y=0;Y<k;Y+=1){var re=u[Y],xe=n(re,Y),be=v?null:l.get(xe);be?(be.v&&Js(be.v,re),be.i&&Js(be.i,Y),ve&&R.unskip_effect(be.e)):(be=ka(l,v?a:Or??(Or=ls()),re,xe,Y,i,t,s),v||(be.e.f|=Gt),l.set(xe,be)),z.add(xe)}if(k===0&&r&&!h&&(v?h=ft(()=>r(a)):(h=ft(()=>r(Or??(Or=ls()))),h.f|=Gt)),k>z.size&&yo(),!v)if(ve){for(const[me,De]of l)z.has(me)||R.skip_effect(De.e);R.oncommit(f),R.ondiscard(()=>{})}else f();o(b)}),m={effect:x,items:l,outrogroups:null,fallback:h};v=!1}function Xs(e){for(;e!==null&&(e.f&Ct)===0;)e=e.next;return e}function ba(e,t,s,n,i){var De,Ye,Qe,V,G,de,E,$,F;var r=(n&qo)!==0,a=t.length,l=e.items,c=Xs(e.effect.first),d,h=null,b,u=[],v=[],f,x,m,k;if(r)for(k=0;k<a;k+=1)f=t[k],x=i(f,k),m=l.get(x).e,(m.f&Gt)===0&&((Ye=(De=m.nodes)==null?void 0:De.a)==null||Ye.measure(),(b??(b=new Set)).add(m));for(k=0;k<a;k+=1){if(f=t[k],x=i(f,k),m=l.get(x).e,e.outrogroups!==null)for(const U of e.outrogroups)U.pending.delete(m),U.done.delete(m);if((m.f&Gt)!==0)if(m.f^=Gt,m===c)tn(m,null,s);else{var z=h?h.next:c;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Zt(e,h,m),Zt(e,m,z),tn(m,z,s),h=m,u=[],v=[],c=Xs(h.next);continue}if((m.f&ct)!==0&&(kr(m),r&&((V=(Qe=m.nodes)==null?void 0:Qe.a)==null||V.unfix(),(b??(b=new Set)).delete(m))),m!==c){if(d!==void 0&&d.has(m)){if(u.length<v.length){var R=v[0],ve;h=R.prev;var Y=u[0],re=u[u.length-1];for(ve=0;ve<u.length;ve+=1)tn(u[ve],R,s);for(ve=0;ve<v.length;ve+=1)d.delete(v[ve]);Zt(e,Y.prev,re.next),Zt(e,h,Y),Zt(e,re,R),c=R,h=re,k-=1,u=[],v=[]}else d.delete(m),tn(m,c,s),Zt(e,m.prev,m.next),Zt(e,m,h===null?e.effect.first:h.next),Zt(e,h,m),h=m;continue}for(u=[],v=[];c!==null&&c!==m;)(d??(d=new Set)).add(c),v.push(c),c=Xs(c.next);if(c===null)continue}(m.f&Gt)===0&&u.push(m),h=m,c=Xs(m.next)}if(e.outrogroups!==null){for(const U of e.outrogroups)U.pending.size===0&&(cr(Dn(U.done)),(G=e.outrogroups)==null||G.delete(U));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||d!==void 0){var xe=[];if(d!==void 0)for(m of d)(m.f&ct)===0&&xe.push(m);for(;c!==null;)(c.f&ct)===0&&c!==e.fallback&&xe.push(c),c=Xs(c.next);var be=xe.length;if(be>0){var me=(n&li)!==0&&a===0?s:null;if(r){for(k=0;k<be;k+=1)(E=(de=xe[k].nodes)==null?void 0:de.a)==null||E.measure();for(k=0;k<be;k+=1)(F=($=xe[k].nodes)==null?void 0:$.a)==null||F.fix()}ya(e,xe,me)}}r&&Yt(()=>{var U,ae;if(b!==void 0)for(m of b)(ae=(U=m.nodes)==null?void 0:U.a)==null||ae.apply()})}function ka(e,t,s,n,i,r,a,l){var c=(a&Eo)!==0?(a&Mo)===0?zi(s,!1,!1):Ts(s):null,d=(a&Po)!==0?Ts(i):null;return{v:c,i:d,e:ft(()=>(r(t,c??s,d??i,l),()=>{e.delete(n)}))}}function tn(e,t,s){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,r=t&&(t.f&Gt)===0?t.nodes.start:s;n!==null;){var a=mn(n);if(r.before(n),n===i)return;n=a}}function Zt(e,t,s){t===null?e.effect.first=s:t.next=s,s===null?e.effect.last=t:s.prev=t}function Qi(e,t,...s){var n=new xr(e);_n(()=>{const i=t()??null;n.ensure(i,i&&(r=>i(r,...s)))},us)}function xa(e,t,s){var n=new xr(e);_n(()=>{var i=t()??null;n.ensure(i,i&&(r=>s(r,i)))},us)}const Fr=[...` 	
\r\fÂ \v\uFEFF`];function Sa(e,t,s){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),s){for(var i in s)if(s[i])n=n?n+" "+i:i;else if(n.length)for(var r=i.length,a=0;(a=n.indexOf(i,a))>=0;){var l=a+r;(a===0||Fr.includes(n[a-1]))&&(l===n.length||Fr.includes(n[l]))?n=(a===0?"":n.substring(0,a))+n.substring(l+1):a=l}}return n===""?null:n}function Ta(e,t){return e==null?null:String(e)}function ke(e,t,s,n,i,r){var a=e.__className;if(a!==s||a===void 0){var l=Sa(s,n,r);l==null?e.removeAttribute("class"):e.className=l,e.__className=s}else if(r&&i!==r)for(var c in r){var d=!!r[c];(i==null||d!==!!i[c])&&e.classList.toggle(c,d)}return r}function yn(e,t,s,n){var i=e.__style;if(i!==t){var r=Ta(t);r==null?e.removeAttribute("style"):e.style.cssText=r,e.__style=t}return n}const za=Symbol("is custom element"),Ca=Symbol("is html");function ja(e,t){var s=Ki(e);s.value===(s.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function cs(e,t,s,n){var i=Ki(e);i[t]!==(i[t]=s)&&(t==="loading"&&(e[mo]=s),s==null?e.removeAttribute(t):typeof s!="string"&&Ea(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function Ki(e){return e.__attributes??(e.__attributes={[za]:e.nodeName.includes("-"),[Ca]:e.namespaceURI===Io})}var Lr=new Map;function Ea(e){var t=e.getAttribute("is")||e.nodeName,s=Lr.get(t);if(s)return s;Lr.set(t,s=[]);for(var n,i=e,r=Element.prototype;r!==i;){n=ni(i);for(var a in n)n[a].set&&s.push(a);i=pr(i)}return s}function Ur(e,t,s=t){var n=new WeakSet;Mi(e,"input",async i=>{var r=i?e.defaultValue:e.value;if(r=Wn(e)?Gn(r):r,s(r),oe!==null&&n.add(oe),await va(),r!==(r=t())){var a=e.selectionStart,l=e.selectionEnd,c=e.value.length;if(e.value=r??"",l!==null){var d=e.value.length;a===l&&l===c&&d>c?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=a,e.selectionEnd=Math.min(l,d))}}}),Es(t)==null&&e.value&&(s(Wn(e)?Gn(e.value):e.value),oe!==null&&n.add(oe)),Fn(()=>{var i=t();if(e===document.activeElement){var r=Zn??oe;if(n.has(r))return}Wn(e)&&i===Gn(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function Xi(e,t,s=t){Mi(e,"change",n=>{var i=n?e.defaultChecked:e.checked;s(i)}),Es(t)==null&&s(e.checked),Fn(()=>{var n=t();e.checked=!!n})}function Wn(e){var t=e.type;return t==="number"||t==="range"}function Gn(e){return e===""?null:+e}function Vr(e,t){return e===t||(e==null?void 0:e[Bs])===t}function bn(e={},t,s,n){return ia(()=>{var i,r;return Fn(()=>{i=r,r=[],Es(()=>{e!==s(...r)&&(t(e,...r),i&&Vr(s(...i),e)&&t(null,...i))})}),()=>{Yt(()=>{r&&Vr(s(...r),e)&&t(null,...r)})}}),e}function Pa(e=!1){const t=Ie,s=t.l.u;if(!s)return;let n=()=>da(t.s);if(e){let i=0,r={};const a=An(()=>{let l=!1;const c=t.s;for(const d in c)c[d]!==r[d]&&(r[d]=c[d],l=!0);return l&&i++,i});n=()=>o(a)}s.b.length&&na(()=>{Hr(t,n),Pn(s.b)}),Mn(()=>{const i=Es(()=>s.m.map(go));return()=>{for(const r of i)typeof r=="function"&&r()}}),s.a.length&&Mn(()=>{Hr(t,n),Pn(s.a)})}function Hr(e,t){if(e.l.s)for(const s of e.l.s)o(s);t()}function Sr(e,t,s){if(e==null)return t(void 0),s&&s(void 0),ns;const n=Es(()=>e.subscribe(t,s));return n.unsubscribe?()=>n.unsubscribe():n}const $s=[];function qa(e,t){return{subscribe:Gs(e,t).subscribe}}function Gs(e,t=ns){let s=null;const n=new Set;function i(l){if(vi(e,l)&&(e=l,s)){const c=!$s.length;for(const d of n)d[1](),$s.push(d,e);if(c){for(let d=0;d<$s.length;d+=2)$s[d][0]($s[d+1]);$s.length=0}}}function r(l){i(l(e))}function a(l,c=ns){const d=[l,c];return n.add(d),n.size===1&&(s=t(i,r)||ns),l(e),()=>{n.delete(d),n.size===0&&s&&(s(),s=null)}}return{set:i,update:r,subscribe:a}}function Tr(e,t,s){const n=!Array.isArray(e),i=n?[e]:e;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=t.length<2;return qa(s,(a,l)=>{let c=!1;const d=[];let h=0,b=ns;const u=()=>{if(h)return;b();const f=t(n?d[0]:d,a,l);r?a(f):b=typeof f=="function"?f:ns},v=i.map((f,x)=>Sr(f,m=>{d[x]=m,h&=~(1<<x),c&&u()},()=>{h|=1<<x}));return c=!0,u(),function(){Pn(v),b(),c=!1}})}function It(e){let t;return Sr(e,s=>t=s)(),t}let ur=Symbol();function Dt(e,t,s){const n=s[t]??(s[t]={store:null,source:zi(void 0),unsubscribe:ns});if(n.store!==e&&!(ur in s))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=ns;else{var i=!0;n.unsubscribe=Sr(e,r=>{i?n.source.v=r:p(n.source,r)}),i=!1}return e&&ur in s?It(e):o(n.source)}function Xt(){const e={};function t(){br(()=>{for(var s in e)e[s].unsubscribe();si(e,ur,{enumerable:!1,value:!0})})}return[e,t]}function vr(e,t,s,n){var i=n,r=!0,a=()=>(r&&(r=!1,i=n),i),l;l=e[t],l===void 0&&n!==void 0&&(l=a());var c;return c=()=>{var d=e[t];return d===void 0?a():(r=!0,d)},c}function Ln(e){Ie===null&&_o(),hn&&Ie.l!==null?Ma(Ie).m.push(e):Mn(()=>{const t=Es(e);if(typeof t=="function")return t})}function Ma(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const $a="5";var ei;typeof window<"u"&&((ei=window.__svelte??(window.__svelte={})).v??(ei.v=new Set)).add($a);function Zi(){return window.location.pathname||"/"}function Ia(){return window.location.search?window.location.search.slice(1):""}function Ba(){const e=window.location.hash;if(e&&e.startsWith("#/")){const t=e.slice(1);history.replaceState(null,"",t)}}Ba();const Un=Gs(Zi());window.addEventListener("popstate",()=>{Un.set(Zi())});const zr=Tr(Un,e=>e.split("?")[0]||"/"),Da=Tr(Un,()=>Ia()),Ra=Tr(Da,e=>Object.fromEntries(new URLSearchParams(e)));function eo(e){history.pushState(null,"",e),Un.set(e)}Ro();let Aa=0;function Na(){const{subscribe:e,update:t}=Gs([]);return{subscribe:e,add(s,n="info",i=3e3){const r={id:Aa++,message:s,type:n};t(a=>[...a,r]),setTimeout(()=>{t(a=>a.filter(l=>l.id!==r.id))},i)},remove(s){t(n=>n.filter(i=>i.id!==s))}}}const to=Na();function he(e,t,s){to.add(e,t,s)}var Oa=T('<div role="alert"> </div>');function Fa(e,t){let s=vr(t,"type",3,"info");var n=Oa(),i=g(n);W(()=>{ke(n,1,`toast ${s()??""}`,"svelte-1i7wnxu"),A(i,t.message)}),y(e,n)}var La=T('<div class="toast-container svelte-3knp8x"></div>');function Ua(e){const t=()=>Dt(to,"$toasts",s),[s,n]=Xt();var i=La();Ge(i,5,t,r=>r.id,(r,a)=>{Fa(r,{get message(){return o(a).message},get type(){return o(a).type}})}),y(e,i),n()}function Ee(){const e=window.location.hostname;return e==="localhost"||e==="127.0.0.1"?"http://localhost:3001":"https://yoink.coah80.com"}async function Va(e,t={}){const s=await fetch(e,t),n=s.headers.get("content-type");if(!s.ok){let i=`Request failed (${s.status})`;if(n&&n.includes("application/json"))i=(await s.json()).error||i;else{const r=await s.text();console.error("Non-JSON error response:",r.substring(0,500)),i=`Server error ${s.status} (likely VPN blocked)`}throw new Error(i)}return s.json()}async function Ha(e,t={}){return Va(`${Ee()}${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}function dr(e,{onMessage:t,onError:s,maxReconnectAttempts:n=10}){let i=0,r=null,a=!1;function l(){a||(r=new EventSource(`${Ee()}/api/progress/${e}`),r.onmessage=d=>{try{const h=JSON.parse(d.data);i=0,t(h),(h.stage==="complete"||h.stage==="error"||h.stage==="cancelled")&&c()}catch(h){console.error("SSE parse error:",h)}},r.onerror=()=>{if(r.close(),!a)if(i<n){i++;const d=Math.min(1e3*i,5e3);s&&s({type:"reconnecting",attempt:i,max:n}),setTimeout(l,d)}else s&&s({type:"failed",message:"Connection lost - refresh page to retry"})})}function c(){a=!0,r&&(r.close(),r=null)}return l(),{close:c}}const cn=[],Ja=5;function Jr(e){e.parentNode&&e.parentNode.removeChild(e);const t=cn.indexOf(e);t>-1&&cn.splice(t,1)}function Wa(){for(;cn.length>Ja;){const e=cn.shift();e&&e.parentNode&&e.parentNode.removeChild(e)}}function Wr(e){const t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t),cn.push(t),Wa(),t.onload=()=>setTimeout(()=>Jr(t),5e3),setTimeout(()=>Jr(t),120*1e3)}function so(e,t){const s=URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)}const Cs=Gs(sessionStorage.getItem("yoink_clientId")||null),ks=new Set;let Ga=0,st=null,$t=0;const no=3;async function Ya(){let e=It(Cs);if(!e){try{e=(await(await fetch(`${Ee()}/api/connect`,{method:"POST"})).json()).clientId}catch{e="local-"+Date.now()+"-"+Math.random().toString(36).slice(2,11)}sessionStorage.setItem("yoink_clientId",e),Cs.set(e)}return e}function Cr(){const e=`job-${++Ga}-${Date.now()}`,t=ks.size===0;if(ks.add(e),t&&!st){$t=0;const s=It(Cs);s&&!s.startsWith("local-")&&fetch(`${Ee()}/api/heartbeat/${s}`,{method:"POST"}).catch(()=>{}),st=setInterval(async()=>{const n=It(Cs);if(!(!n||n.startsWith("local-")))try{await fetch(`${Ee()}/api/heartbeat/${n}`,{method:"POST"}),$t=0}catch{$t++,$t>=no&&(clearInterval(st),st=null,$t=0)}},15e3)}return e}function Qa(){if(ks.size>0&&!st){$t=0;const e=It(Cs);e&&!e.startsWith("local-")&&fetch(`${Ee()}/api/heartbeat/${e}`,{method:"POST"}).catch(()=>{}),st=setInterval(async()=>{const t=It(Cs);if(!(!t||t.startsWith("local-")))try{await fetch(`${Ee()}/api/heartbeat/${t}`,{method:"POST"}),$t=0}catch{$t++,$t>=no&&(clearInterval(st),st=null,$t=0)}},15e3)}}function jr(e){e?ks.delete(e):ks.clear(),ks.size===0&&st&&(clearInterval(st),st=null)}typeof window<"u"&&window.addEventListener("beforeunload",()=>{st&&(clearInterval(st),st=null),ks.clear()});const Gr=[{text:"yoink it, go on..."},{text:"not cobalt"},{text:"im bored"},{text:"have you yoinked it today?"},{text:"download helium browser",link:"https://helium.computer/",classes:["clickable"]},{text:"dont like it? use cliply (dont)"},{text:"the biggest yt-dlp wrapper of them all"},{text:"awesome name, right?"},{text:"get yoinked!"},{text:"funny message here"},{text:"SHOUTOUT TO COAH"},{text:"new feature: yoink!"},{text:"new feature: ai download"},{text:"welcome to yoink.tools"},{text:"feelin' yoinky?"},{text:"im parched"},{text:"stay hydrated!"},{text:"computers are cool"},{text:"missing assignments?"},{text:"procrastinate with yoink"},{text:"newgrounds.com",link:"https://newgrounds.com",classes:["clickable"]},{text:"bring back flash!"},{text:"FUCK ICE"},{text:"post this one to twitter"},{text:"google i need yoinks! NOW!!!!!"},{text:"im feeling fancy today...",classes:["fancy"]},{text:"powered by yt-dlp"},{text:"hello world!"},{text:"1000+ sites!",link:"https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md",classes:["clickable"]},{text:"yes, that site works. even the one you're thinking of."}],Ka=["4tube","alphaporno","beeg","behindkink","bongacams","cam4","cammodels","camsoda","chaturbate","drtuber","empflix","eporner","erocast","eroprofile","fux","hellporno","hotmovs","iceporn","lovehomeporn","manyvids","motherless","moviefap","noodlemagazine","nuvid","peekvideos","peekvids","playvids","porn","pornbox","pornerbros","pornflip","pornhub","pornotube","pornovoisines","pornoxo","porntop","porntube","redtube","rule34video","slutload","spankbang","stripchat","sunporno","thisvid","tnaflix","tube8","txxx","xhamster","xnxx","xvideos","xxxymovies","youjizz","youporn","zenporn","xtube","erome","hentai","hclips","gotporn","fuq","ashemaletube"];function Xa(e){try{const t=new URL(e).hostname.toLowerCase().replace("www.","");return Ka.some(s=>t.includes(s))}catch{return!1}}const Yn={quality:"1080p",codec:"h264",container:"mp4",audioFormat:"mp3",audioBitrate:"320",filenameStyle:"basic",playlistPreference:null,twitterGifs:!0},sn=["starting","downloading","processing","remuxing","sending","zipping","playlist-info","reconnecting","uploading","converting","compressing"];function Za(){let e={...Yn};try{const r=localStorage.getItem("yoink_settings");r&&(e={...Yn,...JSON.parse(r)})}catch{}const{subscribe:t,set:s,update:n}=Gs(e);function i(r){localStorage.setItem("yoink_settings",JSON.stringify(r))}return{subscribe:t,set(r){i(r),s(r)},update(r){n(a=>{const l=r(a);return i(l),l})},setSetting(r,a){n(l=>{const c={...l,[r]:a};return i(c),c})},reset(){const r={...Yn};i(r),s(r)}}}const xs=Za();let Yr=!1;async function ro(){if(!(Yr||!("serviceWorker"in navigator)))try{await navigator.serviceWorker.register("/sw.js"),Yr=!0}catch{}}async function el(){return"Notification"in window?Notification.permission==="granted"?"granted":Notification.permission==="denied"?"denied":await Notification.requestPermission():"unsupported"}async function tl(e,t){if(!(!("Notification"in window)||Notification.permission!=="granted")){if(await ro(),"serviceWorker"in navigator)try{const s=await navigator.serviceWorker.ready;if(s.active){s.active.postMessage({type:"PLAYLIST_COMPLETE",message:`${e} is ready to download!`,jobId:t});return}}catch{}new Notification("yoink",{body:`${e} is ready to download!`,icon:"/icons/icon-192.png"})}}function sl(){let e=[];try{const u=localStorage.getItem("yoink_queue");u&&(e=JSON.parse(u).map(v=>v.isPlaylist&&v.serverJobId&&v.stage!=="ready"?{...v,stage:"reconnecting",progress:v.progress||0,status:"reconnecting..."}:sn.includes(v.stage)?{...v,stage:"queued",progress:0,status:"interrupted - tap to restart"}:v).filter(v=>v.stage!=="complete"&&v.stage!=="error"))}catch{e=[]}const{subscribe:t,set:s,update:n}=Gs(e),i=new Map,r=new Map,a=new Map;function l(u){localStorage.setItem("yoink_queue",JSON.stringify(u))}function c(){return It({subscribe:t})}function d(u){const v=a.get(u);v&&(clearInterval(v),a.delete(u))}function h(u){const v=i.get(u);v&&(v.close(),i.delete(u)),d(u);const f=r.get(u);f&&(jr(f),r.delete(u))}const b={subscribe:t,add(u){n(v=>{if(v.some(x=>x.id===u.id))return v;const f=[...v,u];return l(f),f})},remove(u){const f=c().find(x=>x.id===u);if(h(u),f&&sn.includes(f.stage)){const x=f.serverJobId||u;fetch(`${Ee()}/api/cancel/${x}`,{method:"POST"}).catch(()=>{})}n(x=>{const m=x.filter(k=>k.id!==u);return l(m),m})},updateItem(u,v){n(f=>{const x=f.map(m=>m.id===u?{...m,...v}:m);return l(x),x})},clear(){c().forEach(v=>{if(h(v.id),sn.includes(v.stage)){const f=v.serverJobId||v.id;fetch(`${Ee()}/api/cancel/${f}`,{method:"POST"}).catch(()=>{})}}),i.clear(),r.clear(),a.clear(),s([]),l([])},startDownload(u){if(u.isPlaylist){this._startPlaylistDownload(u);return}this._startDirectDownload(u)},_startDirectDownload(u){const v=It(xs),f=Cr();r.set(u.id,f),this.updateItem(u.id,{stage:"starting",status:"starting download...",startTime:Date.now()});const x=dr(u.id,{onMessage:z=>{const R={stage:z.stage,status:z.message};if(z.progress!==void 0&&(R.progress=z.progress),z.speed!==void 0&&(R.speed=z.speed),z.eta!==void 0&&(R.eta=z.eta),z.totalVideos!==void 0&&(R.videoCount=z.totalVideos),z.currentVideo!==void 0&&(R.currentVideo=z.currentVideo),z.currentVideoTitle!==void 0&&(R.currentVideoTitle=z.currentVideoTitle),z.format!==void 0&&(R.formatDisplay=z.format),z.downloadedCount!==void 0&&(R.downloadedCount=z.downloadedCount),z.failedVideos&&(R.failedVideos=z.failedVideos),z.failedCount!==void 0&&(R.failedCount=z.failedCount),this.updateItem(u.id,R),z.stage==="complete"){R.endTime=Date.now(),this.updateItem(u.id,R),h(u.id);const Y=c().find(me=>me.id===u.id),re=Y!=null&&Y.startTime?Math.floor((Date.now()-Y.startTime)/1e3):0,xe=re>=60?`${Math.floor(re/60)}m ${re%60}s`:`${re}s`,be=u.format==="images"?"gallery download complete!":`download complete! (${xe})`;he(be,"success"),setTimeout(()=>this.remove(u.id),5e3)}else z.stage==="error"?(h(u.id),he(z.message,"error")):z.stage==="cancelled"&&h(u.id)},onError:z=>{z.type==="reconnecting"?this.updateItem(u.id,{status:`reconnecting... (${z.attempt}/${z.max})`}):(this.updateItem(u.id,{stage:"error",status:z.message}),h(u.id))}});i.set(u.id,x);const m=new URLSearchParams({url:u.url,format:u.format,filename:u.title,quality:v.quality,container:v.container,audioFormat:v.audioFormat,audioBitrate:v.audioBitrate,progressId:u.id,twitterGifs:v.twitterGifs!==!1?"true":"false"});let k;u.format==="images"?k="/api/gallery/download":k="/api/download",Wr(`${Ee()}${k}?${m.toString()}`)},async _startPlaylistDownload(u){const v=It(xs);this.updateItem(u.id,{stage:"starting",status:"starting playlist download...",startTime:Date.now()}),ro(),el();try{const f=It(Cs),m=(await Ha("/api/playlist/start",{url:u.url,format:u.format,quality:v.quality,container:v.container,audioFormat:v.audioFormat,audioBitrate:v.audioBitrate,clientId:f||void 0})).jobId;this.updateItem(u.id,{serverJobId:m}),this._connectPlaylistSSE(u.id,m),this._startPlaylistPolling(u.id,m)}catch(f){this.updateItem(u.id,{stage:"error",status:f.message||"failed to start playlist"}),he(f.message||"failed to start playlist","error")}},_connectPlaylistSSE(u,v){const f=dr(v,{onMessage:x=>{this._handlePlaylistUpdate(u,x)},onError:()=>{}});i.set(u,f)},_startPlaylistPolling(u,v){d(u);const f=setInterval(async()=>{try{const x=await fetch(`${Ee()}/api/playlist/status/${v}`);if(!x.ok){x.status===404&&(this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),h(u),he("playlist expired â try again!","error"));return}const m=await x.json();this._handlePlaylistUpdate(u,{stage:m.status==="complete"?"complete":m.status,message:m.message,progress:m.progress,totalVideos:m.totalVideos,currentVideo:m.currentVideo,currentVideoTitle:m.currentVideoTitle,failedVideos:m.failedVideos,failedCount:m.failedCount,downloadedCount:m.videosCompleted,downloadToken:m.downloadToken,fileName:m.fileName,fileSize:m.fileSize,speed:m.speed,eta:m.eta})}catch{}},3e3);a.set(u,f)},_handlePlaylistUpdate(u,v){const f={stage:v.stage,status:v.message};if(v.progress!==void 0&&(f.progress=v.progress),v.speed!==void 0&&(f.speed=v.speed),v.eta!==void 0&&(f.eta=v.eta),v.totalVideos!==void 0&&(f.videoCount=v.totalVideos),v.currentVideo!==void 0&&(f.currentVideo=v.currentVideo),v.currentVideoTitle!==void 0&&(f.currentVideoTitle=v.currentVideoTitle),v.downloadedCount!==void 0&&(f.downloadedCount=v.downloadedCount),v.failedVideos&&(f.failedVideos=v.failedVideos),v.failedCount!==void 0&&(f.failedCount=v.failedCount),v.stage==="complete"&&v.downloadToken){f.stage="ready",f.downloadToken=v.downloadToken,f.fileName=v.fileName,f.fileSize=v.fileSize,f.endTime=Date.now(),f.status="playlist ready â tap to download",this.updateItem(u,f),h(u);const m=c().find(k=>k.id===u);he(`${(m==null?void 0:m.title)||"playlist"} is ready to download!`,"success",8e3),tl((m==null?void 0:m.title)||"playlist",m==null?void 0:m.serverJobId);return}if(v.stage==="error"){this.updateItem(u,f),h(u),he(v.message,"error");return}if(v.stage==="cancelled"){this.updateItem(u,f),h(u);return}this.updateItem(u,f)},async downloadReady(u){const f=c().find(x=>x.id===u);if(!(!f||!f.downloadToken)){if(f.serverJobId)try{if(!(await fetch(`${Ee()}/api/playlist/status/${f.serverJobId}`)).ok){this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),he("playlist expired â try again!","error");return}}catch{this.updateItem(u,{stage:"error",status:"playlist expired â try again!"}),he("playlist expired â try again!","error");return}Wr(`${Ee()}/api/playlist/download/${f.downloadToken}`),he("downloading playlist zip...","success"),setTimeout(()=>this.remove(u),1e4)}},startAllQueued(){c().filter(f=>f.stage==="queued").forEach((f,x)=>{setTimeout(()=>this.startDownload(f),x*500)})},retryDownload(u){if(!c().find(z=>z.id===u))return;h(u);const x=Date.now().toString()+Math.random().toString(36).substr(2,9);this.updateItem(u,{id:x,stage:"queued",progress:0,status:"queued for retry",logs:[],endTime:null,serverJobId:null,downloadToken:null});const k=c().find(z=>z.id===x);k&&this.startDownload(k)},async finishPlaylistEarly(u){const f=c().find(m=>m.id===u),x=(f==null?void 0:f.serverJobId)||u;try{await fetch(`${Ee()}/api/finish-early/${x}`,{method:"POST"})}catch{he("failed to finish early","error")}},resumePlaylistJobs(){c().filter(v=>v.stage==="reconnecting"&&v.serverJobId).forEach(v=>{this._connectPlaylistSSE(v.id,v.serverJobId),this._startPlaylistPolling(v.id,v.serverJobId)})},reconnectOnResume(){c().filter(v=>v.isPlaylist&&v.serverJobId&&sn.includes(v.stage)).forEach(v=>{const f=i.get(v.id);f&&(f.close(),i.delete(v.id)),this._connectPlaylistSSE(v.id,v.serverJobId),d(v.id),this._startPlaylistPolling(v.id,v.serverJobId)})}};return typeof window<"u"&&setTimeout(()=>b.resumePlaylistJobs(),500),b}const ge=sl();var nl=Be('<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',1),rl=Be('<polyline points="20 6 9 17 4 12"></polyline>'),il=Be('<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',1),ol=Be('<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',1),al=Be('<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',1),ll=Be('<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',1),cl=Be('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),ul=Be('<path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path><path d="M9 12l2 2 4-4"></path>',1),vl=Be('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),dl=T('<span class="queue-item-format svelte-151vo4w"> </span>'),fl=T('<span class="queue-item-timer svelte-151vo4w"> </span>'),pl=T('<span class="queue-item-timer svelte-151vo4w"> </span>'),hl=T('<button class="queue-item-download svelte-151vo4w" title="Download"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),gl=T('<button class="queue-item-retry svelte-151vo4w" title="Retry"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg></button>'),ml=T('<button class="queue-item-retry svelte-151vo4w" title="Start now"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button>'),_l=T('<button class="queue-item-retry svelte-151vo4w" title="Download now (skip remaining)"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>'),wl=T('<div class="queue-item-progress svelte-151vo4w"><div class="queue-item-progress-fill svelte-151vo4w"></div></div>'),yl=T('<div class="queue-item-failed-item svelte-151vo4w"><span class="queue-item-failed-num svelte-151vo4w"> </span> <span> </span></div>'),bl=T('<div class="queue-item-failed svelte-151vo4w"><div class="queue-item-failed-header svelte-151vo4w"> </div> <!></div>'),kl=T('<div><div class="queue-item-header svelte-151vo4w"><div><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-151vo4w"><!></svg></div> <div class="queue-item-info svelte-151vo4w"><div class="queue-item-title svelte-151vo4w"> <!> <!></div> <div> </div></div> <div class="queue-item-actions svelte-151vo4w"><!> <!> <!> <button class="queue-item-remove svelte-151vo4w" title="Remove"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div></div> <!> <!></div>');function xl(e,t){mt(t,!0);let s=ye(()=>sn.includes(t.item.stage)),n=ye(()=>t.item.stage==="complete"),i=ye(()=>t.item.stage==="error"),r=ye(()=>t.item.stage==="queued"),a=ye(()=>t.item.stage==="ready"),l=ye(()=>o(s)&&t.item.progress!==void 0),c=ye(()=>o(a)?"success":o(s)?"active":o(n)?"success":o(i)?"error":""),d=ye(()=>{if(!t.item.fileSize)return"";const P=t.item.fileSize/(1024*1024);return P>=1024?`${(P/1024).toFixed(1)} GB`:`${P.toFixed(1)} MB`}),h=ye(()=>{if(!t.item.startTime||!o(s)&&!o(n))return"";const P=o(n)&&t.item.endTime?t.item.endTime:Date.now(),I=Math.floor((P-t.item.startTime)/1e3),Z=Math.floor(I/60);return Z>0?`${Z}m ${I%60}s`:`${I}s`}),b=ye(()=>{if(t.item.isPlaylist&&t.item.currentVideo&&t.item.videoCount)return`${t.item.currentVideo}/${t.item.videoCount} - ${t.item.currentVideoTitle||t.item.status}`;let P=t.item.status||"waiting...";if(o(s)&&(t.item.speed||t.item.eta)){const I=[];t.item.speed&&I.push(t.item.speed),t.item.eta&&I.push(`~${t.item.eta} left`),I.length&&(P+=` Â· ${I.join(" Â· ")}`)}return P});var u=kl();let v;u.__click=()=>{o(a)?ge.downloadReady(t.item.id):o(r)&&ge.startDownload(t.item)};var f=g(u),x=g(f);let m;var k=g(x),z=g(k);{var R=P=>{var I=nl();y(P,I)},ve=P=>{var I=Ae(),Z=ze(I);{var ee=we=>{var Pe=rl();y(we,Pe)},le=we=>{var Pe=Ae(),He=ze(Pe);{var Je=Ke=>{var it=il();y(Ke,it)},rt=Ke=>{var it=Ae(),Nt=ze(it);{var vs=wt=>{var Ft=ol();y(wt,Ft)},Ot=wt=>{var Ft=Ae(),Ys=ze(Ft);{var Qs=j=>{var J=al();y(j,J)},C=j=>{var J=Ae(),ue=ze(J);{var q=S=>{var Q=ll();y(S,Q)},M=S=>{var Q=Ae(),N=ze(Q);{var O=ne=>{var pe=cl();y(ne,pe)},L=ne=>{var pe=Ae(),Me=ze(pe);{var Te=Re=>{var yt=ul();y(Re,yt)},qe=Re=>{var yt=vl();y(Re,yt)};D(Me,Re=>{o(s)?Re(Te):Re(qe,!1)},!0)}y(ne,pe)};D(N,ne=>{t.item.format==="audio"?ne(O):ne(L,!1)},!0)}y(S,Q)};D(ue,S=>{t.item.type==="compress"?S(q):S(M,!1)},!0)}y(j,J)};D(Ys,j=>{t.item.type==="convert"?j(Qs):j(C,!1)},!0)}y(wt,Ft)};D(Nt,wt=>{t.item.isPlaylist?wt(vs):wt(Ot,!1)},!0)}y(Ke,it)};D(He,Ke=>{o(i)?Ke(Je):Ke(rt,!1)},!0)}y(we,Pe)};D(Z,we=>{o(n)?we(ee):we(le,!1)},!0)}y(P,I)};D(z,P=>{o(a)?P(R):P(ve,!1)})}var Y=_(x,2),re=g(Y),xe=g(re),be=_(xe);{var me=P=>{var I=dl(),Z=g(I);W(()=>A(Z,t.item.formatDisplay)),y(P,I)};D(be,P=>{t.item.isPlaylist&&t.item.formatDisplay&&P(me)})}var De=_(be,2);{var Ye=P=>{var I=fl(),Z=g(I);W(()=>A(Z,o(d))),y(P,I)},Qe=P=>{var I=Ae(),Z=ze(I);{var ee=le=>{var we=pl(),Pe=g(we);W(()=>A(Pe,o(h))),y(le,we)};D(Z,le=>{o(h)&&le(ee)},!0)}y(P,I)};D(De,P=>{o(a)&&o(d)?P(Ye):P(Qe,!1)})}var V=_(re,2),G=g(V),de=_(Y,2),E=g(de);{var $=P=>{var I=hl();I.__click=Z=>{Z.stopPropagation(),ge.downloadReady(t.item.id)},y(P,I)},F=P=>{var I=Ae(),Z=ze(I);{var ee=le=>{var we=gl();we.__click=Pe=>{Pe.stopPropagation(),ge.retryDownload(t.item.id)},y(le,we)};D(Z,le=>{o(i)&&t.item.url&&le(ee)},!0)}y(P,I)};D(E,P=>{o(a)?P($):P(F,!1)})}var U=_(E,2);{var ae=P=>{var I=ml();I.__click=Z=>{Z.stopPropagation(),ge.startDownload(t.item)},y(P,I)};D(U,P=>{o(r)&&P(ae)})}var Se=_(U,2);{var K=P=>{var I=_l();I.__click=Z=>{Z.stopPropagation(),ge.finishPlaylistEarly(t.item.id)},y(P,I)};D(Se,P=>{t.item.isPlaylist&&o(s)&&t.item.currentVideo>0&&P(K)})}var _e=_(Se,2);_e.__click=P=>{P.stopPropagation(),ge.remove(t.item.id)};var te=_(f,2);{var H=P=>{var I=wl(),Z=g(I);W(()=>yn(Z,`width: ${(t.item.progress||0)??""}%`)),y(P,I)};D(te,P=>{o(l)&&P(H)})}var X=_(te,2);{var fe=P=>{var I=bl(),Z=g(I),ee=g(Z),le=_(Z,2);Ge(le,17,()=>t.item.failedVideos,tt,(we,Pe)=>{var He=yl(),Je=g(He),rt=g(Je),Ke=_(Je,2),it=g(Ke);W(()=>{A(rt,`#${o(Pe).num??""}`),A(it,`${(o(Pe).title||"Video")??""} - ${(o(Pe).reason||"Download failed")??""}`)}),y(we,He)}),W(()=>A(ee,`failed videos (${(t.item.failedCount||t.item.failedVideos.length)??""})`)),y(P,I)};D(X,P=>{var I;t.item.isPlaylist&&((I=t.item.failedVideos)==null?void 0:I.length)>0&&P(fe)})}W(()=>{v=ke(u,1,"queue-item svelte-151vo4w",null,v,{clickable:o(a)||o(r)}),m=ke(x,1,"queue-item-icon svelte-151vo4w",null,m,{spinning:o(s),ready:o(a)}),A(xe,`${t.item.title??""} `),ke(V,1,`queue-item-status ${o(c)??""}`,"svelte-151vo4w"),A(G,o(b))}),y(e,u),_t()}Kt(["click"]);var Sl=T('<button class="queue-clear svelte-i3r5ty">clear all</button>'),Tl=T('<div class="queue-empty svelte-i3r5ty">nothing here yet</div>'),zl=T('<div class="queue-dropdown-header svelte-i3r5ty"><span class="queue-dropdown-title svelte-i3r5ty">queue</span> <div class="queue-header-actions svelte-i3r5ty"><button class="queue-start-all svelte-i3r5ty" title="Start all queued"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-i3r5ty"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg></button> <!></div></div> <div class="queue-list svelte-i3r5ty"><!></div>',1);function io(e,t){mt(t,!0);const s=()=>Dt(ge,"$queue",n),[n,i]=Xt();let r=ye(s),a=ye(()=>o(r).length>0);var l=zl(),c=ze(l),d=_(g(c),2),h=g(d);h.__click=()=>ge.startAllQueued();var b=_(h,2);{var u=k=>{var z=Sl();z.__click=()=>{ge.clear(),he("Queue cleared","info")},y(k,z)};D(b,k=>{o(a)&&k(u)})}var v=_(c,2),f=g(v);{var x=k=>{var z=Ae(),R=ze(z);Ge(R,17,()=>o(r),ve=>ve.id,(ve,Y)=>{xl(ve,{get item(){return o(Y)}})}),y(k,z)},m=k=>{var z=Tl();y(k,z)};D(f,k=>{o(a)?k(x):k(m,!1)})}y(e,l),_t(),i()}Kt(["click"]);var Cl=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-1xkxv2n"></path><polyline points="7 10 12 15 17 10" class="svelte-1xkxv2n"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-1xkxv2n"></line></svg>'),jl=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="17 1 21 5 17 9" class="svelte-1xkxv2n"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14" class="svelte-1xkxv2n"></path><polyline points="7 23 3 19 7 15" class="svelte-1xkxv2n"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3" class="svelte-1xkxv2n"></path></svg>'),El=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><polyline points="4 14 10 14 10 20" class="svelte-1xkxv2n"></polyline><polyline points="20 10 14 10 14 4" class="svelte-1xkxv2n"></polyline><line x1="14" y1="10" x2="21" y2="3" class="svelte-1xkxv2n"></line><line x1="3" y1="21" x2="10" y2="14" class="svelte-1xkxv2n"></line></svg>'),Pl=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><circle cx="12" cy="12" r="3" class="svelte-1xkxv2n"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" class="svelte-1xkxv2n"></path></svg>'),ql=T('<a><div class="nav-icon svelte-1xkxv2n"><!></div> <span class="nav-label svelte-1xkxv2n"> </span></a>'),Ml=T('<span class="nav-badge svelte-1xkxv2n"> </span>'),$l=T('<div class="queue-sheet-overlay svelte-1xkxv2n"></div> <div><div class="sheet-handle svelte-1xkxv2n"></div> <!></div>',1),Il=T('<nav class="bottom-nav svelte-1xkxv2n"><!> <button><div class="nav-icon svelte-1xkxv2n"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1xkxv2n"><line x1="8" y1="6" x2="21" y2="6" class="svelte-1xkxv2n"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-1xkxv2n"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-1xkxv2n"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-1xkxv2n"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-1xkxv2n"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-1xkxv2n"></line></svg> <!></div> <span class="nav-label svelte-1xkxv2n">queue</span></button></nav> <!>',1);function Bl(e,t){mt(t,!0);const s=()=>Dt(ge,"$queue",i),n=()=>Dt(zr,"$path",i),[i,r]=Xt();let a=B(!1),l,c=B(0),d=B(!1),h=0,b=0,u=ye(s),v=ye(()=>o(u).length),f=ye(n),x=ye(()=>o(u).filter(E=>["starting","downloading","processing","zipping","sending"].includes(E.stage)).length);function m(E){E.preventDefault(),E.stopPropagation(),p(a,!o(a)),p(c,0)}function k(){p(a,!1),p(c,0)}function z(E){const $=l;$&&($.scrollTop>0&&E.target.closest(".queue-sheet")&&!E.target.closest(".sheet-handle")||(h=E.touches[0].clientY,b=Date.now(),p(d,!0)))}function R(E){if(!o(d))return;const $=E.touches[0].clientY-h;$>0?(p(c,$),E.preventDefault()):p(c,0)}function ve(){if(!o(d))return;p(d,!1);const E=o(c)/(Date.now()-b);o(c)>80||E>.5?k():p(c,0)}const Y=[{href:"/",label:"download",icon:"download"},{href:"/convert",label:"convert",icon:"convert"},{href:"/compress",label:"compress",icon:"compress"},{href:"/settings",label:"settings",icon:"settings"}];var re=Il();Tt("keydown",Nn,E=>{E.key==="Escape"&&o(a)&&k()});var xe=ze(re),be=g(xe);Ge(be,17,()=>Y,tt,(E,$)=>{var F=ql();let U;var ae=g(F),Se=g(ae);{var K=X=>{var fe=Cl();y(X,fe)},_e=X=>{var fe=Ae(),P=ze(fe);{var I=ee=>{var le=jl();y(ee,le)},Z=ee=>{var le=Ae(),we=ze(le);{var Pe=Je=>{var rt=El();y(Je,rt)},He=Je=>{var rt=Ae(),Ke=ze(rt);{var it=Nt=>{var vs=Pl();y(Nt,vs)};D(Ke,Nt=>{o($).icon==="settings"&&Nt(it)},!0)}y(Je,rt)};D(we,Je=>{o($).icon==="compress"?Je(Pe):Je(He,!1)},!0)}y(ee,le)};D(P,ee=>{o($).icon==="convert"?ee(I):ee(Z,!1)},!0)}y(X,fe)};D(Se,X=>{o($).icon==="download"?X(K):X(_e,!1)})}var te=_(ae,2),H=g(te);W(()=>{U=ke(F,1,"bottom-nav-item svelte-1xkxv2n",null,U,{active:o(f)===o($).href}),cs(F,"href",o($).href),A(H,o($).label)}),y(E,F)});var me=_(be,2);let De;me.__click=m;var Ye=g(me),Qe=_(g(Ye),2);{var V=E=>{var $=Ml(),F=g($);W(()=>A(F,o(v))),y(E,$)};D(Qe,E=>{o(v)>0&&E(V)})}var G=_(xe,2);{var de=E=>{var $=$l(),F=ze($);F.__click=k;var U=_(F,2);let ae;U.__touchstart=z,U.__touchmove=R,U.__touchend=ve;var Se=_(g(U),2);io(Se,{}),bn(U,K=>l=K,()=>l),W(()=>{ae=ke(U,1,"queue-sheet svelte-1xkxv2n",null,ae,{swiping:o(d)}),yn(U,o(c)>0?`transform: translateY(${o(c)}px)`:"")}),y(E,$)};D(G,E=>{o(a)&&E(de)})}W(()=>De=ke(me,1,"bottom-nav-item queue-item svelte-1xkxv2n",null,De,{active:o(a),"has-active":o(x)>0})),y(e,re),_t(),r()}Kt(["click","touchstart","touchmove","touchend"]);var Dl=T("<a><!></a>");function ss(e,t){const s=()=>Dt(zr,"$path",n),[n,i]=Xt();let r=ye(()=>s()===t.href);var a=Dl();let l;var c=g(a);Qi(c,()=>t.children),W(()=>{l=ke(a,1,"nav-link svelte-5q5w88",null,l,{active:o(r)}),cs(a,"href",t.href)}),y(e,a),i()}var Rl=T('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> <span>download</span>',1),Al=T('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> <span>convert</span>',1),Nl=T('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> <span>compress</span>',1),Ol=T('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span>settings</span>',1),Fl=T('<header class="svelte-4b3o1e"><div class="header-left svelte-4b3o1e"><a href="/" class="logo-link svelte-4b3o1e"><span class="logo-text svelte-4b3o1e">yoink</span> <span class="logo-tld svelte-4b3o1e">.tools</span></a></div> <div class="header-right svelte-4b3o1e"><!> <nav class="nav-links svelte-4b3o1e"><!> <!> <!> <!></nav></div></header>');function Ll(e,t){var s=Fl(),n=_(g(s),2),i=g(n);{var r=b=>{var u=Ae(),v=ze(u);Qi(v,()=>t.extraContent),y(b,u)};D(i,b=>{t.extraContent&&b(r)})}var a=_(i,2),l=g(a);ss(l,{href:"/",children:(b,u)=>{var v=Rl();y(b,v)}});var c=_(l,2);ss(c,{href:"/convert",children:(b,u)=>{var v=Al();y(b,v)}});var d=_(c,2);ss(d,{href:"/compress",children:(b,u)=>{var v=Nl();y(b,v)}});var h=_(d,2);ss(h,{href:"/settings",children:(b,u)=>{var v=Ol();y(b,v)}}),y(e,s)}var Ul=T('<footer class="svelte-ww03jg"><div class="footer-left svelte-ww03jg"><div>this is a <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-ww03jg">yt-dlp</a> wrapper</div> <div>inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt</a>, love u wukko</div> <div>youtube powered by <a href="https://patriick.dev/" target="_blank" rel="noopener" class="svelte-ww03jg">patrick</a> at <a href="https://cobalt.meowing.de" target="_blank" rel="noopener" class="svelte-ww03jg">cobalt.meowing.de</a></div> <div class="legal svelte-ww03jg">by using this site you agree to our <a href="/privacy" class="svelte-ww03jg">privacy policy</a></div></div> <div class="footer-right svelte-ww03jg"><a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-ww03jg">github</a> <span>Â·</span> <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-ww03jg">coah80.com</a> <span>Â·</span> <a href="/privacy" class="svelte-ww03jg">privacy</a></div></footer>');function Vl(e){var t=Ul();y(e,t)}var Hl=T('<span class="queue-badge svelte-1picwiz"> </span>'),Jl=T('<div class="queue-dropdown svelte-1picwiz"><!></div>'),Wl=T('<div class="queue-menu svelte-1picwiz"><button class="queue-toggle svelte-1picwiz"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1picwiz"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> queue <!></button> <!></div>');function Gl(e,t){mt(t,!0);const s=()=>Dt(ge,"$queue",n),[n,i]=Xt();let r=B(!1),a,l=ye(s),c=ye(()=>o(l).length);function d(k){k.stopPropagation(),p(r,!o(r))}function h(k){a&&!a.contains(k.target)&&p(r,!1)}Mn(()=>(document.addEventListener("click",h),()=>document.removeEventListener("click",h)));var b=Wl(),u=g(b);u.__click=d;var v=_(g(u),2);{var f=k=>{var z=Hl(),R=g(z);W(()=>A(R,o(c))),y(k,z)};D(v,k=>{o(c)>0&&k(f)})}var x=_(u,2);{var m=k=>{var z=Jl(),R=g(z);io(R,{}),y(k,z)};D(x,k=>{o(r)&&k(m)})}bn(b,k=>a=k,()=>a),y(e,b),_t(),i()}Kt(["click"]);var Yl=T('<div class="spinner svelte-1ea6fjo" role="status" aria-label="Loading"></div>');function oo(e){var t=Yl();y(e,t)}function ao(e){if(e===0||!Number.isFinite(e)||e<0)return"0 B";const t=1024,s=["B","KB","MB","GB","TB"],n=Math.min(Math.max(Math.floor(Math.log(e)/Math.log(t)),0),s.length-1);return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+s[n]}function Qr(e){try{const t=new URL(e);if(t.hostname==="youtu.be"){const s=t.pathname.slice(1).split("?")[0],n=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${s}${n?`&list=${n}`:""}`}if(t.hostname.includes("youtube.com")){if(t.pathname.startsWith("/shorts/"))return`https://www.youtube.com/watch?v=${t.pathname.replace("/shorts/","").split("?")[0]}`;if(t.searchParams.get("v")){const s=t.searchParams.get("list");return`https://www.youtube.com/watch?v=${t.searchParams.get("v")}${s?`&list=${s}`:""}`}if(t.pathname==="/playlist"&&t.searchParams.get("list"))return`https://www.youtube.com/playlist?list=${t.searchParams.get("list")}`}return e}catch{return e}}function Kr(e){try{const t=new URL(e).hostname;return t==="youtu.be"||t.includes("youtube.com")}catch{return!1}}function Xr(e){try{return new URL(e).searchParams.has("list")}catch{return!1}}function Zr(){return Date.now().toString()+Math.random().toString(36).substr(2,9)}var Ql=T("<p> </p>"),Kl=T('<button class="clear-btn svelte-et6md" type="button" title="Clear"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="18" y1="6" x2="6" y2="18" class="svelte-et6md"></line><line x1="6" y1="6" x2="18" y2="18" class="svelte-et6md"></line></svg></button>'),Xl=T('<button class="paste-btn svelte-et6md" type="button" title="Paste from clipboard"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="9" y="9" width="13" height="13" rx="2" ry="2" class="svelte-et6md"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" class="svelte-et6md"></path></svg></button>'),Zl=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" class="svelte-et6md"></polygon></svg>'),ec=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" class="svelte-et6md"></rect><line x1="7" y1="2" x2="7" y2="22" class="svelte-et6md"></line><line x1="17" y1="2" x2="17" y2="22" class="svelte-et6md"></line><line x1="2" y1="12" x2="22" y2="12" class="svelte-et6md"></line><line x1="2" y1="7" x2="7" y2="7" class="svelte-et6md"></line><line x1="2" y1="17" x2="7" y2="17" class="svelte-et6md"></line><line x1="17" y1="17" x2="22" y2="17" class="svelte-et6md"></line><line x1="17" y1="7" x2="22" y2="7" class="svelte-et6md"></line></svg>'),tc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M9 18V5l12-2v13" class="svelte-et6md"></path><circle cx="6" cy="18" r="3" class="svelte-et6md"></circle><circle cx="18" cy="16" r="3" class="svelte-et6md"></circle></svg>'),sc=Be('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" class="svelte-et6md"></rect><circle cx="8.5" cy="8.5" r="1.5" class="svelte-et6md"></circle><polyline points="21 15 16 10 5 21" class="svelte-et6md"></polyline></svg>'),nc=T('<button><!> <span class="svelte-et6md"> </span></button>'),rc=T('<div class="yoink-dropdown svelte-et6md"><button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button> <button class="yoink-dropdown-item svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> batch add urls</button></div>'),ic=T("<div><!> </div>"),oc=T('<div class="modal-overlay svelte-et6md"><div class="modal svelte-et6md"><div class="modal-title svelte-et6md">playlist detected!</div> <div class="modal-subtitle svelte-et6md">do you want to download just this video, or the whole playlist?</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polygon points="5 3 19 12 5 21 5 3" class="svelte-et6md"></polygon></svg> video</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="8" y1="6" x2="21" y2="6" class="svelte-et6md"></line><line x1="8" y1="12" x2="21" y2="12" class="svelte-et6md"></line><line x1="8" y1="18" x2="21" y2="18" class="svelte-et6md"></line><line x1="3" y1="6" x2="3.01" y2="6" class="svelte-et6md"></line><line x1="3" y1="12" x2="3.01" y2="12" class="svelte-et6md"></line><line x1="3" y1="18" x2="3.01" y2="18" class="svelte-et6md"></line></svg> playlist</button></div> <label class="modal-toggle svelte-et6md"><input type="checkbox" class="svelte-et6md"/> <span class="modal-toggle-switch svelte-et6md"></span> <span class="modal-toggle-label svelte-et6md">remember this choice</span></label> <div class="modal-hint svelte-et6md">this can be changed in <a href="/settings" class="svelte-et6md">settings</a>!</div></div></div>'),ac=T('<div class="modal-overlay svelte-et6md"><div class="modal batch-modal svelte-et6md"><div class="modal-title svelte-et6md">batch add urls</div> <div class="modal-subtitle svelte-et6md">paste multiple URLs, one per line</div> <textarea class="batch-textarea svelte-et6md"></textarea> <div class="batch-count svelte-et6md"><span class="svelte-et6md"> </span> urls detected</div> <div class="modal-buttons svelte-et6md"><button class="modal-btn svelte-et6md">cancel</button> <button class="modal-btn primary svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><line x1="12" y1="5" x2="12" y2="19" class="svelte-et6md"></line><line x1="5" y1="12" x2="19" y2="12" class="svelte-et6md"></line></svg> add to queue</button></div></div></div>'),lc=T('<!> <main class="svelte-et6md"><div class="branding svelte-et6md"><h1 class="svelte-et6md">yoink<span class="brand-tld svelte-et6md">.tools</span></h1> <!></div> <div class="input-container svelte-et6md"><div class="url-input-wrapper svelte-et6md"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" class="svelte-et6md"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" class="svelte-et6md"></path></svg> <input type="text" class="url-input svelte-et6md" placeholder="paste the link here..." autocomplete="off" spellcheck="false"/> <!></div> <div class="format-section svelte-et6md"><div class="segmented-control svelte-et6md"></div> <div><button class="yoink-btn svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" class="svelte-et6md"></path><polyline points="7 10 12 15 17 10" class="svelte-et6md"></polyline><line x1="12" y1="15" x2="12" y2="3" class="svelte-et6md"></line></svg> </button> <button class="yoink-dropdown-toggle svelte-et6md" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-et6md"><polyline points="6 9 12 15 18 9" class="svelte-et6md"></polyline></svg></button> <!></div></div> <!></div></main> <!> <!> <!>',1);function cc(e,t){mt(t,!0);const s=()=>Dt(xs,"$settings",n),[n,i]=Xt();let r=B(""),a=B("auto"),l=B(!1),c=B(null),d=B(""),h=B(!1),b=B(!1),u=B(!1),v=B(""),f=B(null),x=B(null),m,k=ye(()=>o(v).split(`
`).filter(C=>{const j=C.trim();if(!j)return!1;try{return new URL(j),!0}catch{return!1}}).length);const z=[{id:"auto",label:"auto",icon:"bolt"},{id:"video",label:"video",icon:"video"},{id:"audio",label:"audio",icon:"audio"},{id:"images",label:"images",icon:"image"}];function R(){p(x,Gr[Math.floor(Math.random()*Gr.length)],!0)}function ve(){var C;(C=o(x))!=null&&C.link&&window.open(o(x).link,"_blank")}function Y(){let C=null;try{const j=localStorage.getItem("yoink_shared_url");if(j){const J=JSON.parse(j);Date.now()-J.timestamp<300*1e3&&(C=J.url),localStorage.removeItem("yoink_shared_url")}}catch{localStorage.removeItem("yoink_shared_url")}if(!C&&window.location.pathname==="/share"){const j=new URLSearchParams(window.location.search),ue=(j.get("url")||j.get("text")||"").match(/https?:\/\/[^\s]+/);ue&&(C=ue[0].replace(/[.,!?;:)\]}>]+$/,"")),history.replaceState(null,"","/")}C&&(p(r,C,!0),setTimeout(()=>V(),150))}Ln(()=>{R(),Y()});async function re(){try{const C=await navigator.clipboard.readText();C&&(p(r,C.trim(),!0),m==null||m.focus())}catch{he("Could not read clipboard","error")}}function xe(C,j){p(c,C,!0),p(d,j,!0)}function be(){p(c,null),p(d,"")}function me(){return new Promise(C=>{p(f,C,!0),p(h,!0)})}function De(C,j){j&&xs.setSetting("playlistPreference",C),o(f)&&o(f)(C),p(f,null),p(h,!1)}function Ye(){o(f)&&o(f)(null),p(f,null),p(h,!1)}async function Qe(C,j=!1){const J=Qr(C),ue=o(a)==="auto"?"video":o(a);if(ue==="images"&&Kr(J))return he("YouTube doesn't support image downloads","error"),null;const q=Zr(),M=s();let S=!1;if(ue!=="images"&&Xr(J))if(M.playlistPreference==="video")S=!1;else if(M.playlistPreference==="playlist")S=!0;else{const O=await me();if(O===null)return null;S=O==="playlist"}let Q="Loading...";try{if(ue==="images"){const O=await fetch(`${Ee()}/api/gallery/metadata?url=${encodeURIComponent(J)}`),L=O.headers.get("content-type");O.ok&&(L!=null&&L.includes("application/json"))?Q=(await O.json()).title||"Gallery":Q=J.substring(0,50)}else{const O=await fetch(`${Ee()}/api/metadata?url=${encodeURIComponent(J)}&playlist=${S}`),L=O.headers.get("content-type");if(O.ok&&(L!=null&&L.includes("application/json"))){const ne=await O.json();if(Q=ne.title||"Unknown",ne.usingCookies&&he("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3),ne.clipNote){const pe=ne.clipNote.toLowerCase().includes("warning")||ne.originalDuration>600;he(ne.clipNote,pe?"warning":"info",6e3)}}else if(!O.ok&&(L!=null&&L.includes("application/json"))){const ne=await O.json();if(ne.clipUnsupported)return he("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),null;throw new Error(ne.error||"Metadata fetch failed")}else Q=J.substring(0,50)}}catch{Q=J.substring(0,50)}const N={id:q,title:Q,url:J,format:ue,stage:j?"starting":"queued",status:j?"initializing...":"in queue",progress:0,isPlaylist:S,formatDisplay:ue==="images"?"images":ue==="audio"?M.audioFormat:`${M.quality} ${M.container}`,startTime:j?Date.now():null,failedVideos:[]};return ge.add(N),j&&ge.startDownload(N),N}async function V(){const C=o(r).trim();if(!C){he("Please enter a URL","error");return}const j=Qr(C);try{new URL(j)}catch{he("Please enter a valid URL","error");return}if(Xa(j)&&p(x,{text:"okay dude are you just gonna download porn"},!0),o(a)==="images"&&Kr(j)){he("YouTube doesn't support image downloads â use video or audio","error");return}p(l,!0);const J=o(a)==="auto"?"video":o(a),ue=s();let q=!1;if(J!=="images"&&Xr(j))if(ue.playlistPreference==="video")q=!1;else if(ue.playlistPreference==="playlist")q=!0;else{const S=await me();if(S===null){p(l,!1);return}q=S==="playlist"}const M=Zr();try{xe("loading",J==="images"?"fetching gallery info...":"fetching video info...");let S;if(J==="images"){const pe=await fetch(`${Ee()}/api/gallery/metadata?url=${encodeURIComponent(j)}`),Me=pe.headers.get("content-type");if(!pe.ok){let Te="Failed to fetch gallery info";if(Me!=null&&Me.includes("application/json"))Te=(await pe.json()).error||Te;else{const qe=await pe.text();Te=qe.includes("Cloudflare")||qe.includes("403")?"Access denied (VPN blocked?)":`Server error: ${pe.status}`}throw new Error(Te)}S=await pe.json(),S.title=S.title||"Gallery"}else{const pe=await fetch(`${Ee()}/api/metadata?url=${encodeURIComponent(j)}&playlist=${q}`),Me=pe.headers.get("content-type");if(!pe.ok){let Te="Failed to fetch metadata";if(Me!=null&&Me.includes("application/json")){const qe=await pe.json();if(qe.clipUnsupported){xe("error","Could not parse YouTube clip"),he("Could not parse YouTube clip. Try using the full video URL instead.","error",8e3),p(l,!1);return}Te=qe.error||Te}else{const qe=await pe.text();Te=`Server error ${pe.status} (likely VPN blocked)`}throw new Error(Te)}S=await pe.json()}const Q=S.title,N=S.isPlaylist&&q,O=J==="images",L=S.videoCount||S.imageCount||0;S.usingCookies&&he("Using intervaled requests to stay under the radar (this may be slower)","warning",5e3);const ne={id:M,title:Q,url:j,format:J,stage:"starting",status:"initializing...",progress:0,isPlaylist:N,isGallery:O,videoCount:L,currentVideo:0,currentVideoTitle:"",formatDisplay:J==="images"?"images":J==="audio"?ue.audioFormat:`${ue.quality} ${ue.container}`,failedVideos:[],startTime:Date.now()};ge.add(ne),ge.startDownload(ne),p(r,""),be()}catch(S){xe("error",S.message||"Download failed"),he(S.message||"Download failed","error")}finally{p(l,!1)}}function G(C){C.key==="Enter"&&V()}async function de(){p(u,!1);const C=o(r).trim();if(!C){he("Please enter a URL","error");return}try{new URL(C)}catch{he("Please enter a valid URL","error");return}await Qe(C),p(r,"")}function E(){p(u,!1),p(v,""),p(b,!0)}async function $(){const C=o(v).split(`
`).map(j=>j.trim()).filter(j=>{try{return new URL(j),!0}catch{return!1}});if(C.length===0){he("No valid URLs found","error");return}p(b,!1),he(`Adding ${C.length} URLs to queue...`,"info");for(const j of C)await Qe(j,!1);he(`${C.length} items added to queue`,"success")}let F=B(!1);var U=lc();Tt("click",Nn,C=>{C.target.closest(".yoink-btn-wrapper")||p(u,!1)});var ae=ze(U);Ll(ae,{extraContent:j=>{Gl(j,{})}});var Se=_(ae,2),K=g(Se),_e=_(g(K),2);{var te=C=>{var j=Ql();let J;j.__click=ve;var ue=g(j);W(q=>{J=ke(j,1,"splash svelte-et6md",null,J,q),yn(j,o(x).link?"cursor: pointer;":""),A(ue,o(x).text)},[()=>{var q,M,S;return{fancy:(q=o(x).classes)==null?void 0:q.includes("fancy"),clickable:(M=o(x).classes)==null?void 0:M.includes("clickable"),rainbow:(S=o(x).classes)==null?void 0:S.includes("rainbow")}}]),y(C,j)};D(_e,C=>{o(x)&&C(te)})}var H=_(K,2),X=g(H),fe=_(g(X),2);fe.__keydown=G,bn(fe,C=>m=C,()=>m);var P=_(fe,2);{var I=C=>{var j=Kl();j.__click=()=>{p(r,""),m==null||m.focus()},y(C,j)},Z=C=>{var j=Xl();j.__click=re,y(C,j)};D(P,C=>{o(r)?C(I):C(Z,!1)})}var ee=_(X,2),le=g(ee);Ge(le,21,()=>z,tt,(C,j)=>{var J=nc();let ue;J.__click=()=>p(a,o(j).id,!0);var q=g(J);{var M=O=>{var L=Zl();y(O,L)},S=O=>{var L=Ae(),ne=ze(L);{var pe=Te=>{var qe=ec();y(Te,qe)},Me=Te=>{var qe=Ae(),Re=ze(qe);{var yt=Lt=>{var Ps=tc();y(Lt,Ps)},je=Lt=>{var Ps=Ae(),Ks=ze(Ps);{var xn=qs=>{var Sn=sc();y(qs,Sn)};D(Ks,qs=>{o(j).icon==="image"&&qs(xn)},!0)}y(Lt,Ps)};D(Re,Lt=>{o(j).icon==="audio"?Lt(yt):Lt(je,!1)},!0)}y(Te,qe)};D(ne,Te=>{o(j).icon==="video"?Te(pe):Te(Me,!1)},!0)}y(O,L)};D(q,O=>{o(j).icon==="bolt"?O(M):O(S,!1)})}var Q=_(q,2),N=g(Q);W(()=>{ue=ke(J,1,"segment svelte-et6md",null,ue,{active:o(a)===o(j).id}),A(N,o(j).label)}),y(C,J)});var we=_(le,2);let Pe;var He=g(we);He.__click=V;var Je=_(g(He)),rt=_(He,2);rt.__click=C=>{C.stopPropagation(),p(u,!o(u))};var Ke=_(rt,2);{var it=C=>{var j=rc(),J=g(j);J.__click=de;var ue=_(J,2);ue.__click=E,y(C,j)};D(Ke,C=>{o(u)&&C(it)})}var Nt=_(ee,2);{var vs=C=>{var j=ic(),J=g(j);{var ue=M=>{oo(M)};D(J,M=>{o(c)==="loading"&&M(ue)})}var q=_(J);W(()=>{ke(j,1,`status ${o(c)??""}`,"svelte-et6md"),A(q,` ${o(d)??""}`)}),y(C,j)};D(Nt,C=>{o(c)&&C(vs)})}var Ot=_(Se,2);Vl(Ot);var wt=_(Ot,2);{var Ft=C=>{var j=oc();j.__click=N=>{N.target===N.currentTarget&&Ye()};var J=g(j),ue=_(g(J),4),q=g(ue);q.__click=()=>De("video",o(F));var M=_(q,2);M.__click=()=>De("playlist",o(F));var S=_(ue,2),Q=g(S);Xi(Q,()=>o(F),N=>p(F,N)),y(C,j)};D(wt,C=>{o(h)&&C(Ft)})}var Ys=_(wt,2);{var Qs=C=>{var j=ac();j.__click=L=>{L.target===L.currentTarget&&p(b,!1)};var J=g(j),ue=_(g(J),4);cs(ue,"placeholder",`https://youtube.com/watch?v=...
https://youtube.com/watch?v=...
https://youtube.com/watch?v=...`);var q=_(ue,2),M=g(q),S=g(M),Q=_(q,2),N=g(Q);N.__click=()=>p(b,!1);var O=_(N,2);O.__click=$,W(()=>A(S,o(k))),Ur(ue,()=>o(v),L=>p(v,L)),y(C,j)};D(Ys,C=>{o(b)&&C(Qs)})}W(()=>{Pe=ke(we,1,"yoink-btn-wrapper svelte-et6md",null,Pe,{open:o(u)}),He.disabled=o(l),A(Je,` ${o(l)?"loading...":"yoink"}`)}),Tt("focus",fe,be),Ur(fe,()=>o(r),C=>p(r,C)),y(e,U),_t(),i()}Kt(["click","keydown"]);var uc=T('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> <span>download</span>',1),vc=T('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> <span>convert</span>',1),dc=T('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg> <span>compress</span>',1),fc=T('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> <span>settings</span>',1),pc=T('<header class="svelte-67r2h0"><div class="header-center svelte-67r2h0"><a href="/" class="logo-link svelte-67r2h0"><span class="logo-text svelte-67r2h0">yoink</span> <span class="logo-tld svelte-67r2h0">.tools</span></a></div> <nav class="header-right svelte-67r2h0"><!> <!> <!> <!></nav></header>');function kn(e){var t=pc(),s=_(g(t),2),n=g(s);ss(n,{href:"/",children:(l,c)=>{var d=uc();y(l,d)}});var i=_(n,2);ss(i,{href:"/convert",children:(l,c)=>{var d=vc();y(l,d)}});var r=_(i,2);ss(r,{href:"/compress",children:(l,c)=>{var d=dc();y(l,d)}});var a=_(r,2);ss(a,{href:"/settings",children:(l,c)=>{var d=fc();y(l,d)}}),y(e,t)}var hc=T('<footer class="svelte-1dij6pu"><a href="/" class="svelte-1dij6pu">yoink.tools</a> - powered by <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" rel="noopener" class="svelte-1dij6pu">yt-dlp</a> Â· <a href="/privacy" class="svelte-1dij6pu">privacy</a></footer>');function Vn(e){var t=hc();y(e,t)}var gc=T("<button><span> </span></button>"),mc=T("<button> </button>"),_c=T("<button> </button>"),wc=T("<button> </button>"),yc=T(`<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">video</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">video quality</div> <div class="quality-grid svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">if preferred quality isn't available, the next best option will be used. 1080p is recommended for most uses.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">preferred codec</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">h264: best compatibility, max 1080p. av1: best quality & efficiency, supports 8k & HDR. vp9: same quality as av1 but ~2x larger.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">file container</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp4 has the best compatibility. webm is great for web. mkv supports more features but has limited playback support.</p></div></section>`),bc=T("<button> </button>"),kc=T("<button> </button>"),xc=T('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">audio</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio format</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">mp3: universal compatibility. m4a: better quality at same size. opus: best compression. flac/wav: lossless quality.</p></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">audio bitrate</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">higher bitrate = better quality but larger file size. 320kbps is CD-quality for most people.</p></div></section>'),Sc=T("<button> </button>"),Tc=T("<button> </button>"),zc=T('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">downloads</h2> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">filename style</div> <div class="segmented-control svelte-1ozf5k3"></div> <div class="filename-preview svelte-1ozf5k3"><code class="svelte-1ozf5k3"> </code></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">twitter/x gifs as gif</div> <p class="setting-description svelte-1ozf5k3">automatically convert twitter/x "gifs" (which are actually videos) to real gif files. turn off to keep them as mp4.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">playlist behavior</div> <div class="segmented-control svelte-1ozf5k3"></div> <p class="setting-description svelte-1ozf5k3">when a link contains a playlist, should we download just the video or the entire playlist? "ask me" will show a popup each time.</p></div></section>'),Cc=T('<section class="settings-section svelte-1ozf5k3"><h2 class="section-title svelte-1ozf5k3">advanced</h2> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">allow h265 codec</div> <p class="setting-description svelte-1ozf5k3">enables downloading h265/HEVC videos for platforms like TikTok. higher quality but may have compatibility issues with some players.</p></div> <button></button></div></div> <div class="settings-card svelte-1ozf5k3"><div class="toggle-row svelte-1ozf5k3"><div class="toggle-info svelte-1ozf5k3"><div class="setting-label svelte-1ozf5k3">embed metadata</div> <p class="setting-description svelte-1ozf5k3">include title, artist, and other metadata in downloaded files.</p></div> <button></button></div></div> <div class="divider svelte-1ozf5k3"></div> <button class="reset-btn svelte-1ozf5k3">reset all settings</button></section>'),jc=T('<!> <main class="svelte-1ozf5k3"><div class="page-header svelte-1ozf5k3"><h1 class="svelte-1ozf5k3">settings</h1> <p class="svelte-1ozf5k3">customize your download experience</p></div> <nav class="settings-nav svelte-1ozf5k3"></nav> <!> <!> <!> <!></main> <!>',1);function Ec(e,t){mt(t,!0);const s=()=>Dt(xs,"$settings",n),[n,i]=Xt();let r=B("video"),a=ye(s);const l=[{id:"video",label:"video"},{id:"audio",label:"audio"},{id:"downloads",label:"downloads"},{id:"advanced",label:"advanced"}],c=["best","4k","1440p","1080p","720p","480p","360p"],d={best:"8k+","4k":"4k","1440p":"1440p","1080p":"1080p","720p":"720p","480p":"480p","360p":"360p"},h=[{value:"h264",label:"h264 + aac"},{value:"av1",label:"av1 + opus"},{value:"vp9",label:"vp9 + opus"}],b=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mkv",label:"mkv"}],u=[{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"opus",label:"opus"},{value:"flac",label:"flac"},{value:"wav",label:"wav"}],v=[{value:"320",label:"320 kbps"},{value:"256",label:"256 kbps"},{value:"192",label:"192 kbps"},{value:"128",label:"128 kbps"}],f=[{value:"classic",label:"classic"},{value:"basic",label:"basic"},{value:"pretty",label:"pretty"},{value:"nerdy",label:"nerdy"}],x=[{value:"ask",label:"ask me"},{value:"video",label:"just video"},{value:"playlist",label:"full playlist"}];let m=ye(()=>{const E=o(a).container||"mp4",$={classic:`Video Title (${o(a).quality}).${E}`,basic:`Video Title.${E}`,pretty:`Video Title - Author (${o(a).quality}, ${o(a).codec}).${E}`,nerdy:`Video_Title_${o(a).quality}_${o(a).codec}_aac.${E}`};return $[o(a).filenameStyle]||$.basic});function k(E,$){xs.setSetting(E,$)}function z(){confirm("Reset all settings to defaults?")&&(xs.reset(),he("Settings reset!","success"))}var R=jc(),ve=ze(R);kn(ve);var Y=_(ve,2),re=_(g(Y),2);Ge(re,21,()=>l,tt,(E,$)=>{var F=gc();let U;F.__click=()=>p(r,o($).id,!0);var ae=g(F),Se=g(ae);W(()=>{U=ke(F,1,"settings-nav-item svelte-1ozf5k3",null,U,{active:o(r)===o($).id}),A(Se,o($).label)}),y(E,F)});var xe=_(re,2);{var be=E=>{var $=yc(),F=_(g($),2),U=_(g(F),2);Ge(U,21,()=>c,tt,(te,H)=>{var X=mc();let fe;X.__click=()=>k("quality",o(H));var P=g(X);W(()=>{fe=ke(X,1,"quality-option svelte-1ozf5k3",null,fe,{active:o(a).quality===o(H)}),A(P,d[o(H)])}),y(te,X)});var ae=_(F,2),Se=_(g(ae),2);Ge(Se,21,()=>h,tt,(te,H)=>{var X=_c();let fe;X.__click=()=>k("codec",o(H).value);var P=g(X);W(()=>{fe=ke(X,1,"segment svelte-1ozf5k3",null,fe,{active:o(a).codec===o(H).value}),A(P,o(H).label)}),y(te,X)});var K=_(ae,2),_e=_(g(K),2);Ge(_e,21,()=>b,tt,(te,H)=>{var X=wc();let fe;X.__click=()=>k("container",o(H).value);var P=g(X);W(()=>{fe=ke(X,1,"segment svelte-1ozf5k3",null,fe,{active:o(a).container===o(H).value}),A(P,o(H).label)}),y(te,X)}),y(E,$)};D(xe,E=>{o(r)==="video"&&E(be)})}var me=_(xe,2);{var De=E=>{var $=xc(),F=_(g($),2),U=_(g(F),2);Ge(U,21,()=>u,tt,(K,_e)=>{var te=bc();let H;te.__click=()=>k("audioFormat",o(_e).value);var X=g(te);W(()=>{H=ke(te,1,"segment svelte-1ozf5k3",null,H,{active:o(a).audioFormat===o(_e).value}),A(X,o(_e).label)}),y(K,te)});var ae=_(F,2),Se=_(g(ae),2);Ge(Se,21,()=>v,tt,(K,_e)=>{var te=kc();let H;te.__click=()=>k("audioBitrate",o(_e).value);var X=g(te);W(()=>{H=ke(te,1,"segment svelte-1ozf5k3",null,H,{active:o(a).audioBitrate===o(_e).value}),A(X,o(_e).label)}),y(K,te)}),y(E,$)};D(me,E=>{o(r)==="audio"&&E(De)})}var Ye=_(me,2);{var Qe=E=>{var $=zc(),F=_(g($),2),U=_(g(F),2);Ge(U,21,()=>f,tt,(I,Z)=>{var ee=Sc();let le;ee.__click=()=>k("filenameStyle",o(Z).value);var we=g(ee);W(()=>{le=ke(ee,1,"segment svelte-1ozf5k3",null,le,{active:o(a).filenameStyle===o(Z).value}),A(we,o(Z).label)}),y(I,ee)});var ae=_(U,2),Se=g(ae),K=g(Se),_e=_(F,2),te=g(_e),H=_(g(te),2);let X;H.__click=()=>k("twitterGifs",!(!o(a).twitterGifs||o(a).twitterGifs===void 0));var fe=_(_e,2),P=_(g(fe),2);Ge(P,21,()=>x,tt,(I,Z)=>{var ee=Tc();let le;ee.__click=()=>k("playlistPreference",o(Z).value==="ask"?null:o(Z).value);var we=g(ee);W(()=>{le=ke(ee,1,"segment svelte-1ozf5k3",null,le,{active:(o(a).playlistPreference===null?"ask":o(a).playlistPreference)===o(Z).value}),A(we,o(Z).label)}),y(I,ee)}),W(()=>{A(K,o(m)),X=ke(H,1,"toggle svelte-1ozf5k3",null,X,{active:o(a).twitterGifs!==!1})}),y(E,$)};D(Ye,E=>{o(r)==="downloads"&&E(Qe)})}var V=_(Ye,2);{var G=E=>{var $=Cc(),F=_(g($),2),U=g(F),ae=_(g(U),2);let Se;ae.__click=()=>k("h265",!o(a).h265);var K=_(F,2),_e=g(K),te=_(g(_e),2);let H;te.__click=()=>k("metadata",o(a).metadata===!1);var X=_(K,4);X.__click=z,W(()=>{Se=ke(ae,1,"toggle svelte-1ozf5k3",null,Se,{active:o(a).h265}),H=ke(te,1,"toggle svelte-1ozf5k3",null,H,{active:o(a).metadata!==!1})}),y(E,$)};D(V,E=>{o(r)==="advanced"&&E(G)})}var de=_(Y,2);Vn(de),y(e,R),_t(),i()}Kt(["click"]);var Pc=T('<span class="progress-label svelte-1untuf7"> </span>'),qc=T('<div class="progress-wrapper svelte-1untuf7"><!> <div class="progress-track svelte-1untuf7" role="progressbar"><div class="progress-fill svelte-1untuf7"></div></div></div>');function lo(e,t){let s=vr(t,"percent",3,0),n=vr(t,"label",3,""),i=ye(()=>Math.min(100,Math.max(0,s())));var r=qc(),a=g(r);{var l=h=>{var b=Pc(),u=g(b);W(()=>A(u,n())),y(h,b)};D(a,h=>{n()&&h(l)})}var c=_(a,2);cs(c,"aria-valuemin",0),cs(c,"aria-valuemax",100);var d=g(c);W(()=>{cs(c,"aria-valuenow",o(i)),yn(d,`width: ${o(i)??""}%`)}),y(e,r)}const Qn=50*1024*1024;async function co(e,t){const s=Ee(),n=Math.ceil(e.size/Qn),i=await fetch(`${s}/api/upload/init`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:e.name,fileSize:e.size,totalChunks:n})});if(!i.ok){let l="Failed to initialize upload";try{l=(await i.json()).error||l}catch{l=await i.text().catch(()=>l)}throw new Error(l)}const{uploadId:r}=await i.json();for(let l=0;l<n;l++){const c=l*Qn,d=Math.min(c+Qn,e.size),h=e.slice(c,d),b=new FormData;b.append("chunk",h);const u=await fetch(`${s}/api/upload/chunk/${r}/${l}`,{method:"POST",body:b});if(!u.ok){let f=`Failed to upload chunk ${l+1}`;try{f=(await u.json()).error||f}catch{f=await u.text().catch(()=>f)}throw new Error(f)}const v=(l+1)/n*100;t(v)}const a=await fetch(`${s}/api/upload/complete/${r}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!a.ok){let l="Failed to complete upload";try{l=(await a.json()).error||l}catch{l=await a.text().catch(()=>l)}throw new Error(l)}return await a.json()}var Mc=T('<button type="button"><svg class="drop-zone-icon svelte-17hyuhr" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-17hyuhr">drop a file here or click to browse</p> <p class="drop-zone-hint svelte-17hyuhr">supports video and audio files (max 8GB)</p> <input type="file" accept="video/*,audio/*" style="display: none;"/></button>'),$c=Be('<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',1),Ic=Be('<polygon points="5 3 19 12 5 21 5 3"></polygon>'),Bc=T("<button> </button>"),Dc=T('<div class="file-info svelte-17hyuhr"><div class="file-header svelte-17hyuhr"><div class="file-icon svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><!></svg></div> <div class="file-details svelte-17hyuhr"><div class="file-name svelte-17hyuhr"> </div> <div class="file-size svelte-17hyuhr"> </div></div> <button class="file-remove svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="convert-options svelte-17hyuhr"><div class="option-label svelte-17hyuhr">convert to</div> <div class="segmented-control svelte-17hyuhr"></div></div> <button class="convert-btn svelte-17hyuhr"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-17hyuhr"><polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line></svg> </button></div>'),Rc=T('<div class="progress-container svelte-17hyuhr"><!></div>'),Ac=T("<div> </div>"),Nc=T('<!> <main class="svelte-17hyuhr"><div class="page-header svelte-17hyuhr"><h1 class="svelte-17hyuhr">convert</h1> <p class="svelte-17hyuhr">change video and audio file formats</p></div> <div class="converter svelte-17hyuhr"><!> <!> <!></div></main> <!>',1);function Oc(e,t){mt(t,!0);let s=B(null),n=B("mp4"),i=B(!1),r=B(0),a=B(""),l=B(null),c=B(""),d=B(!1),h;const b=[{value:"mp4",label:"mp4"},{value:"webm",label:"webm"},{value:"mp3",label:"mp3"},{value:"m4a",label:"m4a"},{value:"wav",label:"wav"}];function u(V){return V.type.startsWith("audio/")||["mp3","m4a","wav","flac","ogg","opus"].some(G=>V.name.toLowerCase().endsWith("."+G))}function v(V){if(!V)return;const G=8*1024*1024*1024;if(V.size>G){p(l,"error"),p(c,"File too large. Maximum size is 8GB.");return}p(s,V,!0),p(l,null),p(c,"")}function f(){p(s,null),p(r,0),p(a,""),p(l,null),p(c,""),h&&(h.value="")}async function x(V){let G="";try{G=await(await V.blob()).text()}catch{G=await V.text().catch(()=>"")}try{return JSON.parse(G).error||`Request failed with status ${V.status}`}catch{return G||`Request failed with status ${V.status}`}}async function m(){if(!o(s)||o(i))return;p(i,!0),p(r,0),p(a,"Uploading..."),p(l,null),p(c,"");const V=o(s).size>90*1024*1024;let G=null;const de=Date.now().toString()+Math.random().toString(36).substr(2,9);ge.add({id:de,title:`${o(s).name} â .${o(n)}`,type:"convert",stage:"uploading",status:"uploading...",progress:0,startTime:Date.now()});try{G=Cr();let E;if(V){const{filePath:ae,fileName:Se}=await co(o(s),H=>{p(r,H,!0),p(a,"Uploading..."),ge.updateItem(de,{progress:H,status:"uploading..."})});p(r,0),p(a,"Converting..."),ge.updateItem(de,{stage:"converting",status:"converting...",progress:0});const K=await fetch(`${Ee()}/api/convert-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:ae,fileName:Se,format:o(n)})});if(!K.ok)throw new Error(await x(K));const{jobId:_e}=await K.json();let te=0;for(;;){if(te>=300)throw new Error("Conversion timed out after 10 minutes");te++,await new Promise(I=>setTimeout(I,2e3));const H=new AbortController,X=setTimeout(()=>H.abort(),1e4);let fe;try{fe=await fetch(`${Ee()}/api/job/${_e}/status`,{signal:H.signal})}finally{clearTimeout(X)}if(!fe.ok)throw fe.status===404?new Error("Job not found or expired"):new Error("Failed to check job status");const P=await fe.json();if(P.status==="error")throw new Error(P.error||"Conversion failed");if(p(r,P.progress||0,!0),p(a,P.message||"processing...",!0),ge.updateItem(de,{progress:P.progress||0,status:P.message||"converting..."}),P.status==="complete")break}E=await fetch(`${Ee()}/api/job/${_e}/download`)}else E=await new Promise((ae,Se)=>{const K=new XMLHttpRequest;K.open("POST",`${Ee()}/api/convert`),K.upload.onprogress=te=>{if(te.lengthComputable){const H=Math.round(te.loaded/te.total*90);p(r,H,!0),p(a,`uploading... ${H}%`),ge.updateItem(de,{progress:H,status:`uploading... ${H}%`})}},K.onload=()=>{p(r,95),p(a,"processing..."),ge.updateItem(de,{stage:"converting",status:"converting...",progress:95}),ae(new Response(K.response,{status:K.status,statusText:K.statusText,headers:{"Content-Disposition":K.getResponseHeader("Content-Disposition")||""}}))},K.onerror=()=>Se(new Error("Network error during upload")),K.responseType="blob";const _e=new FormData;_e.append("file",o(s)),_e.append("format",o(n)),K.send(_e)});if(!E.ok)throw new Error(await x(E));p(r,100),p(a,"complete!");const $=E.headers.get("Content-Disposition");let F=o(s).name.replace(/\.[^.]+$/,"")+"."+o(n);if($){const ae=$.match(/filename="?([^"]+)"?/);ae&&(F=ae[1])}const U=await E.blob();so(U,F),p(l,"success"),p(c,"conversion complete! download started."),ge.updateItem(de,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>ge.remove(de),5e3)}catch(E){p(l,"error"),p(c,E.message||"conversion failed",!0),p(r,0),p(a,""),ge.updateItem(de,{stage:"error",status:E.message||"conversion failed"})}finally{p(i,!1),G&&jr(G)}}var k=Nc(),z=ze(k);kn(z);var R=_(z,2),ve=_(g(R),2),Y=g(ve);{var re=V=>{var G=Mc();let de;G.__click=()=>h==null?void 0:h.click();var E=_(g(G),6);E.__change=$=>{var F;v((F=$.target.files)==null?void 0:F[0]),$.target.value=""},bn(E,$=>h=$,()=>h),W(()=>de=ke(G,1,"drop-zone svelte-17hyuhr",null,de,{dragover:o(d)})),Tt("dragover",G,$=>{$.preventDefault(),p(d,!0)}),Tt("dragleave",G,$=>{$.preventDefault(),p(d,!1)}),Tt("drop",G,$=>{var F,U;$.preventDefault(),p(d,!1),v((U=(F=$.dataTransfer)==null?void 0:F.files)==null?void 0:U[0])}),y(V,G)},xe=V=>{var G=Dc(),de=g(G),E=g(de),$=g(E),F=g($);{var U=ee=>{var le=$c();y(ee,le)},ae=ee=>{var le=Ic();y(ee,le)};D(F,ee=>{u(o(s))?ee(U):ee(ae,!1)})}var Se=_(E,2),K=g(Se),_e=g(K),te=_(K,2),H=g(te),X=_(Se,2);X.__click=f;var fe=_(de,2),P=_(g(fe),2);Ge(P,21,()=>b,tt,(ee,le)=>{var we=Bc();let Pe;we.__click=()=>p(n,o(le).value,!0);var He=g(we);W(()=>{Pe=ke(we,1,"segment svelte-17hyuhr",null,Pe,{active:o(n)===o(le).value}),A(He,o(le).label)}),y(ee,we)});var I=_(fe,2);I.__click=m;var Z=_(g(I));W(ee=>{cs(K,"title",o(s).name),A(_e,o(s).name),A(H,ee),I.disabled=o(i),A(Z,` ${o(i)?"converting...":"convert"}`)},[()=>ao(o(s).size)]),y(V,G)};D(Y,V=>{o(s)?V(xe,!1):V(re)})}var be=_(Y,2);{var me=V=>{var G=Rc(),de=g(G);lo(de,{get percent(){return o(r)},get label(){return o(a)}}),y(V,G)};D(be,V=>{o(i)&&V(me)})}var De=_(be,2);{var Ye=V=>{var G=Ac(),de=g(G);W(()=>{ke(G,1,`status ${o(l)??""}`,"svelte-17hyuhr"),A(de,o(c))}),y(V,G)};D(De,V=>{o(l)&&V(Ye)})}var Qe=_(R,2);Vn(Qe),y(e,k),_t()}Kt(["click","change"]);Kt(["click","keydown"]);var Fc=T('<button type="button"><svg class="drop-zone-icon svelte-15o2uhu" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg> <p class="drop-zone-text svelte-15o2uhu">drop a video here or click to browse</p> <p class="drop-zone-hint svelte-15o2uhu">supports mp4, webm, mov, mkv, avi (max 8GB)</p> <input type="file" accept="video/*" style="display: none;"/></button>'),Lc=T('<div class="file-info svelte-15o2uhu"><div class="file-header svelte-15o2uhu"><div class="file-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line></svg></div> <div class="file-details svelte-15o2uhu"><div class="file-name svelte-15o2uhu"> </div> <div class="file-size svelte-15o2uhu"> </div></div> <button class="file-remove svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button></div> <div class="file-meta svelte-15o2uhu"><span> </span> <span> </span></div></div>'),Uc=T('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),Vc=T('<button><div class="size-option-value svelte-15o2uhu"> </div> <div class="size-option-label svelte-15o2uhu"> </div></button>'),Hc=T('<div class="progress-container svelte-15o2uhu"><div class="progress-header svelte-15o2uhu"><span class="progress-status svelte-15o2uhu"> </span> <span class="progress-percent svelte-15o2uhu"> </span></div> <!> <div class="progress-details svelte-15o2uhu"> </div></div>'),Jc=T('<div class="result-container svelte-15o2uhu"><div class="result-header svelte-15o2uhu"><div class="result-icon svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="20 6 9 17 4 12"></polyline></svg></div> <div class="result-title svelte-15o2uhu">compression complete!</div></div> <div class="result-stats svelte-15o2uhu"><div class="result-stat svelte-15o2uhu"><div class="result-stat-value svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">original</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value arrow svelte-15o2uhu">-></div> <div class="result-stat-label svelte-15o2uhu"></div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">compressed</div></div> <div class="result-stat svelte-15o2uhu"><div class="result-stat-value success svelte-15o2uhu"> </div> <div class="result-stat-label svelte-15o2uhu">saved</div></div></div> <button class="result-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg> compress another</button></div>'),Wc=T('<div class="quality-overlay svelte-15o2uhu"><div class="quality-modal svelte-15o2uhu"><div class="quality-modal-title svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg> quality warning</div> <div class="quality-gauge svelte-15o2uhu"><div class="quality-gauge-bg svelte-15o2uhu"></div> <div class="quality-gauge-mask svelte-15o2uhu"></div> <div class="quality-gauge-needle svelte-15o2uhu"></div> <div class="quality-gauge-center svelte-15o2uhu"></div> <div class="quality-gauge-value svelte-15o2uhu"><span> </span> <span class="quality-gauge-unit svelte-15o2uhu">kbps</span></div></div> <div class="quality-modal-message svelte-15o2uhu">Your video is <strong class="svelte-15o2uhu"> </strong> long. At this size, the estimated bitrate is very low and the output <strong class="svelte-15o2uhu">may look blocky or blurry</strong>. <br/><br/> For better results, try a <strong class="svelte-15o2uhu">shorter clip</strong> or a <strong class="svelte-15o2uhu">larger target size</strong>.</div> <div class="quality-modal-buttons svelte-15o2uhu"><button class="quality-modal-btn cancel svelte-15o2uhu">cancel</button> <button class="quality-modal-btn proceed svelte-15o2uhu">compress anyway</button></div></div></div>'),Gc=T('<!> <main class="svelte-15o2uhu"><div class="page-header svelte-15o2uhu"><h1 class="svelte-15o2uhu">compress</h1> <p class="svelte-15o2uhu">shrink videos for discord, email, or anywhere!</p></div> <div class="compress-container svelte-15o2uhu"><!> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">target size</div> <div class="size-description svelte-15o2uhu">choose a size limit or enter a custom size</div> <div class="size-grid svelte-15o2uhu"></div> <div class="custom-size-row svelte-15o2uhu"><input type="number" class="custom-size-input svelte-15o2uhu" placeholder="custom" min="1" max="4096"/> <span class="custom-size-suffix svelte-15o2uhu">MB</span></div> <div class="estimate svelte-15o2uhu"><span class="estimate-label svelte-15o2uhu">estimated quality</span> <span> </span></div></div> <div class="size-section svelte-15o2uhu"><div class="size-label svelte-15o2uhu">encoding preset</div> <div class="size-description svelte-15o2uhu">quality = better compression, slower | fast = quicker encoding</div> <div class="preset-grid svelte-15o2uhu"></div> <label class="checkbox-row svelte-15o2uhu"><input type="checkbox" class="svelte-15o2uhu"/> <span class="svelte-15o2uhu">downscale for better quality (reduces blockiness)</span></label></div> <button class="compress-btn svelte-15o2uhu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-15o2uhu"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg> </button> <!> <!></div></main> <!> <!>',1);function Yc(e,t){mt(t,!0);let s=B(null),n=B(0),i=B(0),r=B(0),a=B(50),l=B(47),c=B(""),d=B(!1),h=B("balanced"),b=B(!1),u=B(!1),v=B(0),f=B(""),x=B(""),m=B(!1),k=B(""),z=B(""),R=B(""),ve=B(!1),Y=B(!1),re;const xe=[{size:8,actual:7.5,label:"MB free"},{size:10,actual:9.5,label:"MB"},{size:50,actual:47,label:"MB basic"},{size:100,actual:95,label:"MB"},{size:500,actual:475,label:"MB nitro"}],be=[{id:"fast",label:"fast",sublabel:"quick encode"},{id:"balanced",label:"balanced",sublabel:"recommended"},{id:"quality",label:"quality",sublabel:"best results"}];let me=ye(()=>{if(!o(s)||!o(n))return 0;const q=o(l)*1024*1024,M=128*1024,S=q-M/8*o(n);return Math.floor(S*8/o(n)/1024)}),De=ye(()=>!o(s)||!o(n)?"select a file to see estimate":o(s).size/(1024*1024)<=o(l)?`already under ${o(a)}MB!`:o(me)<500?`~${o(me)} kbps video - very low quality (may be blocky)`:o(me)<1e3?`~${o(me)} kbps video - low quality`:o(me)<2500?`~${o(me)} kbps video - medium quality`:o(me)<5e3?`~${o(me)} kbps video - good quality`:`~${o(me)} kbps video - excellent quality`),Ye=ye(()=>o(s)&&o(n)&&o(me)<500&&o(s).size/(1024*1024)>o(l)),Qe=ye(()=>-90+Math.min(o(me),2e3)/2e3*180),V=ye(()=>{if(!o(n))return"--:--";const q=Math.floor(o(n)/60),M=Math.floor(o(n)%60);return`${q}:${M.toString().padStart(2,"0")}`}),G=ye(()=>!o(i)||!o(r)?"unknown":`${o(i)}x${o(r)}`);function de(q){return new Promise(M=>{const S=document.createElement("video");S.preload="metadata",S.onloadedmetadata=()=>{URL.revokeObjectURL(S.src),M({duration:S.duration,width:S.videoWidth,height:S.videoHeight})},S.onerror=()=>{M({duration:0,width:0,height:0})},S.src=URL.createObjectURL(q)})}async function E(q){if(!q)return;if(!q.type.startsWith("video/")){he("Please select a video file","error");return}const M=8*1024*1024*1024;if(q.size>M){he("File too large. Maximum size is 8GB.","error");return}p(s,q,!0),p(m,!1);const S=await de(q);p(n,S.duration,!0),p(i,S.width,!0),p(r,S.height,!0)}function $(){p(s,null),p(n,0),p(i,0),p(r,0),p(v,0),p(f,""),p(x,""),p(m,!1),p(c,""),p(d,!1),re&&(re.value="")}function F(q){p(a,q.size,!0),p(l,q.actual,!0),p(d,!1),p(c,"")}function U(q){p(c,q,!0);const M=parseInt(q);M&&M>0&&(p(a,M,!0),p(l,M*.95),p(d,!0))}function ae(){(!o(c)||parseInt(o(c))<=0)&&o(d)&&(p(a,50),p(l,47),p(d,!1))}function Se(){if(!o(s))return;if(o(s).size/(1024*1024)<=o(l)){he(`File is already under ${o(a)}MB!`,"success");return}o(me)<500?p(Y,!0):K()}async function K(){if(!o(s)||o(u))return;if(p(Y,!1),o(s).size/(1024*1024)<=o(l)){he(`File is already under ${o(a)}MB!`,"success");return}p(u,!0),p(v,0),p(f,"uploading..."),p(x,"sending file to server..."),p(m,!1);const M=Date.now().toString()+Math.random().toString(36).substr(2,9),S=M;ge.add({id:S,title:`${o(s).name} â ${o(a)}MB`,type:"compress",stage:"uploading",status:"uploading...",progress:0,startTime:Date.now()});const Q=o(s).size>90*1024*1024;let N=null,O=null;try{N=Cr(),O=dr(M,{onMessage:je=>{je.stage==="compressing"&&(p(f,"compressing..."),je.progress!==void 0&&p(v,je.progress,!0),je.message&&p(x,je.message,!0),ge.updateItem(S,{stage:"compressing",progress:je.progress||0,status:je.message||"compressing..."}))},onError:()=>{}});let L;if(Q){p(f,"uploading..."),p(x,"large file detected, uploading in chunks...");const je=await co(o(s),ot=>{p(v,ot,!0),p(x,"uploading chunks..."),ge.updateItem(S,{progress:ot,status:"uploading..."})}),{filePath:Lt,fileName:Ps}=je;p(v,0),p(f,"compressing..."),p(x,"starting compression..."),ge.updateItem(S,{stage:"compressing",status:"compressing...",progress:0});const Ks=await fetch(`${Ee()}/api/compress-chunked`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:Lt,fileName:Ps,targetSize:o(l).toString(),duration:o(n).toString(),progressId:M,preset:o(h),downscale:o(b)})});if(!Ks.ok){let ot="Failed to start compression";try{ot=(await Ks.json()).error||ot}catch{}throw new Error(ot)}const{jobId:xn}=await Ks.json(),qs=Date.now(),Sn=1800*1e3;let Hn=0;for(;Date.now()-qs<=Sn;){await new Promise(ot=>setTimeout(ot,2e3));try{const ot=new AbortController,Pr=setTimeout(()=>ot.abort(),1e4);let Tn;try{Tn=await fetch(`${Ee()}/api/job/${xn}/status`,{signal:ot.signal})}finally{clearTimeout(Pr)}if(!Tn.ok)throw new Error(`Server returned ${Tn.status}`);const Ut=await Tn.json();if(Hn=0,Ut.status==="error")throw new Error(Ut.error||"Compression failed");if(Ut.progress!==void 0&&p(v,Ut.progress,!0),Ut.message&&p(x,Ut.message,!0),ge.updateItem(S,{progress:Ut.progress||0,status:Ut.message||"compressing..."}),Ut.status==="complete")break}catch(ot){if(Hn++,Hn>=3)throw new Error(`Failed to check job status after 3 attempts: ${ot.message}`)}}if(Date.now()-qs>Sn)throw new Error("Job timed out after 30 minutes.");L=await fetch(`${Ee()}/api/job/${xn}/download`)}else{const je=new FormData;je.append("file",o(s)),je.append("targetSize",o(l).toString()),je.append("duration",o(n).toString()),je.append("progressId",M),je.append("preset",o(h)),je.append("downscale",o(b)),L=await fetch(`${Ee()}/api/compress`,{method:"POST",body:je})}if(O&&O.close(),!L.ok){let je="Compression failed";try{je=(await L.json()).error||je}catch{}throw new Error(je)}const ne=await L.blob(),pe=ne.size,Me=(o(s).size/(1024*1024)).toFixed(1),Te=(pe/(1024*1024)).toFixed(1),qe=Math.round((1-pe/o(s).size)*100);p(k,`${Me} MB`),p(z,`${Te} MB`),p(R,`${qe}%`),p(m,!0);const Re=o(s).name.lastIndexOf("."),yt=Re>0?o(s).name.slice(0,Re):o(s).name;so(ne,`${yt}_compressed.mp4`),he("Compression complete!","success"),ge.updateItem(S,{stage:"complete",status:"complete!",progress:100}),setTimeout(()=>ge.remove(S),5e3)}catch(L){he(L.message||"Compression failed","error"),ge.updateItem(S,{stage:"error",status:L.message||"compression failed"}),O&&O.close()}finally{p(u,!1),p(v,0),p(f,""),p(x,""),N&&jr(N)}}var _e=Gc(),te=ze(_e);kn(te);var H=_(te,2),X=_(g(H),2),fe=g(X);{var P=q=>{var M=Fc();let S;M.__click=()=>re==null?void 0:re.click();var Q=_(g(M),6);Q.__change=N=>{var O;E((O=N.target.files)==null?void 0:O[0]),N.target.value=""},bn(Q,N=>re=N,()=>re),W(()=>S=ke(M,1,"drop-zone svelte-15o2uhu",null,S,{dragover:o(ve)})),Tt("dragover",M,N=>{N.preventDefault(),p(ve,!0)}),Tt("dragleave",M,N=>{N.preventDefault(),p(ve,!1)}),Tt("drop",M,N=>{var O,L;N.preventDefault(),p(ve,!1),E((L=(O=N.dataTransfer)==null?void 0:O.files)==null?void 0:L[0])}),y(q,M)},I=q=>{var M=Lc(),S=g(M),Q=_(g(S),2),N=g(Q),O=g(N),L=_(N,2),ne=g(L),pe=_(Q,2);pe.__click=$;var Me=_(S,2),Te=g(Me),qe=g(Te),Re=_(Te,2),yt=g(Re);W(je=>{cs(N,"title",o(s).name),A(O,o(s).name),A(ne,je),A(qe,`duration: ${(o(n)?o(V):"unknown")??""}`),A(yt,`resolution: ${o(G)??""}`)},[()=>ao(o(s).size)]),y(q,M)};D(fe,q=>{o(s)?q(I,!1):q(P)})}var Z=_(fe,2),ee=_(g(Z),4);Ge(ee,21,()=>xe,tt,(q,M)=>{var S=Uc();let Q;S.__click=()=>F(o(M));var N=g(S),O=g(N),L=_(N,2),ne=g(L);W(()=>{Q=ke(S,1,"size-option svelte-15o2uhu",null,Q,{active:!o(d)&&o(a)===o(M).size}),A(O,o(M).size),A(ne,o(M).label)}),y(q,S)});var le=_(ee,2),we=g(le);we.__input=q=>U(q.target.value);var Pe=_(le,2),He=_(g(Pe),2);let Je;var rt=g(He),Ke=_(Z,2),it=_(g(Ke),4);Ge(it,21,()=>be,tt,(q,M)=>{var S=Vc();let Q;S.__click=()=>p(h,o(M).id,!0);var N=g(S),O=g(N),L=_(N,2),ne=g(L);W(()=>{Q=ke(S,1,"size-option svelte-15o2uhu",null,Q,{active:o(h)===o(M).id}),A(O,o(M).label),A(ne,o(M).sublabel)}),y(q,S)});var Nt=_(it,2),vs=g(Nt),Ot=_(Ke,2);Ot.__click=Se;var wt=_(g(Ot)),Ft=_(Ot,2);{var Ys=q=>{var M=Hc(),S=g(M),Q=g(S),N=g(Q),O=_(Q,2),L=g(O),ne=_(S,2);lo(ne,{get percent(){return o(v)}});var pe=_(ne,2),Me=g(pe);W(Te=>{A(N,o(f)),A(L,`${Te??""}%`),A(Me,o(x))},[()=>Math.round(o(v))]),y(q,M)};D(Ft,q=>{o(u)&&q(Ys)})}var Qs=_(Ft,2);{var C=q=>{var M=Jc(),S=_(g(M),2),Q=g(S),N=g(Q),O=g(N),L=_(Q,4),ne=g(L),pe=g(ne),Me=_(L,2),Te=g(Me),qe=g(Te),Re=_(S,2);Re.__click=$,W(()=>{A(O,o(k)),A(pe,o(z)),A(qe,o(R))}),y(q,M)};D(Qs,q=>{o(m)&&q(C)})}var j=_(H,2);{var J=q=>{var M=Wc();M.__click=je=>{je.target===je.currentTarget&&p(Y,!1)};var S=g(M),Q=_(g(S),2),N=_(g(Q),4),O=_(N,4),L=g(O),ne=g(L),pe=_(Q,2),Me=_(g(pe)),Te=g(Me),qe=_(pe,2),Re=g(qe);Re.__click=()=>p(Y,!1);var yt=_(Re,2);yt.__click=K,W(()=>{yn(N,`transform: translateX(-50%) rotate(${o(Qe)??""}deg);`),A(ne,o(me)),A(Te,o(V))}),y(q,M)};D(j,q=>{o(Y)&&q(J)})}var ue=_(j,2);Vn(ue),W(()=>{ja(we,o(c)),Je=ke(He,1,"estimate-value svelte-15o2uhu",null,Je,{"estimate-warning":o(Ye)}),A(rt,o(De)),Ot.disabled=!o(s)||o(u),A(wt,` ${o(u)?"compressing...":"compress video"}`)}),Tt("blur",we,ae),Xi(vs,()=>o(b),q=>p(b,q)),y(e,_e),_t()}Kt(["click","change","input"]);var Qc=T(`<!> <main class="svelte-13tj7i"><div class="page-header svelte-13tj7i"><h1 class="svelte-13tj7i">privacy policy</h1> <p class="svelte-13tj7i">no legal jargon, just the truth</p></div> <div class="tldr-box svelte-13tj7i"><h3 class="svelte-13tj7i">tl;dr</h3> <p class="svelte-13tj7i">yoink doesn't collect anything. no tracking, no cookies, no analytics. your files only exist in RAM and get wiped automatically.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">who runs this</h2> <p class="svelte-13tj7i">just me, one person. i made yoink because i wanted a simple tool that does what it says without being weird about your data. i was inspired by <a href="https://cobalt.tools" target="_blank" rel="noopener" class="svelte-13tj7i">cobalt.tools</a> and <a href="https://vert.sh" target="_blank" rel="noopener" class="svelte-13tj7i">vert.sh</a>, and wanted to combine the best parts into one site.</p> <p class="svelte-13tj7i">im not a company, i have no investors, and i have no reason to collect your data.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">your files</h2> <p class="svelte-13tj7i">everything runs in RAM. files never touch a hard drive, they live in a tmpfs mount that only exists in memory. once your download or conversion is done, the file gets deleted immediately. if something goes wrong and it doesn't get cleaned up, there's a hard limit of 20 minutes before it's wiped no matter what.</p> <p class="svelte-13tj7i">we don't log what you download, what you convert, what you compress, or any filenames or URLs. none of that gets saved anywhere.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">what we collect</h2> <p class="svelte-13tj7i">nothing. literally zero.</p> <ul class="svelte-13tj7i"><li class="svelte-13tj7i"><strong class="svelte-13tj7i">no analytics</strong> - no tracking scripts, no usage stats, nothing</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no cookies</strong> - we don't set a single cookie</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no IP logging</strong> - your IP isn't stored or logged</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no content logging</strong> - URLs, filenames, and what you do here are not recorded</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no accounts</strong> - there's nothing to sign up for, no emails collected</li> <li class="svelte-13tj7i"><strong class="svelte-13tj7i">no third party stuff</strong> - no google analytics, no facebook pixel, no ad networks</li></ul></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">encryption</h2> <p class="svelte-13tj7i">everything goes through HTTPS, so your connection to yoink is encrypted. nobody between you and the server can see what you're doing.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">open source</h2> <p class="svelte-13tj7i">the whole thing is on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>. you can read every line of code yourself if you want to verify any of this. if you find something off, please tell me.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">contact</h2> <p class="svelte-13tj7i">questions, concerns, or just want to say hi, reach me at <a href="https://coah80.com" target="_blank" rel="noopener" class="svelte-13tj7i">coah80.com</a> or open an issue on <a href="https://github.com/coah80/yoink" target="_blank" rel="noopener" class="svelte-13tj7i">github</a>.</p></div> <div class="content-card svelte-13tj7i"><h2 class="svelte-13tj7i">changes</h2> <p class="svelte-13tj7i">if this policy changes, it gets updated here. no sneaky edits. last updated: <strong class="svelte-13tj7i">february 2026</strong>.</p></div></main> <!>`,1);function Kc(e){var t=Qc(),s=ze(t);kn(s);var n=_(s,4);Vn(n),y(e,t)}var Xc=T('<div class="spinner-wrap svelte-121vd2i"><!></div> <h1 class="svelte-121vd2i">downloading...</h1> <p class="svelte-121vd2i">your download should start automatically</p>',1),Zc=T('<h1 class="success svelte-121vd2i">done</h1> <p class="svelte-121vd2i">download started successfully</p>',1),eu=T('<h1 class="error svelte-121vd2i">download failed</h1> <p class="svelte-121vd2i">this file is no longer available</p>',1),tu=T('<main class="svelte-121vd2i"><div class="download-container svelte-121vd2i"><!> <div> </div></div></main>');function su(e,t){mt(t,!0);const s=()=>Dt(Ra,"$query",n),[n,i]=Xt();let r=B("loading"),a=B("preparing download..."),l=ye(()=>s().token||"");Ln(()=>{const m=window.location.pathname.replace("/download","").replace(/^\//,""),k=o(l)||m;if(!k){p(r,"error"),p(a,"no download token provided");return}const z=`${Ee()}/api/bot/download/${k}`;p(a,"starting download..."),fetch(z,{method:"HEAD"}).then(R=>{if(R.ok)p(a,"download started"),window.location.href=z,setTimeout(()=>{p(r,"success"),p(a,"you can close this page now")},2e3);else throw new Error("Download not available")}).catch(()=>{p(r,"error"),p(a,"the download link has expired (5 minute limit)")})});var c=tu(),d=g(c),h=g(d);{var b=m=>{var k=Xc(),z=ze(k),R=g(z);oo(R),y(m,k)},u=m=>{var k=Ae(),z=ze(k);{var R=Y=>{var re=Zc();y(Y,re)},ve=Y=>{var re=eu();y(Y,re)};D(z,Y=>{o(r)==="success"?Y(R):Y(ve,!1)},!0)}y(m,k)};D(h,m=>{o(r)==="loading"?m(b):m(u,!1)})}var v=_(h,2);let f;var x=g(v);W(()=>{f=ke(v,1,"status svelte-121vd2i",null,f,{error:o(r)==="error",success:o(r)==="success"}),A(x,o(a))}),y(e,c),_t(),i()}var nu=T('<main class="svelte-zxc657"><p>Redirecting...</p></main>');function ru(e,t){mt(t,!1),Ln(()=>{const n=new URLSearchParams(window.location.search),r=(n.get("url")||n.get("text")||"").match(/https?:\/\/[^\s]+/);let a=r?r[0]:"";if(a=a.replace(/[.,!?;:)\]}>]+$/,""),a)try{const l=new URL(a);(l.protocol==="http:"||l.protocol==="https:")&&localStorage.setItem("yoink_shared_url",JSON.stringify({url:a,timestamp:Date.now()}))}catch{}eo("/")}),Pa();var s=nu();y(e,s),_t()}var iu=T(`<!> <main class="svelte-kbj945"><div class="not-found svelte-kbj945"><h1 class="svelte-kbj945">404</h1> <p class="svelte-kbj945">this page doesn't exist</p> <a href="/" class="back-link svelte-kbj945">go back home</a></div></main>`,1);function ou(e){var t=iu(),s=ze(t);kn(s),y(e,t)}var au=T("<!> <!> <!>",1);function lu(e,t){mt(t,!0);const s=()=>Dt(zr,"$path",n),[n,i]=Xt(),r={"/":cc,"/settings":Ec,"/convert":Oc,"/compress":Yc,"/privacy":Kc,"/download":su,"/share":ru};let a=ye(s),l=ye(()=>r[o(a)]||ou);function c(v){const f=v.target.closest("a");if(!f)return;const x=f.getAttribute("href");!x||!x.startsWith("/")||f.target==="_blank"||(v.preventDefault(),eo(x))}Ln(()=>{Ya(),localStorage.removeItem("yoink_trackingId"),localStorage.removeItem("yoink_last_daily_report"),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&(ge.reconnectOnResume(),Qa())})});var d=au();Tt("click",Nn.body,c);var h=ze(d);xa(h,()=>o(l),(v,f)=>{f(v,{})});var b=_(h,2);Bl(b,{});var u=_(b,2);Ua(u),y(e,d),_t(),i()}ma(lu,{target:document.getElementById("app")});
